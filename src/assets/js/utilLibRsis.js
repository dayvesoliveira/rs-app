if (typeof JSizzle == "undefined") {
    JSizzle = {
        _FILE: "000jSizzle.js"
    };
}

var contextPath = "/jretail";
var Message = Message || {parser: function(){} };
var MESSAGES_JRETAIL = [];
var contextResource  = "/resources";
var skinFolder = "/skin/blue";

(function(window) {
    var i, support, Expr, getText, isXML, tokenize, compile, select, outermostContext, sortInput, hasDuplicate, setDocument, document, docElem, documentIsHTML, rbuggyQSA, rbuggyMatches, matches, contains, expando = "sizzle" + 1 * new Date(), preferredDoc = window.document, dirruns = 0, done = 0, classCache = createCache(), tokenCache = createCache(), compilerCache = createCache(), sortOrder = function(a, b) {
        if (a === b) {
            hasDuplicate = true;
        }
        return 0;
    }, MAX_NEGATIVE = 1 << 31, hasOwn = {}.hasOwnProperty, arr = [], pop = arr.pop, push_native = arr.push, push = arr.push, slice = arr.slice, indexOf = function(list, elem) {
        var i = 0, len = list.length;
        for (;i < len; i++) {
            if (list[i] === elem) {
                return i;
            }
        }
        return -1;
    }, booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped", whitespace = "[\\x20\\t\\r\\n\\f]", identifier = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+", attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace + "*([*^$|!~]?=)" + whitespace + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace + "*\\]", pseudos = ":(" + identifier + ")(?:\\((" + "('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" + "((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" + ".*" + ")\\)|)", rwhitespace = new RegExp(whitespace + "+", "g"), rtrim = new RegExp("^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g"), rcomma = new RegExp("^" + whitespace + "*," + whitespace + "*"), rcombinators = new RegExp("^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*"), rattributeQuotes = new RegExp("=" + whitespace + "*([^\\]'\"]*?)" + whitespace + "*\\]", "g"), rpseudo = new RegExp(pseudos), ridentifier = new RegExp("^" + identifier + "$"), matchExpr = {
        ID: new RegExp("^#(" + identifier + ")"),
        CLASS: new RegExp("^\\.(" + identifier + ")"),
        TAG: new RegExp("^(" + identifier + "|[*])"),
        ATTR: new RegExp("^" + attributes),
        PSEUDO: new RegExp("^" + pseudos),
        CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace + "*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace + "*(\\d+)|))" + whitespace + "*\\)|)", "i"),
        bool: new RegExp("^(?:" + booleans + ")$", "i"),
        needsContext: new RegExp("^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i")
    }, rinputs = /^(?:input|select|textarea|button)$/i, rheader = /^h\d$/i, rnative = /^[^{]+\{\s*\[native \w/, rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/, rsibling = /[+~]/, rescape = /'|\\/g, runescape = new RegExp("\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig"), funescape = function(_, escaped, escapedWhitespace) {
        var high = "0x" + escaped - 65536;
        return high !== high || escapedWhitespace ? escaped : high < 0 ? String.fromCharCode(high + 65536) : String.fromCharCode(high >> 10 | 55296, high & 1023 | 56320);
    }, unloadHandler = function() {
        setDocument();
    };
    try {
        push.apply(arr = slice.call(preferredDoc.childNodes), preferredDoc.childNodes);
        arr[preferredDoc.childNodes.length].nodeType;
    } catch (e) {
        push = {
            apply: arr.length ? function(target, els) {
                push_native.apply(target, slice.call(els));
            } : function(target, els) {
                var j = target.length, i = 0;
                while (target[j++] = els[i++]) {}
                target.length = j - 1;
            }
        };
    }
    function Sizzle(selector, context, results, seed) {
        var m, i, elem, nid, match, groups, newSelector, newContext = context && context.ownerDocument, nodeType = context ? context.nodeType : 9;
        results = results || [];
        if (typeof selector !== "string" || !selector || nodeType !== 1 && nodeType !== 9 && nodeType !== 11) {
            return results;
        }
        if (!seed) {
            if ((context ? context.ownerDocument || context : preferredDoc) !== document) {
                setDocument(context);
            }
            context = context || document;
            if (documentIsHTML) {
                if (nodeType !== 11 && (match = rquickExpr.exec(selector))) {
                    if (m = match[1]) {
                        if (nodeType === 9) {
                            if (elem = context.getElementById(m)) {
                                if (elem.id === m) {
                                    results.push(elem);
                                    return results;
                                }
                            } else {
                                return results;
                            }
                        } else {
                            if (newContext && (elem = newContext.getElementById(m)) && contains(context, elem) && elem.id === m) {
                                results.push(elem);
                                return results;
                            }
                        }
                    } else if (match[2]) {
                        push.apply(results, context.getElementsByTagName(selector));
                        return results;
                    } else if ((m = match[3]) && support.getElementsByClassName && context.getElementsByClassName) {
                        push.apply(results, context.getElementsByClassName(m));
                        return results;
                    }
                }
                if (support.qsa && !compilerCache[selector + " "] && (!rbuggyQSA || !rbuggyQSA.test(selector))) {
                    if (nodeType !== 1) {
                        newContext = context;
                        newSelector = selector;
                    } else if (context.nodeName.toLowerCase() !== "object") {
                        if (nid = context.getAttribute("id")) {
                            nid = nid.replace(rescape, "\\$&");
                        } else {
                            context.setAttribute("id", nid = expando);
                        }
                        groups = tokenize(selector);
                        i = groups.length;
                        while (i--) {
                            groups[i] = "[id='" + nid + "'] " + toSelector(groups[i]);
                        }
                        newSelector = groups.join(",");
                        newContext = rsibling.test(selector) && testContext(context.parentNode) || context;
                    }
                    if (newSelector) {
                        try {
                            push.apply(results, newContext.querySelectorAll(newSelector));
                            return results;
                        } catch (qsaError) {} finally {
                            if (nid === expando) {
                                context.removeAttribute("id");
                            }
                        }
                    }
                }
            }
        }
        return select(selector.replace(rtrim, "$1"), context, results, seed);
    }
    function createCache() {
        var keys = [];
        function cache(key, value) {
            if (keys.push(key + " ") > Expr.cacheLength) {
                delete cache[keys.shift()];
            }
            return cache[key + " "] = value;
        }
        return cache;
    }
    function markFunction(fn) {
        fn[expando] = true;
        return fn;
    }
    function assert(fn) {
        var div = document.createElement("div");
        try {
            return !!fn(div);
        } catch (e) {
            return false;
        } finally {
            if (div.parentNode) {
                div.parentNode.removeChild(div);
            }
            div = null;
        }
    }
    function addHandle(attrs, handler) {
        var arr = attrs.split("|"), i = attrs.length;
        while (i--) {
            Expr.attrHandle[arr[i]] = handler;
        }
    }
    function siblingCheck(a, b) {
        var cur = b && a, diff = cur && a.nodeType === 1 && b.nodeType === 1 && (~b.sourceIndex || MAX_NEGATIVE) - (~a.sourceIndex || MAX_NEGATIVE);
        if (diff) {
            return diff;
        }
        if (cur) {
            while (cur = cur.nextSibling) {
                if (cur === b) {
                    return -1;
                }
            }
        }
        return a ? 1 : -1;
    }
    function createInputPseudo(type) {
        return function(elem) {
            var name = elem.nodeName.toLowerCase();
            return name === "input" && elem.type === type;
        };
    }
    function createButtonPseudo(type) {
        return function(elem) {
            var name = elem.nodeName.toLowerCase();
            return (name === "input" || name === "button") && elem.type === type;
        };
    }
    function createPositionalPseudo(fn) {
        return markFunction(function(argument) {
            argument = +argument;
            return markFunction(function(seed, matches) {
                var j, matchIndexes = fn([], seed.length, argument), i = matchIndexes.length;
                while (i--) {
                    if (seed[j = matchIndexes[i]]) {
                        seed[j] = !(matches[j] = seed[j]);
                    }
                }
            });
        });
    }
    function testContext(context) {
        return context && typeof context.getElementsByTagName !== "undefined" && context;
    }
    support = Sizzle.support = {};
    isXML = Sizzle.isXML = function(elem) {
        var documentElement = elem && (elem.ownerDocument || elem).documentElement;
        return documentElement ? documentElement.nodeName !== "HTML" : false;
    };
    setDocument = Sizzle.setDocument = function(node) {
        var hasCompare, parent, doc = node ? node.ownerDocument || node : preferredDoc;
        if (doc === document || doc.nodeType !== 9 || !doc.documentElement) {
            return document;
        }
        document = doc;
        docElem = document.documentElement;
        documentIsHTML = !isXML(document);
        if (document.documentMode && (parent = document.defaultView) && parent.top !== parent) {
            if (parent.addEventListener) {
                parent.addEventListener("unload", unloadHandler, false);
            } else if (parent.attachEvent) {
                parent.attachEvent("onunload", unloadHandler);
            }
        }
        support.attributes = assert(function(div) {
            div.className = "i";
            return !div.getAttribute("className");
        });
        support.getElementsByTagName = assert(function(div) {
            div.appendChild(document.createComment(""));
            return !div.getElementsByTagName("*").length;
        });
        support.getElementsByClassName = rnative.test(document.getElementsByClassName);
        support.getById = assert(function(div) {
            docElem.appendChild(div).id = expando;
            return !document.getElementsByName || !document.getElementsByName(expando).length;
        });
        if (support.getById) {
            Expr.find["ID"] = function(id, context) {
                if (typeof context.getElementById !== "undefined" && documentIsHTML) {
                    var m = context.getElementById(id);
                    return m ? [ m ] : [];
                }
            };
            Expr.filter["ID"] = function(id) {
                var attrId = id.replace(runescape, funescape);
                return function(elem) {
                    return elem.getAttribute("id") === attrId;
                };
            };
        } else {
            delete Expr.find["ID"];
            Expr.filter["ID"] = function(id) {
                var attrId = id.replace(runescape, funescape);
                return function(elem) {
                    var node = typeof elem.getAttributeNode !== "undefined" && elem.getAttributeNode("id");
                    return node && node.value === attrId;
                };
            };
        }
        Expr.find["TAG"] = support.getElementsByTagName ? function(tag, context) {
            if (typeof context.getElementsByTagName !== "undefined") {
                return context.getElementsByTagName(tag);
            } else if (support.qsa) {
                return context.querySelectorAll(tag);
            }
        } : function(tag, context) {
            var elem, tmp = [], i = 0, results = context.getElementsByTagName(tag);
            if (tag === "*") {
                while (elem = results[i++]) {
                    if (elem.nodeType === 1) {
                        tmp.push(elem);
                    }
                }
                return tmp;
            }
            return results;
        };
        Expr.find["CLASS"] = support.getElementsByClassName && function(className, context) {
            if (typeof context.getElementsByClassName !== "undefined" && documentIsHTML) {
                return context.getElementsByClassName(className);
            }
        };
        rbuggyMatches = [];
        rbuggyQSA = [];
        if (support.qsa = rnative.test(document.querySelectorAll)) {
            assert(function(div) {
                docElem.appendChild(div).innerHTML = "<a id='" + expando + "'></a>" + "<select id='" + expando + "-\r\\' msallowcapture=''>" + "<option selected=''></option></select>";
                if (div.querySelectorAll("[msallowcapture^='']").length) {
                    rbuggyQSA.push("[*^$]=" + whitespace + "*(?:''|\"\")");
                }
                if (!div.querySelectorAll("[selected]").length) {
                    rbuggyQSA.push("\\[" + whitespace + "*(?:value|" + booleans + ")");
                }
                if (!div.querySelectorAll("[id~=" + expando + "-]").length) {
                    rbuggyQSA.push("~=");
                }
                if (!div.querySelectorAll(":checked").length) {
                    rbuggyQSA.push(":checked");
                }
                if (!div.querySelectorAll("a#" + expando + "+*").length) {
                    rbuggyQSA.push(".#.+[+~]");
                }
            });
            assert(function(div) {
                var input = document.createElement("input");
                input.setAttribute("type", "hidden");
                div.appendChild(input).setAttribute("name", "D");
                if (div.querySelectorAll("[name=d]").length) {
                    rbuggyQSA.push("name" + whitespace + "*[*^$|!~]?=");
                }
                if (!div.querySelectorAll(":enabled").length) {
                    rbuggyQSA.push(":enabled", ":disabled");
                }
                div.querySelectorAll("*,:x");
                rbuggyQSA.push(",.*:");
            });
        }
        if (support.matchesSelector = rnative.test(matches = docElem.matches || docElem.webkitMatchesSelector || docElem.mozMatchesSelector || docElem.oMatchesSelector || docElem.msMatchesSelector)) {
            assert(function(div) {
                support.disconnectedMatch = matches.call(div, "div");
                matches.call(div, "[s!='']:x");
                rbuggyMatches.push("!=", pseudos);
            });
        }
        rbuggyQSA = rbuggyQSA.length && new RegExp(rbuggyQSA.join("|"));
        rbuggyMatches = rbuggyMatches.length && new RegExp(rbuggyMatches.join("|"));
        hasCompare = rnative.test(docElem.compareDocumentPosition);
        contains = hasCompare || rnative.test(docElem.contains) ? function(a, b) {
            var adown = a.nodeType === 9 ? a.documentElement : a, bup = b && b.parentNode;
            return a === bup || !!(bup && bup.nodeType === 1 && (adown.contains ? adown.contains(bup) : a.compareDocumentPosition && a.compareDocumentPosition(bup) & 16));
        } : function(a, b) {
            if (b) {
                while (b = b.parentNode) {
                    if (b === a) {
                        return true;
                    }
                }
            }
            return false;
        };
        sortOrder = hasCompare ? function(a, b) {
            if (a === b) {
                hasDuplicate = true;
                return 0;
            }
            var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
            if (compare) {
                return compare;
            }
            compare = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1;
            if (compare & 1 || !support.sortDetached && b.compareDocumentPosition(a) === compare) {
                if (a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a)) {
                    return -1;
                }
                if (b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b)) {
                    return 1;
                }
                return sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0;
            }
            return compare & 4 ? -1 : 1;
        } : function(a, b) {
            if (a === b) {
                hasDuplicate = true;
                return 0;
            }
            var cur, i = 0, aup = a.parentNode, bup = b.parentNode, ap = [ a ], bp = [ b ];
            if (!aup || !bup) {
                return a === document ? -1 : b === document ? 1 : aup ? -1 : bup ? 1 : sortInput ? indexOf(sortInput, a) - indexOf(sortInput, b) : 0;
            } else if (aup === bup) {
                return siblingCheck(a, b);
            }
            cur = a;
            while (cur = cur.parentNode) {
                ap.unshift(cur);
            }
            cur = b;
            while (cur = cur.parentNode) {
                bp.unshift(cur);
            }
            while (ap[i] === bp[i]) {
                i++;
            }
            return i ? siblingCheck(ap[i], bp[i]) : ap[i] === preferredDoc ? -1 : bp[i] === preferredDoc ? 1 : 0;
        };
        return document;
    };
    Sizzle.matches = function(expr, elements) {
        return Sizzle(expr, null, null, elements);
    };
    Sizzle.matchesSelector = function(elem, expr) {
        if ((elem.ownerDocument || elem) !== document) {
            setDocument(elem);
        }
        expr = expr.replace(rattributeQuotes, "='$1']");
        if (support.matchesSelector && documentIsHTML && !compilerCache[expr + " "] && (!rbuggyMatches || !rbuggyMatches.test(expr)) && (!rbuggyQSA || !rbuggyQSA.test(expr))) {
            try {
                var ret = matches.call(elem, expr);
                if (ret || support.disconnectedMatch || elem.document && elem.document.nodeType !== 11) {
                    return ret;
                }
            } catch (e) {}
        }
        return Sizzle(expr, document, null, [ elem ]).length > 0;
    };
    Sizzle.contains = function(context, elem) {
        if ((context.ownerDocument || context) !== document) {
            setDocument(context);
        }
        return contains(context, elem);
    };
    Sizzle.attr = function(elem, name) {
        if ((elem.ownerDocument || elem) !== document) {
            setDocument(elem);
        }
        var fn = Expr.attrHandle[name.toLowerCase()], val = fn && hasOwn.call(Expr.attrHandle, name.toLowerCase()) ? fn(elem, name, !documentIsHTML) : undefined;
        return val !== undefined ? val : support.attributes || !documentIsHTML ? elem.getAttribute(name) : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;
    };
    Sizzle.error = function(msg) {
        throw new Error("Syntax error, unrecognized expression: " + msg);
    };
    Sizzle.uniqueSort = function(results) {
        var elem, duplicates = [], j = 0, i = 0;
        hasDuplicate = !support.detectDuplicates;
        sortInput = !support.sortStable && results.slice(0);
        results.sort(sortOrder);
        if (hasDuplicate) {
            while (elem = results[i++]) {
                if (elem === results[i]) {
                    j = duplicates.push(i);
                }
            }
            while (j--) {
                results.splice(duplicates[j], 1);
            }
        }
        sortInput = null;
        return results;
    };
    getText = Sizzle.getText = function(elem) {
        var node, ret = "", i = 0, nodeType = elem.nodeType;
        if (!nodeType) {
            while (node = elem[i++]) {
                ret += getText(node);
            }
        } else if (nodeType === 1 || nodeType === 9 || nodeType === 11) {
            if (typeof elem.textContent === "string") {
                return elem.textContent;
            } else {
                for (elem = elem.firstChild; elem; elem = elem.nextSibling) {
                    ret += getText(elem);
                }
            }
        } else if (nodeType === 3 || nodeType === 4) {
            return elem.nodeValue;
        }
        return ret;
    };
    Expr = Sizzle.selectors = {
        cacheLength: 50,
        createPseudo: markFunction,
        match: matchExpr,
        attrHandle: {},
        find: {},
        relative: {
            ">": {
                dir: "parentNode",
                first: true
            },
            " ": {
                dir: "parentNode"
            },
            "+": {
                dir: "previousSibling",
                first: true
            },
            "~": {
                dir: "previousSibling"
            }
        },
        preFilter: {
            ATTR: function(match) {
                match[1] = match[1].replace(runescape, funescape);
                match[3] = (match[3] || match[4] || match[5] || "").replace(runescape, funescape);
                if (match[2] === "~=") {
                    match[3] = " " + match[3] + " ";
                }
                return match.slice(0, 4);
            },
            CHILD: function(match) {
                match[1] = match[1].toLowerCase();
                if (match[1].slice(0, 3) === "nth") {
                    if (!match[3]) {
                        Sizzle.error(match[0]);
                    }
                    match[4] = +(match[4] ? match[5] + (match[6] || 1) : 2 * (match[3] === "even" || match[3] === "odd"));
                    match[5] = +(match[7] + match[8] || match[3] === "odd");
                } else if (match[3]) {
                    Sizzle.error(match[0]);
                }
                return match;
            },
            PSEUDO: function(match) {
                var excess, unquoted = !match[6] && match[2];
                if (matchExpr["CHILD"].test(match[0])) {
                    return null;
                }
                if (match[3]) {
                    match[2] = match[4] || match[5] || "";
                } else if (unquoted && rpseudo.test(unquoted) && (excess = tokenize(unquoted, true)) && (excess = unquoted.indexOf(")", unquoted.length - excess) - unquoted.length)) {
                    match[0] = match[0].slice(0, excess);
                    match[2] = unquoted.slice(0, excess);
                }
                return match.slice(0, 3);
            }
        },
        filter: {
            TAG: function(nodeNameSelector) {
                var nodeName = nodeNameSelector.replace(runescape, funescape).toLowerCase();
                return nodeNameSelector === "*" ? function() {
                    return true;
                } : function(elem) {
                    return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
                };
            },
            CLASS: function(className) {
                var pattern = classCache[className + " "];
                return pattern || (pattern = new RegExp("(^|" + whitespace + ")" + className + "(" + whitespace + "|$)")) && classCache(className, function(elem) {
                    return pattern.test(typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "");
                });
            },
            ATTR: function(name, operator, check) {
                return function(elem) {
                    var result = Sizzle.attr(elem, name);
                    if (result == null) {
                        return operator === "!=";
                    }
                    if (!operator) {
                        return true;
                    }
                    result += "";
                    return operator === "=" ? result === check : operator === "!=" ? result !== check : operator === "^=" ? check && result.indexOf(check) === 0 : operator === "*=" ? check && result.indexOf(check) > -1 : operator === "$=" ? check && result.slice(-check.length) === check : operator === "~=" ? (" " + result.replace(rwhitespace, " ") + " ").indexOf(check) > -1 : operator === "|=" ? result === check || result.slice(0, check.length + 1) === check + "-" : false;
                };
            },
            CHILD: function(type, what, argument, first, last) {
                var simple = type.slice(0, 3) !== "nth", forward = type.slice(-4) !== "last", ofType = what === "of-type";
                return first === 1 && last === 0 ? function(elem) {
                    return !!elem.parentNode;
                } : function(elem, context, xml) {
                    var cache, uniqueCache, outerCache, node, nodeIndex, start, dir = simple !== forward ? "nextSibling" : "previousSibling", parent = elem.parentNode, name = ofType && elem.nodeName.toLowerCase(), useCache = !xml && !ofType, diff = false;
                    if (parent) {
                        if (simple) {
                            while (dir) {
                                node = elem;
                                while (node = node[dir]) {
                                    if (ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) {
                                        return false;
                                    }
                                }
                                start = dir = type === "only" && !start && "nextSibling";
                            }
                            return true;
                        }
                        start = [ forward ? parent.firstChild : parent.lastChild ];
                        if (forward && useCache) {
                            node = parent;
                            outerCache = node[expando] || (node[expando] = {});
                            uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {});
                            cache = uniqueCache[type] || [];
                            nodeIndex = cache[0] === dirruns && cache[1];
                            diff = nodeIndex && cache[2];
                            node = nodeIndex && parent.childNodes[nodeIndex];
                            while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {
                                if (node.nodeType === 1 && ++diff && node === elem) {
                                    uniqueCache[type] = [ dirruns, nodeIndex, diff ];
                                    break;
                                }
                            }
                        } else {
                            if (useCache) {
                                node = elem;
                                outerCache = node[expando] || (node[expando] = {});
                                uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {});
                                cache = uniqueCache[type] || [];
                                nodeIndex = cache[0] === dirruns && cache[1];
                                diff = nodeIndex;
                            }
                            if (diff === false) {
                                while (node = ++nodeIndex && node && node[dir] || (diff = nodeIndex = 0) || start.pop()) {
                                    if ((ofType ? node.nodeName.toLowerCase() === name : node.nodeType === 1) && ++diff) {
                                        if (useCache) {
                                            outerCache = node[expando] || (node[expando] = {});
                                            uniqueCache = outerCache[node.uniqueID] || (outerCache[node.uniqueID] = {});
                                            uniqueCache[type] = [ dirruns, diff ];
                                        }
                                        if (node === elem) {
                                            break;
                                        }
                                    }
                                }
                            }
                        }
                        diff -= last;
                        return diff === first || diff % first === 0 && diff / first >= 0;
                    }
                };
            },
            PSEUDO: function(pseudo, argument) {
                var args, fn = Expr.pseudos[pseudo] || Expr.setFilters[pseudo.toLowerCase()] || Sizzle.error("unsupported pseudo: " + pseudo);
                if (fn[expando]) {
                    return fn(argument);
                }
                if (fn.length > 1) {
                    args = [ pseudo, pseudo, "", argument ];
                    return Expr.setFilters.hasOwnProperty(pseudo.toLowerCase()) ? markFunction(function(seed, matches) {
                        var idx, matched = fn(seed, argument), i = matched.length;
                        while (i--) {
                            idx = indexOf(seed, matched[i]);
                            seed[idx] = !(matches[idx] = matched[i]);
                        }
                    }) : function(elem) {
                        return fn(elem, 0, args);
                    };
                }
                return fn;
            }
        },
        pseudos: {
            not: markFunction(function(selector) {
                var input = [], results = [], matcher = compile(selector.replace(rtrim, "$1"));
                return matcher[expando] ? markFunction(function(seed, matches, context, xml) {
                    var elem, unmatched = matcher(seed, null, xml, []), i = seed.length;
                    while (i--) {
                        if (elem = unmatched[i]) {
                            seed[i] = !(matches[i] = elem);
                        }
                    }
                }) : function(elem, context, xml) {
                    input[0] = elem;
                    matcher(input, null, xml, results);
                    input[0] = null;
                    return !results.pop();
                };
            }),
            has: markFunction(function(selector) {
                return function(elem) {
                    return Sizzle(selector, elem).length > 0;
                };
            }),
            contains: markFunction(function(text) {
                text = text.replace(runescape, funescape);
                return function(elem) {
                    return (elem.textContent || elem.innerText || getText(elem)).indexOf(text) > -1;
                };
            }),
            lang: markFunction(function(lang) {
                if (!ridentifier.test(lang || "")) {
                    Sizzle.error("unsupported lang: " + lang);
                }
                lang = lang.replace(runescape, funescape).toLowerCase();
                return function(elem) {
                    var elemLang;
                    do {
                        if (elemLang = documentIsHTML ? elem.lang : elem.getAttribute("xml:lang") || elem.getAttribute("lang")) {
                            elemLang = elemLang.toLowerCase();
                            return elemLang === lang || elemLang.indexOf(lang + "-") === 0;
                        }
                    } while ((elem = elem.parentNode) && elem.nodeType === 1);
                    return false;
                };
            }),
            target: function(elem) {
                var hash = window.location && window.location.hash;
                return hash && hash.slice(1) === elem.id;
            },
            root: function(elem) {
                return elem === docElem;
            },
            focus: function(elem) {
                return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
            },
            enabled: function(elem) {
                return elem.disabled === false;
            },
            disabled: function(elem) {
                return elem.disabled === true;
            },
            checked: function(elem) {
                var nodeName = elem.nodeName.toLowerCase();
                return nodeName === "input" && !!elem.checked || nodeName === "option" && !!elem.selected;
            },
            selected: function(elem) {
                if (elem.parentNode) {
                    elem.parentNode.selectedIndex;
                }
                return elem.selected === true;
            },
            empty: function(elem) {
                for (elem = elem.firstChild; elem; elem = elem.nextSibling) {
                    if (elem.nodeType < 6) {
                        return false;
                    }
                }
                return true;
            },
            parent: function(elem) {
                return !Expr.pseudos["empty"](elem);
            },
            header: function(elem) {
                return rheader.test(elem.nodeName);
            },
            input: function(elem) {
                return rinputs.test(elem.nodeName);
            },
            button: function(elem) {
                var name = elem.nodeName.toLowerCase();
                return name === "input" && elem.type === "button" || name === "button";
            },
            text: function(elem) {
                var attr;
                return elem.nodeName.toLowerCase() === "input" && elem.type === "text" && ((attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text");
            },
            first: createPositionalPseudo(function() {
                return [ 0 ];
            }),
            last: createPositionalPseudo(function(matchIndexes, length) {
                return [ length - 1 ];
            }),
            eq: createPositionalPseudo(function(matchIndexes, length, argument) {
                return [ argument < 0 ? argument + length : argument ];
            }),
            even: createPositionalPseudo(function(matchIndexes, length) {
                var i = 0;
                for (;i < length; i += 2) {
                    matchIndexes.push(i);
                }
                return matchIndexes;
            }),
            odd: createPositionalPseudo(function(matchIndexes, length) {
                var i = 1;
                for (;i < length; i += 2) {
                    matchIndexes.push(i);
                }
                return matchIndexes;
            }),
            lt: createPositionalPseudo(function(matchIndexes, length, argument) {
                var i = argument < 0 ? argument + length : argument;
                for (;--i >= 0; ) {
                    matchIndexes.push(i);
                }
                return matchIndexes;
            }),
            gt: createPositionalPseudo(function(matchIndexes, length, argument) {
                var i = argument < 0 ? argument + length : argument;
                for (;++i < length; ) {
                    matchIndexes.push(i);
                }
                return matchIndexes;
            })
        }
    };
    Expr.pseudos["nth"] = Expr.pseudos["eq"];
    for (i in {
        radio: true,
        checkbox: true,
        file: true,
        password: true,
        image: true
    }) {
        Expr.pseudos[i] = createInputPseudo(i);
    }
    for (i in {
        submit: true,
        reset: true
    }) {
        Expr.pseudos[i] = createButtonPseudo(i);
    }
    function setFilters() {}
    setFilters.prototype = Expr.filters = Expr.pseudos;
    Expr.setFilters = new setFilters();
    tokenize = Sizzle.tokenize = function(selector, parseOnly) {
        var matched, match, tokens, type, soFar, groups, preFilters, cached = tokenCache[selector + " "];
        if (cached) {
            return parseOnly ? 0 : cached.slice(0);
        }
        soFar = selector;
        groups = [];
        preFilters = Expr.preFilter;
        while (soFar) {
            if (!matched || (match = rcomma.exec(soFar))) {
                if (match) {
                    soFar = soFar.slice(match[0].length) || soFar;
                }
                groups.push(tokens = []);
            }
            matched = false;
            if (match = rcombinators.exec(soFar)) {
                matched = match.shift();
                tokens.push({
                    value: matched,
                    type: match[0].replace(rtrim, " ")
                });
                soFar = soFar.slice(matched.length);
            }
            for (type in Expr.filter) {
                if ((match = matchExpr[type].exec(soFar)) && (!preFilters[type] || (match = preFilters[type](match)))) {
                    matched = match.shift();
                    tokens.push({
                        value: matched,
                        type: type,
                        matches: match
                    });
                    soFar = soFar.slice(matched.length);
                }
            }
            if (!matched) {
                break;
            }
        }
        return parseOnly ? soFar.length : soFar ? Sizzle.error(selector) : tokenCache(selector, groups).slice(0);
    };
    function toSelector(tokens) {
        var i = 0, len = tokens.length, selector = "";
        for (;i < len; i++) {
            selector += tokens[i].value;
        }
        return selector;
    }
    function addCombinator(matcher, combinator, base) {
        var dir = combinator.dir, checkNonElements = base && dir === "parentNode", doneName = done++;
        return combinator.first ? function(elem, context, xml) {
            while (elem = elem[dir]) {
                if (elem.nodeType === 1 || checkNonElements) {
                    return matcher(elem, context, xml);
                }
            }
        } : function(elem, context, xml) {
            var oldCache, uniqueCache, outerCache, newCache = [ dirruns, doneName ];
            if (xml) {
                while (elem = elem[dir]) {
                    if (elem.nodeType === 1 || checkNonElements) {
                        if (matcher(elem, context, xml)) {
                            return true;
                        }
                    }
                }
            } else {
                while (elem = elem[dir]) {
                    if (elem.nodeType === 1 || checkNonElements) {
                        outerCache = elem[expando] || (elem[expando] = {});
                        uniqueCache = outerCache[elem.uniqueID] || (outerCache[elem.uniqueID] = {});
                        if ((oldCache = uniqueCache[dir]) && oldCache[0] === dirruns && oldCache[1] === doneName) {
                            return newCache[2] = oldCache[2];
                        } else {
                            uniqueCache[dir] = newCache;
                            if (newCache[2] = matcher(elem, context, xml)) {
                                return true;
                            }
                        }
                    }
                }
            }
        };
    }
    function elementMatcher(matchers) {
        return matchers.length > 1 ? function(elem, context, xml) {
            var i = matchers.length;
            while (i--) {
                if (!matchers[i](elem, context, xml)) {
                    return false;
                }
            }
            return true;
        } : matchers[0];
    }
    function multipleContexts(selector, contexts, results) {
        var i = 0, len = contexts.length;
        for (;i < len; i++) {
            Sizzle(selector, contexts[i], results);
        }
        return results;
    }
    function condense(unmatched, map, filter, context, xml) {
        var elem, newUnmatched = [], i = 0, len = unmatched.length, mapped = map != null;
        for (;i < len; i++) {
            if (elem = unmatched[i]) {
                if (!filter || filter(elem, context, xml)) {
                    newUnmatched.push(elem);
                    if (mapped) {
                        map.push(i);
                    }
                }
            }
        }
        return newUnmatched;
    }
    function setMatcher(preFilter, selector, matcher, postFilter, postFinder, postSelector) {
        if (postFilter && !postFilter[expando]) {
            postFilter = setMatcher(postFilter);
        }
        if (postFinder && !postFinder[expando]) {
            postFinder = setMatcher(postFinder, postSelector);
        }
        return markFunction(function(seed, results, context, xml) {
            var temp, i, elem, preMap = [], postMap = [], preexisting = results.length, elems = seed || multipleContexts(selector || "*", context.nodeType ? [ context ] : context, []), matcherIn = preFilter && (seed || !selector) ? condense(elems, preMap, preFilter, context, xml) : elems, matcherOut = matcher ? postFinder || (seed ? preFilter : preexisting || postFilter) ? [] : results : matcherIn;
            if (matcher) {
                matcher(matcherIn, matcherOut, context, xml);
            }
            if (postFilter) {
                temp = condense(matcherOut, postMap);
                postFilter(temp, [], context, xml);
                i = temp.length;
                while (i--) {
                    if (elem = temp[i]) {
                        matcherOut[postMap[i]] = !(matcherIn[postMap[i]] = elem);
                    }
                }
            }
            if (seed) {
                if (postFinder || preFilter) {
                    if (postFinder) {
                        temp = [];
                        i = matcherOut.length;
                        while (i--) {
                            if (elem = matcherOut[i]) {
                                temp.push(matcherIn[i] = elem);
                            }
                        }
                        postFinder(null, matcherOut = [], temp, xml);
                    }
                    i = matcherOut.length;
                    while (i--) {
                        if ((elem = matcherOut[i]) && (temp = postFinder ? indexOf(seed, elem) : preMap[i]) > -1) {
                            seed[temp] = !(results[temp] = elem);
                        }
                    }
                }
            } else {
                matcherOut = condense(matcherOut === results ? matcherOut.splice(preexisting, matcherOut.length) : matcherOut);
                if (postFinder) {
                    postFinder(null, results, matcherOut, xml);
                } else {
                    push.apply(results, matcherOut);
                }
            }
        });
    }
    function matcherFromTokens(tokens) {
        var checkContext, matcher, j, len = tokens.length, leadingRelative = Expr.relative[tokens[0].type], implicitRelative = leadingRelative || Expr.relative[" "], i = leadingRelative ? 1 : 0, matchContext = addCombinator(function(elem) {
            return elem === checkContext;
        }, implicitRelative, true), matchAnyContext = addCombinator(function(elem) {
            return indexOf(checkContext, elem) > -1;
        }, implicitRelative, true), matchers = [ function(elem, context, xml) {
            var ret = !leadingRelative && (xml || context !== outermostContext) || ((checkContext = context).nodeType ? matchContext(elem, context, xml) : matchAnyContext(elem, context, xml));
            checkContext = null;
            return ret;
        } ];
        for (;i < len; i++) {
            if (matcher = Expr.relative[tokens[i].type]) {
                matchers = [ addCombinator(elementMatcher(matchers), matcher) ];
            } else {
                matcher = Expr.filter[tokens[i].type].apply(null, tokens[i].matches);
                if (matcher[expando]) {
                    j = ++i;
                    for (;j < len; j++) {
                        if (Expr.relative[tokens[j].type]) {
                            break;
                        }
                    }
                    return setMatcher(i > 1 && elementMatcher(matchers), i > 1 && toSelector(tokens.slice(0, i - 1).concat({
                        value: tokens[i - 2].type === " " ? "*" : ""
                    })).replace(rtrim, "$1"), matcher, i < j && matcherFromTokens(tokens.slice(i, j)), j < len && matcherFromTokens(tokens = tokens.slice(j)), j < len && toSelector(tokens));
                }
                matchers.push(matcher);
            }
        }
        return elementMatcher(matchers);
    }
    function matcherFromGroupMatchers(elementMatchers, setMatchers) {
        var bySet = setMatchers.length > 0, byElement = elementMatchers.length > 0, superMatcher = function(seed, context, xml, results, outermost) {
            var elem, j, matcher, matchedCount = 0, i = "0", unmatched = seed && [], setMatched = [], contextBackup = outermostContext, elems = seed || byElement && Expr.find["TAG"]("*", outermost), dirrunsUnique = dirruns += contextBackup == null ? 1 : Math.random() || .1, len = elems.length;
            if (outermost) {
                outermostContext = context === document || context || outermost;
            }
            for (;i !== len && (elem = elems[i]) != null; i++) {
                if (byElement && elem) {
                    j = 0;
                    if (!context && elem.ownerDocument !== document) {
                        setDocument(elem);
                        xml = !documentIsHTML;
                    }
                    while (matcher = elementMatchers[j++]) {
                        if (matcher(elem, context || document, xml)) {
                            results.push(elem);
                            break;
                        }
                    }
                    if (outermost) {
                        dirruns = dirrunsUnique;
                    }
                }
                if (bySet) {
                    if (elem = !matcher && elem) {
                        matchedCount--;
                    }
                    if (seed) {
                        unmatched.push(elem);
                    }
                }
            }
            matchedCount += i;
            if (bySet && i !== matchedCount) {
                j = 0;
                while (matcher = setMatchers[j++]) {
                    matcher(unmatched, setMatched, context, xml);
                }
                if (seed) {
                    if (matchedCount > 0) {
                        while (i--) {
                            if (!(unmatched[i] || setMatched[i])) {
                                setMatched[i] = pop.call(results);
                            }
                        }
                    }
                    setMatched = condense(setMatched);
                }
                push.apply(results, setMatched);
                if (outermost && !seed && setMatched.length > 0 && matchedCount + setMatchers.length > 1) {
                    Sizzle.uniqueSort(results);
                }
            }
            if (outermost) {
                dirruns = dirrunsUnique;
                outermostContext = contextBackup;
            }
            return unmatched;
        };
        return bySet ? markFunction(superMatcher) : superMatcher;
    }
    compile = Sizzle.compile = function(selector, match) {
        var i, setMatchers = [], elementMatchers = [], cached = compilerCache[selector + " "];
        if (!cached) {
            if (!match) {
                match = tokenize(selector);
            }
            i = match.length;
            while (i--) {
                cached = matcherFromTokens(match[i]);
                if (cached[expando]) {
                    setMatchers.push(cached);
                } else {
                    elementMatchers.push(cached);
                }
            }
            cached = compilerCache(selector, matcherFromGroupMatchers(elementMatchers, setMatchers));
            cached.selector = selector;
        }
        return cached;
    };
    select = Sizzle.select = function(selector, context, results, seed) {
        var i, tokens, token, type, find, compiled = typeof selector === "function" && selector, match = !seed && tokenize(selector = compiled.selector || selector);
        results = results || [];
        if (match.length === 1) {
            tokens = match[0] = match[0].slice(0);
            if (tokens.length > 2 && (token = tokens[0]).type === "ID" && support.getById && context.nodeType === 9 && documentIsHTML && Expr.relative[tokens[1].type]) {
                context = (Expr.find["ID"](token.matches[0].replace(runescape, funescape), context) || [])[0];
                if (!context) {
                    return results;
                } else if (compiled) {
                    context = context.parentNode;
                }
                selector = selector.slice(tokens.shift().value.length);
            }
            i = matchExpr["needsContext"].test(selector) ? 0 : tokens.length;
            while (i--) {
                token = tokens[i];
                if (Expr.relative[type = token.type]) {
                    break;
                }
                if (find = Expr.find[type]) {
                    if (seed = find(token.matches[0].replace(runescape, funescape), rsibling.test(tokens[0].type) && testContext(context.parentNode) || context)) {
                        tokens.splice(i, 1);
                        selector = seed.length && toSelector(tokens);
                        if (!selector) {
                            push.apply(results, seed);
                            return results;
                        }
                        break;
                    }
                }
            }
        }
        (compiled || compile(selector, match))(seed, context, !documentIsHTML, results, !context || rsibling.test(selector) && testContext(context.parentNode) || context);
        return results;
    };
    support.sortStable = expando.split("").sort(sortOrder).join("") === expando;
    support.detectDuplicates = !!hasDuplicate;
    setDocument();
    support.sortDetached = assert(function(div1) {
        return div1.compareDocumentPosition(document.createElement("div")) & 1;
    });
    if (!assert(function(div) {
        div.innerHTML = "<a href='#'></a>";
        return div.firstChild.getAttribute("href") === "#";
    })) {
        addHandle("type|href|height|width", function(elem, name, isXML) {
            if (!isXML) {
                return elem.getAttribute(name, name.toLowerCase() === "type" ? 1 : 2);
            }
        });
    }
    if (!support.attributes || !assert(function(div) {
        div.innerHTML = "<input/>";
        div.firstChild.setAttribute("value", "");
        return div.firstChild.getAttribute("value") === "";
    })) {
        addHandle("value", function(elem, name, isXML) {
            if (!isXML && elem.nodeName.toLowerCase() === "input") {
                return elem.defaultValue;
            }
        });
    }
    if (!assert(function(div) {
        return div.getAttribute("disabled") == null;
    })) {
        addHandle(booleans, function(elem, name, isXML) {
            var val;
            if (!isXML) {
                return elem[name] === true ? name.toLowerCase() : (val = elem.getAttributeNode(name)) && val.specified ? val.value : null;
            }
        });
    }
    if (typeof define === "function" && define.amd) {
        define(function() {
            return Sizzle;
        });
    } else if (typeof module !== "undefined" && module.exports) {
        module.exports = Sizzle;
    } else {
        window.Sizzle = Sizzle;
    }
})(window);

if (typeof JQmin == "undefined") {
    JQmin = {
        _FILE: "001jQmin.js"
    };
}

(function(global, factory) {
    if (typeof module === "object" && typeof module.exports === "object") {
        module.exports = global.document ? factory(global, true) : function(w) {
            if (!w.document) {
                throw new Error("jQuery requires a window with a document");
            }
            return factory(w);
        };
    } else {
        factory(global);
    }
})(typeof window !== "undefined" ? window : this, function(window, noGlobal) {
    var deletedIds = [];
    var slice = deletedIds.slice;
    var concat = deletedIds.concat;
    var push = deletedIds.push;
    var indexOf = deletedIds.indexOf;
    var class2type = {};
    var toString = class2type.toString;
    var hasOwn = class2type.hasOwnProperty;
    var support = {};
    var version = "1.11.1", jQuery = function(selector, context) {
        return new jQuery.fn.init(selector, context);
    }, rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, rmsPrefix = /^-ms-/, rdashAlpha = /-([\da-z])/gi, fcamelCase = function(all, letter) {
        return letter.toUpperCase();
    };
    jQuery.fn = jQuery.prototype = {
        jquery: version,
        constructor: jQuery,
        selector: "",
        length: 0,
        toArray: function() {
            return slice.call(this);
        },
        get: function(num) {
            return num != null ? num < 0 ? this[num + this.length] : this[num] : slice.call(this);
        },
        pushStack: function(elems) {
            var ret = jQuery.merge(this.constructor(), elems);
            ret.prevObject = this;
            ret.context = this.context;
            return ret;
        },
        each: function(callback, args) {
            return jQuery.each(this, callback, args);
        },
        map: function(callback) {
            return this.pushStack(jQuery.map(this, function(elem, i) {
                return callback.call(elem, i, elem);
            }));
        },
        slice: function() {
            return this.pushStack(slice.apply(this, arguments));
        },
        first: function() {
            return this.eq(0);
        },
        last: function() {
            return this.eq(-1);
        },
        eq: function(i) {
            var len = this.length, j = +i + (i < 0 ? len : 0);
            return this.pushStack(j >= 0 && j < len ? [ this[j] ] : []);
        },
        end: function() {
            return this.prevObject || this.constructor(null);
        },
        push: push,
        sort: deletedIds.sort,
        splice: deletedIds.splice
    };
    jQuery.extend = jQuery.fn.extend = function() {
        var src, copyIsArray, copy, name, options, clone, target = arguments[0] || {}, i = 1, length = arguments.length, deep = false;
        if (typeof target === "boolean") {
            deep = target;
            target = arguments[i] || {};
            i++;
        }
        if (typeof target !== "object" && !jQuery.isFunction(target)) {
            target = {};
        }
        if (i === length) {
            target = this;
            i--;
        }
        for (;i < length; i++) {
            if ((options = arguments[i]) != null) {
                for (name in options) {
                    src = target[name];
                    copy = options[name];
                    if (target === copy) {
                        continue;
                    }
                    if (deep && copy && (jQuery.isPlainObject(copy) || (copyIsArray = jQuery.isArray(copy)))) {
                        if (copyIsArray) {
                            copyIsArray = false;
                            clone = src && jQuery.isArray(src) ? src : [];
                        } else {
                            clone = src && jQuery.isPlainObject(src) ? src : {};
                        }
                        target[name] = jQuery.extend(deep, clone, copy);
                    } else if (copy !== undefined) {
                        target[name] = copy;
                    }
                }
            }
        }
        return target;
    };
    jQuery.extend({
        expando: "jQuery" + (version + Math.random()).replace(/\D/g, ""),
        isReady: true,
        error: function(msg) {
            throw new Error(msg);
        },
        noop: function() {},
        isFunction: function(obj) {
            return jQuery.type(obj) === "function";
        },
        isArray: Array.isArray || function(obj) {
            return jQuery.type(obj) === "array";
        },
        isWindow: function(obj) {
            return obj != null && obj == obj.window;
        },
        isNumeric: function(obj) {
            return !jQuery.isArray(obj) && obj - parseFloat(obj) >= 0;
        },
        isEmptyObject: function(obj) {
            var name;
            for (name in obj) {
                return false;
            }
            return true;
        },
        isPlainObject: function(obj) {
            var key;
            if (!obj || jQuery.type(obj) !== "object" || obj.nodeType || jQuery.isWindow(obj)) {
                return false;
            }
            try {
                if (obj.constructor && !hasOwn.call(obj, "constructor") && !hasOwn.call(obj.constructor.prototype, "isPrototypeOf")) {
                    return false;
                }
            } catch (e) {
                return false;
            }
            if (support.ownLast) {
                for (key in obj) {
                    return hasOwn.call(obj, key);
                }
            }
            for (key in obj) {}
            return key === undefined || hasOwn.call(obj, key);
        },
        type: function(obj) {
            if (obj == null) {
                return obj + "";
            }
            return typeof obj === "object" || typeof obj === "function" ? class2type[toString.call(obj)] || "object" : typeof obj;
        },
        globalEval: function(data) {
            if (data && jQuery.trim(data)) {
                (window.execScript || function(data) {
                    window["eval"].call(window, data);
                })(data);
            }
        },
        camelCase: function(string) {
            return string.replace(rmsPrefix, "ms-").replace(rdashAlpha, fcamelCase);
        },
        nodeName: function(elem, name) {
            return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
        },
        each: function(obj, callback, args) {
            var value, i = 0, length = obj.length, isArray = isArraylike(obj);
            if (args) {
                if (isArray) {
                    for (;i < length; i++) {
                        value = callback.apply(obj[i], args);
                        if (value === false) {
                            break;
                        }
                    }
                } else {
                    for (i in obj) {
                        value = callback.apply(obj[i], args);
                        if (value === false) {
                            break;
                        }
                    }
                }
            } else {
                if (isArray) {
                    for (;i < length; i++) {
                        value = callback.call(obj[i], i, obj[i]);
                        if (value === false) {
                            break;
                        }
                    }
                } else {
                    for (i in obj) {
                        value = callback.call(obj[i], i, obj[i]);
                        if (value === false) {
                            break;
                        }
                    }
                }
            }
            return obj;
        },
        trim: function(text) {
            return text == null ? "" : (text + "").replace(rtrim, "");
        },
        makeArray: function(arr, results) {
            var ret = results || [];
            if (arr != null) {
                if (isArraylike(Object(arr))) {
                    jQuery.merge(ret, typeof arr === "string" ? [ arr ] : arr);
                } else {
                    push.call(ret, arr);
                }
            }
            return ret;
        },
        inArray: function(elem, arr, i) {
            var len;
            if (arr) {
                if (indexOf) {
                    return indexOf.call(arr, elem, i);
                }
                len = arr.length;
                i = i ? i < 0 ? Math.max(0, len + i) : i : 0;
                for (;i < len; i++) {
                    if (i in arr && arr[i] === elem) {
                        return i;
                    }
                }
            }
            return -1;
        },
        merge: function(first, second) {
            var len = +second.length, j = 0, i = first.length;
            while (j < len) {
                first[i++] = second[j++];
            }
            if (len !== len) {
                while (second[j] !== undefined) {
                    first[i++] = second[j++];
                }
            }
            first.length = i;
            return first;
        },
        grep: function(elems, callback, invert) {
            var callbackInverse, matches = [], i = 0, length = elems.length, callbackExpect = !invert;
            for (;i < length; i++) {
                callbackInverse = !callback(elems[i], i);
                if (callbackInverse !== callbackExpect) {
                    matches.push(elems[i]);
                }
            }
            return matches;
        },
        map: function(elems, callback, arg) {
            var value, i = 0, length = elems.length, isArray = isArraylike(elems), ret = [];
            if (isArray) {
                for (;i < length; i++) {
                    value = callback(elems[i], i, arg);
                    if (value != null) {
                        ret.push(value);
                    }
                }
            } else {
                for (i in elems) {
                    value = callback(elems[i], i, arg);
                    if (value != null) {
                        ret.push(value);
                    }
                }
            }
            return concat.apply([], ret);
        },
        guid: 1,
        proxy: function(fn, context) {
            var args, proxy, tmp;
            if (typeof context === "string") {
                tmp = fn[context];
                context = fn;
                fn = tmp;
            }
            if (!jQuery.isFunction(fn)) {
                return undefined;
            }
            args = slice.call(arguments, 2);
            proxy = function() {
                return fn.apply(context || this, args.concat(slice.call(arguments)));
            };
            proxy.guid = fn.guid = fn.guid || jQuery.guid++;
            return proxy;
        },
        now: function() {
            return +new Date();
        },
        support: support
    });
    jQuery.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(i, name) {
        class2type["[object " + name + "]"] = name.toLowerCase();
    });
    function isArraylike(obj) {
        var length = obj.length, type = jQuery.type(obj);
        if (type === "function" || jQuery.isWindow(obj)) {
            return false;
        }
        if (obj.nodeType === 1 && length) {
            return true;
        }
        return type === "array" || length === 0 || typeof length === "number" && length > 0 && length - 1 in obj;
    }
    jQuery.find = Sizzle;
    jQuery.expr = Sizzle.selectors;
    jQuery.expr[":"] = jQuery.expr.pseudos;
    jQuery.unique = Sizzle.uniqueSort;
    jQuery.text = Sizzle.getText;
    jQuery.isXMLDoc = Sizzle.isXML;
    jQuery.contains = Sizzle.contains;
    var rneedsContext = jQuery.expr.match.needsContext;
    var rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/;
    var risSimple = /^.[^:#\[\.,]*$/;
    function winnow(elements, qualifier, not) {
        if (jQuery.isFunction(qualifier)) {
            return jQuery.grep(elements, function(elem, i) {
                return !!qualifier.call(elem, i, elem) !== not;
            });
        }
        if (qualifier.nodeType) {
            return jQuery.grep(elements, function(elem) {
                return elem === qualifier !== not;
            });
        }
        if (typeof qualifier === "string") {
            if (risSimple.test(qualifier)) {
                return jQuery.filter(qualifier, elements, not);
            }
            qualifier = jQuery.filter(qualifier, elements);
        }
        return jQuery.grep(elements, function(elem) {
            return jQuery.inArray(elem, qualifier) >= 0 !== not;
        });
    }
    jQuery.filter = function(expr, elems, not) {
        var elem = elems[0];
        if (not) {
            expr = ":not(" + expr + ")";
        }
        return elems.length === 1 && elem.nodeType === 1 ? jQuery.find.matchesSelector(elem, expr) ? [ elem ] : [] : jQuery.find.matches(expr, jQuery.grep(elems, function(elem) {
            return elem.nodeType === 1;
        }));
    };
    jQuery.fn.extend({
        find: function(selector) {
            var i, ret = [], self = this, len = self.length;
            if (typeof selector !== "string") {
                return this.pushStack(jQuery(selector).filter(function() {
                    for (i = 0; i < len; i++) {
                        if (jQuery.contains(self[i], this)) {
                            return true;
                        }
                    }
                }));
            }
            for (i = 0; i < len; i++) {
                jQuery.find(selector, self[i], ret);
            }
            ret = this.pushStack(len > 1 ? jQuery.unique(ret) : ret);
            ret.selector = this.selector ? this.selector + " " + selector : selector;
            return ret;
        },
        filter: function(selector) {
            return this.pushStack(winnow(this, selector || [], false));
        },
        not: function(selector) {
            return this.pushStack(winnow(this, selector || [], true));
        },
        is: function(selector) {
            return !!winnow(this, typeof selector === "string" && rneedsContext.test(selector) ? jQuery(selector) : selector || [], false).length;
        }
    });
    var rootjQuery, document = window.document, rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, init = jQuery.fn.init = function(selector, context) {
        var match, elem;
        if (!selector) {
            return this;
        }
        if (typeof selector === "string") {
            if (selector.charAt(0) === "<" && selector.charAt(selector.length - 1) === ">" && selector.length >= 3) {
                match = [ null, selector, null ];
            } else {
                match = rquickExpr.exec(selector);
            }
            if (match && (match[1] || !context)) {
                if (match[1]) {
                    context = context instanceof jQuery ? context[0] : context;
                    jQuery.merge(this, jQuery.parseHTML(match[1], context && context.nodeType ? context.ownerDocument || context : document, true));
                    if (rsingleTag.test(match[1]) && jQuery.isPlainObject(context)) {
                        for (match in context) {
                            if (jQuery.isFunction(this[match])) {
                                this[match](context[match]);
                            } else {
                                this.attr(match, context[match]);
                            }
                        }
                    }
                    return this;
                } else {
                    elem = document.getElementById(match[2]);
                    if (elem && elem.parentNode) {
                        if (elem.id !== match[2]) {
                            return rootjQuery.find(selector);
                        }
                        this.length = 1;
                        this[0] = elem;
                    }
                    this.context = document;
                    this.selector = selector;
                    return this;
                }
            } else if (!context || context.jquery) {
                return (context || rootjQuery).find(selector);
            } else {
                return this.constructor(context).find(selector);
            }
        } else if (selector.nodeType) {
            this.context = this[0] = selector;
            this.length = 1;
            return this;
        } else if (jQuery.isFunction(selector)) {
            return typeof rootjQuery.ready !== "undefined" ? rootjQuery.ready(selector) : selector(jQuery);
        }
        if (selector.selector !== undefined) {
            this.selector = selector.selector;
            this.context = selector.context;
        }
        return jQuery.makeArray(selector, this);
    };
    init.prototype = jQuery.fn;
    rootjQuery = jQuery(document);
    var rparentsprev = /^(?:parents|prev(?:Until|All))/, guaranteedUnique = {
        children: true,
        contents: true,
        next: true,
        prev: true
    };
    jQuery.extend({
        dir: function(elem, dir, until) {
            var matched = [], cur = elem[dir];
            while (cur && cur.nodeType !== 9 && (until === undefined || cur.nodeType !== 1 || !jQuery(cur).is(until))) {
                if (cur.nodeType === 1) {
                    matched.push(cur);
                }
                cur = cur[dir];
            }
            return matched;
        },
        sibling: function(n, elem) {
            var r = [];
            for (;n; n = n.nextSibling) {
                if (n.nodeType === 1 && n !== elem) {
                    r.push(n);
                }
            }
            return r;
        }
    });
    jQuery.fn.extend({
        has: function(target) {
            var i, targets = jQuery(target, this), len = targets.length;
            return this.filter(function() {
                for (i = 0; i < len; i++) {
                    if (jQuery.contains(this, targets[i])) {
                        return true;
                    }
                }
            });
        },
        closest: function(selectors, context) {
            var cur, i = 0, l = this.length, matched = [], pos = rneedsContext.test(selectors) || typeof selectors !== "string" ? jQuery(selectors, context || this.context) : 0;
            for (;i < l; i++) {
                for (cur = this[i]; cur && cur !== context; cur = cur.parentNode) {
                    if (cur.nodeType < 11 && (pos ? pos.index(cur) > -1 : cur.nodeType === 1 && jQuery.find.matchesSelector(cur, selectors))) {
                        matched.push(cur);
                        break;
                    }
                }
            }
            return this.pushStack(matched.length > 1 ? jQuery.unique(matched) : matched);
        },
        index: function(elem) {
            if (!elem) {
                return this[0] && this[0].parentNode ? this.first().prevAll().length : -1;
            }
            if (typeof elem === "string") {
                return jQuery.inArray(this[0], jQuery(elem));
            }
            return jQuery.inArray(elem.jquery ? elem[0] : elem, this);
        },
        add: function(selector, context) {
            return this.pushStack(jQuery.unique(jQuery.merge(this.get(), jQuery(selector, context))));
        },
        addBack: function(selector) {
            return this.add(selector == null ? this.prevObject : this.prevObject.filter(selector));
        }
    });
    function sibling(cur, dir) {
        do {
            cur = cur[dir];
        } while (cur && cur.nodeType !== 1);
        return cur;
    }
    jQuery.each({
        parent: function(elem) {
            var parent = elem.parentNode;
            return parent && parent.nodeType !== 11 ? parent : null;
        },
        parents: function(elem) {
            return jQuery.dir(elem, "parentNode");
        },
        parentsUntil: function(elem, i, until) {
            return jQuery.dir(elem, "parentNode", until);
        },
        next: function(elem) {
            return sibling(elem, "nextSibling");
        },
        prev: function(elem) {
            return sibling(elem, "previousSibling");
        },
        nextAll: function(elem) {
            return jQuery.dir(elem, "nextSibling");
        },
        prevAll: function(elem) {
            return jQuery.dir(elem, "previousSibling");
        },
        nextUntil: function(elem, i, until) {
            return jQuery.dir(elem, "nextSibling", until);
        },
        prevUntil: function(elem, i, until) {
            return jQuery.dir(elem, "previousSibling", until);
        },
        siblings: function(elem) {
            return jQuery.sibling((elem.parentNode || {}).firstChild, elem);
        },
        children: function(elem) {
            return jQuery.sibling(elem.firstChild);
        },
        contents: function(elem) {
            return jQuery.nodeName(elem, "iframe") ? elem.contentDocument || elem.contentWindow.document : jQuery.merge([], elem.childNodes);
        }
    }, function(name, fn) {
        jQuery.fn[name] = function(until, selector) {
            var ret = jQuery.map(this, fn, until);
            if (name.slice(-5) !== "Until") {
                selector = until;
            }
            if (selector && typeof selector === "string") {
                ret = jQuery.filter(selector, ret);
            }
            if (this.length > 1) {
                if (!guaranteedUnique[name]) {
                    ret = jQuery.unique(ret);
                }
                if (rparentsprev.test(name)) {
                    ret = ret.reverse();
                }
            }
            return this.pushStack(ret);
        };
    });
    var rnotwhite = /\S+/g;
    var optionsCache = {};
    function createOptions(options) {
        var object = optionsCache[options] = {};
        jQuery.each(options.match(rnotwhite) || [], function(_, flag) {
            object[flag] = true;
        });
        return object;
    }
    jQuery.Callbacks = function(options) {
        options = typeof options === "string" ? optionsCache[options] || createOptions(options) : jQuery.extend({}, options);
        var firing, memory, fired, firingLength, firingIndex, firingStart, list = [], stack = !options.once && [], fire = function(data) {
            memory = options.memory && data;
            fired = true;
            firingIndex = firingStart || 0;
            firingStart = 0;
            firingLength = list.length;
            firing = true;
            for (;list && firingIndex < firingLength; firingIndex++) {
                if (list[firingIndex].apply(data[0], data[1]) === false && options.stopOnFalse) {
                    memory = false;
                    break;
                }
            }
            firing = false;
            if (list) {
                if (stack) {
                    if (stack.length) {
                        fire(stack.shift());
                    }
                } else if (memory) {
                    list = [];
                } else {
                    self.disable();
                }
            }
        }, self = {
            add: function() {
                if (list) {
                    var start = list.length;
                    (function add(args) {
                        jQuery.each(args, function(_, arg) {
                            var type = jQuery.type(arg);
                            if (type === "function") {
                                if (!options.unique || !self.has(arg)) {
                                    list.push(arg);
                                }
                            } else if (arg && arg.length && type !== "string") {
                                add(arg);
                            }
                        });
                    })(arguments);
                    if (firing) {
                        firingLength = list.length;
                    } else if (memory) {
                        firingStart = start;
                        fire(memory);
                    }
                }
                return this;
            },
            remove: function() {
                if (list) {
                    jQuery.each(arguments, function(_, arg) {
                        var index;
                        while ((index = jQuery.inArray(arg, list, index)) > -1) {
                            list.splice(index, 1);
                            if (firing) {
                                if (index <= firingLength) {
                                    firingLength--;
                                }
                                if (index <= firingIndex) {
                                    firingIndex--;
                                }
                            }
                        }
                    });
                }
                return this;
            },
            has: function(fn) {
                return fn ? jQuery.inArray(fn, list) > -1 : !!(list && list.length);
            },
            empty: function() {
                list = [];
                firingLength = 0;
                return this;
            },
            disable: function() {
                list = stack = memory = undefined;
                return this;
            },
            disabled: function() {
                return !list;
            },
            lock: function() {
                stack = undefined;
                if (!memory) {
                    self.disable();
                }
                return this;
            },
            locked: function() {
                return !stack;
            },
            fireWith: function(context, args) {
                if (list && (!fired || stack)) {
                    args = args || [];
                    args = [ context, args.slice ? args.slice() : args ];
                    if (firing) {
                        stack.push(args);
                    } else {
                        fire(args);
                    }
                }
                return this;
            },
            fire: function() {
                self.fireWith(this, arguments);
                return this;
            },
            fired: function() {
                return !!fired;
            }
        };
        return self;
    };
    jQuery.extend({
        Deferred: function(func) {
            var tuples = [ [ "resolve", "done", jQuery.Callbacks("once memory"), "resolved" ], [ "reject", "fail", jQuery.Callbacks("once memory"), "rejected" ], [ "notify", "progress", jQuery.Callbacks("memory") ] ], state = "pending", promise = {
                state: function() {
                    return state;
                },
                always: function() {
                    deferred.done(arguments).fail(arguments);
                    return this;
                },
                then: function() {
                    var fns = arguments;
                    return jQuery.Deferred(function(newDefer) {
                        jQuery.each(tuples, function(i, tuple) {
                            var fn = jQuery.isFunction(fns[i]) && fns[i];
                            deferred[tuple[1]](function() {
                                var returned = fn && fn.apply(this, arguments);
                                if (returned && jQuery.isFunction(returned.promise)) {
                                    returned.promise().done(newDefer.resolve).fail(newDefer.reject).progress(newDefer.notify);
                                } else {
                                    newDefer[tuple[0] + "With"](this === promise ? newDefer.promise() : this, fn ? [ returned ] : arguments);
                                }
                            });
                        });
                        fns = null;
                    }).promise();
                },
                promise: function(obj) {
                    return obj != null ? jQuery.extend(obj, promise) : promise;
                }
            }, deferred = {};
            promise.pipe = promise.then;
            jQuery.each(tuples, function(i, tuple) {
                var list = tuple[2], stateString = tuple[3];
                promise[tuple[1]] = list.add;
                if (stateString) {
                    list.add(function() {
                        state = stateString;
                    }, tuples[i ^ 1][2].disable, tuples[2][2].lock);
                }
                deferred[tuple[0]] = function() {
                    deferred[tuple[0] + "With"](this === deferred ? promise : this, arguments);
                    return this;
                };
                deferred[tuple[0] + "With"] = list.fireWith;
            });
            promise.promise(deferred);
            if (func) {
                func.call(deferred, deferred);
            }
            return deferred;
        },
        when: function(subordinate) {
            var i = 0, resolveValues = slice.call(arguments), length = resolveValues.length, remaining = length !== 1 || subordinate && jQuery.isFunction(subordinate.promise) ? length : 0, deferred = remaining === 1 ? subordinate : jQuery.Deferred(), updateFunc = function(i, contexts, values) {
                return function(value) {
                    contexts[i] = this;
                    values[i] = arguments.length > 1 ? slice.call(arguments) : value;
                    if (values === progressValues) {
                        deferred.notifyWith(contexts, values);
                    } else if (!--remaining) {
                        deferred.resolveWith(contexts, values);
                    }
                };
            }, progressValues, progressContexts, resolveContexts;
            if (length > 1) {
                progressValues = new Array(length);
                progressContexts = new Array(length);
                resolveContexts = new Array(length);
                for (;i < length; i++) {
                    if (resolveValues[i] && jQuery.isFunction(resolveValues[i].promise)) {
                        resolveValues[i].promise().done(updateFunc(i, resolveContexts, resolveValues)).fail(deferred.reject).progress(updateFunc(i, progressContexts, progressValues));
                    } else {
                        --remaining;
                    }
                }
            }
            if (!remaining) {
                deferred.resolveWith(resolveContexts, resolveValues);
            }
            return deferred.promise();
        }
    });
    var readyList;
    jQuery.fn.ready = function(fn) {
        jQuery.ready.promise().done(fn);
        return this;
    };
    jQuery.extend({
        isReady: false,
        readyWait: 1,
        holdReady: function(hold) {
            if (hold) {
                jQuery.readyWait++;
            } else {
                jQuery.ready(true);
            }
        },
        ready: function(wait) {
            if (wait === true ? --jQuery.readyWait : jQuery.isReady) {
                return;
            }
            if (!document.body) {
                return setTimeout(jQuery.ready);
            }
            jQuery.isReady = true;
            if (wait !== true && --jQuery.readyWait > 0) {
                return;
            }
            readyList.resolveWith(document, [ jQuery ]);
            if (jQuery.fn.triggerHandler) {
                jQuery(document).triggerHandler("ready");
                jQuery(document).off("ready");
            }
        }
    });
    function detach() {
        if (document.addEventListener) {
            document.removeEventListener("DOMContentLoaded", completed, false);
            window.removeEventListener("load", completed, false);
        } else {
            document.detachEvent("onreadystatechange", completed);
            window.detachEvent("onload", completed);
        }
    }
    function completed() {
        if (document.addEventListener || event.type === "load" || document.readyState === "complete") {
            detach();
            jQuery.ready();
        }
    }
    jQuery.ready.promise = function(obj) {
        if (!readyList) {
            readyList = jQuery.Deferred();
            if (document.readyState === "complete") {
                setTimeout(jQuery.ready);
            } else if (document.addEventListener) {
                document.addEventListener("DOMContentLoaded", completed, false);
                window.addEventListener("load", completed, false);
            } else {
                document.attachEvent("onreadystatechange", completed);
                window.attachEvent("onload", completed);
                var top = false;
                try {
                    top = window.frameElement == null && document.documentElement;
                } catch (e) {}
                if (top && top.doScroll) {
                    (function doScrollCheck() {
                        if (!jQuery.isReady) {
                            try {
                                top.doScroll("left");
                            } catch (e) {
                                return setTimeout(doScrollCheck, 50);
                            }
                            detach();
                            jQuery.ready();
                        }
                    })();
                }
            }
        }
        return readyList.promise(obj);
    };
    var strundefined = typeof undefined;
    var i;
    for (i in jQuery(support)) {
        break;
    }
    support.ownLast = i !== "0";
    support.inlineBlockNeedsLayout = false;
    jQuery(function() {
        var val, div, body, container;
        body = document.getElementsByTagName("body")[0];
        if (!body || !body.style) {
            return;
        }
        div = document.createElement("div");
        container = document.createElement("div");
        container.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px";
        body.appendChild(container).appendChild(div);
        if (typeof div.style.zoom !== strundefined) {
            div.style.cssText = "display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1";
            support.inlineBlockNeedsLayout = val = div.offsetWidth === 3;
            if (val) {
                body.style.zoom = 1;
            }
        }
        body.removeChild(container);
    });
    (function() {
        var div = document.createElement("div");
        if (support.deleteExpando == null) {
            support.deleteExpando = true;
            try {
                delete div.test;
            } catch (e) {
                support.deleteExpando = false;
            }
        }
        div = null;
    })();
    jQuery.acceptData = function(elem) {
        var noData = jQuery.noData[(elem.nodeName + " ").toLowerCase()], nodeType = +elem.nodeType || 1;
        return nodeType !== 1 && nodeType !== 9 ? false : !noData || noData !== true && elem.getAttribute("classid") === noData;
    };
    var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/, rmultiDash = /([A-Z])/g;
    function dataAttr(elem, key, data) {
        if (data === undefined && elem.nodeType === 1) {
            var name = "data-" + key.replace(rmultiDash, "-$1").toLowerCase();
            data = elem.getAttribute(name);
            if (typeof data === "string") {
                try {
                    data = data === "true" ? true : data === "false" ? false : data === "null" ? null : +data + "" === data ? +data : rbrace.test(data) ? jQuery.parseJSON(data) : data;
                } catch (e) {}
                jQuery.data(elem, key, data);
            } else {
                data = undefined;
            }
        }
        return data;
    }
    function isEmptyDataObject(obj) {
        var name;
        for (name in obj) {
            if (name === "data" && jQuery.isEmptyObject(obj[name])) {
                continue;
            }
            if (name !== "toJSON") {
                return false;
            }
        }
        return true;
    }
    function internalData(elem, name, data, pvt) {
        if (!jQuery.acceptData(elem)) {
            return;
        }
        var ret, thisCache, internalKey = jQuery.expando, isNode = elem.nodeType, cache = isNode ? jQuery.cache : elem, id = isNode ? elem[internalKey] : elem[internalKey] && internalKey;
        if ((!id || !cache[id] || !pvt && !cache[id].data) && data === undefined && typeof name === "string") {
            return;
        }
        if (!id) {
            if (isNode) {
                id = elem[internalKey] = deletedIds.pop() || jQuery.guid++;
            } else {
                id = internalKey;
            }
        }
        if (!cache[id]) {
            cache[id] = isNode ? {} : {
                toJSON: jQuery.noop
            };
        }
        if (typeof name === "object" || typeof name === "function") {
            if (pvt) {
                cache[id] = jQuery.extend(cache[id], name);
            } else {
                cache[id].data = jQuery.extend(cache[id].data, name);
            }
        }
        thisCache = cache[id];
        if (!pvt) {
            if (!thisCache.data) {
                thisCache.data = {};
            }
            thisCache = thisCache.data;
        }
        if (data !== undefined) {
            thisCache[jQuery.camelCase(name)] = data;
        }
        if (typeof name === "string") {
            ret = thisCache[name];
            if (ret == null) {
                ret = thisCache[jQuery.camelCase(name)];
            }
        } else {
            ret = thisCache;
        }
        return ret;
    }
    function internalRemoveData(elem, name, pvt) {
        if (!jQuery.acceptData(elem)) {
            return;
        }
        var thisCache, i, isNode = elem.nodeType, cache = isNode ? jQuery.cache : elem, id = isNode ? elem[jQuery.expando] : jQuery.expando;
        if (!cache[id]) {
            return;
        }
        if (name) {
            thisCache = pvt ? cache[id] : cache[id].data;
            if (thisCache) {
                if (!jQuery.isArray(name)) {
                    if (name in thisCache) {
                        name = [ name ];
                    } else {
                        name = jQuery.camelCase(name);
                        if (name in thisCache) {
                            name = [ name ];
                        } else {
                            name = name.split(" ");
                        }
                    }
                } else {
                    name = name.concat(jQuery.map(name, jQuery.camelCase));
                }
                i = name.length;
                while (i--) {
                    delete thisCache[name[i]];
                }
                if (pvt ? !isEmptyDataObject(thisCache) : !jQuery.isEmptyObject(thisCache)) {
                    return;
                }
            }
        }
        if (!pvt) {
            delete cache[id].data;
            if (!isEmptyDataObject(cache[id])) {
                return;
            }
        }
        if (isNode) {
            jQuery.cleanData([ elem ], true);
        } else if (support.deleteExpando || cache != cache.window) {
            delete cache[id];
        } else {
            cache[id] = null;
        }
    }
    jQuery.extend({
        cache: {},
        noData: {
            "applet ": true,
            "embed ": true,
            "object ": "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"
        },
        hasData: function(elem) {
            elem = elem.nodeType ? jQuery.cache[elem[jQuery.expando]] : elem[jQuery.expando];
            return !!elem && !isEmptyDataObject(elem);
        },
        data: function(elem, name, data) {
            return internalData(elem, name, data);
        },
        removeData: function(elem, name) {
            return internalRemoveData(elem, name);
        },
        _data: function(elem, name, data) {
            return internalData(elem, name, data, true);
        },
        _removeData: function(elem, name) {
            return internalRemoveData(elem, name, true);
        }
    });
    jQuery.fn.extend({
        data: function(key, value) {
            var i, name, data, elem = this[0], attrs = elem && elem.attributes;
            if (key === undefined) {
                if (this.length) {
                    data = jQuery.data(elem);
                    if (elem.nodeType === 1 && !jQuery._data(elem, "parsedAttrs")) {
                        i = attrs.length;
                        while (i--) {
                            if (attrs[i]) {
                                name = attrs[i].name;
                                if (name.indexOf("data-") === 0) {
                                    name = jQuery.camelCase(name.slice(5));
                                    dataAttr(elem, name, data[name]);
                                }
                            }
                        }
                        jQuery._data(elem, "parsedAttrs", true);
                    }
                }
                return data;
            }
            if (typeof key === "object") {
                return this.each(function() {
                    jQuery.data(this, key);
                });
            }
            return arguments.length > 1 ? this.each(function() {
                jQuery.data(this, key, value);
            }) : elem ? dataAttr(elem, key, jQuery.data(elem, key)) : undefined;
        },
        removeData: function(key) {
            return this.each(function() {
                jQuery.removeData(this, key);
            });
        }
    });
    jQuery.extend({
        queue: function(elem, type, data) {
            var queue;
            if (elem) {
                type = (type || "fx") + "queue";
                queue = jQuery._data(elem, type);
                if (data) {
                    if (!queue || jQuery.isArray(data)) {
                        queue = jQuery._data(elem, type, jQuery.makeArray(data));
                    } else {
                        queue.push(data);
                    }
                }
                return queue || [];
            }
        },
        dequeue: function(elem, type) {
            type = type || "fx";
            var queue = jQuery.queue(elem, type), startLength = queue.length, fn = queue.shift(), hooks = jQuery._queueHooks(elem, type), next = function() {
                jQuery.dequeue(elem, type);
            };
            if (fn === "inprogress") {
                fn = queue.shift();
                startLength--;
            }
            if (fn) {
                if (type === "fx") {
                    queue.unshift("inprogress");
                }
                delete hooks.stop;
                fn.call(elem, next, hooks);
            }
            if (!startLength && hooks) {
                hooks.empty.fire();
            }
        },
        _queueHooks: function(elem, type) {
            var key = type + "queueHooks";
            return jQuery._data(elem, key) || jQuery._data(elem, key, {
                empty: jQuery.Callbacks("once memory").add(function() {
                    jQuery._removeData(elem, type + "queue");
                    jQuery._removeData(elem, key);
                })
            });
        }
    });
    jQuery.fn.extend({
        queue: function(type, data) {
            var setter = 2;
            if (typeof type !== "string") {
                data = type;
                type = "fx";
                setter--;
            }
            if (arguments.length < setter) {
                return jQuery.queue(this[0], type);
            }
            return data === undefined ? this : this.each(function() {
                var queue = jQuery.queue(this, type, data);
                jQuery._queueHooks(this, type);
                if (type === "fx" && queue[0] !== "inprogress") {
                    jQuery.dequeue(this, type);
                }
            });
        },
        dequeue: function(type) {
            return this.each(function() {
                jQuery.dequeue(this, type);
            });
        },
        clearQueue: function(type) {
            return this.queue(type || "fx", []);
        },
        promise: function(type, obj) {
            var tmp, count = 1, defer = jQuery.Deferred(), elements = this, i = this.length, resolve = function() {
                if (!--count) {
                    defer.resolveWith(elements, [ elements ]);
                }
            };
            if (typeof type !== "string") {
                obj = type;
                type = undefined;
            }
            type = type || "fx";
            while (i--) {
                tmp = jQuery._data(elements[i], type + "queueHooks");
                if (tmp && tmp.empty) {
                    count++;
                    tmp.empty.add(resolve);
                }
            }
            resolve();
            return defer.promise(obj);
        }
    });
    var pnum = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source;
    var cssExpand = [ "Top", "Right", "Bottom", "Left" ];
    var isHidden = function(elem, el) {
        elem = el || elem;
        return jQuery.css(elem, "display") === "none" || !jQuery.contains(elem.ownerDocument, elem);
    };
    var access = jQuery.access = function(elems, fn, key, value, chainable, emptyGet, raw) {
        var i = 0, length = elems.length, bulk = key == null;
        if (jQuery.type(key) === "object") {
            chainable = true;
            for (i in key) {
                jQuery.access(elems, fn, i, key[i], true, emptyGet, raw);
            }
        } else if (value !== undefined) {
            chainable = true;
            if (!jQuery.isFunction(value)) {
                raw = true;
            }
            if (bulk) {
                if (raw) {
                    fn.call(elems, value);
                    fn = null;
                } else {
                    bulk = fn;
                    fn = function(elem, key, value) {
                        return bulk.call(jQuery(elem), value);
                    };
                }
            }
            if (fn) {
                for (;i < length; i++) {
                    fn(elems[i], key, raw ? value : value.call(elems[i], i, fn(elems[i], key)));
                }
            }
        }
        return chainable ? elems : bulk ? fn.call(elems) : length ? fn(elems[0], key) : emptyGet;
    };
    var rcheckableType = /^(?:checkbox|radio)$/i;
    (function() {
        var input = document.createElement("input"), div = document.createElement("div"), fragment = document.createDocumentFragment();
        div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
        support.leadingWhitespace = div.firstChild.nodeType === 3;
        support.tbody = !div.getElementsByTagName("tbody").length;
        support.htmlSerialize = !!div.getElementsByTagName("link").length;
        support.html5Clone = document.createElement("nav").cloneNode(true).outerHTML !== "<:nav></:nav>";
        input.type = "checkbox";
        input.checked = true;
        fragment.appendChild(input);
        support.appendChecked = input.checked;
        div.innerHTML = "<textarea>x</textarea>";
        support.noCloneChecked = !!div.cloneNode(true).lastChild.defaultValue;
        fragment.appendChild(div);
        div.innerHTML = "<input type='radio' checked='checked' name='t'/>";
        support.checkClone = div.cloneNode(true).cloneNode(true).lastChild.checked;
        support.noCloneEvent = true;
        if (div.attachEvent) {
            div.attachEvent("onclick", function() {
                support.noCloneEvent = false;
            });
            div.cloneNode(true).click();
        }
        if (support.deleteExpando == null) {
            support.deleteExpando = true;
            try {
                delete div.test;
            } catch (e) {
                support.deleteExpando = false;
            }
        }
    })();
    (function() {
        var i, eventName, div = document.createElement("div");
        for (i in {
            submit: true,
            change: true,
            focusin: true
        }) {
            eventName = "on" + i;
            if (!(support[i + "Bubbles"] = eventName in window)) {
                div.setAttribute(eventName, "t");
                support[i + "Bubbles"] = div.attributes[eventName].expando === false;
            }
        }
        div = null;
    })();
    var rformElems = /^(?:input|select|textarea)$/i, rkeyEvent = /^key/, rmouseEvent = /^(?:mouse|pointer|contextmenu)|click/, rfocusMorph = /^(?:focusinfocus|focusoutblur)$/, rtypenamespace = /^([^.]*)(?:\.(.+)|)$/;
    function returnTrue() {
        return true;
    }
    function returnFalse() {
        return false;
    }
    function safeActiveElement() {
        try {
            return document.activeElement;
        } catch (err) {}
    }
    jQuery.event = {
        global: {},
        add: function(elem, types, handler, data, selector) {
            var tmp, events, t, handleObjIn, special, eventHandle, handleObj, handlers, type, namespaces, origType, elemData = jQuery._data(elem);
            if (!elemData) {
                return;
            }
            if (handler.handler) {
                handleObjIn = handler;
                handler = handleObjIn.handler;
                selector = handleObjIn.selector;
            }
            if (!handler.guid) {
                handler.guid = jQuery.guid++;
            }
            if (!(events = elemData.events)) {
                events = elemData.events = {};
            }
            if (!(eventHandle = elemData.handle)) {
                eventHandle = elemData.handle = function(e) {
                    return typeof jQuery !== strundefined && (!e || jQuery.event.triggered !== e.type) ? jQuery.event.dispatch.apply(eventHandle.elem, arguments) : undefined;
                };
                eventHandle.elem = elem;
            }
            types = (types || "").match(rnotwhite) || [ "" ];
            t = types.length;
            while (t--) {
                tmp = rtypenamespace.exec(types[t]) || [];
                type = origType = tmp[1];
                namespaces = (tmp[2] || "").split(".").sort();
                if (!type) {
                    continue;
                }
                special = jQuery.event.special[type] || {};
                type = (selector ? special.delegateType : special.bindType) || type;
                special = jQuery.event.special[type] || {};
                handleObj = jQuery.extend({
                    type: type,
                    origType: origType,
                    data: data,
                    handler: handler,
                    guid: handler.guid,
                    selector: selector,
                    needsContext: selector && jQuery.expr.match.needsContext.test(selector),
                    namespace: namespaces.join(".")
                }, handleObjIn);
                if (!(handlers = events[type])) {
                    handlers = events[type] = [];
                    handlers.delegateCount = 0;
                    if (!special.setup || special.setup.call(elem, data, namespaces, eventHandle) === false) {
                        if (elem.addEventListener) {
                            elem.addEventListener(type, eventHandle, false);
                        } else if (elem.attachEvent) {
                            elem.attachEvent("on" + type, eventHandle);
                        }
                    }
                }
                if (special.add) {
                    special.add.call(elem, handleObj);
                    if (!handleObj.handler.guid) {
                        handleObj.handler.guid = handler.guid;
                    }
                }
                if (selector) {
                    handlers.splice(handlers.delegateCount++, 0, handleObj);
                } else {
                    handlers.push(handleObj);
                }
                jQuery.event.global[type] = true;
            }
            elem = null;
        },
        remove: function(elem, types, handler, selector, mappedTypes) {
            var j, handleObj, tmp, origCount, t, events, special, handlers, type, namespaces, origType, elemData = jQuery.hasData(elem) && jQuery._data(elem);
            if (!elemData || !(events = elemData.events)) {
                return;
            }
            types = (types || "").match(rnotwhite) || [ "" ];
            t = types.length;
            while (t--) {
                tmp = rtypenamespace.exec(types[t]) || [];
                type = origType = tmp[1];
                namespaces = (tmp[2] || "").split(".").sort();
                if (!type) {
                    for (type in events) {
                        jQuery.event.remove(elem, type + types[t], handler, selector, true);
                    }
                    continue;
                }
                special = jQuery.event.special[type] || {};
                type = (selector ? special.delegateType : special.bindType) || type;
                handlers = events[type] || [];
                tmp = tmp[2] && new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)");
                origCount = j = handlers.length;
                while (j--) {
                    handleObj = handlers[j];
                    if ((mappedTypes || origType === handleObj.origType) && (!handler || handler.guid === handleObj.guid) && (!tmp || tmp.test(handleObj.namespace)) && (!selector || selector === handleObj.selector || selector === "**" && handleObj.selector)) {
                        handlers.splice(j, 1);
                        if (handleObj.selector) {
                            handlers.delegateCount--;
                        }
                        if (special.remove) {
                            special.remove.call(elem, handleObj);
                        }
                    }
                }
                if (origCount && !handlers.length) {
                    if (!special.teardown || special.teardown.call(elem, namespaces, elemData.handle) === false) {
                        jQuery.removeEvent(elem, type, elemData.handle);
                    }
                    delete events[type];
                }
            }
            if (jQuery.isEmptyObject(events)) {
                delete elemData.handle;
                jQuery._removeData(elem, "events");
            }
        },
        trigger: function(event, data, elem, onlyHandlers) {
            var handle, ontype, cur, bubbleType, special, tmp, i, eventPath = [ elem || document ], type = hasOwn.call(event, "type") ? event.type : event, namespaces = hasOwn.call(event, "namespace") ? event.namespace.split(".") : [];
            cur = tmp = elem = elem || document;
            if (elem.nodeType === 3 || elem.nodeType === 8) {
                return;
            }
            if (rfocusMorph.test(type + jQuery.event.triggered)) {
                return;
            }
            if (type.indexOf(".") >= 0) {
                namespaces = type.split(".");
                type = namespaces.shift();
                namespaces.sort();
            }
            ontype = type.indexOf(":") < 0 && "on" + type;
            event = event[jQuery.expando] ? event : new jQuery.Event(type, typeof event === "object" && event);
            event.isTrigger = onlyHandlers ? 2 : 3;
            event.namespace = namespaces.join(".");
            event.namespace_re = event.namespace ? new RegExp("(^|\\.)" + namespaces.join("\\.(?:.*\\.|)") + "(\\.|$)") : null;
            event.result = undefined;
            if (!event.target) {
                event.target = elem;
            }
            data = data == null ? [ event ] : jQuery.makeArray(data, [ event ]);
            special = jQuery.event.special[type] || {};
            if (!onlyHandlers && special.trigger && special.trigger.apply(elem, data) === false) {
                return;
            }
            if (!onlyHandlers && !special.noBubble && !jQuery.isWindow(elem)) {
                bubbleType = special.delegateType || type;
                if (!rfocusMorph.test(bubbleType + type)) {
                    cur = cur.parentNode;
                }
                for (;cur; cur = cur.parentNode) {
                    eventPath.push(cur);
                    tmp = cur;
                }
                if (tmp === (elem.ownerDocument || document)) {
                    eventPath.push(tmp.defaultView || tmp.parentWindow || window);
                }
            }
            i = 0;
            while ((cur = eventPath[i++]) && !event.isPropagationStopped()) {
                event.type = i > 1 ? bubbleType : special.bindType || type;
                handle = (jQuery._data(cur, "events") || {})[event.type] && jQuery._data(cur, "handle");
                if (handle) {
                    handle.apply(cur, data);
                }
                handle = ontype && cur[ontype];
                if (handle && handle.apply && jQuery.acceptData(cur)) {
                    event.result = handle.apply(cur, data);
                    if (event.result === false) {
                        event.preventDefault();
                    }
                }
            }
            event.type = type;
            if (!onlyHandlers && !event.isDefaultPrevented()) {
                if ((!special._default || special._default.apply(eventPath.pop(), data) === false) && jQuery.acceptData(elem)) {
                    if (ontype && elem[type] && !jQuery.isWindow(elem)) {
                        tmp = elem[ontype];
                        if (tmp) {
                            elem[ontype] = null;
                        }
                        jQuery.event.triggered = type;
                        try {
                            elem[type]();
                        } catch (e) {}
                        jQuery.event.triggered = undefined;
                        if (tmp) {
                            elem[ontype] = tmp;
                        }
                    }
                }
            }
            return event.result;
        },
        dispatch: function(event) {
            event = jQuery.event.fix(event);
            var i, ret, handleObj, matched, j, handlerQueue = [], args = slice.call(arguments), handlers = (jQuery._data(this, "events") || {})[event.type] || [], special = jQuery.event.special[event.type] || {};
            args[0] = event;
            event.delegateTarget = this;
            if (special.preDispatch && special.preDispatch.call(this, event) === false) {
                return;
            }
            handlerQueue = jQuery.event.handlers.call(this, event, handlers);
            i = 0;
            while ((matched = handlerQueue[i++]) && !event.isPropagationStopped()) {
                event.currentTarget = matched.elem;
                j = 0;
                while ((handleObj = matched.handlers[j++]) && !event.isImmediatePropagationStopped()) {
                    if (!event.namespace_re || event.namespace_re.test(handleObj.namespace)) {
                        event.handleObj = handleObj;
                        event.data = handleObj.data;
                        ret = ((jQuery.event.special[handleObj.origType] || {}).handle || handleObj.handler).apply(matched.elem, args);
                        if (ret !== undefined) {
                            if ((event.result = ret) === false) {
                                event.preventDefault();
                                event.stopPropagation();
                            }
                        }
                    }
                }
            }
            if (special.postDispatch) {
                special.postDispatch.call(this, event);
            }
            return event.result;
        },
        handlers: function(event, handlers) {
            var sel, handleObj, matches, i, handlerQueue = [], delegateCount = handlers.delegateCount, cur = event.target;
            if (delegateCount && cur.nodeType && (!event.button || event.type !== "click")) {
                for (;cur != this; cur = cur.parentNode || this) {
                    if (cur.nodeType === 1 && (cur.disabled !== true || event.type !== "click")) {
                        matches = [];
                        for (i = 0; i < delegateCount; i++) {
                            handleObj = handlers[i];
                            sel = handleObj.selector + " ";
                            if (matches[sel] === undefined) {
                                matches[sel] = handleObj.needsContext ? jQuery(sel, this).index(cur) >= 0 : jQuery.find(sel, this, null, [ cur ]).length;
                            }
                            if (matches[sel]) {
                                matches.push(handleObj);
                            }
                        }
                        if (matches.length) {
                            handlerQueue.push({
                                elem: cur,
                                handlers: matches
                            });
                        }
                    }
                }
            }
            if (delegateCount < handlers.length) {
                handlerQueue.push({
                    elem: this,
                    handlers: handlers.slice(delegateCount)
                });
            }
            return handlerQueue;
        },
        fix: function(event) {
            if (event[jQuery.expando]) {
                return event;
            }
            var i, prop, copy, type = event.type, originalEvent = event, fixHook = this.fixHooks[type];
            if (!fixHook) {
                this.fixHooks[type] = fixHook = rmouseEvent.test(type) ? this.mouseHooks : rkeyEvent.test(type) ? this.keyHooks : {};
            }
            copy = fixHook.props ? this.props.concat(fixHook.props) : this.props;
            event = new jQuery.Event(originalEvent);
            i = copy.length;
            while (i--) {
                prop = copy[i];
                event[prop] = originalEvent[prop];
            }
            if (!event.target) {
                event.target = originalEvent.srcElement || document;
            }
            if (event.target.nodeType === 3) {
                event.target = event.target.parentNode;
            }
            event.metaKey = !!event.metaKey;
            return fixHook.filter ? fixHook.filter(event, originalEvent) : event;
        },
        props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
        fixHooks: {},
        keyHooks: {
            props: "char charCode key keyCode".split(" "),
            filter: function(event, original) {
                if (event.which == null) {
                    event.which = original.charCode != null ? original.charCode : original.keyCode;
                }
                return event;
            }
        },
        mouseHooks: {
            props: "button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
            filter: function(event, original) {
                var body, eventDoc, doc, button = original.button, fromElement = original.fromElement;
                if (event.pageX == null && original.clientX != null) {
                    eventDoc = event.target.ownerDocument || document;
                    doc = eventDoc.documentElement;
                    body = eventDoc.body;
                    event.pageX = original.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);
                    event.pageY = original.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);
                }
                if (!event.relatedTarget && fromElement) {
                    event.relatedTarget = fromElement === event.target ? original.toElement : fromElement;
                }
                if (!event.which && button !== undefined) {
                    event.which = button & 1 ? 1 : button & 2 ? 3 : button & 4 ? 2 : 0;
                }
                return event;
            }
        },
        special: {
            load: {
                noBubble: true
            },
            focus: {
                trigger: function() {
                    if (this !== safeActiveElement() && this.focus) {
                        try {
                            this.focus();
                            return false;
                        } catch (e) {}
                    }
                },
                delegateType: "focusin"
            },
            blur: {
                trigger: function() {
                    if (this === safeActiveElement() && this.blur) {
                        this.blur();
                        return false;
                    }
                },
                delegateType: "focusout"
            },
            click: {
                trigger: function() {
                    if (jQuery.nodeName(this, "input") && this.type === "checkbox" && this.click) {
                        this.click();
                        return false;
                    }
                },
                _default: function(event) {
                    return jQuery.nodeName(event.target, "a");
                }
            },
            beforeunload: {
                postDispatch: function(event) {
                    if (event.result !== undefined && event.originalEvent) {
                        event.originalEvent.returnValue = event.result;
                    }
                }
            }
        },
        simulate: function(type, elem, event, bubble) {
            var e = jQuery.extend(new jQuery.Event(), event, {
                type: type,
                isSimulated: true,
                originalEvent: {}
            });
            if (bubble) {
                jQuery.event.trigger(e, null, elem);
            } else {
                jQuery.event.dispatch.call(elem, e);
            }
            if (e.isDefaultPrevented()) {
                event.preventDefault();
            }
        }
    };
    jQuery.removeEvent = document.removeEventListener ? function(elem, type, handle) {
        if (elem.removeEventListener) {
            elem.removeEventListener(type, handle, false);
        }
    } : function(elem, type, handle) {
        var name = "on" + type;
        if (elem.detachEvent) {
            if (typeof elem[name] === strundefined) {
                elem[name] = null;
            }
            elem.detachEvent(name, handle);
        }
    };
    jQuery.Event = function(src, props) {
        if (!(this instanceof jQuery.Event)) {
            return new jQuery.Event(src, props);
        }
        if (src && src.type) {
            this.originalEvent = src;
            this.type = src.type;
            this.isDefaultPrevented = src.defaultPrevented || src.defaultPrevented === undefined && src.returnValue === false ? returnTrue : returnFalse;
        } else {
            this.type = src;
        }
        if (props) {
            jQuery.extend(this, props);
        }
        this.timeStamp = src && src.timeStamp || jQuery.now();
        this[jQuery.expando] = true;
    };
    jQuery.Event.prototype = {
        isDefaultPrevented: returnFalse,
        isPropagationStopped: returnFalse,
        isImmediatePropagationStopped: returnFalse,
        preventDefault: function() {
            var e = this.originalEvent;
            this.isDefaultPrevented = returnTrue;
            if (!e) {
                return;
            }
            if (e.preventDefault) {
                e.preventDefault();
            } else {
                e.returnValue = false;
            }
        },
        stopPropagation: function() {
            var e = this.originalEvent;
            this.isPropagationStopped = returnTrue;
            if (!e) {
                return;
            }
            if (e.stopPropagation) {
                e.stopPropagation();
            }
            e.cancelBubble = true;
        },
        stopImmediatePropagation: function() {
            var e = this.originalEvent;
            this.isImmediatePropagationStopped = returnTrue;
            if (e && e.stopImmediatePropagation) {
                e.stopImmediatePropagation();
            }
            this.stopPropagation();
        }
    };
    jQuery.each({
        mouseenter: "mouseover",
        mouseleave: "mouseout",
        pointerenter: "pointerover",
        pointerleave: "pointerout"
    }, function(orig, fix) {
        jQuery.event.special[orig] = {
            delegateType: fix,
            bindType: fix,
            handle: function(event) {
                var ret, target = this, related = event.relatedTarget, handleObj = event.handleObj;
                if (!related || related !== target && !jQuery.contains(target, related)) {
                    event.type = handleObj.origType;
                    ret = handleObj.handler.apply(this, arguments);
                    event.type = fix;
                }
                return ret;
            }
        };
    });
    if (!support.submitBubbles) {
        jQuery.event.special.submit = {
            setup: function() {
                if (jQuery.nodeName(this, "form")) {
                    return false;
                }
                jQuery.event.add(this, "click._submit keypress._submit", function(e) {
                    var elem = e.target, form = jQuery.nodeName(elem, "input") || jQuery.nodeName(elem, "button") ? elem.form : undefined;
                    if (form && !jQuery._data(form, "submitBubbles")) {
                        jQuery.event.add(form, "submit._submit", function(event) {
                            event._submit_bubble = true;
                        });
                        jQuery._data(form, "submitBubbles", true);
                    }
                });
            },
            postDispatch: function(event) {
                if (event._submit_bubble) {
                    delete event._submit_bubble;
                    if (this.parentNode && !event.isTrigger) {
                        jQuery.event.simulate("submit", this.parentNode, event, true);
                    }
                }
            },
            teardown: function() {
                if (jQuery.nodeName(this, "form")) {
                    return false;
                }
                jQuery.event.remove(this, "._submit");
            }
        };
    }
    if (!support.changeBubbles) {
        jQuery.event.special.change = {
            setup: function() {
                if (rformElems.test(this.nodeName)) {
                    if (this.type === "checkbox" || this.type === "radio") {
                        jQuery.event.add(this, "propertychange._change", function(event) {
                            if (event.originalEvent.propertyName === "checked") {
                                this._just_changed = true;
                            }
                        });
                        jQuery.event.add(this, "click._change", function(event) {
                            if (this._just_changed && !event.isTrigger) {
                                this._just_changed = false;
                            }
                            jQuery.event.simulate("change", this, event, true);
                        });
                    }
                    return false;
                }
                jQuery.event.add(this, "beforeactivate._change", function(e) {
                    var elem = e.target;
                    if (rformElems.test(elem.nodeName) && !jQuery._data(elem, "changeBubbles")) {
                        jQuery.event.add(elem, "change._change", function(event) {
                            if (this.parentNode && !event.isSimulated && !event.isTrigger) {
                                jQuery.event.simulate("change", this.parentNode, event, true);
                            }
                        });
                        jQuery._data(elem, "changeBubbles", true);
                    }
                });
            },
            handle: function(event) {
                var elem = event.target;
                if (this !== elem || event.isSimulated || event.isTrigger || elem.type !== "radio" && elem.type !== "checkbox") {
                    return event.handleObj.handler.apply(this, arguments);
                }
            },
            teardown: function() {
                jQuery.event.remove(this, "._change");
                return !rformElems.test(this.nodeName);
            }
        };
    }
    if (!support.focusinBubbles) {
        jQuery.each({
            focus: "focusin",
            blur: "focusout"
        }, function(orig, fix) {
            var handler = function(event) {
                jQuery.event.simulate(fix, event.target, jQuery.event.fix(event), true);
            };
            jQuery.event.special[fix] = {
                setup: function() {
                    var doc = this.ownerDocument || this, attaches = jQuery._data(doc, fix);
                    if (!attaches) {
                        doc.addEventListener(orig, handler, true);
                    }
                    jQuery._data(doc, fix, (attaches || 0) + 1);
                },
                teardown: function() {
                    var doc = this.ownerDocument || this, attaches = jQuery._data(doc, fix) - 1;
                    if (!attaches) {
                        doc.removeEventListener(orig, handler, true);
                        jQuery._removeData(doc, fix);
                    } else {
                        jQuery._data(doc, fix, attaches);
                    }
                }
            };
        });
    }
    jQuery.fn.extend({
        on: function(types, selector, data, fn, one) {
            var type, origFn;
            if (typeof types === "object") {
                if (typeof selector !== "string") {
                    data = data || selector;
                    selector = undefined;
                }
                for (type in types) {
                    this.on(type, selector, data, types[type], one);
                }
                return this;
            }
            if (data == null && fn == null) {
                fn = selector;
                data = selector = undefined;
            } else if (fn == null) {
                if (typeof selector === "string") {
                    fn = data;
                    data = undefined;
                } else {
                    fn = data;
                    data = selector;
                    selector = undefined;
                }
            }
            if (fn === false) {
                fn = returnFalse;
            } else if (!fn) {
                return this;
            }
            if (one === 1) {
                origFn = fn;
                fn = function(event) {
                    jQuery().off(event);
                    return origFn.apply(this, arguments);
                };
                fn.guid = origFn.guid || (origFn.guid = jQuery.guid++);
            }
            return this.each(function() {
                jQuery.event.add(this, types, fn, data, selector);
            });
        },
        one: function(types, selector, data, fn) {
            return this.on(types, selector, data, fn, 1);
        },
        off: function(types, selector, fn) {
            var handleObj, type;
            if (types && types.preventDefault && types.handleObj) {
                handleObj = types.handleObj;
                jQuery(types.delegateTarget).off(handleObj.namespace ? handleObj.origType + "." + handleObj.namespace : handleObj.origType, handleObj.selector, handleObj.handler);
                return this;
            }
            if (typeof types === "object") {
                for (type in types) {
                    this.off(type, selector, types[type]);
                }
                return this;
            }
            if (selector === false || typeof selector === "function") {
                fn = selector;
                selector = undefined;
            }
            if (fn === false) {
                fn = returnFalse;
            }
            return this.each(function() {
                jQuery.event.remove(this, types, fn, selector);
            });
        },
        trigger: function(type, data) {
            return this.each(function() {
                jQuery.event.trigger(type, data, this);
            });
        },
        triggerHandler: function(type, data) {
            var elem = this[0];
            if (elem) {
                return jQuery.event.trigger(type, data, elem, true);
            }
        }
    });
    function createSafeFragment(document) {
        var list = nodeNames.split("|"), safeFrag = document.createDocumentFragment();
        if (safeFrag.createElement) {
            while (list.length) {
                safeFrag.createElement(list.pop());
            }
        }
        return safeFrag;
    }
    var nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|" + "header|hgroup|mark|meter|nav|output|progress|section|summary|time|video", rinlinejQuery = / jQuery\d+="(?:null|\d+)"/g, rnoshimcache = new RegExp("<(?:" + nodeNames + ")[\\s/>]", "i"), rleadingWhitespace = /^\s+/, rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, rtagName = /<([\w:]+)/, rtbody = /<tbody/i, rhtml = /<|&#?\w+;/, rnoInnerhtml = /<(?:script|style|link)/i, rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i, rscriptType = /^$|\/(?:java|ecma)script/i, rscriptTypeMasked = /^true\/(.*)/, rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, wrapMap = {
        option: [ 1, "<select multiple='multiple'>", "</select>" ],
        legend: [ 1, "<fieldset>", "</fieldset>" ],
        area: [ 1, "<map>", "</map>" ],
        param: [ 1, "<object>", "</object>" ],
        thead: [ 1, "<table>", "</table>" ],
        tr: [ 2, "<table><tbody>", "</tbody></table>" ],
        col: [ 2, "<table><tbody></tbody><colgroup>", "</colgroup></table>" ],
        td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
        _default: support.htmlSerialize ? [ 0, "", "" ] : [ 1, "X<div>", "</div>" ]
    }, safeFragment = createSafeFragment(document), fragmentDiv = safeFragment.appendChild(document.createElement("div"));
    wrapMap.optgroup = wrapMap.option;
    wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
    wrapMap.th = wrapMap.td;
    function getAll(context, tag) {
        var elems, elem, i = 0, found = typeof context.getElementsByTagName !== strundefined ? context.getElementsByTagName(tag || "*") : typeof context.querySelectorAll !== strundefined ? context.querySelectorAll(tag || "*") : undefined;
        if (!found) {
            for (found = [], elems = context.childNodes || context; (elem = elems[i]) != null; i++) {
                if (!tag || jQuery.nodeName(elem, tag)) {
                    found.push(elem);
                } else {
                    jQuery.merge(found, getAll(elem, tag));
                }
            }
        }
        return tag === undefined || tag && jQuery.nodeName(context, tag) ? jQuery.merge([ context ], found) : found;
    }
    function fixDefaultChecked(elem) {
        if (rcheckableType.test(elem.type)) {
            elem.defaultChecked = elem.checked;
        }
    }
    function manipulationTarget(elem, content) {
        return jQuery.nodeName(elem, "table") && jQuery.nodeName(content.nodeType !== 11 ? content : content.firstChild, "tr") ? elem.getElementsByTagName("tbody")[0] || elem.appendChild(elem.ownerDocument.createElement("tbody")) : elem;
    }
    function disableScript(elem) {
        elem.type = (jQuery.find.attr(elem, "type") !== null) + "/" + elem.type;
        return elem;
    }
    function restoreScript(elem) {
        var match = rscriptTypeMasked.exec(elem.type);
        if (match) {
            elem.type = match[1];
        } else {
            elem.removeAttribute("type");
        }
        return elem;
    }
    function setGlobalEval(elems, refElements) {
        var elem, i = 0;
        for (;(elem = elems[i]) != null; i++) {
            jQuery._data(elem, "globalEval", !refElements || jQuery._data(refElements[i], "globalEval"));
        }
    }
    function cloneCopyEvent(src, dest) {
        if (dest.nodeType !== 1 || !jQuery.hasData(src)) {
            return;
        }
        var type, i, l, oldData = jQuery._data(src), curData = jQuery._data(dest, oldData), events = oldData.events;
        if (events) {
            delete curData.handle;
            curData.events = {};
            for (type in events) {
                for (i = 0, l = events[type].length; i < l; i++) {
                    jQuery.event.add(dest, type, events[type][i]);
                }
            }
        }
        if (curData.data) {
            curData.data = jQuery.extend({}, curData.data);
        }
    }
    function fixCloneNodeIssues(src, dest) {
        var nodeName, e, data;
        if (dest.nodeType !== 1) {
            return;
        }
        nodeName = dest.nodeName.toLowerCase();
        if (!support.noCloneEvent && dest[jQuery.expando]) {
            data = jQuery._data(dest);
            for (e in data.events) {
                jQuery.removeEvent(dest, e, data.handle);
            }
            dest.removeAttribute(jQuery.expando);
        }
        if (nodeName === "script" && dest.text !== src.text) {
            disableScript(dest).text = src.text;
            restoreScript(dest);
        } else if (nodeName === "object") {
            if (dest.parentNode) {
                dest.outerHTML = src.outerHTML;
            }
            if (support.html5Clone && (src.innerHTML && !jQuery.trim(dest.innerHTML))) {
                dest.innerHTML = src.innerHTML;
            }
        } else if (nodeName === "input" && rcheckableType.test(src.type)) {
            dest.defaultChecked = dest.checked = src.checked;
            if (dest.value !== src.value) {
                dest.value = src.value;
            }
        } else if (nodeName === "option") {
            dest.defaultSelected = dest.selected = src.defaultSelected;
        } else if (nodeName === "input" || nodeName === "textarea") {
            dest.defaultValue = src.defaultValue;
        }
    }
    jQuery.extend({
        clone: function(elem, dataAndEvents, deepDataAndEvents) {
            var destElements, node, clone, i, srcElements, inPage = jQuery.contains(elem.ownerDocument, elem);
            if (support.html5Clone || jQuery.isXMLDoc(elem) || !rnoshimcache.test("<" + elem.nodeName + ">")) {
                clone = elem.cloneNode(true);
            } else {
                fragmentDiv.innerHTML = elem.outerHTML;
                fragmentDiv.removeChild(clone = fragmentDiv.firstChild);
            }
            if ((!support.noCloneEvent || !support.noCloneChecked) && (elem.nodeType === 1 || elem.nodeType === 11) && !jQuery.isXMLDoc(elem)) {
                destElements = getAll(clone);
                srcElements = getAll(elem);
                for (i = 0; (node = srcElements[i]) != null; ++i) {
                    if (destElements[i]) {
                        fixCloneNodeIssues(node, destElements[i]);
                    }
                }
            }
            if (dataAndEvents) {
                if (deepDataAndEvents) {
                    srcElements = srcElements || getAll(elem);
                    destElements = destElements || getAll(clone);
                    for (i = 0; (node = srcElements[i]) != null; i++) {
                        cloneCopyEvent(node, destElements[i]);
                    }
                } else {
                    cloneCopyEvent(elem, clone);
                }
            }
            destElements = getAll(clone, "script");
            if (destElements.length > 0) {
                setGlobalEval(destElements, !inPage && getAll(elem, "script"));
            }
            destElements = srcElements = node = null;
            return clone;
        },
        buildFragment: function(elems, context, scripts, selection) {
            var j, elem, contains, tmp, tag, tbody, wrap, l = elems.length, safe = createSafeFragment(context), nodes = [], i = 0;
            for (;i < l; i++) {
                elem = elems[i];
                if (elem || elem === 0) {
                    if (jQuery.type(elem) === "object") {
                        jQuery.merge(nodes, elem.nodeType ? [ elem ] : elem);
                    } else if (!rhtml.test(elem)) {
                        nodes.push(context.createTextNode(elem));
                    } else {
                        tmp = tmp || safe.appendChild(context.createElement("div"));
                        tag = (rtagName.exec(elem) || [ "", "" ])[1].toLowerCase();
                        wrap = wrapMap[tag] || wrapMap._default;
                        tmp.innerHTML = wrap[1] + elem.replace(rxhtmlTag, "<$1></$2>") + wrap[2];
                        j = wrap[0];
                        while (j--) {
                            tmp = tmp.lastChild;
                        }
                        if (!support.leadingWhitespace && rleadingWhitespace.test(elem)) {
                            nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0]));
                        }
                        if (!support.tbody) {
                            elem = tag === "table" && !rtbody.test(elem) ? tmp.firstChild : wrap[1] === "<table>" && !rtbody.test(elem) ? tmp : 0;
                            j = elem && elem.childNodes.length;
                            while (j--) {
                                if (jQuery.nodeName(tbody = elem.childNodes[j], "tbody") && !tbody.childNodes.length) {
                                    elem.removeChild(tbody);
                                }
                            }
                        }
                        jQuery.merge(nodes, tmp.childNodes);
                        tmp.textContent = "";
                        while (tmp.firstChild) {
                            tmp.removeChild(tmp.firstChild);
                        }
                        tmp = safe.lastChild;
                    }
                }
            }
            if (tmp) {
                safe.removeChild(tmp);
            }
            if (!support.appendChecked) {
                jQuery.grep(getAll(nodes, "input"), fixDefaultChecked);
            }
            i = 0;
            while (elem = nodes[i++]) {
                if (selection && jQuery.inArray(elem, selection) !== -1) {
                    continue;
                }
                contains = jQuery.contains(elem.ownerDocument, elem);
                tmp = getAll(safe.appendChild(elem), "script");
                if (contains) {
                    setGlobalEval(tmp);
                }
                if (scripts) {
                    j = 0;
                    while (elem = tmp[j++]) {
                        if (rscriptType.test(elem.type || "")) {
                            scripts.push(elem);
                        }
                    }
                }
            }
            tmp = null;
            return safe;
        },
        cleanData: function(elems, acceptData) {
            var elem, type, id, data, i = 0, internalKey = jQuery.expando, cache = jQuery.cache, deleteExpando = support.deleteExpando, special = jQuery.event.special;
            for (;(elem = elems[i]) != null; i++) {
                if (acceptData || jQuery.acceptData(elem)) {
                    id = elem[internalKey];
                    data = id && cache[id];
                    if (data) {
                        if (data.events) {
                            for (type in data.events) {
                                if (special[type]) {
                                    jQuery.event.remove(elem, type);
                                } else {
                                    jQuery.removeEvent(elem, type, data.handle);
                                }
                            }
                        }
                        if (cache[id]) {
                            delete cache[id];
                            if (deleteExpando) {
                                delete elem[internalKey];
                            } else if (typeof elem.removeAttribute !== strundefined) {
                                elem.removeAttribute(internalKey);
                            } else {
                                elem[internalKey] = null;
                            }
                            deletedIds.push(id);
                        }
                    }
                }
            }
        }
    });
    jQuery.fn.extend({
        text: function(value) {
            return access(this, function(value) {
                return value === undefined ? jQuery.text(this) : this.empty().append((this[0] && this[0].ownerDocument || document).createTextNode(value));
            }, null, value, arguments.length);
        },
        append: function() {
            return this.domManip(arguments, function(elem) {
                if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
                    var target = manipulationTarget(this, elem);
                    target.appendChild(elem);
                }
            });
        },
        prepend: function() {
            return this.domManip(arguments, function(elem) {
                if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
                    var target = manipulationTarget(this, elem);
                    target.insertBefore(elem, target.firstChild);
                }
            });
        },
        before: function() {
            return this.domManip(arguments, function(elem) {
                if (this.parentNode) {
                    this.parentNode.insertBefore(elem, this);
                }
            });
        },
        after: function() {
            return this.domManip(arguments, function(elem) {
                if (this.parentNode) {
                    this.parentNode.insertBefore(elem, this.nextSibling);
                }
            });
        },
        remove: function(selector, keepData) {
            var elem, elems = selector ? jQuery.filter(selector, this) : this, i = 0;
            for (;(elem = elems[i]) != null; i++) {
                if (!keepData && elem.nodeType === 1) {
                    jQuery.cleanData(getAll(elem));
                }
                if (elem.parentNode) {
                    if (keepData && jQuery.contains(elem.ownerDocument, elem)) {
                        setGlobalEval(getAll(elem, "script"));
                    }
                    elem.parentNode.removeChild(elem);
                }
            }
            return this;
        },
        empty: function() {
            var elem, i = 0;
            for (;(elem = this[i]) != null; i++) {
                if (elem.nodeType === 1) {
                    jQuery.cleanData(getAll(elem, false));
                }
                while (elem.firstChild) {
                    elem.removeChild(elem.firstChild);
                }
                if (elem.options && jQuery.nodeName(elem, "select")) {
                    elem.options.length = 0;
                }
            }
            return this;
        },
        clone: function(dataAndEvents, deepDataAndEvents) {
            dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
            deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;
            return this.map(function() {
                return jQuery.clone(this, dataAndEvents, deepDataAndEvents);
            });
        },
        html: function(value) {
            return access(this, function(value) {
                var elem = this[0] || {}, i = 0, l = this.length;
                if (value === undefined) {
                    return elem.nodeType === 1 ? elem.innerHTML.replace(rinlinejQuery, "") : undefined;
                }
                if (typeof value === "string" && !rnoInnerhtml.test(value) && (support.htmlSerialize || !rnoshimcache.test(value)) && (support.leadingWhitespace || !rleadingWhitespace.test(value)) && !wrapMap[(rtagName.exec(value) || [ "", "" ])[1].toLowerCase()]) {
                    value = value.replace(rxhtmlTag, "<$1></$2>");
                    try {
                        for (;i < l; i++) {
                            elem = this[i] || {};
                            if (elem.nodeType === 1) {
                                jQuery.cleanData(getAll(elem, false));
                                elem.innerHTML = value;
                            }
                        }
                        elem = 0;
                    } catch (e) {}
                }
                if (elem) {
                    this.empty().append(value);
                }
            }, null, value, arguments.length);
        },
        replaceWith: function() {
            var arg = arguments[0];
            this.domManip(arguments, function(elem) {
                arg = this.parentNode;
                jQuery.cleanData(getAll(this));
                if (arg) {
                    arg.replaceChild(elem, this);
                }
            });
            return arg && (arg.length || arg.nodeType) ? this : this.remove();
        },
        detach: function(selector) {
            return this.remove(selector, true);
        },
        domManip: function(args, callback) {
            args = concat.apply([], args);
            var first, node, hasScripts, scripts, doc, fragment, i = 0, l = this.length, set = this, iNoClone = l - 1, value = args[0], isFunction = jQuery.isFunction(value);
            if (isFunction || l > 1 && typeof value === "string" && !support.checkClone && rchecked.test(value)) {
                return this.each(function(index) {
                    var self = set.eq(index);
                    if (isFunction) {
                        args[0] = value.call(this, index, self.html());
                    }
                    self.domManip(args, callback);
                });
            }
            if (l) {
                fragment = jQuery.buildFragment(args, this[0].ownerDocument, false, this);
                first = fragment.firstChild;
                if (fragment.childNodes.length === 1) {
                    fragment = first;
                }
                if (first) {
                    scripts = jQuery.map(getAll(fragment, "script"), disableScript);
                    hasScripts = scripts.length;
                    for (;i < l; i++) {
                        node = fragment;
                        if (i !== iNoClone) {
                            node = jQuery.clone(node, true, true);
                            if (hasScripts) {
                                jQuery.merge(scripts, getAll(node, "script"));
                            }
                        }
                        callback.call(this[i], node, i);
                    }
                    if (hasScripts) {
                        doc = scripts[scripts.length - 1].ownerDocument;
                        jQuery.map(scripts, restoreScript);
                        for (i = 0; i < hasScripts; i++) {
                            node = scripts[i];
                            if (rscriptType.test(node.type || "") && !jQuery._data(node, "globalEval") && jQuery.contains(doc, node)) {
                                if (node.src) {
                                    if (jQuery._evalUrl) {
                                        jQuery._evalUrl(node.src);
                                    }
                                } else {
                                    jQuery.globalEval((node.text || node.textContent || node.innerHTML || "").replace(rcleanScript, ""));
                                }
                            }
                        }
                    }
                    fragment = first = null;
                }
            }
            return this;
        }
    });
    jQuery.each({
        appendTo: "append",
        prependTo: "prepend",
        insertBefore: "before",
        insertAfter: "after",
        replaceAll: "replaceWith"
    }, function(name, original) {
        jQuery.fn[name] = function(selector) {
            var elems, i = 0, ret = [], insert = jQuery(selector), last = insert.length - 1;
            for (;i <= last; i++) {
                elems = i === last ? this : this.clone(true);
                jQuery(insert[i])[original](elems);
                push.apply(ret, elems.get());
            }
            return this.pushStack(ret);
        };
    });
    var iframe, elemdisplay = {};
    function actualDisplay(name, doc) {
        var style, elem = jQuery(doc.createElement(name)).appendTo(doc.body), display = window.getDefaultComputedStyle && (style = window.getDefaultComputedStyle(elem[0])) ? style.display : jQuery.css(elem[0], "display");
        elem.detach();
        return display;
    }
    function defaultDisplay(nodeName) {
        var doc = document, display = elemdisplay[nodeName];
        if (!display) {
            display = actualDisplay(nodeName, doc);
            if (display === "none" || !display) {
                iframe = (iframe || jQuery("<iframe frameborder='0' width='0' height='0'/>")).appendTo(doc.documentElement);
                doc = (iframe[0].contentWindow || iframe[0].contentDocument).document;
                doc.write();
                doc.close();
                display = actualDisplay(nodeName, doc);
                iframe.detach();
            }
            elemdisplay[nodeName] = display;
        }
        return display;
    }
    (function() {
        var shrinkWrapBlocksVal;
        support.shrinkWrapBlocks = function() {
            if (shrinkWrapBlocksVal != null) {
                return shrinkWrapBlocksVal;
            }
            shrinkWrapBlocksVal = false;
            var div, body, container;
            body = document.getElementsByTagName("body")[0];
            if (!body || !body.style) {
                return;
            }
            div = document.createElement("div");
            container = document.createElement("div");
            container.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px";
            body.appendChild(container).appendChild(div);
            if (typeof div.style.zoom !== strundefined) {
                div.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" + "box-sizing:content-box;display:block;margin:0;border:0;" + "padding:1px;width:1px;zoom:1";
                div.appendChild(document.createElement("div")).style.width = "5px";
                shrinkWrapBlocksVal = div.offsetWidth !== 3;
            }
            body.removeChild(container);
            return shrinkWrapBlocksVal;
        };
    })();
    var rmargin = /^margin/;
    var rnumnonpx = new RegExp("^(" + pnum + ")(?!px)[a-z%]+$", "i");
    var getStyles, curCSS, rposition = /^(top|right|bottom|left)$/;
    if (window.getComputedStyle) {
        getStyles = function(elem) {
            return elem.ownerDocument.defaultView.getComputedStyle(elem, null);
        };
        curCSS = function(elem, name, computed) {
            var width, minWidth, maxWidth, ret, style = elem.style;
            computed = computed || getStyles(elem);
            ret = computed ? computed.getPropertyValue(name) || computed[name] : undefined;
            if (computed) {
                if (ret === "" && !jQuery.contains(elem.ownerDocument, elem)) {
                    ret = jQuery.style(elem, name);
                }
                if (rnumnonpx.test(ret) && rmargin.test(name)) {
                    width = style.width;
                    minWidth = style.minWidth;
                    maxWidth = style.maxWidth;
                    style.minWidth = style.maxWidth = style.width = ret;
                    ret = computed.width;
                    style.width = width;
                    style.minWidth = minWidth;
                    style.maxWidth = maxWidth;
                }
            }
            return ret === undefined ? ret : ret + "";
        };
    } else if (document.documentElement.currentStyle) {
        getStyles = function(elem) {
            return elem.currentStyle;
        };
        curCSS = function(elem, name, computed) {
            var left, rs, rsLeft, ret, style = elem.style;
            computed = computed || getStyles(elem);
            ret = computed ? computed[name] : undefined;
            if (ret == null && style && style[name]) {
                ret = style[name];
            }
            if (rnumnonpx.test(ret) && !rposition.test(name)) {
                left = style.left;
                rs = elem.runtimeStyle;
                rsLeft = rs && rs.left;
                if (rsLeft) {
                    rs.left = elem.currentStyle.left;
                }
                style.left = name === "fontSize" ? "1em" : ret;
                ret = style.pixelLeft + "px";
                style.left = left;
                if (rsLeft) {
                    rs.left = rsLeft;
                }
            }
            return ret === undefined ? ret : ret + "" || "auto";
        };
    }
    function addGetHookIf(conditionFn, hookFn) {
        return {
            get: function() {
                var condition = conditionFn();
                if (condition == null) {
                    return;
                }
                if (condition) {
                    delete this.get;
                    return;
                }
                return (this.get = hookFn).apply(this, arguments);
            }
        };
    }
    (function() {
        var div, style, a, pixelPositionVal, boxSizingReliableVal, reliableHiddenOffsetsVal, reliableMarginRightVal;
        div = document.createElement("div");
        div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
        a = div.getElementsByTagName("a")[0];
        style = a && a.style;
        if (!style) {
            return;
        }
        style.cssText = "float:left;opacity:.5";
        support.opacity = style.opacity === "0.5";
        support.cssFloat = !!style.cssFloat;
        div.style.backgroundClip = "content-box";
        div.cloneNode(true).style.backgroundClip = "";
        support.clearCloneStyle = div.style.backgroundClip === "content-box";
        support.boxSizing = style.boxSizing === "" || style.MozBoxSizing === "" || style.WebkitBoxSizing === "";
        jQuery.extend(support, {
            reliableHiddenOffsets: function() {
                if (reliableHiddenOffsetsVal == null) {
                    computeStyleTests();
                }
                return reliableHiddenOffsetsVal;
            },
            boxSizingReliable: function() {
                if (boxSizingReliableVal == null) {
                    computeStyleTests();
                }
                return boxSizingReliableVal;
            },
            pixelPosition: function() {
                if (pixelPositionVal == null) {
                    computeStyleTests();
                }
                return pixelPositionVal;
            },
            reliableMarginRight: function() {
                if (reliableMarginRightVal == null) {
                    computeStyleTests();
                }
                return reliableMarginRightVal;
            }
        });
        function computeStyleTests() {
            var div, body, container, contents;
            body = document.getElementsByTagName("body")[0];
            if (!body || !body.style) {
                return;
            }
            div = document.createElement("div");
            container = document.createElement("div");
            container.style.cssText = "position:absolute;border:0;width:0;height:0;top:0;left:-9999px";
            body.appendChild(container).appendChild(div);
            div.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;" + "box-sizing:border-box;display:block;margin-top:1%;top:1%;" + "border:1px;padding:1px;width:4px;position:absolute";
            pixelPositionVal = boxSizingReliableVal = false;
            reliableMarginRightVal = true;
            if (window.getComputedStyle) {
                pixelPositionVal = (window.getComputedStyle(div, null) || {}).top !== "1%";
                boxSizingReliableVal = (window.getComputedStyle(div, null) || {
                    width: "4px"
                }).width === "4px";
                contents = div.appendChild(document.createElement("div"));
                contents.style.cssText = div.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;" + "box-sizing:content-box;display:block;margin:0;border:0;padding:0";
                contents.style.marginRight = contents.style.width = "0";
                div.style.width = "1px";
                reliableMarginRightVal = !parseFloat((window.getComputedStyle(contents, null) || {}).marginRight);
            }
            div.innerHTML = "<table><tr><td></td><td>t</td></tr></table>";
            contents = div.getElementsByTagName("td");
            contents[0].style.cssText = "margin:0;border:0;padding:0;display:none";
            reliableHiddenOffsetsVal = contents[0].offsetHeight === 0;
            if (reliableHiddenOffsetsVal) {
                contents[0].style.display = "";
                contents[1].style.display = "none";
                reliableHiddenOffsetsVal = contents[0].offsetHeight === 0;
            }
            body.removeChild(container);
        }
    })();
    jQuery.swap = function(elem, options, callback, args) {
        var ret, name, old = {};
        for (name in options) {
            old[name] = elem.style[name];
            elem.style[name] = options[name];
        }
        ret = callback.apply(elem, args || []);
        for (name in options) {
            elem.style[name] = old[name];
        }
        return ret;
    };
    var ralpha = /alpha\([^)]*\)/i, ropacity = /opacity\s*=\s*([^)]*)/, rdisplayswap = /^(none|table(?!-c[ea]).+)/, rnumsplit = new RegExp("^(" + pnum + ")(.*)$", "i"), rrelNum = new RegExp("^([+-])=(" + pnum + ")", "i"), cssShow = {
        position: "absolute",
        visibility: "hidden",
        display: "block"
    }, cssNormalTransform = {
        letterSpacing: "0",
        fontWeight: "400"
    }, cssPrefixes = [ "Webkit", "O", "Moz", "ms" ];
    function vendorPropName(style, name) {
        if (name in style) {
            return name;
        }
        var capName = name.charAt(0).toUpperCase() + name.slice(1), origName = name, i = cssPrefixes.length;
        while (i--) {
            name = cssPrefixes[i] + capName;
            if (name in style) {
                return name;
            }
        }
        return origName;
    }
    function showHide(elements, show) {
        var display, elem, hidden, values = [], index = 0, length = elements.length;
        for (;index < length; index++) {
            elem = elements[index];
            if (!elem.style) {
                continue;
            }
            values[index] = jQuery._data(elem, "olddisplay");
            display = elem.style.display;
            if (show) {
                if (!values[index] && display === "none") {
                    elem.style.display = "";
                }
                if (elem.style.display === "" && isHidden(elem)) {
                    values[index] = jQuery._data(elem, "olddisplay", defaultDisplay(elem.nodeName));
                }
            } else {
                hidden = isHidden(elem);
                if (display && display !== "none" || !hidden) {
                    jQuery._data(elem, "olddisplay", hidden ? display : jQuery.css(elem, "display"));
                }
            }
        }
        for (index = 0; index < length; index++) {
            elem = elements[index];
            if (!elem.style) {
                continue;
            }
            if (!show || elem.style.display === "none" || elem.style.display === "") {
                elem.style.display = show ? values[index] || "" : "none";
            }
        }
        return elements;
    }
    function setPositiveNumber(elem, value, subtract) {
        var matches = rnumsplit.exec(value);
        return matches ? Math.max(0, matches[1] - (subtract || 0)) + (matches[2] || "px") : value;
    }
    function augmentWidthOrHeight(elem, name, extra, isBorderBox, styles) {
        var i = extra === (isBorderBox ? "border" : "content") ? 4 : name === "width" ? 1 : 0, val = 0;
        for (;i < 4; i += 2) {
            if (extra === "margin") {
                val += jQuery.css(elem, extra + cssExpand[i], true, styles);
            }
            if (isBorderBox) {
                if (extra === "content") {
                    val -= jQuery.css(elem, "padding" + cssExpand[i], true, styles);
                }
                if (extra !== "margin") {
                    val -= jQuery.css(elem, "border" + cssExpand[i] + "Width", true, styles);
                }
            } else {
                val += jQuery.css(elem, "padding" + cssExpand[i], true, styles);
                if (extra !== "padding") {
                    val += jQuery.css(elem, "border" + cssExpand[i] + "Width", true, styles);
                }
            }
        }
        return val;
    }
    function getWidthOrHeight(elem, name, extra) {
        var valueIsBorderBox = true, val = name === "width" ? elem.offsetWidth : elem.offsetHeight, styles = getStyles(elem), isBorderBox = support.boxSizing && jQuery.css(elem, "boxSizing", false, styles) === "border-box";
        if (val <= 0 || val == null) {
            val = curCSS(elem, name, styles);
            if (val < 0 || val == null) {
                val = elem.style[name];
            }
            if (rnumnonpx.test(val)) {
                return val;
            }
            valueIsBorderBox = isBorderBox && (support.boxSizingReliable() || val === elem.style[name]);
            val = parseFloat(val) || 0;
        }
        return val + augmentWidthOrHeight(elem, name, extra || (isBorderBox ? "border" : "content"), valueIsBorderBox, styles) + "px";
    }
    jQuery.extend({
        cssHooks: {
            opacity: {
                get: function(elem, computed) {
                    if (computed) {
                        var ret = curCSS(elem, "opacity");
                        return ret === "" ? "1" : ret;
                    }
                }
            }
        },
        cssNumber: {
            columnCount: true,
            fillOpacity: true,
            flexGrow: true,
            flexShrink: true,
            fontWeight: true,
            lineHeight: true,
            opacity: true,
            order: true,
            orphans: true,
            widows: true,
            zIndex: true,
            zoom: true
        },
        cssProps: {
            float: support.cssFloat ? "cssFloat" : "styleFloat"
        },
        style: function(elem, name, value, extra) {
            if (!elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style) {
                return;
            }
            var ret, type, hooks, origName = jQuery.camelCase(name), style = elem.style;
            name = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(style, origName));
            hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName];
            if (value !== undefined) {
                type = typeof value;
                if (type === "string" && (ret = rrelNum.exec(value))) {
                    value = (ret[1] + 1) * ret[2] + parseFloat(jQuery.css(elem, name));
                    type = "number";
                }
                if (value == null || value !== value) {
                    return;
                }
                if (type === "number" && !jQuery.cssNumber[origName]) {
                    value += "px";
                }
                if (!support.clearCloneStyle && value === "" && name.indexOf("background") === 0) {
                    style[name] = "inherit";
                }
                if (!hooks || !("set" in hooks) || (value = hooks.set(elem, value, extra)) !== undefined) {
                    try {
                        style[name] = value;
                    } catch (e) {}
                }
            } else {
                if (hooks && "get" in hooks && (ret = hooks.get(elem, false, extra)) !== undefined) {
                    return ret;
                }
                return style[name];
            }
        },
        css: function(elem, name, extra, styles) {
            var num, val, hooks, origName = jQuery.camelCase(name);
            name = jQuery.cssProps[origName] || (jQuery.cssProps[origName] = vendorPropName(elem.style, origName));
            hooks = jQuery.cssHooks[name] || jQuery.cssHooks[origName];
            if (hooks && "get" in hooks) {
                val = hooks.get(elem, true, extra);
            }
            if (val === undefined) {
                val = curCSS(elem, name, styles);
            }
            if (val === "normal" && name in cssNormalTransform) {
                val = cssNormalTransform[name];
            }
            if (extra === "" || extra) {
                num = parseFloat(val);
                return extra === true || jQuery.isNumeric(num) ? num || 0 : val;
            }
            return val;
        }
    });
    jQuery.each([ "height", "width" ], function(i, name) {
        jQuery.cssHooks[name] = {
            get: function(elem, computed, extra) {
                if (computed) {
                    return rdisplayswap.test(jQuery.css(elem, "display")) && elem.offsetWidth === 0 ? jQuery.swap(elem, cssShow, function() {
                        return getWidthOrHeight(elem, name, extra);
                    }) : getWidthOrHeight(elem, name, extra);
                }
            },
            set: function(elem, value, extra) {
                var styles = extra && getStyles(elem);
                return setPositiveNumber(elem, value, extra ? augmentWidthOrHeight(elem, name, extra, support.boxSizing && jQuery.css(elem, "boxSizing", false, styles) === "border-box", styles) : 0);
            }
        };
    });
    if (!support.opacity) {
        jQuery.cssHooks.opacity = {
            get: function(elem, computed) {
                return ropacity.test((computed && elem.currentStyle ? elem.currentStyle.filter : elem.style.filter) || "") ? .01 * parseFloat(RegExp.$1) + "" : computed ? "1" : "";
            },
            set: function(elem, value) {
                var style = elem.style, currentStyle = elem.currentStyle, opacity = jQuery.isNumeric(value) ? "alpha(opacity=" + value * 100 + ")" : "", filter = currentStyle && currentStyle.filter || style.filter || "";
                style.zoom = 1;
                if ((value >= 1 || value === "") && jQuery.trim(filter.replace(ralpha, "")) === "" && style.removeAttribute) {
                    style.removeAttribute("filter");
                    if (value === "" || currentStyle && !currentStyle.filter) {
                        return;
                    }
                }
                style.filter = ralpha.test(filter) ? filter.replace(ralpha, opacity) : filter + " " + opacity;
            }
        };
    }
    jQuery.cssHooks.marginRight = addGetHookIf(support.reliableMarginRight, function(elem, computed) {
        if (computed) {
            return jQuery.swap(elem, {
                display: "inline-block"
            }, curCSS, [ elem, "marginRight" ]);
        }
    });
    jQuery.each({
        margin: "",
        padding: "",
        border: "Width"
    }, function(prefix, suffix) {
        jQuery.cssHooks[prefix + suffix] = {
            expand: function(value) {
                var i = 0, expanded = {}, parts = typeof value === "string" ? value.split(" ") : [ value ];
                for (;i < 4; i++) {
                    expanded[prefix + cssExpand[i] + suffix] = parts[i] || parts[i - 2] || parts[0];
                }
                return expanded;
            }
        };
        if (!rmargin.test(prefix)) {
            jQuery.cssHooks[prefix + suffix].set = setPositiveNumber;
        }
    });
    jQuery.fn.extend({
        css: function(name, value) {
            return access(this, function(elem, name, value) {
                var styles, len, map = {}, i = 0;
                if (jQuery.isArray(name)) {
                    styles = getStyles(elem);
                    len = name.length;
                    for (;i < len; i++) {
                        map[name[i]] = jQuery.css(elem, name[i], false, styles);
                    }
                    return map;
                }
                return value !== undefined ? jQuery.style(elem, name, value) : jQuery.css(elem, name);
            }, name, value, arguments.length > 1);
        },
        show: function() {
            return showHide(this, true);
        },
        hide: function() {
            return showHide(this);
        },
        toggle: function(state) {
            if (typeof state === "boolean") {
                return state ? this.show() : this.hide();
            }
            return this.each(function() {
                if (isHidden(this)) {
                    jQuery(this).show();
                } else {
                    jQuery(this).hide();
                }
            });
        }
    });
    function Tween(elem, options, prop, end, easing) {
        return new Tween.prototype.init(elem, options, prop, end, easing);
    }
    jQuery.Tween = Tween;
    Tween.prototype = {
        constructor: Tween,
        init: function(elem, options, prop, end, easing, unit) {
            this.elem = elem;
            this.prop = prop;
            this.easing = easing || "swing";
            this.options = options;
            this.start = this.now = this.cur();
            this.end = end;
            this.unit = unit || (jQuery.cssNumber[prop] ? "" : "px");
        },
        cur: function() {
            var hooks = Tween.propHooks[this.prop];
            return hooks && hooks.get ? hooks.get(this) : Tween.propHooks._default.get(this);
        },
        run: function(percent) {
            var eased, hooks = Tween.propHooks[this.prop];
            if (this.options.duration) {
                this.pos = eased = jQuery.easing[this.easing](percent, this.options.duration * percent, 0, 1, this.options.duration);
            } else {
                this.pos = eased = percent;
            }
            this.now = (this.end - this.start) * eased + this.start;
            if (this.options.step) {
                this.options.step.call(this.elem, this.now, this);
            }
            if (hooks && hooks.set) {
                hooks.set(this);
            } else {
                Tween.propHooks._default.set(this);
            }
            return this;
        }
    };
    Tween.prototype.init.prototype = Tween.prototype;
    Tween.propHooks = {
        _default: {
            get: function(tween) {
                var result;
                if (tween.elem[tween.prop] != null && (!tween.elem.style || tween.elem.style[tween.prop] == null)) {
                    return tween.elem[tween.prop];
                }
                result = jQuery.css(tween.elem, tween.prop, "");
                return !result || result === "auto" ? 0 : result;
            },
            set: function(tween) {
                if (jQuery.fx.step[tween.prop]) {
                    jQuery.fx.step[tween.prop](tween);
                } else if (tween.elem.style && (tween.elem.style[jQuery.cssProps[tween.prop]] != null || jQuery.cssHooks[tween.prop])) {
                    jQuery.style(tween.elem, tween.prop, tween.now + tween.unit);
                } else {
                    tween.elem[tween.prop] = tween.now;
                }
            }
        }
    };
    Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
        set: function(tween) {
            if (tween.elem.nodeType && tween.elem.parentNode) {
                tween.elem[tween.prop] = tween.now;
            }
        }
    };
    jQuery.easing = {
        linear: function(p) {
            return p;
        },
        swing: function(p) {
            return .5 - Math.cos(p * Math.PI) / 2;
        }
    };
    jQuery.fx = Tween.prototype.init;
    jQuery.fx.step = {};
    var fxNow, timerId, rfxtypes = /^(?:toggle|show|hide)$/, rfxnum = new RegExp("^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i"), rrun = /queueHooks$/, animationPrefilters = [ defaultPrefilter ], tweeners = {
        "*": [ function(prop, value) {
            var tween = this.createTween(prop, value), target = tween.cur(), parts = rfxnum.exec(value), unit = parts && parts[3] || (jQuery.cssNumber[prop] ? "" : "px"), start = (jQuery.cssNumber[prop] || unit !== "px" && +target) && rfxnum.exec(jQuery.css(tween.elem, prop)), scale = 1, maxIterations = 20;
            if (start && start[3] !== unit) {
                unit = unit || start[3];
                parts = parts || [];
                start = +target || 1;
                do {
                    scale = scale || ".5";
                    start = start / scale;
                    jQuery.style(tween.elem, prop, start + unit);
                } while (scale !== (scale = tween.cur() / target) && scale !== 1 && --maxIterations);
            }
            if (parts) {
                start = tween.start = +start || +target || 0;
                tween.unit = unit;
                tween.end = parts[1] ? start + (parts[1] + 1) * parts[2] : +parts[2];
            }
            return tween;
        } ]
    };
    function createFxNow() {
        setTimeout(function() {
            fxNow = undefined;
        });
        return fxNow = jQuery.now();
    }
    function genFx(type, includeWidth) {
        var which, attrs = {
            height: type
        }, i = 0;
        includeWidth = includeWidth ? 1 : 0;
        for (;i < 4; i += 2 - includeWidth) {
            which = cssExpand[i];
            attrs["margin" + which] = attrs["padding" + which] = type;
        }
        if (includeWidth) {
            attrs.opacity = attrs.width = type;
        }
        return attrs;
    }
    function createTween(value, prop, animation) {
        var tween, collection = (tweeners[prop] || []).concat(tweeners["*"]), index = 0, length = collection.length;
        for (;index < length; index++) {
            if (tween = collection[index].call(animation, prop, value)) {
                return tween;
            }
        }
    }
    function defaultPrefilter(elem, props, opts) {
        var prop, value, toggle, tween, hooks, oldfire, display, checkDisplay, anim = this, orig = {}, style = elem.style, hidden = elem.nodeType && isHidden(elem), dataShow = jQuery._data(elem, "fxshow");
        if (!opts.queue) {
            hooks = jQuery._queueHooks(elem, "fx");
            if (hooks.unqueued == null) {
                hooks.unqueued = 0;
                oldfire = hooks.empty.fire;
                hooks.empty.fire = function() {
                    if (!hooks.unqueued) {
                        oldfire();
                    }
                };
            }
            hooks.unqueued++;
            anim.always(function() {
                anim.always(function() {
                    hooks.unqueued--;
                    if (!jQuery.queue(elem, "fx").length) {
                        hooks.empty.fire();
                    }
                });
            });
        }
        if (elem.nodeType === 1 && ("height" in props || "width" in props)) {
            opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];
            display = jQuery.css(elem, "display");
            checkDisplay = display === "none" ? jQuery._data(elem, "olddisplay") || defaultDisplay(elem.nodeName) : display;
            if (checkDisplay === "inline" && jQuery.css(elem, "float") === "none") {
                if (!support.inlineBlockNeedsLayout || defaultDisplay(elem.nodeName) === "inline") {
                    style.display = "inline-block";
                } else {
                    style.zoom = 1;
                }
            }
        }
        if (opts.overflow) {
            style.overflow = "hidden";
            if (!support.shrinkWrapBlocks()) {
                anim.always(function() {
                    style.overflow = opts.overflow[0];
                    style.overflowX = opts.overflow[1];
                    style.overflowY = opts.overflow[2];
                });
            }
        }
        for (prop in props) {
            value = props[prop];
            if (rfxtypes.exec(value)) {
                delete props[prop];
                toggle = toggle || value === "toggle";
                if (value === (hidden ? "hide" : "show")) {
                    if (value === "show" && dataShow && dataShow[prop] !== undefined) {
                        hidden = true;
                    } else {
                        continue;
                    }
                }
                orig[prop] = dataShow && dataShow[prop] || jQuery.style(elem, prop);
            } else {
                display = undefined;
            }
        }
        if (!jQuery.isEmptyObject(orig)) {
            if (dataShow) {
                if ("hidden" in dataShow) {
                    hidden = dataShow.hidden;
                }
            } else {
                dataShow = jQuery._data(elem, "fxshow", {});
            }
            if (toggle) {
                dataShow.hidden = !hidden;
            }
            if (hidden) {
                jQuery(elem).show();
            } else {
                anim.done(function() {
                    jQuery(elem).hide();
                });
            }
            anim.done(function() {
                var prop;
                jQuery._removeData(elem, "fxshow");
                for (prop in orig) {
                    jQuery.style(elem, prop, orig[prop]);
                }
            });
            for (prop in orig) {
                tween = createTween(hidden ? dataShow[prop] : 0, prop, anim);
                if (!(prop in dataShow)) {
                    dataShow[prop] = tween.start;
                    if (hidden) {
                        tween.end = tween.start;
                        tween.start = prop === "width" || prop === "height" ? 1 : 0;
                    }
                }
            }
        } else if ((display === "none" ? defaultDisplay(elem.nodeName) : display) === "inline") {
            style.display = display;
        }
    }
    function propFilter(props, specialEasing) {
        var index, name, easing, value, hooks;
        for (index in props) {
            name = jQuery.camelCase(index);
            easing = specialEasing[name];
            value = props[index];
            if (jQuery.isArray(value)) {
                easing = value[1];
                value = props[index] = value[0];
            }
            if (index !== name) {
                props[name] = value;
                delete props[index];
            }
            hooks = jQuery.cssHooks[name];
            if (hooks && "expand" in hooks) {
                value = hooks.expand(value);
                delete props[name];
                for (index in value) {
                    if (!(index in props)) {
                        props[index] = value[index];
                        specialEasing[index] = easing;
                    }
                }
            } else {
                specialEasing[name] = easing;
            }
        }
    }
    function Animation(elem, properties, options) {
        var result, stopped, index = 0, length = animationPrefilters.length, deferred = jQuery.Deferred().always(function() {
            delete tick.elem;
        }), tick = function() {
            if (stopped) {
                return false;
            }
            var currentTime = fxNow || createFxNow(), remaining = Math.max(0, animation.startTime + animation.duration - currentTime), temp = remaining / animation.duration || 0, percent = 1 - temp, index = 0, length = animation.tweens.length;
            for (;index < length; index++) {
                animation.tweens[index].run(percent);
            }
            deferred.notifyWith(elem, [ animation, percent, remaining ]);
            if (percent < 1 && length) {
                return remaining;
            } else {
                deferred.resolveWith(elem, [ animation ]);
                return false;
            }
        }, animation = deferred.promise({
            elem: elem,
            props: jQuery.extend({}, properties),
            opts: jQuery.extend(true, {
                specialEasing: {}
            }, options),
            originalProperties: properties,
            originalOptions: options,
            startTime: fxNow || createFxNow(),
            duration: options.duration,
            tweens: [],
            createTween: function(prop, end) {
                var tween = jQuery.Tween(elem, animation.opts, prop, end, animation.opts.specialEasing[prop] || animation.opts.easing);
                animation.tweens.push(tween);
                return tween;
            },
            stop: function(gotoEnd) {
                var index = 0, length = gotoEnd ? animation.tweens.length : 0;
                if (stopped) {
                    return this;
                }
                stopped = true;
                for (;index < length; index++) {
                    animation.tweens[index].run(1);
                }
                if (gotoEnd) {
                    deferred.resolveWith(elem, [ animation, gotoEnd ]);
                } else {
                    deferred.rejectWith(elem, [ animation, gotoEnd ]);
                }
                return this;
            }
        }), props = animation.props;
        propFilter(props, animation.opts.specialEasing);
        for (;index < length; index++) {
            result = animationPrefilters[index].call(animation, elem, props, animation.opts);
            if (result) {
                return result;
            }
        }
        jQuery.map(props, createTween, animation);
        if (jQuery.isFunction(animation.opts.start)) {
            animation.opts.start.call(elem, animation);
        }
        jQuery.fx.timer(jQuery.extend(tick, {
            elem: elem,
            anim: animation,
            queue: animation.opts.queue
        }));
        return animation.progress(animation.opts.progress).done(animation.opts.done, animation.opts.complete).fail(animation.opts.fail).always(animation.opts.always);
    }
    jQuery.Animation = jQuery.extend(Animation, {
        tweener: function(props, callback) {
            if (jQuery.isFunction(props)) {
                callback = props;
                props = [ "*" ];
            } else {
                props = props.split(" ");
            }
            var prop, index = 0, length = props.length;
            for (;index < length; index++) {
                prop = props[index];
                tweeners[prop] = tweeners[prop] || [];
                tweeners[prop].unshift(callback);
            }
        },
        prefilter: function(callback, prepend) {
            if (prepend) {
                animationPrefilters.unshift(callback);
            } else {
                animationPrefilters.push(callback);
            }
        }
    });
    jQuery.speed = function(speed, easing, fn) {
        var opt = speed && typeof speed === "object" ? jQuery.extend({}, speed) : {
            complete: fn || !fn && easing || jQuery.isFunction(speed) && speed,
            duration: speed,
            easing: fn && easing || easing && !jQuery.isFunction(easing) && easing
        };
        opt.duration = jQuery.fx.off ? 0 : typeof opt.duration === "number" ? opt.duration : opt.duration in jQuery.fx.speeds ? jQuery.fx.speeds[opt.duration] : jQuery.fx.speeds._default;
        if (opt.queue == null || opt.queue === true) {
            opt.queue = "fx";
        }
        opt.old = opt.complete;
        opt.complete = function() {
            if (jQuery.isFunction(opt.old)) {
                opt.old.call(this);
            }
            if (opt.queue) {
                jQuery.dequeue(this, opt.queue);
            }
        };
        return opt;
    };
    jQuery.fn.extend({
        fadeTo: function(speed, to, easing, callback) {
            return this.filter(isHidden).css("opacity", 0).show().end().animate({
                opacity: to
            }, speed, easing, callback);
        },
        animate: function(prop, speed, easing, callback) {
            var empty = jQuery.isEmptyObject(prop), optall = jQuery.speed(speed, easing, callback), doAnimation = function() {
                var anim = Animation(this, jQuery.extend({}, prop), optall);
                if (empty || jQuery._data(this, "finish")) {
                    anim.stop(true);
                }
            };
            doAnimation.finish = doAnimation;
            return empty || optall.queue === false ? this.each(doAnimation) : this.queue(optall.queue, doAnimation);
        },
        stop: function(type, clearQueue, gotoEnd) {
            var stopQueue = function(hooks) {
                var stop = hooks.stop;
                delete hooks.stop;
                stop(gotoEnd);
            };
            if (typeof type !== "string") {
                gotoEnd = clearQueue;
                clearQueue = type;
                type = undefined;
            }
            if (clearQueue && type !== false) {
                this.queue(type || "fx", []);
            }
            return this.each(function() {
                var dequeue = true, index = type != null && type + "queueHooks", timers = jQuery.timers, data = jQuery._data(this);
                if (index) {
                    if (data[index] && data[index].stop) {
                        stopQueue(data[index]);
                    }
                } else {
                    for (index in data) {
                        if (data[index] && data[index].stop && rrun.test(index)) {
                            stopQueue(data[index]);
                        }
                    }
                }
                for (index = timers.length; index--; ) {
                    if (timers[index].elem === this && (type == null || timers[index].queue === type)) {
                        timers[index].anim.stop(gotoEnd);
                        dequeue = false;
                        timers.splice(index, 1);
                    }
                }
                if (dequeue || !gotoEnd) {
                    jQuery.dequeue(this, type);
                }
            });
        },
        finish: function(type) {
            if (type !== false) {
                type = type || "fx";
            }
            return this.each(function() {
                var index, data = jQuery._data(this), queue = data[type + "queue"], hooks = data[type + "queueHooks"], timers = jQuery.timers, length = queue ? queue.length : 0;
                data.finish = true;
                jQuery.queue(this, type, []);
                if (hooks && hooks.stop) {
                    hooks.stop.call(this, true);
                }
                for (index = timers.length; index--; ) {
                    if (timers[index].elem === this && timers[index].queue === type) {
                        timers[index].anim.stop(true);
                        timers.splice(index, 1);
                    }
                }
                for (index = 0; index < length; index++) {
                    if (queue[index] && queue[index].finish) {
                        queue[index].finish.call(this);
                    }
                }
                delete data.finish;
            });
        }
    });
    jQuery.each([ "toggle", "show", "hide" ], function(i, name) {
        var cssFn = jQuery.fn[name];
        jQuery.fn[name] = function(speed, easing, callback) {
            return speed == null || typeof speed === "boolean" ? cssFn.apply(this, arguments) : this.animate(genFx(name, true), speed, easing, callback);
        };
    });
    jQuery.each({
        slideDown: genFx("show"),
        slideUp: genFx("hide"),
        slideToggle: genFx("toggle"),
        fadeIn: {
            opacity: "show"
        },
        fadeOut: {
            opacity: "hide"
        },
        fadeToggle: {
            opacity: "toggle"
        }
    }, function(name, props) {
        jQuery.fn[name] = function(speed, easing, callback) {
            return this.animate(props, speed, easing, callback);
        };
    });
    jQuery.timers = [];
    jQuery.fx.tick = function() {
        var timer, timers = jQuery.timers, i = 0;
        fxNow = jQuery.now();
        for (;i < timers.length; i++) {
            timer = timers[i];
            if (!timer() && timers[i] === timer) {
                timers.splice(i--, 1);
            }
        }
        if (!timers.length) {
            jQuery.fx.stop();
        }
        fxNow = undefined;
    };
    jQuery.fx.timer = function(timer) {
        jQuery.timers.push(timer);
        if (timer()) {
            jQuery.fx.start();
        } else {
            jQuery.timers.pop();
        }
    };
    jQuery.fx.interval = 13;
    jQuery.fx.start = function() {
        if (!timerId) {
            timerId = setInterval(jQuery.fx.tick, jQuery.fx.interval);
        }
    };
    jQuery.fx.stop = function() {
        clearInterval(timerId);
        timerId = null;
    };
    jQuery.fx.speeds = {
        slow: 600,
        fast: 200,
        _default: 400
    };
    jQuery.fn.delay = function(time, type) {
        time = jQuery.fx ? jQuery.fx.speeds[time] || time : time;
        type = type || "fx";
        return this.queue(type, function(next, hooks) {
            var timeout = setTimeout(next, time);
            hooks.stop = function() {
                clearTimeout(timeout);
            };
        });
    };
    (function() {
        var input, div, select, a, opt;
        div = document.createElement("div");
        div.setAttribute("className", "t");
        div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
        a = div.getElementsByTagName("a")[0];
        select = document.createElement("select");
        opt = select.appendChild(document.createElement("option"));
        input = div.getElementsByTagName("input")[0];
        a.style.cssText = "top:1px";
        support.getSetAttribute = div.className !== "t";
        support.style = /top/.test(a.getAttribute("style"));
        support.hrefNormalized = a.getAttribute("href") === "/a";
        support.checkOn = !!input.value;
        support.optSelected = opt.selected;
        support.enctype = !!document.createElement("form").enctype;
        select.disabled = true;
        support.optDisabled = !opt.disabled;
        input = document.createElement("input");
        input.setAttribute("value", "");
        support.input = input.getAttribute("value") === "";
        input.value = "t";
        input.setAttribute("type", "radio");
        support.radioValue = input.value === "t";
    })();
    var rreturn = /\r/g;
    jQuery.fn.extend({
        val: function(value) {
            var hooks, ret, isFunction, elem = this[0];
            if (!arguments.length) {
                if (elem) {
                    hooks = jQuery.valHooks[elem.type] || jQuery.valHooks[elem.nodeName.toLowerCase()];
                    if (hooks && "get" in hooks && (ret = hooks.get(elem, "value")) !== undefined) {
                        return ret;
                    }
                    ret = elem.value;
                    return typeof ret === "string" ? ret.replace(rreturn, "") : ret == null ? "" : ret;
                }
                return;
            }
            isFunction = jQuery.isFunction(value);
            return this.each(function(i) {
                var val;
                if (this.nodeType !== 1) {
                    return;
                }
                if (isFunction) {
                    val = value.call(this, i, jQuery(this).val());
                } else {
                    val = value;
                }
                if (val == null) {
                    val = "";
                } else if (typeof val === "number") {
                    val += "";
                } else if (jQuery.isArray(val)) {
                    val = jQuery.map(val, function(value) {
                        return value == null ? "" : value + "";
                    });
                }
                hooks = jQuery.valHooks[this.type] || jQuery.valHooks[this.nodeName.toLowerCase()];
                if (!hooks || !("set" in hooks) || hooks.set(this, val, "value") === undefined) {
                    this.value = val;
                }
            });
        }
    });
    jQuery.extend({
        valHooks: {
            option: {
                get: function(elem) {
                    var val = jQuery.find.attr(elem, "value");
                    return val != null ? val : jQuery.trim(jQuery.text(elem));
                }
            },
            select: {
                get: function(elem) {
                    var value, option, options = elem.options, index = elem.selectedIndex, one = elem.type === "select-one" || index < 0, values = one ? null : [], max = one ? index + 1 : options.length, i = index < 0 ? max : one ? index : 0;
                    for (;i < max; i++) {
                        option = options[i];
                        if ((option.selected || i === index) && (support.optDisabled ? !option.disabled : option.getAttribute("disabled") === null) && (!option.parentNode.disabled || !jQuery.nodeName(option.parentNode, "optgroup"))) {
                            value = jQuery(option).val();
                            if (one) {
                                return value;
                            }
                            values.push(value);
                        }
                    }
                    return values;
                },
                set: function(elem, value) {
                    var optionSet, option, options = elem.options, values = jQuery.makeArray(value), i = options.length;
                    while (i--) {
                        option = options[i];
                        if (jQuery.inArray(jQuery.valHooks.option.get(option), values) >= 0) {
                            try {
                                option.selected = optionSet = true;
                            } catch (_) {
                                option.scrollHeight;
                            }
                        } else {
                            option.selected = false;
                        }
                    }
                    if (!optionSet) {
                        elem.selectedIndex = -1;
                    }
                    return options;
                }
            }
        }
    });
    jQuery.each([ "radio", "checkbox" ], function() {
        jQuery.valHooks[this] = {
            set: function(elem, value) {
                if (jQuery.isArray(value)) {
                    return elem.checked = jQuery.inArray(jQuery(elem).val(), value) >= 0;
                }
            }
        };
        if (!support.checkOn) {
            jQuery.valHooks[this].get = function(elem) {
                return elem.getAttribute("value") === null ? "on" : elem.value;
            };
        }
    });
    var nodeHook, boolHook, attrHandle = jQuery.expr.attrHandle, ruseDefault = /^(?:checked|selected)$/i, getSetAttribute = support.getSetAttribute, getSetInput = support.input;
    jQuery.fn.extend({
        attr: function(name, value) {
            return access(this, jQuery.attr, name, value, arguments.length > 1);
        },
        removeAttr: function(name) {
            return this.each(function() {
                jQuery.removeAttr(this, name);
            });
        }
    });
    jQuery.extend({
        attr: function(elem, name, value) {
            var hooks, ret, nType = elem.nodeType;
            if (!elem || nType === 3 || nType === 8 || nType === 2) {
                return;
            }
            if (typeof elem.getAttribute === strundefined) {
                return jQuery.prop(elem, name, value);
            }
            if (nType !== 1 || !jQuery.isXMLDoc(elem)) {
                name = name.toLowerCase();
                hooks = jQuery.attrHooks[name] || (jQuery.expr.match.bool.test(name) ? boolHook : nodeHook);
            }
            if (value !== undefined) {
                if (value === null) {
                    jQuery.removeAttr(elem, name);
                } else if (hooks && "set" in hooks && (ret = hooks.set(elem, value, name)) !== undefined) {
                    return ret;
                } else {
                    elem.setAttribute(name, value + "");
                    return value;
                }
            } else if (hooks && "get" in hooks && (ret = hooks.get(elem, name)) !== null) {
                return ret;
            } else {
                ret = jQuery.find.attr(elem, name);
                return ret == null ? undefined : ret;
            }
        },
        removeAttr: function(elem, value) {
            var name, propName, i = 0, attrNames = value && value.match(rnotwhite);
            if (attrNames && elem.nodeType === 1) {
                while (name = attrNames[i++]) {
                    propName = jQuery.propFix[name] || name;
                    if (jQuery.expr.match.bool.test(name)) {
                        if (getSetInput && getSetAttribute || !ruseDefault.test(name)) {
                            elem[propName] = false;
                        } else {
                            elem[jQuery.camelCase("default-" + name)] = elem[propName] = false;
                        }
                    } else {
                        jQuery.attr(elem, name, "");
                    }
                    elem.removeAttribute(getSetAttribute ? name : propName);
                }
            }
        },
        attrHooks: {
            type: {
                set: function(elem, value) {
                    if (!support.radioValue && value === "radio" && jQuery.nodeName(elem, "input")) {
                        var val = elem.value;
                        elem.setAttribute("type", value);
                        if (val) {
                            elem.value = val;
                        }
                        return value;
                    }
                }
            }
        }
    });
    boolHook = {
        set: function(elem, value, name) {
            if (value === false) {
                jQuery.removeAttr(elem, name);
            } else if (getSetInput && getSetAttribute || !ruseDefault.test(name)) {
                elem.setAttribute(!getSetAttribute && jQuery.propFix[name] || name, name);
            } else {
                elem[jQuery.camelCase("default-" + name)] = elem[name] = true;
            }
            return name;
        }
    };
    jQuery.each(jQuery.expr.match.bool.source.match(/\w+/g), function(i, name) {
        var getter = attrHandle[name] || jQuery.find.attr;
        attrHandle[name] = getSetInput && getSetAttribute || !ruseDefault.test(name) ? function(elem, name, isXML) {
            var ret, handle;
            if (!isXML) {
                handle = attrHandle[name];
                attrHandle[name] = ret;
                ret = getter(elem, name, isXML) != null ? name.toLowerCase() : null;
                attrHandle[name] = handle;
            }
            return ret;
        } : function(elem, name, isXML) {
            if (!isXML) {
                return elem[jQuery.camelCase("default-" + name)] ? name.toLowerCase() : null;
            }
        };
    });
    if (!getSetInput || !getSetAttribute) {
        jQuery.attrHooks.value = {
            set: function(elem, value, name) {
                if (jQuery.nodeName(elem, "input")) {
                    elem.defaultValue = value;
                } else {
                    return nodeHook && nodeHook.set(elem, value, name);
                }
            }
        };
    }
    if (!getSetAttribute) {
        nodeHook = {
            set: function(elem, value, name) {
                var ret = elem.getAttributeNode(name);
                if (!ret) {
                    elem.setAttributeNode(ret = elem.ownerDocument.createAttribute(name));
                }
                ret.value = value += "";
                if (name === "value" || value === elem.getAttribute(name)) {
                    return value;
                }
            }
        };
        attrHandle.id = attrHandle.name = attrHandle.coords = function(elem, name, isXML) {
            var ret;
            if (!isXML) {
                return (ret = elem.getAttributeNode(name)) && ret.value !== "" ? ret.value : null;
            }
        };
        jQuery.valHooks.button = {
            get: function(elem, name) {
                var ret = elem.getAttributeNode(name);
                if (ret && ret.specified) {
                    return ret.value;
                }
            },
            set: nodeHook.set
        };
        jQuery.attrHooks.contenteditable = {
            set: function(elem, value, name) {
                nodeHook.set(elem, value === "" ? false : value, name);
            }
        };
        jQuery.each([ "width", "height" ], function(i, name) {
            jQuery.attrHooks[name] = {
                set: function(elem, value) {
                    if (value === "") {
                        elem.setAttribute(name, "auto");
                        return value;
                    }
                }
            };
        });
    }
    if (!support.style) {
        jQuery.attrHooks.style = {
            get: function(elem) {
                return elem.style.cssText || undefined;
            },
            set: function(elem, value) {
                return elem.style.cssText = value + "";
            }
        };
    }
    var rfocusable = /^(?:input|select|textarea|button|object)$/i, rclickable = /^(?:a|area)$/i;
    jQuery.fn.extend({
        prop: function(name, value) {
            return access(this, jQuery.prop, name, value, arguments.length > 1);
        },
        removeProp: function(name) {
            name = jQuery.propFix[name] || name;
            return this.each(function() {
                try {
                    this[name] = undefined;
                    delete this[name];
                } catch (e) {}
            });
        }
    });
    jQuery.extend({
        propFix: {
            for: "htmlFor",
            class: "className"
        },
        prop: function(elem, name, value) {
            var ret, hooks, notxml, nType = elem.nodeType;
            if (!elem || nType === 3 || nType === 8 || nType === 2) {
                return;
            }
            notxml = nType !== 1 || !jQuery.isXMLDoc(elem);
            if (notxml) {
                name = jQuery.propFix[name] || name;
                hooks = jQuery.propHooks[name];
            }
            if (value !== undefined) {
                return hooks && "set" in hooks && (ret = hooks.set(elem, value, name)) !== undefined ? ret : elem[name] = value;
            } else {
                return hooks && "get" in hooks && (ret = hooks.get(elem, name)) !== null ? ret : elem[name];
            }
        },
        propHooks: {
            tabIndex: {
                get: function(elem) {
                    var tabindex = jQuery.find.attr(elem, "tabindex");
                    return tabindex ? parseInt(tabindex, 10) : rfocusable.test(elem.nodeName) || rclickable.test(elem.nodeName) && elem.href ? 0 : -1;
                }
            }
        }
    });
    if (!support.hrefNormalized) {
        jQuery.each([ "href", "src" ], function(i, name) {
            jQuery.propHooks[name] = {
                get: function(elem) {
                    return elem.getAttribute(name, 4);
                }
            };
        });
    }
    if (!support.optSelected) {
        jQuery.propHooks.selected = {
            get: function(elem) {
                var parent = elem.parentNode;
                if (parent) {
                    parent.selectedIndex;
                    if (parent.parentNode) {
                        parent.parentNode.selectedIndex;
                    }
                }
                return null;
            }
        };
    }
    jQuery.each([ "tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable" ], function() {
        jQuery.propFix[this.toLowerCase()] = this;
    });
    if (!support.enctype) {
        jQuery.propFix.enctype = "encoding";
    }
    var rclass = /[\t\r\n\f]/g;
    jQuery.fn.extend({
        addClass: function(value) {
            var classes, elem, cur, clazz, j, finalValue, i = 0, len = this.length, proceed = typeof value === "string" && value;
            if (jQuery.isFunction(value)) {
                return this.each(function(j) {
                    jQuery(this).addClass(value.call(this, j, this.className));
                });
            }
            if (proceed) {
                classes = (value || "").match(rnotwhite) || [];
                for (;i < len; i++) {
                    elem = this[i];
                    cur = elem.nodeType === 1 && (elem.className ? (" " + elem.className + " ").replace(rclass, " ") : " ");
                    if (cur) {
                        j = 0;
                        while (clazz = classes[j++]) {
                            if (cur.indexOf(" " + clazz + " ") < 0) {
                                cur += clazz + " ";
                            }
                        }
                        finalValue = jQuery.trim(cur);
                        if (elem.className !== finalValue) {
                            elem.className = finalValue;
                        }
                    }
                }
            }
            return this;
        },
        removeClass: function(value) {
            var classes, elem, cur, clazz, j, finalValue, i = 0, len = this.length, proceed = arguments.length === 0 || typeof value === "string" && value;
            if (jQuery.isFunction(value)) {
                return this.each(function(j) {
                    jQuery(this).removeClass(value.call(this, j, this.className));
                });
            }
            if (proceed) {
                classes = (value || "").match(rnotwhite) || [];
                for (;i < len; i++) {
                    elem = this[i];
                    cur = elem.nodeType === 1 && (elem.className ? (" " + elem.className + " ").replace(rclass, " ") : "");
                    if (cur) {
                        j = 0;
                        while (clazz = classes[j++]) {
                            while (cur.indexOf(" " + clazz + " ") >= 0) {
                                cur = cur.replace(" " + clazz + " ", " ");
                            }
                        }
                        finalValue = value ? jQuery.trim(cur) : "";
                        if (elem.className !== finalValue) {
                            elem.className = finalValue;
                        }
                    }
                }
            }
            return this;
        },
        toggleClass: function(value, stateVal) {
            var type = typeof value;
            if (typeof stateVal === "boolean" && type === "string") {
                return stateVal ? this.addClass(value) : this.removeClass(value);
            }
            if (jQuery.isFunction(value)) {
                return this.each(function(i) {
                    jQuery(this).toggleClass(value.call(this, i, this.className, stateVal), stateVal);
                });
            }
            return this.each(function() {
                if (type === "string") {
                    var className, i = 0, self = jQuery(this), classNames = value.match(rnotwhite) || [];
                    while (className = classNames[i++]) {
                        if (self.hasClass(className)) {
                            self.removeClass(className);
                        } else {
                            self.addClass(className);
                        }
                    }
                } else if (type === strundefined || type === "boolean") {
                    if (this.className) {
                        jQuery._data(this, "__className__", this.className);
                    }
                    this.className = this.className || value === false ? "" : jQuery._data(this, "__className__") || "";
                }
            });
        },
        hasClass: function(selector) {
            var className = " " + selector + " ", i = 0, l = this.length;
            for (;i < l; i++) {
                if (this[i].nodeType === 1 && (" " + this[i].className + " ").replace(rclass, " ").indexOf(className) >= 0) {
                    return true;
                }
            }
            return false;
        }
    });
    jQuery.each(("blur focus focusin focusout load resize scroll unload click dblclick " + "mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " + "change select submit keydown keypress keyup error contextmenu").split(" "), function(i, name) {
        jQuery.fn[name] = function(data, fn) {
            return arguments.length > 0 ? this.on(name, null, data, fn) : this.trigger(name);
        };
    });
    jQuery.fn.extend({
        hover: function(fnOver, fnOut) {
            return this.mouseenter(fnOver).mouseleave(fnOut || fnOver);
        },
        bind: function(types, data, fn) {
            return this.on(types, null, data, fn);
        },
        unbind: function(types, fn) {
            return this.off(types, null, fn);
        },
        delegate: function(selector, types, data, fn) {
            return this.on(types, selector, data, fn);
        },
        undelegate: function(selector, types, fn) {
            return arguments.length === 1 ? this.off(selector, "**") : this.off(types, selector || "**", fn);
        }
    });
    var nonce = jQuery.now();
    var rquery = /\?/;
    var rvalidtokens = /(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;
    jQuery.parseJSON = function(data) {
        if (window.JSON && window.JSON.parse) {
            return window.JSON.parse(data + "");
        }
        var requireNonComma, depth = null, str = jQuery.trim(data + "");
        return str && !jQuery.trim(str.replace(rvalidtokens, function(token, comma, open, close) {
            if (requireNonComma && comma) {
                depth = 0;
            }
            if (depth === 0) {
                return token;
            }
            requireNonComma = open || comma;
            depth += !close - !open;
            return "";
        })) ? Function("return " + str)() : jQuery.error("Invalid JSON: " + data);
    };
    jQuery.parseXML = function(data) {
        var xml, tmp;
        if (!data || typeof data !== "string") {
            return null;
        }
        try {
            if (window.DOMParser) {
                tmp = new DOMParser();
                xml = tmp.parseFromString(data, "text/xml");
            } else {
                xml = new ActiveXObject("Microsoft.XMLDOM");
                xml.async = "false";
                xml.loadXML(data);
            }
        } catch (e) {
            xml = undefined;
        }
        if (!xml || !xml.documentElement || xml.getElementsByTagName("parsererror").length) {
            jQuery.error("Invalid XML: " + data);
        }
        return xml;
    };
    var ajaxLocParts, ajaxLocation, rhash = /#.*$/, rts = /([?&])_=[^&]*/, rheaders = /^(.*?):[ \t]*([^\r\n]*)\r?$/gm, rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/, rnoContent = /^(?:GET|HEAD)$/, rprotocol = /^\/\//, rurl = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/, prefilters = {}, transports = {}, allTypes = "*/".concat("*");
    try {
        ajaxLocation = location.href;
    } catch (e) {
        ajaxLocation = document.createElement("a");
        ajaxLocation.href = "";
        ajaxLocation = ajaxLocation.href;
    }
    ajaxLocParts = rurl.exec(ajaxLocation.toLowerCase()) || [];
    function addToPrefiltersOrTransports(structure) {
        return function(dataTypeExpression, func) {
            if (typeof dataTypeExpression !== "string") {
                func = dataTypeExpression;
                dataTypeExpression = "*";
            }
            var dataType, i = 0, dataTypes = dataTypeExpression.toLowerCase().match(rnotwhite) || [];
            if (jQuery.isFunction(func)) {
                while (dataType = dataTypes[i++]) {
                    if (dataType.charAt(0) === "+") {
                        dataType = dataType.slice(1) || "*";
                        (structure[dataType] = structure[dataType] || []).unshift(func);
                    } else {
                        (structure[dataType] = structure[dataType] || []).push(func);
                    }
                }
            }
        };
    }
    function inspectPrefiltersOrTransports(structure, options, originalOptions, jqXHR) {
        var inspected = {}, seekingTransport = structure === transports;
        function inspect(dataType) {
            var selected;
            inspected[dataType] = true;
            jQuery.each(structure[dataType] || [], function(_, prefilterOrFactory) {
                var dataTypeOrTransport = prefilterOrFactory(options, originalOptions, jqXHR);
                if (typeof dataTypeOrTransport === "string" && !seekingTransport && !inspected[dataTypeOrTransport]) {
                    options.dataTypes.unshift(dataTypeOrTransport);
                    inspect(dataTypeOrTransport);
                    return false;
                } else if (seekingTransport) {
                    return !(selected = dataTypeOrTransport);
                }
            });
            return selected;
        }
        return inspect(options.dataTypes[0]) || !inspected["*"] && inspect("*");
    }
    function ajaxExtend(target, src) {
        var deep, key, flatOptions = jQuery.ajaxSettings.flatOptions || {};
        for (key in src) {
            if (src[key] !== undefined) {
                (flatOptions[key] ? target : deep || (deep = {}))[key] = src[key];
            }
        }
        if (deep) {
            jQuery.extend(true, target, deep);
        }
        return target;
    }
    function ajaxHandleResponses(s, jqXHR, responses) {
        var firstDataType, ct, finalDataType, type, contents = s.contents, dataTypes = s.dataTypes;
        while (dataTypes[0] === "*") {
            dataTypes.shift();
            if (ct === undefined) {
                ct = s.mimeType || jqXHR.getResponseHeader("Content-Type");
            }
        }
        if (ct) {
            for (type in contents) {
                if (contents[type] && contents[type].test(ct)) {
                    dataTypes.unshift(type);
                    break;
                }
            }
        }
        if (dataTypes[0] in responses) {
            finalDataType = dataTypes[0];
        } else {
            for (type in responses) {
                if (!dataTypes[0] || s.converters[type + " " + dataTypes[0]]) {
                    finalDataType = type;
                    break;
                }
                if (!firstDataType) {
                    firstDataType = type;
                }
            }
            finalDataType = finalDataType || firstDataType;
        }
        if (finalDataType) {
            if (finalDataType !== dataTypes[0]) {
                dataTypes.unshift(finalDataType);
            }
            return responses[finalDataType];
        }
    }
    function ajaxConvert(s, response, jqXHR, isSuccess) {
        var conv2, current, conv, tmp, prev, converters = {}, dataTypes = s.dataTypes.slice();
        if (dataTypes[1]) {
            for (conv in s.converters) {
                converters[conv.toLowerCase()] = s.converters[conv];
            }
        }
        current = dataTypes.shift();
        while (current) {
            if (s.responseFields[current]) {
                jqXHR[s.responseFields[current]] = response;
            }
            if (!prev && isSuccess && s.dataFilter) {
                response = s.dataFilter(response, s.dataType);
            }
            prev = current;
            current = dataTypes.shift();
            if (current) {
                if (current === "*") {
                    current = prev;
                } else if (prev !== "*" && prev !== current) {
                    conv = converters[prev + " " + current] || converters["* " + current];
                    if (!conv) {
                        for (conv2 in converters) {
                            tmp = conv2.split(" ");
                            if (tmp[1] === current) {
                                conv = converters[prev + " " + tmp[0]] || converters["* " + tmp[0]];
                                if (conv) {
                                    if (conv === true) {
                                        conv = converters[conv2];
                                    } else if (converters[conv2] !== true) {
                                        current = tmp[0];
                                        dataTypes.unshift(tmp[1]);
                                    }
                                    break;
                                }
                            }
                        }
                    }
                    if (conv !== true) {
                        if (conv && s["throws"]) {
                            response = conv(response);
                        } else {
                            try {
                                response = conv(response);
                            } catch (e) {
                                return {
                                    state: "parsererror",
                                    error: conv ? e : "No conversion from " + prev + " to " + current
                                };
                            }
                        }
                    }
                }
            }
        }
        return {
            state: "success",
            data: response
        };
    }
    jQuery.extend({
        active: 0,
        lastModified: {},
        etag: {},
        ajaxSettings: {
            url: ajaxLocation,
            type: "GET",
            isLocal: rlocalProtocol.test(ajaxLocParts[1]),
            global: true,
            processData: true,
            async: true,
            contentType: "application/x-www-form-urlencoded; charset=UTF-8",
            accepts: {
                "*": allTypes,
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            converters: {
                "* text": String,
                "text html": true,
                "text json": jQuery.parseJSON,
                "text xml": jQuery.parseXML
            },
            flatOptions: {
                url: true,
                context: true
            }
        },
        ajaxSetup: function(target, settings) {
            return settings ? ajaxExtend(ajaxExtend(target, jQuery.ajaxSettings), settings) : ajaxExtend(jQuery.ajaxSettings, target);
        },
        ajaxPrefilter: addToPrefiltersOrTransports(prefilters),
        ajaxTransport: addToPrefiltersOrTransports(transports),
        ajax: function(url, options) {
            if (typeof url === "object") {
                options = url;
                url = undefined;
            }
            options = options || {};
            var parts, i, cacheURL, responseHeadersString, timeoutTimer, fireGlobals, transport, responseHeaders, s = jQuery.ajaxSetup({}, options), callbackContext = s.context || s, globalEventContext = s.context && (callbackContext.nodeType || callbackContext.jquery) ? jQuery(callbackContext) : jQuery.event, deferred = jQuery.Deferred(), completeDeferred = jQuery.Callbacks("once memory"), statusCode = s.statusCode || {}, requestHeaders = {}, requestHeadersNames = {}, state = 0, strAbort = "canceled", jqXHR = {
                readyState: 0,
                getResponseHeader: function(key) {
                    var match;
                    if (state === 2) {
                        if (!responseHeaders) {
                            responseHeaders = {};
                            while (match = rheaders.exec(responseHeadersString)) {
                                responseHeaders[match[1].toLowerCase()] = match[2];
                            }
                        }
                        match = responseHeaders[key.toLowerCase()];
                    }
                    return match == null ? null : match;
                },
                getAllResponseHeaders: function() {
                    return state === 2 ? responseHeadersString : null;
                },
                setRequestHeader: function(name, value) {
                    var lname = name.toLowerCase();
                    if (!state) {
                        name = requestHeadersNames[lname] = requestHeadersNames[lname] || name;
                        requestHeaders[name] = value;
                    }
                    return this;
                },
                overrideMimeType: function(type) {
                    if (!state) {
                        s.mimeType = type;
                    }
                    return this;
                },
                statusCode: function(map) {
                    var code;
                    if (map) {
                        if (state < 2) {
                            for (code in map) {
                                statusCode[code] = [ statusCode[code], map[code] ];
                            }
                        } else {
                            jqXHR.always(map[jqXHR.status]);
                        }
                    }
                    return this;
                },
                abort: function(statusText) {
                    var finalText = statusText || strAbort;
                    if (transport) {
                        transport.abort(finalText);
                    }
                    done(0, finalText);
                    return this;
                }
            };
            deferred.promise(jqXHR).complete = completeDeferred.add;
            jqXHR.success = jqXHR.done;
            jqXHR.error = jqXHR.fail;
            s.url = ((url || s.url || ajaxLocation) + "").replace(rhash, "").replace(rprotocol, ajaxLocParts[1] + "//");
            s.type = options.method || options.type || s.method || s.type;
            s.dataTypes = jQuery.trim(s.dataType || "*").toLowerCase().match(rnotwhite) || [ "" ];
            if (s.crossDomain == null) {
                parts = rurl.exec(s.url.toLowerCase());
                s.crossDomain = !!(parts && (parts[1] !== ajaxLocParts[1] || parts[2] !== ajaxLocParts[2] || (parts[3] || (parts[1] === "http:" ? "80" : "443")) !== (ajaxLocParts[3] || (ajaxLocParts[1] === "http:" ? "80" : "443"))));
            }
            if (s.data && s.processData && typeof s.data !== "string") {
                s.data = jQuery.param(s.data, s.traditional);
            }
            inspectPrefiltersOrTransports(prefilters, s, options, jqXHR);
            if (state === 2) {
                return jqXHR;
            }
            fireGlobals = s.global;
            if (fireGlobals && jQuery.active++ === 0) {
                jQuery.event.trigger("ajaxStart");
            }
            s.type = s.type.toUpperCase();
            s.hasContent = !rnoContent.test(s.type);
            cacheURL = s.url;
            if (!s.hasContent) {
                if (s.data) {
                    cacheURL = s.url += (rquery.test(cacheURL) ? "&" : "?") + s.data;
                    delete s.data;
                }
                if (s.cache === false) {
                    s.url = rts.test(cacheURL) ? cacheURL.replace(rts, "$1_=" + nonce++) : cacheURL + (rquery.test(cacheURL) ? "&" : "?") + "_=" + nonce++;
                }
            }
            if (s.ifModified) {
                if (jQuery.lastModified[cacheURL]) {
                    jqXHR.setRequestHeader("If-Modified-Since", jQuery.lastModified[cacheURL]);
                }
                if (jQuery.etag[cacheURL]) {
                    jqXHR.setRequestHeader("If-None-Match", jQuery.etag[cacheURL]);
                }
            }
            if (s.data && s.hasContent && s.contentType !== false || options.contentType) {
                jqXHR.setRequestHeader("Content-Type", s.contentType);
            }
            jqXHR.setRequestHeader("Accept", s.dataTypes[0] && s.accepts[s.dataTypes[0]] ? s.accepts[s.dataTypes[0]] + (s.dataTypes[0] !== "*" ? ", " + allTypes + "; q=0.01" : "") : s.accepts["*"]);
            for (i in s.headers) {
                jqXHR.setRequestHeader(i, s.headers[i]);
            }
            if (s.beforeSend && (s.beforeSend.call(callbackContext, jqXHR, s) === false || state === 2)) {
                return jqXHR.abort();
            }
            strAbort = "abort";
            for (i in {
                success: 1,
                error: 1,
                complete: 1
            }) {
                jqXHR[i](s[i]);
            }
            transport = inspectPrefiltersOrTransports(transports, s, options, jqXHR);
            if (!transport) {
                done(-1, "No Transport");
            } else {
                jqXHR.readyState = 1;
                if (fireGlobals) {
                    globalEventContext.trigger("ajaxSend", [ jqXHR, s ]);
                }
                if (s.async && s.timeout > 0) {
                    timeoutTimer = setTimeout(function() {
                        jqXHR.abort("timeout");
                    }, s.timeout);
                }
                try {
                    state = 1;
                    transport.send(requestHeaders, done);
                } catch (e) {
                    if (state < 2) {
                        done(-1, e);
                    } else {
                        throw e;
                    }
                }
            }
            function done(status, nativeStatusText, responses, headers) {
                var isSuccess, success, error, response, modified, statusText = nativeStatusText;
                if (state === 2) {
                    return;
                }
                state = 2;
                if (timeoutTimer) {
                    clearTimeout(timeoutTimer);
                }
                transport = undefined;
                responseHeadersString = headers || "";
                jqXHR.readyState = status > 0 ? 4 : 0;
                isSuccess = status >= 200 && status < 300 || status === 304;
                if (responses) {
                    response = ajaxHandleResponses(s, jqXHR, responses);
                }
                response = ajaxConvert(s, response, jqXHR, isSuccess);
                if (isSuccess) {
                    if (s.ifModified) {
                        modified = jqXHR.getResponseHeader("Last-Modified");
                        if (modified) {
                            jQuery.lastModified[cacheURL] = modified;
                        }
                        modified = jqXHR.getResponseHeader("etag");
                        if (modified) {
                            jQuery.etag[cacheURL] = modified;
                        }
                    }
                    if (status === 204 || s.type === "HEAD") {
                        statusText = "nocontent";
                    } else if (status === 304) {
                        statusText = "notmodified";
                    } else {
                        statusText = response.state;
                        success = response.data;
                        error = response.error;
                        isSuccess = !error;
                    }
                } else {
                    error = statusText;
                    if (status || !statusText) {
                        statusText = "error";
                        if (status < 0) {
                            status = 0;
                        }
                    }
                }
                jqXHR.status = status;
                jqXHR.statusText = (nativeStatusText || statusText) + "";
                if (isSuccess) {
                    deferred.resolveWith(callbackContext, [ success, statusText, jqXHR ]);
                } else {
                    deferred.rejectWith(callbackContext, [ jqXHR, statusText, error ]);
                }
                jqXHR.statusCode(statusCode);
                statusCode = undefined;
                if (fireGlobals) {
                    globalEventContext.trigger(isSuccess ? "ajaxSuccess" : "ajaxError", [ jqXHR, s, isSuccess ? success : error ]);
                }
                completeDeferred.fireWith(callbackContext, [ jqXHR, statusText ]);
                if (fireGlobals) {
                    globalEventContext.trigger("ajaxComplete", [ jqXHR, s ]);
                    if (!--jQuery.active) {
                        jQuery.event.trigger("ajaxStop");
                    }
                }
            }
            return jqXHR;
        },
        getJSON: function(url, data, callback) {
            return jQuery.get(url, data, callback, "json");
        },
        getScript: function(url, callback) {
            return jQuery.get(url, undefined, callback, "script");
        }
    });
    jQuery.each([ "get", "post" ], function(i, method) {
        jQuery[method] = function(url, data, callback, type) {
            if (jQuery.isFunction(data)) {
                type = type || callback;
                callback = data;
                data = undefined;
            }
            return jQuery.ajax({
                url: url,
                type: method,
                dataType: type,
                data: data,
                success: callback
            });
        };
    });
    jQuery.each([ "ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend" ], function(i, type) {
        jQuery.fn[type] = function(fn) {
            return this.on(type, fn);
        };
    });
    jQuery._evalUrl = function(url) {
        return jQuery.ajax({
            url: url,
            type: "GET",
            dataType: "script",
            async: false,
            global: false,
            throws: true
        });
    };
    jQuery.fn.extend({
        wrapAll: function(html) {
            if (jQuery.isFunction(html)) {
                return this.each(function(i) {
                    jQuery(this).wrapAll(html.call(this, i));
                });
            }
            if (this[0]) {
                var wrap = jQuery(html, this[0].ownerDocument).eq(0).clone(true);
                if (this[0].parentNode) {
                    wrap.insertBefore(this[0]);
                }
                wrap.map(function() {
                    var elem = this;
                    while (elem.firstChild && elem.firstChild.nodeType === 1) {
                        elem = elem.firstChild;
                    }
                    return elem;
                }).append(this);
            }
            return this;
        },
        wrapInner: function(html) {
            if (jQuery.isFunction(html)) {
                return this.each(function(i) {
                    jQuery(this).wrapInner(html.call(this, i));
                });
            }
            return this.each(function() {
                var self = jQuery(this), contents = self.contents();
                if (contents.length) {
                    contents.wrapAll(html);
                } else {
                    self.append(html);
                }
            });
        },
        wrap: function(html) {
            var isFunction = jQuery.isFunction(html);
            return this.each(function(i) {
                jQuery(this).wrapAll(isFunction ? html.call(this, i) : html);
            });
        },
        unwrap: function() {
            return this.parent().each(function() {
                if (!jQuery.nodeName(this, "body")) {
                    jQuery(this).replaceWith(this.childNodes);
                }
            }).end();
        }
    });
    jQuery.expr.filters.hidden = function(elem) {
        return elem.offsetWidth <= 0 && elem.offsetHeight <= 0 || !support.reliableHiddenOffsets() && (elem.style && elem.style.display || jQuery.css(elem, "display")) === "none";
    };
    jQuery.expr.filters.visible = function(elem) {
        return !jQuery.expr.filters.hidden(elem);
    };
    var r20 = /%20/g, rbracket = /\[\]$/, rCRLF = /\r?\n/g, rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i, rsubmittable = /^(?:input|select|textarea|keygen)/i;
    function buildParams(prefix, obj, traditional, add) {
        var name;
        if (jQuery.isArray(obj)) {
            jQuery.each(obj, function(i, v) {
                if (traditional || rbracket.test(prefix)) {
                    add(prefix, v);
                } else {
                    buildParams(prefix + "[" + (typeof v === "object" ? i : "") + "]", v, traditional, add);
                }
            });
        } else if (!traditional && jQuery.type(obj) === "object") {
            for (name in obj) {
                buildParams(prefix + "[" + name + "]", obj[name], traditional, add);
            }
        } else {
            add(prefix, obj);
        }
    }
    jQuery.param = function(a, traditional) {
        var prefix, s = [], add = function(key, value) {
            value = jQuery.isFunction(value) ? value() : value == null ? "" : value;
            s[s.length] = encodeURIComponent(key) + "=" + encodeURIComponent(value);
        };
        if (traditional === undefined) {
            traditional = jQuery.ajaxSettings && jQuery.ajaxSettings.traditional;
        }
        if (jQuery.isArray(a) || a.jquery && !jQuery.isPlainObject(a)) {
            jQuery.each(a, function() {
                add(this.name, this.value);
            });
        } else {
            for (prefix in a) {
                buildParams(prefix, a[prefix], traditional, add);
            }
        }
        return s.join("&").replace(r20, "+");
    };
    jQuery.fn.extend({
        serialize: function() {
            return jQuery.param(this.serializeArray());
        },
        serializeArray: function() {
            return this.map(function() {
                var elements = jQuery.prop(this, "elements");
                return elements ? jQuery.makeArray(elements) : this;
            }).filter(function() {
                var type = this.type;
                return this.name && !jQuery(this).is(":disabled") && rsubmittable.test(this.nodeName) && !rsubmitterTypes.test(type) && (this.checked || !rcheckableType.test(type));
            }).map(function(i, elem) {
                var val = jQuery(this).val();
                return val == null ? null : jQuery.isArray(val) ? jQuery.map(val, function(val) {
                    return {
                        name: elem.name,
                        value: val.replace(rCRLF, "\r\n")
                    };
                }) : {
                    name: elem.name,
                    value: val.replace(rCRLF, "\r\n")
                };
            }).get();
        }
    });
    jQuery.parseHTML = function(data, context, keepScripts) {
        if (!data || typeof data !== "string") {
            return null;
        }
        if (typeof context === "boolean") {
            keepScripts = context;
            context = false;
        }
        context = context || document;
        var parsed = rsingleTag.exec(data), scripts = !keepScripts && [];
        if (parsed) {
            return [ context.createElement(parsed[1]) ];
        }
        parsed = jQuery.buildFragment([ data ], context, scripts);
        if (scripts && scripts.length) {
            jQuery(scripts).remove();
        }
        return jQuery.merge([], parsed.childNodes);
    };
    jQuery.expr.filters.animated = function(elem) {
        return jQuery.grep(jQuery.timers, function(fn) {
            return elem === fn.elem;
        }).length;
    };
    var docElem = window.document.documentElement;
    function getWindow(elem) {
        return jQuery.isWindow(elem) ? elem : elem.nodeType === 9 ? elem.defaultView || elem.parentWindow : false;
    }
    jQuery.offset = {
        setOffset: function(elem, options, i) {
            var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition, position = jQuery.css(elem, "position"), curElem = jQuery(elem), props = {};
            if (position === "static") {
                elem.style.position = "relative";
            }
            curOffset = curElem.offset();
            curCSSTop = jQuery.css(elem, "top");
            curCSSLeft = jQuery.css(elem, "left");
            calculatePosition = (position === "absolute" || position === "fixed") && jQuery.inArray("auto", [ curCSSTop, curCSSLeft ]) > -1;
            if (calculatePosition) {
                curPosition = curElem.position();
                curTop = curPosition.top;
                curLeft = curPosition.left;
            } else {
                curTop = parseFloat(curCSSTop) || 0;
                curLeft = parseFloat(curCSSLeft) || 0;
            }
            if (jQuery.isFunction(options)) {
                options = options.call(elem, i, curOffset);
            }
            if (options.top != null) {
                props.top = options.top - curOffset.top + curTop;
            }
            if (options.left != null) {
                props.left = options.left - curOffset.left + curLeft;
            }
            if ("using" in options) {
                options.using.call(elem, props);
            } else {
                curElem.css(props);
            }
        }
    };
    jQuery.fn.extend({
        offset: function(options) {
            if (arguments.length) {
                return options === undefined ? this : this.each(function(i) {
                    jQuery.offset.setOffset(this, options, i);
                });
            }
            var docElem, win, box = {
                top: 0,
                left: 0
            }, elem = this[0], doc = elem && elem.ownerDocument;
            if (!doc) {
                return;
            }
            docElem = doc.documentElement;
            if (!jQuery.contains(docElem, elem)) {
                return box;
            }
            if (typeof elem.getBoundingClientRect !== strundefined) {
                box = elem.getBoundingClientRect();
            }
            win = getWindow(doc);
            return {
                top: box.top + (win.pageYOffset || docElem.scrollTop) - (docElem.clientTop || 0),
                left: box.left + (win.pageXOffset || docElem.scrollLeft) - (docElem.clientLeft || 0)
            };
        },
        position: function() {
            if (!this[0]) {
                return;
            }
            var offsetParent, offset, parentOffset = {
                top: 0,
                left: 0
            }, elem = this[0];
            if (jQuery.css(elem, "position") === "fixed") {
                offset = elem.getBoundingClientRect();
            } else {
                offsetParent = this.offsetParent();
                offset = this.offset();
                if (!jQuery.nodeName(offsetParent[0], "html")) {
                    parentOffset = offsetParent.offset();
                }
                parentOffset.top += jQuery.css(offsetParent[0], "borderTopWidth", true);
                parentOffset.left += jQuery.css(offsetParent[0], "borderLeftWidth", true);
            }
            return {
                top: offset.top - parentOffset.top - jQuery.css(elem, "marginTop", true),
                left: offset.left - parentOffset.left - jQuery.css(elem, "marginLeft", true)
            };
        },
        offsetParent: function() {
            return this.map(function() {
                var offsetParent = this.offsetParent || docElem;
                while (offsetParent && (!jQuery.nodeName(offsetParent, "html") && jQuery.css(offsetParent, "position") === "static")) {
                    offsetParent = offsetParent.offsetParent;
                }
                return offsetParent || docElem;
            });
        }
    });
    jQuery.each({
        scrollLeft: "pageXOffset",
        scrollTop: "pageYOffset"
    }, function(method, prop) {
        var top = /Y/.test(prop);
        jQuery.fn[method] = function(val) {
            return access(this, function(elem, method, val) {
                var win = getWindow(elem);
                if (val === undefined) {
                    return win ? prop in win ? win[prop] : win.document.documentElement[method] : elem[method];
                }
                if (win) {
                    win.scrollTo(!top ? val : jQuery(win).scrollLeft(), top ? val : jQuery(win).scrollTop());
                } else {
                    elem[method] = val;
                }
            }, method, val, arguments.length, null);
        };
    });
    jQuery.each([ "top", "left" ], function(i, prop) {
        jQuery.cssHooks[prop] = addGetHookIf(support.pixelPosition, function(elem, computed) {
            if (computed) {
                computed = curCSS(elem, prop);
                return rnumnonpx.test(computed) ? jQuery(elem).position()[prop] + "px" : computed;
            }
        });
    });
    jQuery.each({
        Height: "height",
        Width: "width"
    }, function(name, type) {
        jQuery.each({
            padding: "inner" + name,
            content: type,
            "": "outer" + name
        }, function(defaultExtra, funcName) {
            jQuery.fn[funcName] = function(margin, value) {
                var chainable = arguments.length && (defaultExtra || typeof margin !== "boolean"), extra = defaultExtra || (margin === true || value === true ? "margin" : "border");
                return access(this, function(elem, type, value) {
                    var doc;
                    if (jQuery.isWindow(elem)) {
                        return elem.document.documentElement["client" + name];
                    }
                    if (elem.nodeType === 9) {
                        doc = elem.documentElement;
                        return Math.max(elem.body["scroll" + name], doc["scroll" + name], elem.body["offset" + name], doc["offset" + name], doc["client" + name]);
                    }
                    return value === undefined ? jQuery.css(elem, type, extra) : jQuery.style(elem, type, value, extra);
                }, type, chainable ? margin : undefined, chainable, null);
            };
        });
    });
    jQuery.fn.size = function() {
        return this.length;
    };
    jQuery.fn.andSelf = jQuery.fn.addBack;
    if (typeof define === "function" && define.amd) {
        define("jquery", [], function() {
            return jQuery;
        });
    }
    var _jQuery = window.jQuery, _$ = window.$;
    jQuery.noConflict = function(deep) {
        if (window.$ === jQuery) {
            window.$ = _$;
        }
        if (deep && window.jQuery === jQuery) {
            window.jQuery = _jQuery;
        }
        return jQuery;
    };
    if (typeof noGlobal === strundefined) {
        window.jQuery = window.$ = jQuery;
    }
    return jQuery;
});

(function($) {
    $.fn.centralize = function(param, callback) {
        $obj = $R.$(this);
        $obj.css("position", "absolute");
        m = [ "top", "left", "button", "right" ];
        for (i = 0; i < 4; i++) {
            x = parseInt($obj.css("margin-" + m[i]));
            if (x > 0) {
                $obj.css("margin-" + m[i], "0px");
            }
        }
        p = {
            rwidth: parseInt(document.documentElement.clientWidth),
            rheight: parseInt(document.documentElement.clientHeight),
            doch: parseInt($R.$(document).height()),
            largura: parseInt($obj.width()),
            altura: parseInt($obj.height()),
            ptop: parseInt($obj.css("padding-top")),
            pright: parseInt($obj.css("padding-right")),
            pbottom: parseInt($obj.css("padding-bottom")),
            pleft: parseInt($obj.css("padding-left")),
            btop: parseInt($obj.css("border-top-width")),
            bright: parseInt($obj.css("border-right-width")),
            bbottom: parseInt($obj.css("border-bottom-width")),
            bleft: parseInt($obj.css("border-left-width"))
        };
        largura = (p.largura + p.pleft + p.pright + p.bright + p.bleft) / 2;
        altura = p.altura + p.ptop + p.pbottom + p.btop + p.bbottom;
        _top = "50%";
        _mtop = "-" + altura / 2 + "px";
        if (typeof param !== "undefined" && param.align === "document" && p.doch > $R.$(window).height()) {
            _top = (p.doch - altura - 20) / 2 + "px";
            _mtop = "";
        }
        if (altura > p.rheight) _top = "0px";
        $obj.css({
            position: "absolute",
            left: "50%",
            top: _top,
            "margin-top": _mtop,
            "margin-left": "-" + largura + "px"
        });
        if (typeof callback == "function") {
            callback.call(this);
        } else if (typeof param == "function") {
            param.call(this);
        }
    };
})(jQuery);

(function($) {
    var settings = {
        swipe_h_threshold: 50,
        swipe_v_threshold: 50,
        taphold_threshold: 750,
        doubletap_int: 500,
        touch_capable: "ontouchstart" in document.documentElement,
        startevent: "ontouchstart" in document.documentElement ? "touchstart" : "mousedown",
        endevent: "ontouchstart" in document.documentElement ? "touchend" : "mouseup"
    };
    $.fn.tap = function(handler) {
        return this.each(function() {
            var $this = $(this);
            var started = false;
            $this.bind(settings.startevent, function(e) {
                e.preventDefault();
                started = true;
            });
            $this.bind(settings.endevent, function() {
                if (started) {
                    handler.call(this, event);
                }
            });
        });
    };
    $.fn.doubletap = function(handler) {
        return this.each(function() {
            var $this = $(this);
            var delay = settings.doubletap_int;
            var action;
            $this.bind(settings.endevent, function(event) {
                var now = new Date().getTime();
                var lastTouch = $this.data("lastTouch") || now + 1;
                var delta = now - lastTouch;
                clearTimeout(action);
                if (delta < settings.doubletap_int && delta > 0) {
                    if (handler !== null) {
                        handler.call(this, event);
                    }
                } else {
                    $this.data("lastTouch", now);
                    action = setTimeout(function(evt) {
                        clearTimeout(action);
                    }, delay, [ event ]);
                }
                $this.data("lastTouch", now);
            });
        });
    };
    $.fn.tapstart = function(handler) {
        return this.each(function() {
            var $this = $(this);
            $this.bind(settings.startevent, function(event) {
                handler.call(this, event);
            });
        });
    };
    $.fn.tapend = function(handler) {
        return this.each(function() {
            var $this = $(this);
            $this.bind(settings.endevent, function(event) {
                handler.call(this, event);
            });
        });
    };
    $.fn.taphold = function(handler) {
        return this.each(function() {
            var $this = $(this);
            var start_time = Date.now();
            var timer = null;
            var target = null;
            $this.bind(settings.startevent, function(event) {
                target = event.target;
                timer = setTimeout(function() {
                    if (event.target == target) {
                        handler.call(this, event);
                    }
                }, settings.taphold_threshold);
            });
            $this.bind(settings.endevent, function(event) {
                clearTimeout(timer);
            });
        });
    };
    $.fn.swipe = function(upfn, rightfn, downfn, leftfn) {
        return this.each(function() {
            $this = $(this);
            var originalCoord = {
                x: 0,
                y: 0
            };
            var finalCoord = {
                x: 0,
                y: 0
            };
            if (settings.touch_capable) {
                function touchStart(event) {
                    originalCoord.x = event.targetTouches[0].pageX;
                    originalCoord.y = event.targetTouches[0].pageY;
                }
                function touchMove(event) {
                    event.preventDefault();
                    finalCoord.x = event.targetTouches[0].pageX;
                    finalCoord.y = event.targetTouches[0].pageY;
                }
                function touchEnd(event) {
                    if (originalCoord.y > finalCoord.y && originalCoord.y - finalCoord.y > settings.swipe_v_threshold) {
                        if (upfn !== undefined) {
                            upfn.call(this, event);
                        }
                    }
                    if (originalCoord.x < finalCoord.x && finalCoord.x - originalCoord.x > settings.swipe_h_threshold) {
                        if (rightfn !== undefined) {
                            rightfn.call(this, event);
                        }
                    }
                    if (originalCoord.y < finalCoord.y && finalCoord.y - originalCoord.y > settings.swipe_v_threshold) {
                        if (downfn !== undefined) {
                            downfn.call(this, event);
                        }
                    }
                    if (originalCoord.x > finalCoord.x && originalCoord.x - finalCoord.x > settings.swipe_h_threshold) {
                        if (leftfn !== undefined) {
                            leftfn.call(this, event);
                        }
                    }
                }
                function touchStart(event) {
                    originalCoord.x = event.targetTouches[0].pageX;
                    originalCoord.y = event.targetTouches[0].pageY;
                    finalCoord.x = originalCoord.x;
                    finalCoord.y = originalCoord.y;
                }
                function touchCancel(event) {}
                this.addEventListener("touchstart", touchStart, false);
                this.addEventListener("touchmove", touchMove, false);
                this.addEventListener("touchend", touchEnd, false);
                this.addEventListener("touchcancel", touchCancel, false);
            } else {
                function touchStart(event) {
                    originalCoord.x = event.pageX;
                    originalCoord.y = event.pageY;
                }
                function touchMove(event) {
                    event.preventDefault();
                    finalCoord.x = event.pageX;
                    finalCoord.y = event.pageY;
                }
                function touchEnd(event) {
                    if (originalCoord.y > finalCoord.y && originalCoord.y - finalCoord.y > settings.swipe_v_threshold) {
                        if (upfn !== undefined) {
                            upfn.call(this, event);
                        }
                    }
                    if (originalCoord.x < finalCoord.x && finalCoord.x - originalCoord.x > settings.swipe_h_threshold) {
                        if (rightfn !== undefined) {
                            rightfn.call(this, event);
                        }
                    }
                    if (originalCoord.y < finalCoord.y && finalCoord.y - originalCoord.y > settings.swipe_v_threshold) {
                        if (downfn !== undefined) {
                            downfn.call(this, event);
                        }
                    }
                    if (originalCoord.x > finalCoord.x && originalCoord.x - finalCoord.x > settings.swipe_h_threshold) {
                        if (leftfn !== undefined) {
                            leftfn.call(this, event);
                        }
                    }
                }
                function touchStart(event) {
                    originalCoord.x = event.pageX;
                    originalCoord.y = event.pageY;
                    finalCoord.x = originalCoord.x;
                    finalCoord.y = originalCoord.y;
                }
                this.addEventListener("mousedown", touchStart, false);
                this.addEventListener("mousemove", touchMove, false);
                this.addEventListener("mouseup", touchEnd, false);
            }
        });
    };
    $.fn.swipeup = function(handler) {
        return this.swipe(handler, undefined, undefined, undefined);
    };
    $.fn.swiperight = function(handler) {
        return this.swipe(undefined, handler, undefined, undefined);
    };
    $.fn.swipedown = function(handler) {
        return this.swipe(undefined, undefined, handler, undefined);
    };
    $.fn.swipeleft = function(handler) {
        return this.swipe(undefined, undefined, undefined, handler);
    };
})(jQuery);

if (typeof JRetail != "object") {
    JRetail = {};
}

(function() {
    var version = 2, release = 3, revision = 7, build = 103;
    JRetail.Rsis = {
        Version: {
            _FILE: "001jretail.rsis.version.js"
        }
    };
    JRetail.rsis = JRetail.rsis || {};
    JRetail.rsis.VersionJS = version + "." + release + "." + revision;
})();

var $W = window;

(function(window, undefined) {
    var rootRsis, document = window.document, rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/, Rsis = function() {
        var Rsis = function(selector, context) {
            return new Rsis.fn.init(selector, context);
        }, _$R = window.$R, charset = "ISO-8859-1", toString = Object.prototype.toString, hasOwn = Object.prototype.hasOwnProperty, slice = Array.prototype.slice, trim = String.prototype.trim, indexOf = Array.prototype.indexOf, ua = navigator.userAgent.toLowerCase(), rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/, core_msie = /msie [\w.]+/, core_deletedIds = [], rdigit = /\d/, class2type = {}, core_uicontext = new Map(), toString = Object.prototype.toString, hasOwn = Object.prototype.hasOwnProperty, push = Array.prototype.push, slice = Array.prototype.slice, trim = String.prototype.trim, indexOf = Array.prototype.indexOf, core_concat = core_deletedIds.concat, core_push = core_deletedIds.push, core_slice = core_deletedIds.slice, core_indexOf = core_deletedIds.indexOf, core_toString = class2type.toString, core_hasOwn = class2type.hasOwnProperty, selHder = "listHolder", core_browser_ie = false;
        if (core_msie.exec(ua)) {
            core_browser_ie = true;
        }
        Rsis.fn = Rsis.prototype = {
            rsis: JRetail.rsis.VersionJS,
            constructor: Rsis,
            init: function(selector, context) {
                if (!selector) {
                    return this;
                }
                if (typeof selector === "string") {
                    if (selector === "body") {
                        this.context = document;
                        this[0] = document.body;
                        this.selector = "body";
                        this.length = 1;
                    } else {
                        this[0] = $(selector);
                        this.length = 1;
                        this.context = document;
                        this.selector = selector;
                        return this;
                    }
                } else if (selector.nodeType) {
                    this.context = this[0] = selector;
                    this.length = 1;
                    return this;
                } else if (Rsis.isFunction(selector)) {
                    return typeof rootRsis.ready !== "undefined" ? rootRsis.ready(selector) : selector(Rsis);
                }
                if (selector.selector !== undefined) {
                    this.selector = selector.selector;
                    this.context = selector.context;
                }
                return Rsis.makeArray(selector, this);
            },
            each: function(callback, args) {
                return Rsis.each(this, callback, args);
            },
            length: 0,
            size: function() {
                return this.length;
            },
            toArray: function() {
                return core_slice.call(this);
            },
            get: function(num) {
                return num == null ? this.toArray() : num < 0 ? this[this.length + num] : this[num];
            },
            pushStack: function(elems) {
                var ret = Rsis.merge(this.constructor(), elems);
                ret.prevObject = this;
                ret.context = this.context;
                return ret;
            },
            slice: function() {
                return this.pushStack(core_slice.apply(this, arguments));
            },
            first: function() {
                return this.eq(0);
            },
            last: function() {
                return this.eq(-1);
            },
            eq: function(i) {
                var len = this.length, j = +i + (i < 0 ? len : 0);
                return this.pushStack(j >= 0 && j < len ? [ this[j] ] : []);
            },
            map: function(callback) {
                return this.pushStack(Rsis.map(this, function(elem, i) {
                    return callback.call(elem, i, elem);
                }));
            },
            end: function() {
                return this.prevObject || this.constructor(null);
            },
            call: function(ns_string) {
                try {
                    try {
                        if (ns_string.search(/\$P./) > -1) {
                            ns_string = ns_string.replace("$P.", "");
                        }
                        return this.namespace($P, ns_string);
                    } catch (e) {
                        return this.namespace($W, ns_string);
                    }
                } catch (oErr) {
                    outPrint(oErr, ".call", this);
                }
            },
            push: push,
            sort: [].sort,
            splice: [].splice
        };
        Rsis.charset = charset;
        Rsis._FILE = "001rsis.js";
        Rsis.version = JRetail.rsis.VersionJS;
        Rsis.fn.init.prototype = Rsis.fn;
        rootRsis = Rsis(document);
        Rsis.extend = Rsis.fn.extend = function() {
            var options, name, src, copy, copyIsArray, clone, target = arguments[0] || {}, i = 1, length = arguments.length, deep = false;
            if (typeof target === "boolean") {
                deep = target;
                target = arguments[1] || {};
                i = 2;
            }
            if (length === 2 && target.wasExtended) return target;
            if (typeof target !== "object" && !typeof target === "function") {
                target = {};
            } else if (typeof target !== "object" && typeof target === "string" && typeof window[target] !== "undefined") {
                target = window[target];
            }
            if (length === i) {
                target = this;
                --i;
            }
            for (;i < length; i++) {
                if ((options = arguments[i]) != null) {
                    for (name in options) {
                        src = target[name];
                        copy = options[name];
                        if (target === copy || name === "UIContext" || core_browser_ie && name === "nodeName") {
                            continue;
                        }
                        if (deep && copy && (Rsis.isPlainObject(copy) || (copyIsArray = Rsis.isArray(copy)))) {
                            if (copyIsArray) {
                                copyIsArray = false;
                                clone = src && Rsis.isArray(src) ? src : [];
                            } else {
                                clone = src && Rsis.isPlainObject(src) ? src : {};
                            }
                            target[name] = Rsis.extend(deep, clone, copy);
                        } else if (copy !== undefined) {
                            if (typeof copy === "function") {
                                copy["method"] = name;
                            }
                            target[name] = copy;
                        }
                    }
                }
            }
            return target;
        };
        Rsis.getUIForm = function(obj) {
            var UIContext = Rsis.UIContext.get(obj);
            if (UIContext) return UIContext.getUIForm(obj);
            return null;
        };
        Rsis.$invoker = function() {
            var fn = null, self = null;
            if (arguments.length > 0) {
                if (arguments.length == 1) {
                    fn = arguments[0];
                    self = null;
                } else {
                    self = arguments[0];
                    fn = arguments[1];
                }
            } else if (Rsis.isArray(this[0])) {
                fn = this[0];
                self = null;
            }
            if (isFunction(fn)) {
                fn.apply(self, this.$injection);
            } else if (!isEmptyArray(fn)) {
                if (fn.length == 1) {
                    if (isFunction(fn[0])) {
                        fn[0].apply(self, this.$injection);
                    }
                } else {
                    var args = fn;
                    var $inject = args.pop(), $injection = !isEmptyArray(this.$injection) || args;
                    if (isFunction($inject)) {
                        return $inject.apply(self, $injection);
                    }
                }
            }
            return null;
        };
        Rsis.$invoker.$injection = [];
        Rsis.UIContext = {
            _uiContexts: null,
            add: function(key, _fs) {
                if (this._uiContexts == null) this._uiContexts = new Map();
                this._uiContexts.put(key, _fs);
            },
            get: function(key) {
                try {
                    if (typeof key !== "undefined" && key !== null && key !== "") {
                        if (typeof key === "string") {
                            return this._uiContexts.get(key);
                        } else {
                            if (typeof key.getDialogId == "function") {
                                return this._uiContexts.get(key.getDialogId());
                            } else {
                                var dataui = null;
                                if (isDocument(key)) {
                                    var form = $formsByObject(key)[0];
                                    if (form) {
                                        dataui = form.getAttribute("data-ui");
                                    }
                                } else {
                                    dataui = key.getAttribute("data-ui");
                                }
                                if (!isDocument(key) && dataui == null && key.id.search(/#/) > -1) {
                                    var arry = key.id.split("#");
                                    if (arry && arry.length > 0) {
                                        var arry2 = arry[0].split("__");
                                        if (arry2 && arry2.length > 0) dataui = arry2[0];
                                    }
                                }
                                if (dataui !== null && dataui !== "") {
                                    return this._uiContexts.get(dataui);
                                } else {
                                    if (this._uiContexts == null) this._uiContexts = new Map();
                                    var _uiContext = this._uiContexts.get("default");
                                    if (!_uiContext) {
                                        _uiContext = this.getInstance();
                                        this.add("default", _uiContext);
                                    }
                                    return _uiContext;
                                }
                            }
                        }
                    } else {
                        if (this._uiContexts == null) this._uiContexts = new Map();
                        var _uiContext = this._uiContexts.get("default");
                        if (!_uiContext) {
                            _uiContext = this.getInstance();
                            this.add("default", _uiContext);
                        }
                        return _uiContext;
                    }
                } catch (oErr) {
                    outPrint(oErr, ".get", Rsis);
                }
            },
            getInstance: function(_dialog) {
                var uic = new _UIContext();
                if (_dialog) {
                    uic.dialog = _dialog;
                }
                return uic;
            },
            remove: function(key) {
                var c = this.get(key);
                for (var i in c) {
                    c[i] = null;
                }
                this.add(key, c);
                this._uiContexts.remove(key);
            }
        };
        Rsis.extend({
            browser: {
                version: 0,
                chrome: false,
                safari: false,
                opera: false,
                msie: false,
                mozilla: false,
                test: function(a, z) {
                    var u = "unknown", a = typeof a == "undefined" ? navigator.userAgent : a, x = "X", m = function(r, h) {
                        for (var i = 0; i < h.length; i = i + 1) {
                            r = r.replace(h[i][0], h[i][1]);
                        }
                        return r;
                    }, c = function(i, a, b, c) {
                        var r = {
                            name: m((a.exec(i) || [ u, u ])[1], b)
                        };
                        r[r.name] = true;
                        r.version = (c.exec(i) || [ x, x, x, x ])[3];
                        if (r.name.match(/safari/) && r.version > 400) {
                            r.version = "2.0";
                        }
                        if (r.name === "presto") {
                            r.version = $.browser.version > 9.27 ? "futhark" : "linear_b";
                        }
                        if (r.name === "firefox") {
                            r.mozilla = true;
                        }
                        if (r.name === "trident" && !!i.match(/trident\/7\./)) {
                            r.msie = true;
                            r.version = /(trident\/7\.)(?:.*? rv:([\w.]+)|)/.exec(i)[2];
                            r.name = "MSIE";
                        }
                        r.versionNumber = parseFloat(r.version, 10) || 0;
                        r.versionX = r.version !== x ? (r.version + "").substr(0, 1) : x;
                        r.className = r.name + r.versionX;
                        return r;
                    };
                    a = (a.match(/Opera|Safari|Navigator|Minefield|KHTML|Chrome/) ? m(a, [ [ /(Firefox|MSIE|Trident|KHTML,\slike\sGecko|Konqueror)/, "" ], [ "Chrome Safari", "Chrome" ], [ "KHTML", "Konqueror" ], [ "Minefield", "Firefox" ], [ "Navigator", "Netscape" ] ]) : a).toLowerCase();
                    var regexp_navigator = /(camino|chrome|firefox|netscape|konqueror|lynx|msie|trident|opera|safari)/, regexp_version_nav = /(camino|chrome|firefox|netscape|netscape6|opera|version|konqueror|lynx|msie|trident|safari)(\/|\s)([a-z0-9\.\+]*?)(\;|dev|rel|\s|$)/, new_array = [];
                    Rsis.browser = Rsis.extend(Rsis.browser, c(a, regexp_navigator, new_array, regexp_version_nav));
                    Rsis.layout = c(a, /(gecko|konqueror|msie|trident|opera|webkit)/, [ [ "konqueror", "khtml" ], [ "msie", "trident" ], [ "opera", "presto" ] ], /(applewebkit|rv|konqueror|msie|trident)(\:|\/|\s)([a-z0-9\.]*?)(\;|\)|\s)/);
                    Rsis.os = {
                        name: (/(win|mac|linux|sunos|solaris|iphone|ipad|ipod|android|blackberry|mini)/.exec(navigator.platform.toLowerCase()) || [ u ])[0].replace("sunos", "solaris")
                    };
                    Rsis.device = {
                        isPhone: /iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile/i.test(navigator.userAgent.toLowerCase()),
                        isTablet: /ipad|android|GT-P1000|GT-P1000M|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.test(navigator.userAgent.toLowerCase()),
                        name: (/iphone|ipod|android|blackberry|opera|mini|windows\sce|palm|smartphone|iemobile|ipad|android|android 3.0|xoom|sch-i800|playbook|tablet|kindle/i.exec(navigator.userAgent.toLowerCase()) || [ u ])[0]
                    };
                    Rsis.isMobileDevice = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i.test(navigator.userAgent.toLowerCase());
                }
            },
            includeSettings: {
                host: location.protocol + "//" + location.host,
                contextPath: contextPath,
                defaultPath: "",
                files: [],
                viewMsgs: false
            },
            include: function() {
                try {
                    var length = arguments.length, sts = Rsis.includeSettings, settings = null, i = 0, maxLen = 0;
                    if (length == 0) {
                        return this;
                    }
                    settings = arguments[0];
                    if (typeof settings !== "object") {
                        settings = sts;
                    } else {
                        settings = Rsis.extend(sts, settings);
                    }
                    var host = settings.host, contextPath = settings.contextPath, defaultPath = settings.defaultPath, files = settings.files, maxLen = files.length;
                    for (;i < maxLen; i++) {
                        var href = files[i];
                        if (typeof href === "string" && href != null && href !== "") {
                            var objectName = Rsis.registerName(href);
                            if (objectName != null) {
                                var urlLocation = host + contextPath;
                                if (defaultPath !== "") {
                                    urlLocation = urlLocation + defaultPath;
                                }
                                urlLocation = urlLocation + "/" + href;
                                JRetail.inc.js(urlLocation, undefined, objectName, false);
                            }
                        }
                    }
                    if (!this.viewMsgs) JRetail.loading.stop();
                } catch (oErr) {
                    outPrint(oErr, ".include", Rsis);
                }
            },
            registerName: function(spt) {
                if (typeof spt === "string" && spt != null && spt !== "") {
                    var stringArgs = spt.split("?")[0].split("/"), objectName = stringArgs[stringArgs.length - 1].split(".js")[0];
                    if (typeof objectName === "string" && objectName !== "") {
                        if (typeof objectName === "string") {
                            var nsParts = objectName.replaceAll(".", " ");
                            nsParts = nsParts.capitalize();
                            nsParts = nsParts.replaceAll("Jretail", "JRetail");
                            return nsParts.replaceAll(" ", ".");
                        }
                        return null;
                    }
                }
                return null;
            }
        });
        Rsis.browser.test();
        Rsis.extend({
            _nodeName: function(elem, name) {
                return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();
            },
            getNodeName: function(elem, name) {
                return this._nodeName(elem, name);
            },
            makeArray: function(arr, results) {
                var ret = results || [];
                if (arr != null) {
                    if (isArraylike(Object(arr))) {
                        Rsis.merge(ret, typeof arr === "string" ? [ arr ] : arr);
                    } else {
                        push.call(ret, arr);
                    }
                }
                return ret;
            },
            inArray: function(elem, arr, i) {
                var len;
                if (arr) {
                    if (core_indexOf) {
                        return core_indexOf.call(arr, elem, i);
                    }
                    len = arr.length;
                    i = i ? i < 0 ? Math.max(0, len + i) : i : 0;
                    for (;i < len; i++) {
                        if (i in arr && arr[i] === elem) {
                            return i;
                        }
                    }
                }
                return -1;
            },
            merge: function(first, second) {
                var l = second.length, i = first.length, j = 0;
                if (typeof l === "number") {
                    for (;j < l; j++) {
                        first[i++] = second[j];
                    }
                } else {
                    while (second[j] !== undefined) {
                        first[i++] = second[j++];
                    }
                }
                first.length = i;
                return first;
            },
            grep: function(elems, callback, inv) {
                var retVal, ret = [], i = 0, length = elems.length;
                inv = !!inv;
                for (;i < length; i++) {
                    retVal = !!callback(elems[i], i);
                    if (inv !== retVal) {
                        ret.push(elems[i]);
                    }
                }
                return ret;
            },
            map: function(elems, callback, arg) {
                var value, i = 0, length = elems.length, isArray = isArraylike(elems), ret = [];
                if (isArray) {
                    for (;i < length; i++) {
                        value = callback(elems[i], i, arg);
                        if (value != null) {
                            ret[ret.length] = value;
                        }
                    }
                } else {
                    for (i in elems) {
                        value = callback(elems[i], i, arg);
                        if (value != null) {
                            ret[ret.length] = value;
                        }
                    }
                }
                return core_concat.apply([], ret);
            },
            guid: 1,
            proxy: function(fn, context) {
                var args, proxy, tmp;
                if (typeof context === "string") {
                    tmp = fn[context];
                    context = fn;
                    fn = tmp;
                }
                if (!Rsis.isFunction(fn)) {
                    return undefined;
                }
                args = core_slice.call(arguments, 2);
                proxy = function() {
                    return fn.apply(context || this, args.concat(core_slice.call(arguments)));
                };
                proxy.guid = fn.guid = fn.guid || Rsis.guid++;
                return proxy;
            },
            access: function(elems, fn, key, value, chainable, emptyGet, raw) {
                var i = 0, length = elems.length, bulk = key == null;
                if (Rsis.typeOf(key) === "object") {
                    chainable = true;
                    for (i in key) {
                        Rsis.access(elems, fn, i, key[i], true, emptyGet, raw);
                    }
                } else if (value !== undefined) {
                    chainable = true;
                    if (!Rsis.isFunction(value)) {
                        raw = true;
                    }
                    if (bulk) {
                        if (raw) {
                            fn.call(elems, value);
                            fn = null;
                        } else {
                            bulk = fn;
                            fn = function(elem, key, value) {
                                return bulk.call(Rsis(elem), value);
                            };
                        }
                    }
                    if (fn) {
                        for (;i < length; i++) {
                            fn(elems[i], key, raw ? value : value.call(elems[i], i, fn(elems[i], key)));
                        }
                    }
                }
                return chainable ? elems : bulk ? fn.call(elems) : length ? fn(elems[0], key) : emptyGet;
            },
            parseHTML: function(data, context, keepScripts) {
                if (!data || typeof data !== "string") {
                    return null;
                }
                if (typeof context === "boolean") {
                    keepScripts = context;
                    context = false;
                }
                context = context || document;
                var parsed = rsingleTag.exec(data), scripts = !keepScripts && [];
                if (parsed) {
                    return [ context.createElement(parsed[1]) ];
                }
                parsed = Rsis.buildFragment([ data ], context, scripts);
                if (scripts) {
                    Rsis(scripts).remove();
                }
                return Rsis.merge([], parsed.childNodes);
            }
        });
        Rsis.extend({
            wasExtended: true,
            now: function() {
                return new Date().getTime();
            },
            isFunction: function(obj) {
                return Rsis.typeOf(obj) === "function";
            },
            isNumeric: function(obj) {
                return !isNaN(parseFloat(obj)) && isFinite(obj);
            },
            isArray: Array.isArray || function(obj) {
                return Rsis.typeOf(obj) === "array";
            },
            isUIForm: function(target) {
                return typeof target == "object" && (typeof target.hasOwnProperty != "undefined" && target.hasOwnProperty("domainXML"));
            },
            inArray: function(elem, array, i) {
                var len;
                if (array) {
                    if (indexOf) {
                        return indexOf.call(array, elem, i);
                    }
                    len = array.length;
                    i = i ? i < 0 ? Math.max(0, len + i) : i : 0;
                    for (;i < len; i++) {
                        if (i in array && array[i] === elem) {
                            return i;
                        }
                    }
                }
                return -1;
            },
            each: function(object, callback, args) {
                var name, i = 0, length = object.length, isObj = length === undefined || Rsis.isFunction(object);
                if (args) {
                    if (isObj) {
                        for (name in object) {
                            if (callback.apply(object[name], args) === false) {
                                break;
                            }
                        }
                    } else {
                        for (;i < length; ) {
                            if (callback.apply(object[i++], args) === false) {
                                break;
                            }
                        }
                    }
                } else {
                    if (isObj) {
                        for (name in object) {
                            if (callback.call(object[name], name, object[name]) === false) {
                                break;
                            }
                        }
                    } else {
                        for (;i < length; ) {
                            if (callback.call(object[i], i, object[i++]) === false) {
                                break;
                            }
                        }
                    }
                }
                return object;
            },
            merge: function(first, second) {
                var l = second.length, i = first.length, j = 0;
                if (typeof l === "number") {
                    for (;j < l; j++) {
                        first[i++] = second[j];
                    }
                } else {
                    while (second[j] !== undefined) {
                        first[i++] = second[j++];
                    }
                }
                first.length = i;
                return first;
            },
            grep: function(elems, callback, inv) {
                var retVal, ret = [], i = 0, length = elems.length;
                inv = !!inv;
                for (;i < length; i++) {
                    retVal = !!callback(elems[i], i);
                    if (inv !== retVal) {
                        ret.push(elems[i]);
                    }
                }
                return ret;
            },
            map: function(elems, callback, arg) {
                var value, i = 0, length = elems.length, isArray = isArraylike(elems), ret = [];
                if (isArray) {
                    for (;i < length; i++) {
                        value = callback(elems[i], i, arg);
                        if (value != null) {
                            ret[ret.length] = value;
                        }
                    }
                } else {
                    for (i in elems) {
                        value = callback(elems[i], i, arg);
                        if (value != null) {
                            ret[ret.length] = value;
                        }
                    }
                }
                return core_concat.apply([], ret);
            },
            isWindow: function(obj) {
                return obj && typeof obj === "object" && "setInterval" in obj;
            },
            isNaN: function(obj) {
                return obj == null || !rdigit.test(obj) || isNaN(obj);
            },
            isUndefined: function(obj) {
                return typeof obj === "undefined";
            },
            hasScrollX: function() {
                var root = document.compatMode == "BackCompat" ? document.body : document.documentElement;
                return root.scrollWidth > root.clientWidth;
            },
            hasScrollY: function() {
                var root = document.compatMode == "BackCompat" ? document.body : document.documentElement;
                return root.scrollHeight > root.clientHeight;
            },
            hasIn: function(key) {
                return key in (typeof arguments[1] == "undefined" ? this : arguments[1]) ? true : false;
            },
            typeOf: function(obj) {
                return obj == null ? String(obj) : class2type[toString.call(obj)] || "object";
            },
            isPlainObject: function(obj) {
                if (!obj || typeof obj !== "object" || obj.nodeType || Rsis.isWindow(obj)) {
                    return false;
                }
                if (obj.constructor && !hasOwn.call(obj, "constructor") && !hasOwn.call(obj.constructor.prototype, "isPrototypeOf")) {
                    return false;
                }
                var key;
                for (key in obj) {}
                return key === undefined || hasOwn.call(obj, key);
            },
            namespace: function() {
                var parent, ns_string;
                if (arguments.length == 1) {
                    parent = window, ns_string = arguments[0];
                } else {
                    parent = arguments[0] || window;
                    ns_string = arguments[1];
                }
                var parts = ns_string.split("."), op = false, object = null, pl, i;
                if (arguments.length === 3) {
                    op = typeof arguments[2] === "undefined" ? false : arguments[2];
                }
                if (parts[0] == "Rsis") {
                    parts = parts.slice(1);
                }
                if (typeof op === "undefined") op = false;
                pl = parts.length;
                for (i = 0; i < pl; i++) {
                    if (isNoEmpty(parts[i]) && parts[i].search(/(\(+[\s+\d+x\s*\w\W)]+|\))/) > -1) {
                        break;
                    }
                    if (typeof parent[parts[i]] == "undefined" && op) {
                        parent[parts[i]] = {};
                    }
                    if (typeof parent.dataUi != "undefined" && typeof parent[parts[i]].dataUi == "undefined") {
                        parent[parts[i]].dataUi = parent.dataUi;
                    }
                    parent = parent[parts[i]];
                }
                return parent;
            },
            str2Fn: function(ns, ns_string) {
                var parts = ns_string.split("."), parent = ns || window, op = false, object = null, pl, i;
                if (arguments.length === 3) {
                    op = typeof arguments[2] === "undefined" ? false : arguments[2];
                }
                if (parts[0] == "Rsis") {
                    parts = parts.slice(1);
                }
                if (typeof op === "undefined") op = false;
                pl = parts.length;
                for (i = 0; i < pl; i++) {
                    var member = parts[i];
                    if (typeof parent[member] == "undefined" && op) {
                        parent[member] = {};
                    }
                    if (typeof parent != "undefined" && typeof parent[member] == "undefined") {
                        parent = parent[member.replace(/(\(+[\s+\d+x\s*\w\W)]+|\))/, "")];
                    } else parent = parent[member];
                }
                return parent;
            },
            define: function() {
                var args = arguments, length = args.length, ns, ns_string, ns_object;
                if (length == 2) {
                    ns = window;
                    ns_string = args[0];
                    ns_object = args[1];
                }
                if (length == 3) {
                    ns = args[0];
                    ns_string = args[1];
                    ns_object = args[2];
                }
                if (!ns || !ns_string) return;
                ns_object = ns_object || {};
                var parent = this.namespace(ns, ns_string, true);
                if (typeof ns_object == "object") Rsis.extend(parent, ns_object);
                if (typeof parent.className === "undefined") parent.className = ns_string;
                return parent;
            },
            getClazz: function() {
                var isClazz = arguments[1], win = null, i, j, d = arguments[0].split("."), p = isClazz ? d.length : d.length - 1;
                if (p > 0) {
                    win = window, j = d[0] == "Rsis" ? 1 : 0;
                    for (;j < p; j = j + 1) {
                        win[d[j]] = win[d[j]] || {};
                        win = win[d[j]];
                    }
                }
                return win;
            },
            render: function() {
                this.ui.render.apply(null, arguments);
                return this;
            }
        });
        Rsis.each("Boolean Number String Function Array Date RegExp Object".split(" "), function(i, name) {
            class2type["[object " + name + "]"] = name.toLowerCase();
        });
        Rsis.extend({
            parent: function(elem) {
                var parent = elem.parentNode;
                return parent && parent.nodeType !== 11 ? parent : null;
            },
            closeListHolder: function(evt) {
                var i = 0, forms = document.forms;
                for (;i < forms.length; i++) {
                    UtilRsis.CloseCombo(forms[i], evt);
                }
            },
            isNodeSaved: function() {
                var UIContext = Rsis.UIContext.get(arguments[0]), objXML = arguments[1];
                if (typeof TabbedPaneRsis == "object") {
                    var object = UIContext.dialog.d.contentWindow, forms = object && object.getElementsByTagName("FORM") || document.forms;
                    if (forms && forms.length > 0) {
                        for (var i = 0; i < forms.length; i++) {
                            var formName = forms[i].id, UIFormAba = UIContext.getUIForm(formName);
                            if (UIFormAba && !Crud.getNodeIsSaved(UIFormAba, objXML)) {
                                return false;
                            }
                        }
                    }
                } else {
                    var UIForm = UIContext.getUIForm(this);
                    if (!UIForm) {
                        UIForm = UIContext.getUIForm(arguments[0]);
                    }
                    return Crud.getNodeIsSaved(UIForm, objXML);
                }
                return true;
            },
            call: function(ns_string) {
                try {
                    try {
                        if (ns_string.search(/\$P./) > -1) {
                            ns_string = ns_string.replace("$P.", "");
                        }
                        return this.namespace($P, ns_string);
                    } catch (e) {
                        return this.namespace($W, ns_string);
                    }
                } catch (oErr) {
                    outPrint(oErr, "this.call()", this);
                }
            }
        });
        Rsis.extend({
            findPos: function() {
                var obj = arguments[0] || this, curleft = curtop = 0;
                if (obj.offsetParent) {
                    do {
                        curleft += obj.offsetLeft;
                        curtop += obj.offsetTop;
                    } while (obj = obj.offsetParent);
                }
                return {
                    left: curleft,
                    top: curtop
                };
            },
            getPageScroll: function() {
                var xScroll, yScroll;
                if (self.pageYOffset) {
                    yScroll = self.pageYOffset;
                    xScroll = self.pageXOffset;
                } else if (document.documentElement && document.documentElement.scrollTop) {
                    yScroll = document.documentElement.scrollTop;
                    xScroll = document.documentElement.scrollLeft;
                } else if (document.body) {
                    yScroll = documentElement.scrollTop || document.body.scrollTop;
                    xScroll = document.body.scrollLeft;
                }
                return {
                    xScroll: xScroll,
                    yScroll: yScroll
                };
            },
            findPosRelativeToViewport: function() {
                var obj = arguments[0] || this, objPos = Rsis.findPos(obj), scroll = Rsis.getPageScroll();
                return {
                    left: objPos.left - scroll.xScroll,
                    top: objPos.top - scroll.yScroll
                };
            }
        });
        Rsis.fn.extend({
            parent: function(elem) {
                var parent = elem.parentNode;
                return parent && parent.nodeType !== 11 ? parent : null;
            },
            render: function(_state, _noRdrDevel) {
                if (this && this[0]) {
                    Rsis.ui.render.apply(null, [ this[0], _state, _noRdrDevel ]);
                }
                return this;
            },
            show: function() {
                if (this && this[0]) this.visible(true);
                return this;
            },
            hide: function() {
                if (this && this[0]) this.visible(false);
                return this;
            },
            getMask: function() {
                if (this && this[0]) return getAtt(this[0], "mask");
                return null;
            },
            getIframe: function() {
                if (this && this[0]) return $getIframeByObject(this[0]);
                return null;
            },
            call: function(ns_string) {
                try {
                    if (ns_string.search(/\$P./) > -1) {
                        ns_string = ns_string.replace("$P.", "");
                    }
                    return Rsis.namespace($P, ns_string);
                } catch (e) {
                    return Rsis.namespace($W, ns_string);
                }
            },
            getCalendar: function() {
                if (this && this[0]) {
                    var strPattern = $R(this[0]).getMask().split("::");
                    if (strPattern && strPattern.length > 0 && strPattern[0] == MaskRsis.DATE) {
                        return $(this[0].id + ".calendar");
                    }
                }
                return null;
            },
            isEditable: function(sts) {
                return this && this[0] && searchStringArguments(getAtt(this[0], "editable"), sts, ";", this[0]) ? true : false;
            },
            isMandatory: function(sts) {
                return this && this[0] && searchStringArguments(getAtt(this[0], "mandatory"), sts, ";", this[0]) ? true : false;
            },
            setMandatory: function(sts, styleClass) {
                if (this && this[0]) {
                    if (!this.isEditable(sts)) return this;
                    this[0].className = $R(this[0]).isMandatory(sts) ? styleClass[0] : styleClass[1];
                }
                return this;
            },
            isColHeader: function() {
                return this && this[0] && getAtt(this[0], "isColumnHeader") === "true" ? true : false;
            },
            rdOnly: function(rdy) {
                if (this && this[0]) {
                    this[0].readOnly = rdy;
                    this[0].style.cursor = rdy ? "default" : "pointer";
                    var args = arguments;
                    if (args && args[1] && args[1][2] !== "undefined" && args[1][2] != null) {
                        this[0].className = args[1][2];
                    }
                }
                return this;
            },
            setTabIdx: function(sts) {
                if (this && this[0]) {
                    var obj = this[0], tabindex = toInt(obj.getAttribute("tabindex")), tabindexVle = toInt(obj.getAttribute("tabindexValue"));
                    if (!isNaN(tabindex) && tabindex > -1) {
                        obj.setAttribute("tabindexValue", tabindex);
                    }
                    if (this.isEditable(sts)) {
                        if (!isNaN(tabindex) && tabindex == -1 && tabindexVle > -1) {
                            obj.setAttribute("tabindex", tabindexVle);
                        }
                    } else {
                        if (!isNaN(tabindex) && tabindex > -1) {
                            obj.setAttribute("tabindexValue", tabindex);
                            obj.setAttribute("tabindex", "-1");
                        } else obj.setAttribute("tabindexl", "-1");
                    }
                }
                return this;
            },
            disable: function(dsd) {
                if (this && this[0]) {
                    var listClasses = this[0].className, tokens = listClasses.split(" "), std = tokens[0], spcf = typeof tokens[1] === "string" ? tokens[1] : "", _css = arguments[1];
                    if (typeof _css === "undefined") {
                        _css = "oDsd";
                    }
                    this[0].disabled = dsd;
                    var element = Rsis.$(this[0]);
                    if (this[0].disabled) {
                        element.addClass(_css);
                    } else {
                        var classes = "cboDsd aCptDsd sBptDsd sFldDsd lBxDsd fpdDsd tbBtDsd btnDsb";
                        element.removeClass(classes + " " + _css);
                    }
                }
                return this;
            },
            enable: function() {
                if (this && this[0]) {
                    var op = Rsis.isUndefined(arguments[0]) ? true : arguments[0];
                    if (!Rsis.isUndefined(this[0].type) && this[0].type == "button") {
                        this.disable(!op);
                    } else {
                        var cp = this[0].getAttribute("component"), _css = null;
                        switch (cp) {
                          case "input":
                            _css = InputRsis.vClass;
                            break;

                          case "checkBox":
                            _css = "chkBxRdy";
                            break;
                        }
                        this.rdOnly(!op, _css);
                    }
                }
                return this;
            },
            visible: function(vis) {
                if (this && this[0]) {
                    var i = arguments.length, thiz = i > 1 ? arguments[0] : this[0], thst = this[0].style;
                    var vs = "visible", hd = "hidden", bk = "block", nn = "none", hasChild = thiz.getAttribute("childField") === "true" ? true : false;
                    thst.visibility = vis ? vs : hd;
                    thst.display = vis ? bk : nn;
                    if (thiz.parentNode && typeof thiz.parentNode.getElementsByTagName != "undefined") {
                        var arraylabel = thiz.parentNode.getElementsByTagName("label");
                        if (arraylabel && arraylabel.length > 0 && typeof arraylabel[0].getAttribute !== "undefined" && arraylabel[0].getAttribute("for") === thiz.id) {
                            var lst = arraylabel[0].style;
                            lst.visibility = vis ? vs : hd;
                            lst.display = vis ? bk : nn;
                        }
                    }
                    if (hasChild) {
                        var parent = thiz.parentNode;
                        if (parent && parent.className !== null && parent.className !== "" && thiz.className !== null && thiz.className !== "") {
                            var pClass = parent.className.toLowerCase(), tClass = thiz.className.toLowerCase();
                            if (-1 !== tClass.search(pClass.slice(1, pClass.length))) {
                                var pst = parent.style;
                                pst.visibility = vis ? vs : hd;
                                pst.display = vis ? bk : nn;
                            }
                        }
                    }
                }
                return this;
            },
            hide: function() {
                this.visible(false);
                return this;
            },
            show: function() {
                this.visible(true);
                return this;
            },
            visRestricted: function(sts) {
                var thiz = arguments[1] || this[0];
                var visualizeRestricted = getAtt(this[0], "visualizeRestricted");
                if (searchStringArgs(visualizeRestricted, sts, ";")) {
                    this.visible(getAttMandatory(this[0], "isVisible") === "true" ? true : false);
                } else {
                    this.visible(true);
                }
                return this;
            },
            widthCol: function() {
                var wdc = getAtt(this[0], "widthColumn");
                if (!Rsis.isUndefined(wdc) && wdc != null && wdc !== "") {
                    this[0].style.width = wdc;
                }
                return this;
            },
            cssHelp: function() {
                if (this && this[0]) {
                    var args = arguments && arguments.length > 0 ? arguments : null;
                    setCssHelp(this[0], args);
                    setCssHelpKeys(this[0], args);
                }
                return this;
            },
            setHint: function() {
                if (this && this[0]) UtilRsis.setHint(this[0]);
                return this;
            },
            hint: function() {
                if (this && this[0]) {
                    var hint = this[0].getAttribute("hint"), mover = "", mout = "";
                    if (hint != null && hint !== "") {
                        var $win = UtilRsis.getParentWindow(this[0]), lengthField = parseInt(hint.length), WIDTH = lengthField * 6.9 + 4;
                        var rt = "return ", jrt = "Rsis.Tip.";
                        mover = rt + $win + jrt + "show(this, event,'" + hint + "'," + round(WIDTH, 2) + ");";
                        mout = rt + $win + jrt + "hidden(this);";
                    }
                    setDOMEvent(this[0], "onmouseover", mover);
                    setDOMEvent(this[0], "onmouseout", mout);
                }
                return this;
            },
            addDOM: function(type, str) {
                if (this && this[0]) {
                    if (Rsis.browser.msie) this[0].setAttribute(type, new Function(str)); else this[0].setAttribute(type, str);
                }
                return this;
            },
            txtAlign: function() {
                if (this && this[0]) {
                    var pattern = this.getMask(), align = getAtt(this[0], "textAlign");
                    if (!isDecimal(pattern) && align != null && align !== "") {
                        this[0].style.textAlign = align;
                    } else if (isDecimal(pattern)) {
                        this.decimalAlign();
                    }
                }
                return this;
            },
            decimalAlign: function() {
                if (this && this[0]) {
                    if (isDecimal(this.getMask())) {
                        this[0].style.textAlign = "right";
                    }
                }
                return this;
            },
            upper: function() {
                if (this && this[0]) {
                    if (getAtt(this[0], "uppercase") === "true") {
                        this[0].value = this[0].value.toUpperCase();
                    }
                }
                return this;
            },
            focus: function() {
                if (this && this[0]) {
                    this[0].focus();
                }
                return this;
            },
            setFocus: function() {
                if (this && this[0]) {
                    var focus = getAtt(this[0], "focus");
                    if (!Rsis.isMobileDevice && Rsis.browser.firefox && typeof focus === "string" && focus === "true") {
                        this[0].focus();
                    }
                }
                return this;
            },
            isTagName: function(er) {
                return er && new RegExp(er).test(this[0].tagName.toUpperCase());
            },
            toXML: function(attribute) {
                try {
                    if (attribute != undefined && attribute !== "") {
                        var mask = arguments[1] || this.getMask();
                        if (mask != null && mask !== "") {
                            if (isFullText(mask)) return attribute;
                            var pattern = mask.split("::"), Msk = MaskRsis;
                            switch (pattern[0]) {
                              case Msk.FONE:
                                return justFone(attribute);

                              case Msk.NAME:
                                return fmtMaskName(attribute);

                              case Msk.RAZAO_SOCIAL:
                                return removeMaskRazaoSocial(attribute);

                              case Msk.DATE:
                                return formatDateServerPattern(attribute, pattern[1]);

                              case Msk.DECIMAL:
                                return converteNumero(attribute);

                              case Msk.INTEGER:
                                return formatInteger(attribute);

                              case Msk.CPF:
                                return removeMaskCpfCnpj(attribute, true);

                              case Msk.CNPJ:
                                return removeMaskCpfCnpj(attribute, false);

                              case Msk.CPF_CNPJ:
                                return removeMaskCpfCnpj(attribute);

                              case Msk.HOR:
                                return removeMaskFieldHhmmss(attribute);

                              case Msk.MMSS:
                                return removeMaskFieldHhmmss(attribute);

                              case Msk.HHMI:
                                return removeMask(attribute, "00:00");

                              default:
                                if (getMapPattern(pattern[0]) != null || isFullText(pattern[0]) || pattern[0] === Msk.MESANO) {
                                    return attribute;
                                } else {
                                    return removeMask(attribute, pattern[0]);
                                }
                            }
                        }
                    }
                } catch (oErr) {
                    outPrint(oErr, ".toXML", Rsis);
                }
                return attribute;
            },
            toField: function(attribute) {
                try {
                    if (attribute != undefined && attribute !== "") {
                        var mask = arguments[1] || this.getMask();
                        if (mask != null && mask !== "") {
                            var pattern = mask.split("::"), Msk = MaskRsis;
                            switch (pattern[0]) {
                              case Msk.FONE:
                                return formatFone(attribute);

                              case Msk.NAME:
                                return fmtMaskName(attribute);

                              case Msk.RAZAO_SOCIAL:
                                return removeMaskRazaoSocial(attribute);

                              case Msk.DATE:
                                return formatDateFormPattern(attribute, pattern[1]);

                              case Msk.DECIMAL:
                                return formatDecimal(attribute, pattern[1], "");

                              case Msk.INTEGER:
                                return formatInteger(attribute);

                              case Msk.CPF:
                                return formatCpfCnpj(attribute, true);

                              case Msk.CNPJ:
                                return formatCpfCnpj(attribute, false);

                              case Msk.CPF_CNPJ:
                                return formatCpfCnpj(attribute);

                              case Msk.HOR:
                                return formatFieldHHmmss(attribute);

                              case Msk.MMSS:
                                return formatFieldHHmmss(attribute);

                              case Msk.HHMI:
                                return fmtDefaultMask(attribute, "00:00");

                              default:
                                if (getMapPattern(pattern[0]) != null || isFullText(pattern[0]) || pattern[0] === Msk.MESANO) {
                                    return attribute;
                                } else {
                                    return formatDefaultMask(attribute, pattern[0]);
                                }
                            }
                        }
                    }
                } catch (oErr) {
                    outPrint(oErr, ".toField", Rsis);
                }
                return attribute;
            },
            isRenderAll: function() {
                return !onlyDeveloperFunction(this[0]) ? true : false;
            },
            evalDev: function() {
                var fn = arguments[0], params = "";
                if (arguments.length > 1) {
                    params = arguments[1];
                }
                var execute = getAttFuncDeveloper(this[0], fn);
                if (!Rsis.isUndefined(fn) && execute != null && execute !== "") {
                    return compressEvalRsis(execute, params);
                }
            },
            execDev: function() {
                var exte = getAttFuncDeveloper(this[0], "execute");
                if (exte) {
                    var listArgs = [ exte, this[0] ];
                    if (typeof arguments[0] !== "undefined") listArgs = listArgs.concat(arguments[0]);
                    compressEvalRsisAll.apply(null, listArgs);
                }
                return this;
            },
            renderDev: function(nodes) {
                var noRenderDeveloper = arguments[1];
                if (typeof noRenderDeveloper == "undefined" || noRenderDeveloper == null || noRenderDeveloper == false) {
                    var rdDev = getAttFuncDeveloper(this[0], "renderDeveloper");
                    if (rdDev != null && rdDev !== "") {
                        if (typeof arguments[0] == "undefined" || typeof arguments[2] !== "undefined" && arguments[2] === false) {
                            var rFnc = compressEvalRsis(rdDev);
                            if (typeof rFnc !== "undefined") {
                                rFnc.call(this[0]);
                            }
                        } else {
                            var UIContext = Rsis.UIContext.get(this[0]), UIForm = UIContext.getUIForm(this[0]), node = nodes && nodes.length > 0 ? nodes[0] : null;
                            compressEvalRenderDevRsis(rdDev, this[0], UIForm, node);
                        }
                    }
                }
                return this;
            },
            clearExc: function(UIForm) {
                var btn = typeof arguments[1] !== "undefined" ? arguments[1] : $(this[0].id + ".clrBtn");
                compressEvalRenderClearRsis(getAttFuncDeveloper(btn, "clearButtonExecute"), this[0], UIForm);
            },
            removeRows: function() {
                var thisId = getAttMandatory(this[0], "id"), tbody = typeof arguments[0] === "string" ? arguments[0] : ".tBdy", tbdy = $(thisId + tbody);
                if (tbdy && tbdy.rows) {
                    while (tbdy.rows && tbdy.rows.length > 0) {
                        tbdy.deleteRow(0);
                    }
                }
                return this;
            },
            createListHolder: function(iframe) {
                var iframe = $getIframeByObject(this[0]);
                var doc = window.document, list = null, dT = 0, dL = 0;
                if (iframe != null) {
                    doc = getIframeDocument(iframe);
                    list = $frame(iframe.id, selHder);
                } else {
                    list = $(selHder);
                }
                if (!list) {
                    list = doc.createElement("DIV");
                    list.id = selHder;
                    var lst = list.style, _wh = this.getListHolderPosition();
                    if (_wh.left != null && _wh.left != null) {
                        lst.top = findPosY(this[0]) + this[0].offsetHeight - _wh.top + "px";
                        lst.left = findPosX(this[0]) - _wh.left + "px";
                    } else {
                        lst.top = findPosY(this[0]) + this[0].offsetHeight + "px";
                        lst.left = findPosX(this[0]) + "px";
                    }
                    if (!Rsis.browser.firefox) {
                        var dn = this[0].id.split("#")[0], _dlg = $(dn);
                        if (iframe == null && _dlg) {
                            dT = parseInt(_dlg.style.top, 10);
                            dL = parseInt(_dlg.style.left, 10);
                        }
                        if (!isNaN(dT) && dT > 0) {
                            lst.top = parseInt(lst.top, 10) + dT + "px";
                        }
                        if (!isNaN(dL) && dL > 0) {
                            lst.left = parseInt(lst.left, 10) + dL + "px";
                        }
                    }
                    lst.display = "none";
                    doc.body.appendChild(list);
                }
                return list;
            },
            getListHolder: function() {
                var gt = $getIframeByObject, list = gt(this[0]) != null ? $frame(gt(this[0]).id, selHder) : $(selHder);
                if (list) {
                    this._pos(list);
                }
                return list;
            },
            _pos: function(listHolder) {
                var offset = $R.$(this[0]).offset();
                $R.$(listHolder).css({
                    left: offset.left + "px",
                    top: offset.top + $R.$(this[0].parentNode).height() + "px"
                });
            },
            closeListHolder: function(evt) {
                var i = 0, forms = document.forms;
                for (;i < forms.length; i++) {
                    UtilRsis.CloseCombo(forms[i], evt);
                }
            },
            position: function() {
                return this.getListHolderPosition();
            },
            getListHolderPosition: function() {
                var table = $(this[0].id.split("::")[0]), left = null, top = null;
                if (table) {
                    var _t_ = $(this[0].id.split("#")[0] + ".container");
                    var tbd = typeof $R(table).getDivTBody == "undefined" ? null : $R(table).getDivTBody();
                    if (tbd) {
                        var thasHScroll = _t_ && _t_.scrollHeight > _t_.clientHeight ? true : false, thasWScroll = _t_ && _t_.scrollWidth > _t_.clientWidth ? true : false;
                        var tLeft = thasWScroll ? _t_.scrollLeft : 0;
                        tTop = thasHScroll ? _t_.scrollTop : 0;
                        var hasHScroll = $R(table).hasHgtScroll(tbd), hasWScroll = $R(table).hasWdtScroll(tbd);
                        left = hasWScroll ? tbd.scrollLeft : 0;
                        top = hasHScroll ? tbd.scrollTop : 0;
                        left = left + tLeft;
                        top = top + tTop;
                    } else {
                        var hasHScroll = _t_ && _t_.scrollHeight > _t_.clientHeight ? true : false, hasWScroll = _t_ && _t_.scrollWidth > _t_.clientWidth ? true : false;
                        left = hasWScroll ? _t_.scrollLeft : 0;
                        top = hasHScroll ? _t_.scrollTop : 0;
                    }
                } else {
                    var _t_ = $(this[0].id.split("#")[0]);
                    var hasHScroll = $R(this[0]).hasHgtScroll(_t_), hasWScroll = $R(this[0]).hasWdtScroll(_t_);
                    left = hasWScroll ? _t_.scrollLeft : 0;
                    top = hasHScroll ? _t_.scrollTop : 0;
                }
                return {
                    left: left,
                    top: top
                };
            },
            delListHolder: function() {
                var gt = $getIframeByObject, iframe = gt(this[0]);
                if (iframe) {
                    var listHolder = $frame(gt(this[0]).id, selHder), doc = getIframeDocument(iframe);
                    if (doc && listHolder) {
                        doc.body.removeChild(listHolder);
                        return true;
                    }
                } else {
                    var listHolder = $(selHder);
                    if (listHolder) {
                        document.body.removeChild(listHolder);
                        return true;
                    }
                }
                return false;
            },
            fadeOut: function(time) {
                var target = typeof arguments[1] == "undefined" ? this[0] : typeof arguments[1] == "string" ? $(arguments[1]) : arguments[1], alpha = 100, timer = time * 1e3 / 50;
                var it_ = setInterval(function() {
                    if (alpha <= 0) {
                        clearInterval(it_);
                    }
                    setAlpha(target, alpha);
                    alpha -= 2;
                }, timer);
                return this;
            },
            fadeIn: function(time) {
                var target = typeof arguments[1] == "undefined" ? this[0] : typeof arguments[1] == "string" ? $(arguments[1]) : arguments[1], alpha = 0, timer = time * 1e3 / 50;
                var it_ = setInterval(function() {
                    if (alpha >= 100) {
                        clearInterval(it_);
                    }
                    setAlpha(target, alpha);
                    alpha += 2;
                }, timer);
                return this;
            },
            setOpacity: function(alpha) {
                var target = typeof arguments[1] == "undefined" ? this : typeof arguments[1] == "string" ? $(arguments[1]) : arguments[1];
                setAlpha(target, alpha);
            }
        });
        Rsis.fn.focusNextInputField = function() {
            return this.each(function() {
                var fields = $R.$(this).parents("form:eq(0),body").find('button,input[type!="hidden"],textarea,select').not("[readonly]").not("[disabled]"), index = fields.index(this);
                if (index > -1 && index + 1 < fields.length) {
                    fields.eq(index + 1).focus();
                }
                return false;
            });
        };
        function setAlpha(target, alpha) {
            if (target && alpha) {
                target.style.filter = "alpha(opacity=" + alpha + ")";
                target.style.opacity = alpha / 100;
            }
        }
        Rsis.fn.extend({
            setAtt: function() {
                var args = arguments, target = this[0], targetAtts = isString(args[0]) ? [ args[0] ] : args[0], atts = null, node = null, length = args.length;
                if (length > 2) {
                    targetAtts = args[0];
                    atts = args[1];
                    node = args[2];
                } else {
                    node = args[1];
                }
                if (!atts) {
                    atts = targetAtts;
                } else if (isString(atts)) {
                    atts = [ atts ];
                }
                var attributes = {}, isobject = false;
                if (Rsis.isArray(targetAtts) && Rsis.isArray(atts) && targetAtts.length == atts.length) {
                    Rsis.each(targetAtts, function(i, att) {
                        attributes[att] = atts[i];
                    });
                } else if (Rsis.typeOf(targetAtts) == "object") {
                    attributes = targetAtts;
                    isobject = true;
                }
                var NODE_TYPE_ELEMENT = 1, NODE_TYPE_DOCUMENT = 9;
                if (Rsis.isUIForm(target)) {
                    target = getNodes(target.domainXML, target.getXPath());
                } else {
                    if (target && target.nodeType === NODE_TYPE_DOCUMENT) {
                        target = target.documentElement.firstChild;
                    } else if (!target) return this;
                }
                if (node && node.nodeType === NODE_TYPE_DOCUMENT) {
                    node = node.documentElement.firstChild;
                } else if (!node && !isobject) {
                    return this;
                }
                Rsis.each(attributes, function(name, value) {
                    if (node) {
                        setAttributeNode(target, name, getNodeValue(node, value));
                    } else if (isobject && !node) {
                        setAttributeNode(target, name, value);
                    }
                });
                return this;
            },
            getAtt: function() {
                var args = arguments, target = this[0], targetAtts = isString(args[0]) ? [ args[0] ] : args[0], atts = null, node = null, length = args.length, ret = {};
                if (length > 2) {
                    targetAtts = args[0];
                    atts = args[1];
                    node = args[2];
                } else {
                    node = args[1];
                }
                if (!atts) {
                    atts = targetAtts;
                } else if (isString(atts)) {
                    atts = [ atts ];
                }
                var attributes = {}, isobject = false;
                if (Rsis.isArray(targetAtts) && Rsis.isArray(atts) && targetAtts.length == atts.length) {
                    Rsis.each(targetAtts, function(i, att) {
                        attributes[att] = atts[i];
                    });
                } else if (Rsis.typeOf(targetAtts) == "object") {
                    attributes = targetAtts;
                    isobject = true;
                }
                var NODE_TYPE_ELEMENT = 1, NODE_TYPE_DOCUMENT = 9;
                if (Rsis.isUIForm(target)) {
                    node = getNodes(target.domainXML, target.getXPath());
                } else {
                    if (target && target.nodeType === NODE_TYPE_DOCUMENT) {
                        node = target.documentElement.firstChild;
                    } else if (!target) return this; else node = target;
                }
                if (node && node.nodeType === NODE_TYPE_DOCUMENT) {
                    node = node.documentElement.firstChild;
                } else if (!node && !isobject) {
                    return this;
                }
                Rsis.each(attributes, function(name, value) {
                    if (node) {
                        ret[name] = getNodeValue(node, value, !node.length ? true : false);
                    } else if (isobject && !node) {
                        ret[name] = value;
                    }
                });
                return ret;
            },
            getPathNode: function() {
                var args = arguments;
                if (args && typeof args[0] === "string" && args[0] !== null && args[0] !== "") {
                    var strArgs = args[0].split("@");
                    if (strArgs && strArgs.length > 0) {
                        if (typeof strArgs[0] === "string" && strArgs[0] !== null && strArgs[0] !== "") {
                            return strArgs[0].replaceAll("###", "@");
                        }
                    }
                } else {
                    var stringNode = getAttMandatory(this[0], "node");
                    if (typeof stringNode === "string" && stringNode != null && stringNode !== "") {
                        var strArgs = stringNode.split("@");
                        if (strArgs && strArgs.length > 0) {
                            if (typeof strArgs[0] === "string" && strArgs[0] !== null && strArgs[0] !== "") {
                                return strArgs[0].replaceAll("###", "@");
                            }
                        }
                    }
                }
                return "";
            },
            getAttNode: function() {
                function _getValue(args) {
                    if (isEmpty(args)) return "";
                    var strArgs = args.split("@"), value = "";
                    if (strArgs && strArgs.length > 0) {
                        value = Rsis.isUndefined(strArgs[1]) ? "" : strArgs[1];
                    }
                    return value;
                }
                var args = arguments, obj = this[0];
                if (args && typeof args[0] === "string" && args[0] !== null && args[0] !== "") {
                    return _getValue(args[0]);
                } else if (Rsis.isArray(args[0])) {
                    var _atts = {};
                    Rsis.each(args[0], function(i, name) {
                        _atts[name] = _getValue(getAtt(obj, name));
                    });
                    return _atts;
                } else {
                    var stringNode = getAttMandatory(obj, "node");
                    if (typeof stringNode === "string" && stringNode !== null && stringNode !== "") {
                        return _getValue(stringNode);
                    }
                }
                return "";
            },
            parserAtts: function(xmlParser, domainXML) {
                var parser = getAtt(this[0], "parserAttributes"), parserNodes = getAtt(this[0], "parserNodes");
                if (isNoEmpty(parser)) {
                    parserAttributesXML(parser, xmlParser, domainXML, this[0]);
                } else if (isEmpty(parserNodes)) {
                    var atts = Rsis(this[0]).getAtt([ "node", "xpath", "optionValue", "optionText", "optionValueRef", "optionTextRef" ]);
                    if (atts) {
                        var _msg_ = "Obrigatorio informar o atributo {0}";
                        if (isEmpty(atts.node)) {
                            Message.alert(_msg_, "node");
                            return false;
                        }
                        if (isEmpty(atts.optionValue)) {
                            Message.alert(_msg_, "optionValue");
                            return false;
                        }
                        if (isEmpty(atts.optionText)) {
                            Message.alert(_msg_, "optionText");
                            return false;
                        }
                        var UIForm = Rsis.getUIForm(this[0]), optionValueRef = isEmpty(atts.optionValueRef) ? atts.optionValue : atts.optionValueRef, optionTextRef = isEmpty(atts.optionTextRef) ? atts.optionText : atts.optionTextRef, xpath = isNoEmpty(xpath) ? xpath : UIForm.getXPath(), parser = "";
                        parser += atts.node + atts.optionValue + "::" + xpath + optionValueRef;
                        parser += ",";
                        parser += atts.node + atts.optionText + "::" + xpath + optionTextRef;
                        parserAttributesXML(parser, xmlParser, domainXML, this[0]);
                    }
                }
                return this;
            },
            clearAtts: function(domainXML, wasclear) {
                var parser = getAtt(this[0], "parserAttributes"), parserNodes = getAtt(this[0], "parserNodes");
                if (isNoEmpty(parser)) {
                    clearAttributesXML(parser, domainXML, this[0]);
                    wasclear = true;
                } else if (isEmpty(parserNodes)) {
                    var atts = Rsis(this[0]).getAtt([ "node", "xpath", "optionValue", "optionText", "optionValueRef", "optionTextRef" ]);
                    if (atts) {
                        var _msg_ = "Obrigatorio informar o atributo {0}";
                        if (isEmpty(atts.node)) {
                            Message.alert(_msg_, "node");
                            return false;
                        }
                        if (isEmpty(atts.optionValue)) {
                            Message.alert(_msg_, "optionValue");
                            return false;
                        }
                        if (isEmpty(atts.optionText)) {
                            Message.alert(_msg_, "optionText");
                            return false;
                        }
                        var UIForm = Rsis.getUIForm(this[0]), optionValueRef = isEmpty(atts.optionValueRef) ? atts.optionValue : atts.optionValueRef, optionTextRef = isEmpty(atts.optionTextRef) ? atts.optionText : atts.optionTextRef, xpath = isNoEmpty(xpath) ? xpath : UIForm.getXPath(), parser = "";
                        parser += atts.node + atts.optionValue + "::" + xpath + optionValueRef;
                        parser += ",";
                        parser += atts.node + atts.optionText + "::" + xpath + optionTextRef;
                        clearAttributesXML(parser, domainXML, this[0]);
                        wasclear = true;
                    }
                }
                return wasclear;
            },
            parserNds: function(obj, xmlParser, domainXML, optionValueRef, fncall) {
                var parser = getAtt(this[0], "parserNodes");
                if (parser != null && parser !== "") {
                    if (Rsis.isFunction(fncall)) {
                        fncall.apply(this, arguments);
                    }
                    parserNodesXML(parser, xmlParser, domainXML, this[0]);
                }
                return this;
            },
            clearNodes: function(domainXML, wasclear, fncall) {
                if (Rsis.isFunction(fncall)) {
                    return fncall.call(this, arguments);
                }
                var parser = getAtt(this[0], "parserNodes");
                if (parser != null && parser !== "") {
                    var argsParser = parser.split("::");
                    var xpathChild = argsParser[0];
                    var argsChild = xpathChild.split("/");
                    var xpathFather = argsParser[1];
                    var argsFather = xpathFather.split("/");
                    var childNode = getNodes(domainXML, "/" + xpathFather + "/" + argsChild[argsChild.length - 1]);
                    if (childNode && childNode.length > 0) {
                        var fatherNode = null;
                        if (argsFather && argsFather.length > 1) {
                            fatherNode = childNode[0].parentNode;
                        } else {
                            var xPathFatherNode = getStrPathNode(xpathFather, 1);
                            if (xPathFatherNode != null && xPathFatherNode != "") {
                                fatherNode = XML.getSingleNode(domainXML, ROOT_NODE + "/" + xPathFatherNode);
                            }
                        }
                        if (fatherNode) {
                            fatherNode.removeChild(childNode[0]);
                            wasclear = true;
                        }
                    }
                }
                return wasclear;
            },
            isNodeSaved: function() {
                var UIContext = Rsis.UIContext.get(arguments[0]);
                if (typeof TabbedPaneRsis == "object") {
                    var object = UIContext.dialog.d.contentWindow, forms = object && object.getElementsByTagName("FORM") || document.forms;
                    if (forms && forms.length > 0) {
                        for (var i = 0; i < forms.length; i++) {
                            var formName = forms[i].id, UIFormAba = UIContext.getUIForm(formName);
                            if (UIFormAba && !Crud.getNodeIsSaved(UIFormAba)) {
                                return false;
                            }
                        }
                    }
                } else {
                    var UIForm = UIContext.getUIForm(this[0]);
                    if (!UIForm) {
                        UIForm = UIContext.getUIForm(arguments[0]);
                    }
                    return Crud.getNodeIsSaved(UIForm);
                }
                return true;
            },
            changeNdName: function(xmlParser) {
                var chge = getAtt(this[0], "changeNodeName");
                if (chge != null && chge !== "") {
                    return changeNodeName(this[0], xmlParser);
                }
                return xmlParser;
            },
            getDescription: function(domainXML, idx, param, path, mask) {
                var textValue = "";
                var str = Trim(param);
                if (str != null && str !== "") {
                    if (str.substring(0, 1) === "'") {
                        textValue = textValue + str.replace(/'/g, "");
                    } else {
                        var pathChield = "", stringAttribute = "", stringPath = "", stringArgsSplit = str.split("@");
                        if (stringArgsSplit && stringArgsSplit.length > 1) {
                            stringPath = stringArgsSplit[0];
                            pathChield = stringArgsSplit[1];
                            stringAttribute = stringArgsSplit[stringArgsSplit.length - 1];
                        } else {
                            stringPath = stringArgsSplit[0];
                            stringAttribute = stringArgsSplit[1];
                        }
                        if (stringPath && stringPath !== "" && stringAttribute && stringAttribute !== "") {
                            var xpath = "";
                            if (path != null && path !== "") {
                                var stringArgsAtt = pathChield.split("/"), strChieldsPath = "";
                                if (stringArgsAtt && stringArgsAtt.length > 1) {
                                    strChieldsPath = getMountPath(stringArgsAtt);
                                }
                                xpath = path + strChieldsPath;
                            } else {
                                xpath = stringPath.replaceAll("###", "@");
                            }
                            var node = getNodes(domainXML, xpath);
                            attributeNode = typeof stringAttribute === "undefined" ? "" : stringAttribute;
                            if (mask != null && mask !== "") {
                                if (typeof attributeNode !== "undefined" && attributeNode !== "") {
                                    textValue = this.toField(getNodeValueId(node, attributeNode, idx));
                                } else {
                                    textValue = this.toField(getNodeText(node[idx]));
                                }
                            } else {
                                textValue = typeof attributeNode !== "undefined" && attributeNode !== "" ? getNodeValueId(node, attributeNode, idx) : getNodeText(node[idx]);
                            }
                        }
                    }
                }
                return textValue;
            }
        });
        Rsis.fn.extend({
            findPos: function() {
                var obj = arguments[0] || this[0], curleft = curtop = 0;
                if (obj.offsetParent) {
                    do {
                        curleft += obj.offsetLeft;
                        curtop += obj.offsetTop;
                    } while (obj = obj.offsetParent);
                }
                return {
                    left: curleft,
                    top: curtop
                };
            },
            getPageScroll: function() {
                var xScroll, yScroll;
                if (self.pageYOffset) {
                    yScroll = self.pageYOffset;
                    xScroll = self.pageXOffset;
                } else if (document.documentElement && document.documentElement.scrollTop) {
                    yScroll = document.documentElement.scrollTop;
                    xScroll = document.documentElement.scrollLeft;
                } else if (document.body) {
                    yScroll = document.body.scrollTop;
                    xScroll = document.body.scrollLeft;
                }
                return {
                    xScroll: xScroll,
                    yScroll: yScroll
                };
            },
            findPosRelativeToViewport: function() {
                var obj = arguments[0] || this[0], objPos = Rsis.findPos(obj), scroll = Rsis.getPageScroll();
                return {
                    left: objPos.left - scroll.xScroll,
                    top: objPos.top - scroll.yScroll
                };
            }
        });
        Rsis.Class = function() {
            function Fn() {}
            var F = new Fn();
            F.subclass = function() {
                var args = arguments, name = args[0], target = args[1], _super = args[2] || this;
                if (typeof target !== "object" && !(typeof target !== "function")) {
                    target = {
                        _super: _super
                    };
                }
                if (target && typeof target._super == "undefined") {
                    target._super = _super;
                }
                if (_super) {
                    _super[name] = target;
                    F._super = _super;
                }
            };
            return F;
        };
        Rsis.ui = {
            Clazz: {
                formsStart: false,
                getForms: function(UIContext, object) {
                    var forms = $formsByObject(object);
                    if (this.formsStart) {
                        forms = !isEmptyArray(UIContext.formsStart) ? UIContext.formsStart : forms;
                    } else if (!isEmptyArray(forms)) {
                        forms = UIContext.formsStart;
                    }
                    return forms;
                },
                actionInit: function(object) {
                    var domainXML = "", UIContext = Rsis.UIContext.get(object), objForms = this.getForms(UIContext, object), param = UIContext.DialogParams();
                    if (!(objForms && objForms.length > 0)) {
                        objForms = document.forms;
                    }
                    var cptname = null;
                    if (isDocument(object)) {
                        cptname = $(object.forms[0].id.split("__")[0]).parentNode.getAttribute("component");
                    } else cptname = object.getAttribute("component");
                    if (cptname === "tabbed" && typeof this.property !== "undefined") {
                        domainXML = Properties.getProperty(UIContext.dialog.id + this.property);
                    } else {
                        if (param && param["domainXML"]) {
                            domainXML = param["domainXML"];
                        }
                    }
                    var UIForm = UIContext.getUIForm(objForms[0]), parametros = "xmlDomain=" + escapeParam(domainXML, true);
                    parametros += DataScrollRsis.getQueryString(UIForm, this.DATASCROLLER_NAME);
                    var fncallback = "";
                    if (typeof this.callbackName !== "undefined") {
                        fncallback = this.callbackName + "Init";
                    } else {
                        this.callbackName = this.className + ".callBack";
                        fncallback = this.callbackName + "Init";
                    }
                    if (typeof this.paramsInit !== "undefined") {
                        parametros = this.paramsInit(UIForm, parametros);
                    }
                    AjaxRsis.callAction(objForms[0].id, URL, UIForm.getTargetAction(), this.method ? this.method : "init", fncallback, null, parametros);
                },
                callBackInit: function(f) {
                    var Transfer = AjaxRsis.process(f);
                    if (Transfer && Transfer.objXML && Transfer.UIForm) {
                        var objXML = Transfer.objXML, UIForm = Transfer.UIForm, UIContext = Rsis.UIContext.get(UIForm);
                        Message.render(UIForm, objXML);
                        if (UIForm.hasError == false) {
                            UIForm.setDomainXML(objXML);
                            UIForm.setDomainXMLTemplate(objXML);
                            if (!UIForm.domainXML) {
                                UIForm.domainXML = UIForm.domainXMLTemplate;
                            }
                            var tableXML = XML.broke(cloneObjXML(objXML), "/xmlTable/page"), table = UIForm.getObject(this.TABLE_NAME);
                            if (table && tableXML) {
                                UIForm.setTableXML(table.id, tableXML);
                                UIForm.setPageFilterXML(table.id, cloneObjXML(UIForm.domainXMLTemplate));
                            }
                            UIForm.setParams(cloneObjXML(objXML));
                            UIForm.isCached = 1;
                            this.validateMethods();
                            if (typeof this.setParams !== "undefined") {
                                this.setParams(UIForm, objXML);
                            }
                            UIContext.setUIForms(f, UIForm);
                        }
                        if (typeof this.renderAll == "function") this.renderAll(UIForm); else renderUIForm(UIForm);
                        if (this.initializeSearch) {
                            var domain = getNodeElement(UIForm, UIForm.domainXMLTemplate, this.xpathIdent, false);
                            if (domain) {
                                UIForm.state = UIRsis.SEARCHING;
                                var btnConfirmar = UIForm.getObject(this.toolBarName + ".btnConfirm");
                                if (btnConfirmar) {
                                    _confirmAction(btnConfirmar);
                                } else {
                                    $R.ui.Clazz.table({
                                        UIForm: UIForm,
                                        table: table
                                    }).call();
                                }
                            }
                        }
                    }
                },
                init: function(object) {
                    var domainXML = "", UIContext = Rsis.UIContext.get(object), objForms = this.getForms(UIContext, object), param = UIContext.DialogParams();
                    if (!(objForms && objForms.length > 0)) {
                        objForms = document.forms;
                    }
                    var cptname = object.getAttribute("component");
                    if (cptname === "tabbed" && typeof this.property !== "undefined") {
                        domainXML = Properties.getProperty(UIContext.dialog.id + this.property);
                    } else {
                        if (param && param["domainXML"]) {
                            domainXML = param["domainXML"];
                        }
                    }
                    initAction(objForms, this.callbackName + "(UIForm, objXML)", "xmlDomain=" + escapeParam(domainXML, true), this.method);
                },
                callBack: function(UIForm, objXML) {
                    this.validateMethods();
                    if (typeof this.setParams !== "undefined") {
                        this.setParams(UIForm, objXML);
                    }
                    if (this.initializeSearch) {
                        var domain = getNodeElement(UIForm, UIForm.domainXMLTemplate, this.xpathIdent, false);
                        if (domain) {
                            UIForm.state = UIRsis.SEARCHING;
                            var ident = domain.getAttribute(this.attIdent);
                            if (ident) {
                                var btnConfirmar = UIForm.getObject(this.toolBarName + ".btnConfirm");
                                if (btnConfirmar) {
                                    _confirmAction(btnConfirmar);
                                }
                            }
                        }
                    }
                },
                validateMethods: function() {
                    if (typeof this.toolBarName === "undefined") {
                        alert(Message.parser("O atributo [{0}] deve ser implementado!", "toolBarName"));
                        return false;
                    }
                    if (typeof this.callbackName === "undefined") {
                        alert(Message.parser("O atributo [{0}] deve ser implementado!", "callbackName"));
                        return false;
                    }
                    if (typeof this.xpathIdent === "undefined") {
                        this.xpathIdent = null;
                    }
                    if (typeof this.initializeSearch === "undefined") {
                        this.initializeSearch = false;
                    }
                },
                injectionTooBar: function(UIForm, objXML) {
                    if (UIForm && UIForm.domainXML) {
                        UIForm.state = UIRsis.UPDATING;
                        renderUIForm(UIForm);
                        crossDialog.setParam(UIForm.getDialogId(), "domainXML", UIForm.domainXML.xml);
                        var objXML = cloneObjXML(UIForm.domainXML);
                        if (objXML) {
                            Properties.setProperty(UIForm.getDialogId() + this.property, objXML.xml);
                            this.updateTabs();
                        }
                    }
                },
                updateTabs: function() {
                    var UIContext = Rsis.UIContext.get(arguments[0]), forms = UIContext.forms, thiz = this;
                    if (typeof thiz.FORM_PRINCIPAL === "undefined") {
                        alert("O atributo [FORM_PRINCIPAL] deve ser implementado!");
                        return false;
                    }
                    if (forms && forms.length > 0) {
                        for (var k = 0; k < forms.length; k++) {
                            var formName = forms[k].id;
                            if (formName !== thiz.FORM_PRINCIPAL) {
                                var UIFormAba = UIContext.getUIForm(formName);
                                if (UIFormAba) {
                                    var COMP = UIFormAba.getAllUIComponents(), table = COMP["dataTable"][0];
                                    if (!table) table = COMP["editTable"][0];
                                    UIFormAba.isCached = 0;
                                    UIFormAba.domainXML = null;
                                    if (table) UIFormAba.setTableXML(table.id, null);
                                    if (table) UIFormAba.setDataScrollerXMLCache(table.id, null);
                                    var grids = COMP["dataGrid"];
                                    if (grids && grids.length > 0) {
                                        for (var t = 0; t < grids.length; t++) {
                                            UIForm.setTableXML(grids[t].id, null);
                                        }
                                    }
                                    UIContext.setUIForms(formName, UIFormAba);
                                }
                            }
                        }
                    }
                },
                table: function() {
                    function Instance() {
                        var thiz = this;
                        var defaults = {
                            table: null,
                            UIForm: null,
                            loading: true,
                            action: null,
                            method: "search",
                            parameters: null,
                            pageNumber: null,
                            pageSize: null
                        };
                        this.config = Rsis.extend(defaults, arguments[0]);
                        this.call = function() {
                            var args = Rsis.extend(thiz.config, arguments[0], {});
                            if (!args.UIForm || !args.table) {
                                alert(Message.parser("Parametros nao informados!\n{0} e {1} sao obrigatorios", "table", "UIForm"));
                                return false;
                            }
                            var UIForm = args.UIForm, table = typeof args.table === "string" ? UIForm.getObject(args.table) : args.table, dsp = getDataScrollerByTable(table.id), parameters = "", pageSize = 1;
                            Message.close(UIForm);
                            var xmlDomain = UIForm.getPageFilterXML(table.id) ? UIForm.getPageFilterXML(table.id).xml : "", nodeTableXML = getNodes(UIForm.getTableXML(table.id), "/page"), pageNumber = 0, pageSize = 10;
                            if (isEmpty(xmlDomain)) {
                                UIForm.setPageFilterXML(table.id, XML.clone(UIForm.domainXML)), xmlDomain = UIForm.domainXML ? UIForm.domainXML.xml : "";
                            }
                            if (nodeTableXML && nodeTableXML.length > 0) {
                                pageNumber = !args.pageNumber ? toInt(getNodeValue(nodeTableXML, "pageNumber")) : args.pageNumber;
                                pageSize = !args.pageSize ? toInt(getNodeValue(nodeTableXML, "pageSize")) : args.pageSize;
                            }
                            if (isNaN(pageNumber) && dsp && dsp.getAttribute("initPage")) {
                                pageNumber = parseInt(dsp.getAttribute("initPage"), 10);
                            }
                            if (isNaN(pageSize) && dsp && dsp.getAttribute("maxRowsTable")) {
                                pageSize = parseInt(dsp.getAttribute("maxRowsTable"), 10);
                            }
                            if (!args.parameters) {
                                parameters += "&xmlDomain=" + escapeParam(xmlDomain, true) + "&pageNumber=" + escapeParam(pageNumber, false) + "&pageSize=" + escapeParam(pageSize, false);
                            } else {
                                if (typeof args.parameters == "string") {
                                    args.parameters += "&pageNumber=" + escapeParam(pageNumber, false) + "&pageSize=" + escapeParam(pageSize, false);
                                } else {
                                    args.parameters.push("pageNumber=" + escapeParam(pageNumber, false));
                                    args.parameters.push("pageSize=" + escapeParam(pageSize, false));
                                }
                                parameters += args.parameters;
                            }
                            AjaxRsis.call({
                                loading: args.loading || true,
                                uiform: UIForm,
                                action: args.action || UIForm.getTargetAction(),
                                method: args.method,
                                parameters: parameters,
                                object: table,
                                success: args.success === "function" ? args.success() : function(UIForm, objXML, table) {
                                    Message.render(UIForm, objXML);
                                    UIForm.setTableXML(table.id, XML.broke(objXML, "/xmlTable/page"), true);
                                },
                                error: args.error === "function" ? args.error.call() : function(UIForm, objXML, table) {
                                    Message.render(UIForm, objXML);
                                    UIForm.setTableXML(table.id, $R.Cache.XML.createPageList(), true);
                                }
                            });
                            return thiz;
                        };
                    }
                    return new Instance(arguments[0]);
                }
            },
            start: function(clazz, list, state, fn) {
                var win = window, Class = win[clazz], fnc = typeof fn !== "undefined" ? win[fn] : undefined;
                if (typeof list !== "undefined" && (list && list.length > 0) && (typeof Class != "undefined" || typeof fnc == "function")) {
                    if (typeof Class == "undefined") {
                        throw new MiddlewareViewException(clazz + " : " + getMessageBundle("FUNCTION_UNDEFINED"));
                    }
                    if (typeof fnc == "undefined" && typeof Class.render == "function") {
                        fnc = Class.render;
                    }
                    var it = 0, max = list.length;
                    for (;it < max; it++) {
                        fnc.apply(null, [ list[it], state ]);
                    }
                }
                return this;
            },
            update: function(fn, list) {
                var fnc = window[fn];
                if (typeof list !== "undefined" && (list && list.length > 0) && typeof fnc === "function") {
                    var it = 0, max = list.length;
                    for (;it < max; it++) {
                        fnc.call(null, list[it]);
                    }
                }
                return this;
            },
            clear: function(fn, list) {
                return this.update(fn, list);
            },
            help: function(fn, list, UIForm, isEnable, isBtn) {
                var fnc = window[fn], isValidated = isBtn ? isBtn : typeof fnc === "function";
                if (typeof list !== "undefined" && (list && list.length > 0) && isValidated) {
                    var it = 0, max = list.length;
                    for (;it < max; it++) {
                        if (isBtn) {
                            if (getAtt(list[it], "includeLib") === "true" && typeof fnc === "function") {
                                fnc.apply(null, [ list[it], UIForm, isEnable ]);
                            }
                        } else {
                            fnc.apply(null, [ list[it], UIForm, isEnable ]);
                        }
                    }
                }
                return this;
            },
            render: function(object, state, noRdrDevel) {
                if (object && state) {
                    var length = object.length, i = 0, isObj = length == undefined && typeof object == "object" && !Rsis.isArray(object);
                    if (isObj) {
                        _renderObject(object, state, noRdrDevel);
                    } else {
                        if (object.isArrayCpts) {
                            for (var att in object) {
                                var _o = object[att];
                                if (_o) {
                                    length = _o.length;
                                    for (;i < length; ) {
                                        _renderObject(_o[i++], state, noRdrDevel);
                                    }
                                    i = 0;
                                }
                            }
                        } else for (;i < length; ) {
                            _renderObject(object[i++], state, noRdrDevel);
                        }
                    }
                }
            }
        };
        Rsis.extend({
            strip: function(s) {
                return s.replace(/^\s+/, "").replace(/\s+$/, "");
            },
            hasClassName: function() {
                var element, className, i = 0;
                if (!(arguments && arguments.length > 0)) {
                    return false;
                }
                if (arguments.length > 1) {
                    element = typeof arguments[i] == "object" ? arguments[i] : this[0];
                    i += 1;
                }
                className = typeof arguments[i] == "string" ? arguments[i] : "";
                var elementClassName = element.className;
                return elementClassName.length > 0 && (elementClassName == className || new RegExp("(^|\\s)" + className + "(\\s|$)").test(elementClassName));
            },
            addClass: function() {
                var element, className, i = 0;
                if (!(arguments && arguments.length > 0)) {
                    return false;
                }
                if (arguments.length > 1) {
                    element = typeof arguments[i] == "object" ? arguments[i] : this[0];
                    i += 1;
                }
                className = typeof arguments[i] == "string" ? arguments[i] : "";
                if (!this.hasClassName(element, className)) {
                    element.className += (element.className ? " " : "") + className;
                }
                return this;
            },
            removeClass: function() {
                var element, className, i = 0;
                if (!(arguments && arguments.length > 0)) {
                    return false;
                }
                if (arguments.length > 1) {
                    element = typeof arguments[i] == "object" ? arguments[i] : this[0];
                    i += 1;
                }
                className = typeof arguments[i] == "string" ? arguments[i] : "";
                element.className = this.strip(element.className.replace(new RegExp("(^|\\s+)" + className + "(\\s+|$)"), " "));
                return this;
            }
        });
        Rsis.fn.extend({
            hasClass: function(value) {
                return Rsis.hasClassName(this[0], value);
            },
            addClass: function(value) {
                Rsis.addClass(this[0], value);
                return this;
            },
            removeClass: function(value) {
                Rsis.removeClass(this[0], value);
                return this;
            }
        });
        return Rsis;
    }();
    Rsis.events = {
        KEY_BACKSPACE: 8,
        KEY_TAB: 9,
        KEY_RETURN: 13,
        KEY_SHIFT: 16,
        KEY_CAPSLOCK: 20,
        KEY_ESC: 27,
        KEY_SPACE: 32,
        KEY_LEFT: 37,
        KEY_UP: 38,
        KEY_RIGHT: 39,
        KEY_DOWN: 40,
        KEY_DELETE: 46,
        KEY_HOME: 36,
        KEY_END: 35,
        KEY_PAGEUP: 33,
        KEY_PAGEDOWN: 34,
        KEY_INSERT: 45,
        KEY_F5: 116,
        selector: null,
        isEventEnter: function(event, onKey) {
            var rEvts = this;
            event = rEvts.getEvent(event);
            return event && event.type === onKey && rEvts.getCode(event, false) === rEvts.KEY_RETURN ? true : false;
        },
        getEvent: function(event) {
            if (!event) {
                if (Rsis.browser.chrome) {
                    if (typeof XMLHttpRequestProgressEvent === "undefined" || !(window.event instanceof XMLHttpRequestProgressEvent)) {
                        return window.event ? window.event : event;
                    } else {
                        return event;
                    }
                } else {
                    return window.event ? window.event : event;
                }
            } else {
                return event;
            }
        },
        getCode: function(event) {
            if (arguments[1] === true) {
                event = this.getEvent(event);
            }
            return event ? event.charCode ? event.charCode : event.keyCode ? event.keyCode : event.which ? event.which : 0 : -1;
        },
        getTarget: function(event) {
            if (arguments[1] === true) {
                event = this.getEvent(event);
            }
            var target = Rsis.browser.msie ? event.srcElement : event.target;
            return target;
        },
        preventDefault: function(evt) {
            if (!evt) {
                evt = this.originalEvent;
            }
            if (!evt) return;
            if (evt.preventDefault) {
                evt.preventDefault();
            } else {
                evt.returnValue = false;
            }
        },
        stopPropagation: function(e) {
            if (e) {
                if (e.preventDefault) e.preventDefault(); else e.returnValue = false;
                if (e.stopPropagation) e.stopPropagation(); else e.cancelBubble = true;
                return false;
            }
        },
        addEventListener: function(eventType, handler, capture) {
            try {
                if (this.addEventListener) this.addEventListener(eventType, handler, capture); else if (this.attachEvent) this.attachEvent("on" + eventType, handler);
            } catch (e) {}
        },
        add: function() {
            var obj, type, fnc, i = arguments.length;
            if (i <= 0) return this;
            if (i == 2) {
                obj = this.selector;
                type = arguments[0];
                fnc = arguments[1];
            } else {
                obj = arguments[0];
                type = arguments[1];
                fnc = arguments[2];
            }
            this.selector = obj;
            var arryTypes = type.split(" ");
            if (arryTypes && arryTypes.length > 0) {
                for (var k = 0; k < arryTypes.length; k++) {
                    var _type = arryTypes[k];
                    if (obj != null) {
                        if (Rsis.browser.msie) {
                            setDOMEvent(obj, _type, fnc);
                        } else if (typeof $R(obj).addDOM != "undefined") {
                            $R(obj).addDOM(_type, fnc);
                        } else {
                            setDOMEvent(obj, _type, fnc);
                        }
                    }
                }
            }
            return this;
        }
    };
    Rsis.Load = {
        start: function(obj) {
            var p = this.get(obj);
            if (p) {
                progressJs(p).start().set(2).autoIncrease(4, 500);
            }
        },
        stop: function(obj) {
            var p = this.get(obj);
            if (p) progressJs(p).end();
        },
        get: function(obj) {
            if (obj) {
                var loadAcpt = $("loadACpt");
                if (!loadAcpt) {
                    loadAcpt = this.create(obj);
                }
                return loadAcpt;
            }
        },
        create: function(obj) {
            var loadAcpt = null;
            if (obj) {
                var element = Rsis.$('<div id="loadACpt" class="progressjs-container"></div>');
                document.body.appendChild(element[0]);
                loadAcpt = element[0];
            }
            return loadAcpt;
        }
    };
    Object.extend = function(destination, source) {
        if (destination && source) {
            var src, copy, deep = false;
            for (var property in source) {
                src = destination[property];
                copy = source[property];
                if (destination === copy) {
                    continue;
                }
                if (deep && copy && (Rsis.isPlainObject(copy) || (copyIsArray = Rsis.isArray(copy)))) {
                    if (copyIsArray) {
                        copyIsArray = false;
                        clone = src && Rsis.isArray(src) ? src : [];
                    } else {
                        clone = src && Rsis.isPlainObject(src) ? src : {};
                    }
                    destination[property] = Rsis.extend(deep, clone, copy);
                } else if (copy !== undefined) {
                    destination[property] = copy;
                }
            }
            if (destination) destination["sup"] = source;
        }
        return destination;
    };
    RegExpRsis = {
        _FILE: "004regExpRsis.js",
        VersionJS: JRetail.rsis.VersionJS,
        strArgsPatterns: {
            "*": /^[0-9a-zA-Z\(\)\[\{\]\}\@\,_.;:/\|*\-+\%\ ]$/,
            a: /^[a-zA-Z\(\)\[\{\]\}\,_.;:/\|*\-+\%\ ]$/,
            "0-Z": /^[0-9a-zA-Z\%\ ]$/,
            "0": /^[0-9\-]$/,
            NUMBER: /^[0-9]$/,
            MMYYYY: /^[0-9\/]$/,
            MONEY: /^[0-9\-\,\.]$/,
            DOT: /\./,
            COMMA: /\,/,
            NOMASK: /\D/g,
            DECIMAL: /^decimal$/,
            INTEGER: /^integer$/,
            JUSTNUMBER: /\D*/g,
            "/:space": /^[\/\:\ ]$/,
            SPECIALCHAR: /197|198|208|215|216|222|223|229|230|240|247|248/,
            "/:-space,.()": /^[\-\/\:\ \,\.\(\)]$/,
            TEXT: /^text$/,
            FONE: /^[0-9\-]$/,
            HOR: /^([0-2])?([0-1][0-9]|2[0-3])$/,
            MMSS: /^[0-5]\d$/
        }
    };
    function _renderObject(object, state, noRenderDeveloper) {
        try {
            if (object && state) {
                var fnc = "", noRenderDeveloper = typeof noRenderDeveloper == "undefined" ? false : noRenderDeveloper, component = object.getAttribute("component");
                switch (component) {
                  case "label":
                    fnc = renderLabel;
                    break;

                  case "input":
                    fnc = renderInput;
                    break;

                  case "autoComplete":
                    fnc = renderAutoComplete;
                    break;

                  case "suggestBox":
                    fnc = renderSuggestBox;
                    break;

                  case "comboBox":
                    fnc = renderComboBox;
                    break;

                  case "comboActions":
                    fnc = renderComboActions;
                    break;

                  case "button":
                    fnc = renderButton;
                    break;

                  case "checkBox":
                    fnc = renderCheckBox;
                    break;

                  case "searchField":
                    fnc = renderSearchField;
                    break;

                  case "dataTable":
                    fnc = renderDataTable;
                    break;

                  case "dataGrid":
                    fnc = renderDataGrid;
                    break;

                  case "editTable":
                    fnc = renderEditTable;
                    break;

                  case "dataScroller":
                    fnc = renderDataScroller;
                    break;

                  case "listBox":
                    fnc = renderListBox;
                    break;

                  case "textarea":
                    fnc = renderTextArea;
                    break;

                  case "fileUpload":
                    fnc = renderFileUpload;
                    break;

                  case "toolBar":
                    fnc = renderToolBar;
                    break;

                  case "radioButton":
                    fnc = renderRadioButton;
                    break;

                  case "accordion":
                    fnc = renderAccordion;
                    break;

                  case "toolBarButton":
                    fnc = renderButtomToolBar;
                    break;
                }
                if (typeof fnc === "function" && fnc != null) {
                    fnc.apply(null, [ object, state, noRenderDeveloper ]);
                }
            }
        } catch (oErr) {
            outPrint(oErr, "_renderObject", Rsis);
        }
    }
    window.Rsis = window.$R = Rsis;
    if (Rsis.isUndefined(JRetail)) {
        JRetail = {};
    }
    Rsis.extend(JRetail, Rsis);
})(window);

(function($R, undefined) {
    $R.Cache = {
        xpath: "/elementsChecked",
        CHECKED_VALUE: 1,
        visualize: [],
        isCache: function(obj) {
            try {
                if (obj) {
                    var object = null;
                    if (obj.getAttribute("component") == "toolBar") {
                        object = $(obj.getAttribute("dataScroller"));
                    } else {
                        var stringArgsObj = obj.id.split(".");
                        object = $(stringArgsObj[0]);
                    }
                    if (object) {
                        var component = object.getAttribute("component");
                        if (component === "dataScroller") {
                            var dataScrollerId = obj.id.split(".")[0];
                        } else if (object.getAttribute("component") == "toolBar") {
                            object = $(object.getAttribute("dataScroller"));
                        }
                    }
                    var nc = object ? object.getAttribute("cacheNodesChecked") : null, ncb = obj.getAttribute("cacheNodesChecked");
                    return nc != null && nc === "true" || ncb != null && ncb === "true";
                }
            } catch (oErr) {
                outPrint(oErr, ".isCache", $R);
            }
        },
        isVisibledState: function(table) {
            if (table && typeof this.visualize[table.id] !== "undefined") return this.visualize[table.id];
            return false;
        },
        setStateDisplay: function(table, value) {
            if (table) {
                this.visualize[table.id] = value;
            }
        },
        getUIForm: function(obj) {
            return obj ? $R.UIContext.get(obj).getUIForm(obj) : null;
        },
        removeStateDisplay: function(dataUi) {
            try {
                if (dataUi) {
                    var thiz = this, UIContext = $R.UIContext.get(dataUi), listUIForms = UIContext.getUIForms();
                    for (var k = 0; k < listUIForms.length; k++) {
                        var UIForm = listUIForms[k];
                        if (UIForm) {
                            var COMPONENTS = UIForm.getAllUIComponents();
                            if (COMPONENTS) {
                                var tables = new Array();
                                tables.concat(COMPONENTS["editTable"], COMPONENTS["dataTable"]);
                                var max = tables.length, i = 0;
                                for (;i < max; i++) {
                                    if (this.visualize && this.visualize.length > 0) this.visualize.pop();
                                }
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".removeStateDisplay", $R);
            }
            return this;
        },
        setCheckedTableXML: function(config) {
            try {
                if (config && config.table) {
                    if (typeof config.table == "string") {
                        config.table = config.UIForm.getObject(config.table);
                    }
                    var table = config.table, xpathIdent = config.xpathIdent, tableName = table.id;
                    if (typeof xpathIdent === "undefined" || xpathIdent == null) {
                        xpathIdent = "";
                    }
                    if (!config.UIForm) config.UIForm = this.getUIForm(table);
                    if (config.UIForm) {
                        var tableXML = config.UIForm.getTableXML(tableName), elementsCheckedXML = config.UIForm.getElementsChecked(tableName);
                        if (tableXML && elementsCheckedXML) {
                            var xpath = table.getAttribute("node"), nodes = getNodes(tableXML, xpath), arrayPath = xpath.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1];
                            if (typeof config.xpath == "undefined" || config.xpath == null) {
                                config.xpath = xpathNode;
                            }
                            if (nodes && nodes.length > 0) {
                                var valueToCheck = "indSelecionado", nodePath = "@ident", it = 0, max = nodes.length;
                                var checkBox = this.getCheckBox(table);
                                if (checkBox) {
                                    if (checkBox.getAttribute("valueToCheck")) {
                                        valueToCheck = checkBox.getAttribute("valueToCheck");
                                    }
                                    if (checkBox.getAttribute("value")) {
                                        nodePath = checkBox.getAttribute("value");
                                    }
                                    if (!xpathIdent && checkBox.getAttribute("pathNodeIdent")) {
                                        xpathIdent = getAtt(checkBox, "pathNodeIdent");
                                    }
                                }
                                var nodePathArray = nodePath.split("@"), nodePathIdent = nodePathArray[0] ? nodePathArray[0] : "", identAtt = nodePathArray[1];
                                for (;it < max; it++) {
                                    var valueIdent = "";
                                    if (xpathIdent != null && xpathIdent !== "") {
                                        var childNode = getChildNodes(nodes[it], xpathIdent);
                                        if (childNode && childNode.length > 0) {
                                            valueIdent = childNode[0].getAttribute(identAtt);
                                        }
                                    } else {
                                        valueIdent = nodes[it].getAttribute(identAtt);
                                    }
                                    var elementNode = getNodes(elementsCheckedXML, this.xpath + config.xpath + nodePathIdent + xpathIdent + "[@" + identAtt + "='" + valueIdent + "']");
                                    if (elementNode && elementNode.length > 0) {
                                        var nodeSelected = elementNode[0];
                                        if (xpathIdent != null && xpathIdent !== "") {
                                            nodeSelected = elementNode[0].parentNode;
                                        }
                                        var indSelecionado = nodeSelected.getAttribute(valueToCheck);
                                        if (indSelecionado == null || indSelecionado === "") {
                                            nodes[it].setAttribute(valueToCheck, this.CHECKED_VALUE);
                                        } else {
                                            nodes[it].setAttribute(valueToCheck, indSelecionado);
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".setCheckedTableXML", $R);
            }
            return this;
        },
        getCheckBox: function(table) {
            var checkBox = null;
            if (table) {
                var _rsObj = $R(table);
                var tHead = _rsObj.getTHead();
                if (tHead) {
                    if (_rsObj.getType() == _rsObj.EDIT_TABLE) {
                        checkBox = tHead && tHead.rows[0] && tHead.rows[0].cells[0] ? tHead.rows[0].cells[0].getElementsByTagName("component")[0] : null;
                    } else {
                        checkBox = tHead && tHead.rows[0] && tHead.rows[0].cells[0] ? tHead.rows[0].cells[0] : null;
                    }
                }
            }
            return checkBox;
        },
        showElements: function(UIForm, table) {
            try {
                if (UIForm && table) {
                    if (typeof table === "string") {
                        table = UIForm.getObject(table);
                    }
                    var UIContext = Rsis.UIContext.get(UIForm);
                    var xpathTable = table.getAttribute("node"), arrayPath = xpathTable.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1];
                    this.XML.createTableXML({
                        table: table,
                        UIForm: UIForm,
                        xpath: xpathNode
                    });
                    UIContext.setUIForms(UIForm.getForm().id, UIForm);
                    if (table) {
                        this.setStateDisplay(table, true);
                        var UIForm = UIForm || this.getUIForm(table), COMPONENTS = UIForm.getAllUIComponents();
                        UIForm.state = UIRsis.SEARCHING;
                        renderDataScrollerPage(COMPONENTS, UIForm.state);
                        renderTable(COMPONENTS, UIForm.state);
                        renderEdit(COMPONENTS, UIForm.state);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".showElements", $R);
                if (typeof table === "string") {
                    table = UIForm.getObject(table);
                }
                this.setStateDisplay(table, false);
            }
            return this;
        },
        hasHiddenElements: function(UIForm, table) {
            try {
                if (UIForm && table) {
                    if (typeof table === "string") {
                        table = UIForm.getObject(table);
                    }
                    var xpathTable = table.getAttribute("node"), arrayPath = xpathTable.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1];
                    if (this.isVisibledState(table)) {
                        this.setStateDisplay(table, false);
                        return false;
                    }
                    var tableXML = UIForm.getTableXML(table.id), elementsCheckedXML = UIForm.getElementsChecked(table.id);
                    if (tableXML && elementsCheckedXML) {
                        var valueToCheck = "indSelecionado", checkBox = this.getCheckBox(table);
                        if (checkBox && checkBox.getAttribute("valueToCheck")) {
                            valueToCheck = checkBox.getAttribute("valueToCheck");
                        }
                        var nodes = getNodes(tableXML, xpathTable + "[@" + valueToCheck + "='1']");
                        if (nodes && nodes.length > 0) {
                            var cacheNodes = getNodes(elementsCheckedXML, this.xpath + xpathNode), qtdeCache = cacheNodes && cacheNodes.length > 0 ? cacheNodes.length : 0, qtdeTable = nodes.length;
                            if (qtdeCache > qtdeTable) {
                                return true;
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".hasHiddenElements", $R);
            }
            return false;
        },
        checkObjects: function(UIForm, nodeElement, table, isBtnChkAll) {
            try {
                if (UIForm && nodeElement != null && table) {
                    if (typeof table === "string") {
                        table = UIForm.getObject(table);
                    }
                    var UIContext = Rsis.UIContext.get(table);
                    var nodePath = "@ident", xpathIdent = "", objCheckAll = $(table.id + ".checkAll"), checkBox = this.getCheckBox(table);
                    if (checkBox) {
                        if (checkBox.getAttribute("node")) {
                            nodePath = checkBox.getAttribute("node");
                        } else if (checkBox.getAttribute("value")) {
                            nodePath = checkBox.getAttribute("value");
                        }
                        if (checkBox.getAttribute("pathNodeIdent")) {
                            xpathIdent = getAtt(checkBox, "pathNodeIdent");
                        }
                    }
                    var nodePathArray = nodePath.split("@"), nodePathIdent = nodePathArray[0] ? nodePathArray[0] : "", identAtt = nodePathArray[1];
                    var xpathTable = table.getAttribute("node"), arrayPath = xpathTable.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1];
                    var query = "[";
                    if (typeof nodeElement.length != "undefined" && nodeElement.length > 0) {
                        for (var i = 0; i < nodeElement.length; i++) {
                            var valor = "";
                            if (xpathIdent != null && xpathIdent !== "") {
                                var childNode = getChildNodes(nodeElement[i], xpathIdent);
                                if (childNode && childNode.length > 0) {
                                    valor = childNode[0].getAttribute(identAtt);
                                }
                            } else {
                                valor = nodeElement[i].getAttribute(identAtt);
                            }
                            if (i > 0) query += " or ";
                            query += "@" + identAtt + "='" + valor + "'";
                        }
                    } else {
                        var valor = "";
                        if (xpathIdent != null && xpathIdent !== "") {
                            var childNode = getChildNodes(nodeElement, xpathIdent);
                            if (childNode && childNode.length > 0) {
                                valor = childNode[0].getAttribute(identAtt);
                            }
                        } else {
                            valor = nodeElement.getAttribute(identAtt);
                        }
                        query += "@" + identAtt + "='" + valor + "'";
                    }
                    query += "]";
                    var Transfer = {
                        table: table,
                        UIForm: UIForm,
                        node: nodeElement,
                        xpath: xpathNode,
                        xQuery: xpathNode + xpathIdent + query,
                        checkAll: objCheckAll,
                        isBtnChkAll: isBtnChkAll,
                        xpathIdent: xpathIdent
                    };
                    this.check(Transfer);
                    if (Transfer.UIForm) {
                        UIForm = Transfer.UIForm;
                        UIContext.setUIForms(UIForm);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".checkObjects", this);
            }
        },
        check: function(config) {
            if (config) {
                if (config.isBtnChkAll) {
                    if (config.checkAll && config.checkAll.checked == true) {
                        this.addAll(config);
                    } else {
                        if (this.has(config)) {
                            this.remove(config);
                            if (this.isVisibledState(config.table)) {
                                this.setStateDisplay(config.table, false);
                                config.UIForm.setTableXML(config.table.id, this.XML.createPageList(), false);
                                Rsis.render([ config.table, getDataScrollerByTable(config.table.id) ], config.UIForm.state, true);
                            }
                        }
                    }
                } else {
                    if (this.has(config)) {
                        this.remove(config);
                    } else {
                        this.add(config);
                    }
                }
            }
            return this;
        },
        create: function() {
            return createObjXMLByXPath(this.xpath, 0);
        },
        update: function(config) {
            try {
                if (typeof config.table === "string") {
                    config.table = config.UIForm.getObject(config.table);
                }
                var objXML = config.objXML, table = config.table, xpath = config.xpath, xpathIdent = config.xpathIdent, isRenderTable = config.renderTable;
                if (typeof xpathIdent === "undefined" || xpathIdent == null) {
                    xpathIdent = "";
                }
                if (!config.UIForm) config.UIForm = this.getUIForm(table);
                if (objXML && config.UIForm && table) {
                    var xpathTable = table.getAttribute("node"), arrayPath = xpathTable.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1];
                    var elementsCheckedXML = config.UIForm.getElementsChecked(table.id);
                    if (elementsCheckedXML) {
                        var valueToCheck = "indSelecionado", nameCountRowsTable = Crud.getNameCountRowsTable(table), nodePath = "@ident";
                        var checkBox = this.getCheckBox(table);
                        if (checkBox) {
                            if (checkBox.getAttribute("valueToCheck")) {
                                valueToCheck = checkBox.getAttribute("valueToCheck");
                            }
                            if (checkBox.getAttribute("value")) {
                                nodePath = checkBox.getAttribute("value");
                            }
                        }
                        var fatherNode = XML.getSingleNode(elementsCheckedXML, this.xpath), nodes = getNodes(objXML, xpath);
                        if (fatherNode && nodes && nodes.length > 0) {
                            var it = 0, max = nodes.length, nodePathArray = nodePath.split("@"), nodePathIdent = nodePathArray[0] ? nodePathArray[0] : "", identAtt = nodePathArray[1];
                            for (;it < max; it++) {
                                var valueIdent = "";
                                if (xpathIdent != null && xpathIdent !== "") {
                                    var childNode = getChildNodes(nodes[it], xpathIdent);
                                    if (childNode && childNode.length > 0) {
                                        valueIdent = childNode[0].getAttribute(identAtt);
                                    }
                                } else {
                                    valueIdent = nodes[it].getAttribute(identAtt);
                                }
                                var elementNode = getNodes(elementsCheckedXML, this.xpath + xpathNode + nodePathIdent + xpathIdent + "[@" + identAtt + "='" + valueIdent + "']");
                                if (elementNode && elementNode.length > 0) {
                                    var countCache = "", countRowsTable = "";
                                    if (xpathIdent != null && xpathIdent !== "") {
                                        countCache = toInt(elementNode[0].parentNode.getAttribute("countCache"));
                                        countRowsTable = toInt(elementNode[0].parentNode.getAttribute(nameCountRowsTable));
                                    } else {
                                        countCache = toInt(elementNode[0].getAttribute("countCache"));
                                        countRowsTable = toInt(elementNode[0].getAttribute(nameCountRowsTable));
                                    }
                                    if (!isNaN(countCache)) {
                                        nodes[it].setAttribute("countCache", countCache);
                                    }
                                    if (!isNaN(countRowsTable)) {
                                        nodes[it].setAttribute(nameCountRowsTable, countRowsTable);
                                    }
                                    nodes[it].setAttribute(valueToCheck, this.CHECKED_VALUE);
                                    Sarissa.replaceChildNode(fatherNode, nodes[it], elementNode[0]);
                                }
                            }
                        }
                    }
                }
                if (isRenderTable) {
                    this.showElements(config.UIForm, table);
                }
            } catch (oErr) {
                outPrint(oErr, ".update", $R);
            }
            return this;
        },
        createNodeElements: function(config) {
            try {
                if (config && config.table) {
                    if (typeof config.table == "string") {
                        config.table = config.UIForm.getObject(config.table);
                    }
                    var table = config.table, xpathIdent = config.xpathIdent, query = config.query, tableXML = config.tableXML;
                    tableName = table.id;
                    if (typeof xpathIdent === "undefined" || xpathIdent == null) {
                        xpathIdent = "";
                    }
                    var UIContext = $R.UIContext.get(table);
                    if (!config.UIForm) config.UIForm = this.getUIForm(table);
                    var xpathTable = table.getAttribute("node"), arrayPath = xpathTable.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1];
                    var valueToCheck = "indSelecionado", nodePath = "@ident";
                    var checkBox = this.getCheckBox(table);
                    if (checkBox) {
                        if (checkBox.getAttribute("valueToCheck")) {
                            valueToCheck = checkBox.getAttribute("valueToCheck");
                        }
                        if (checkBox.getAttribute("value")) {
                            nodePath = checkBox.getAttribute("value");
                        }
                        if (checkBox.getAttribute("pathNodeIdent")) {
                            xpathIdent = getAtt(checkBox, "pathNodeIdent");
                        }
                    }
                    if (!tableXML) {
                        tableXML = config.UIForm.getTableXML(table.id);
                    }
                    if (!(typeof query === "string" && query != null && query !== "")) {
                        query = xpathTable + "[@" + valueToCheck + "='1']";
                    }
                    var nodes = getNodes(tableXML, query);
                    if (nodes && nodes.length > 0) {
                        var Transfer = {
                            table: table,
                            UIForm: config.UIForm,
                            node: nodes,
                            xpath: xpathNode,
                            xpathIdent: xpathIdent
                        };
                        this.addAll(Transfer);
                        if (Transfer.UIForm) {
                            config.UIForm = Transfer.UIForm;
                            UIContext.setUIForms(config.UIForm);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".create", $R);
            }
            return this;
        },
        addAll: function(config) {
            try {
                if (config && config.table) {
                    if (config.UIForm && typeof config.table === "string") {
                        config.table = config.UIForm.getObject(config.table);
                    }
                    var table = config.table, newNode = config.node, xpathIdent = config.xpathIdent, tableName = table.id;
                    if (typeof xpathIdent === "undefined" || xpathIdent == null) {
                        xpathIdent = "";
                    }
                    var UIContext = Rsis.UIContext.get(table);
                    if (!config.UIForm) config.UIForm = this.getUIForm(table);
                    if (config.UIForm && newNode) {
                        var elementsCheckedXML = config.UIForm.getElementsChecked(tableName);
                        if (!elementsCheckedXML) {
                            elementsCheckedXML = this.create();
                        }
                        if (elementsCheckedXML) {
                            var xpath = table.getAttribute("node"), collectionNode = XML.getSingleNode(elementsCheckedXML, this.xpath);
                            var valueToCheck = "indSelecionado", nameCountRowsTable = Crud.getNameCountRowsTable(table), nodePath = "@ident";
                            var checkBox = this.getCheckBox(table);
                            if (checkBox) {
                                if (checkBox.getAttribute("valueToCheck")) {
                                    valueToCheck = checkBox.getAttribute("valueToCheck");
                                }
                                if (checkBox.getAttribute("value")) {
                                    nodePath = checkBox.getAttribute("value");
                                }
                            }
                            if (collectionNode) {
                                var xpathTable = table.getAttribute("node"), arrayPath = xpathTable.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1];
                                var nodePathArray = nodePath.split("@"), nodePathIdent = nodePathArray[0] ? nodePathArray[0] : "", identAtt = nodePathArray[1];
                                if (typeof newNode.length != "undefined" && newNode.length > 0) {
                                    var k = 0, maxk = newNode.length;
                                    for (;k < maxk; k++) {
                                        var valueIdent = "";
                                        if (xpathIdent != null && xpathIdent !== "") {
                                            var childNode = getChildNodes(newNode[k], xpathIdent);
                                            if (childNode && childNode.length > 0) {
                                                valueIdent = childNode[0].getAttribute(identAtt);
                                            }
                                        } else {
                                            valueIdent = newNode[k].getAttribute(identAtt);
                                        }
                                        var elementNode = getNodes(elementsCheckedXML, this.xpath + xpathNode + nodePathIdent + xpathIdent + "[@" + identAtt + "='" + valueIdent + "']");
                                        if (!(elementNode && elementNode.length > 0)) {
                                            Sarissa.appendChildNode(collectionNode, cloneNodeElement(newNode[k]));
                                        }
                                    }
                                } else {
                                    var valueIdent = "";
                                    if (xpathIdent != null && xpathIdent !== "") {
                                        var childNode = getChildNodes(newNode[0], xpathIdent);
                                        if (childNode && childNode.length > 0) {
                                            valueIdent = childNode[0].getAttribute(identAtt);
                                        }
                                    } else {
                                        valueIdent = newNode[0].getAttribute(identAtt);
                                    }
                                    var elementNode = getNodes(elementsCheckedXML, this.xpath + xpathNode + nodePathIdent + xpathIdent + "[@" + identAtt + "='" + valueIdent + "']");
                                    if (!(elementNode && elementNode.length > 0)) {
                                        Sarissa.appendChildNode(collectionNode, cloneNodeElement(newNode));
                                    }
                                }
                            }
                            config.UIForm.setElementsChecked(tableName, elementsCheckedXML);
                            UIContext.setUIForms(config.UIForm);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".addAll", $R);
            } finally {
                if (config && config.node) config.node = null;
            }
            return this;
        },
        add: function(config) {
            try {
                if (config && config.table) {
                    if (config.UIForm && typeof config.table === "string") {
                        config.table = config.UIForm.getObject(config.table);
                    }
                    var table = config.table, newNode = config.node, tableName = table.id;
                    var UIContext = Rsis.UIContext.get(table);
                    if (!config.UIForm) config.UIForm = this.getUIForm(table);
                    if (config.UIForm && newNode) {
                        var elementsCheckedXML = config.UIForm.getElementsChecked(tableName);
                        if (!elementsCheckedXML) {
                            elementsCheckedXML = this.create();
                        }
                        if (elementsCheckedXML) {
                            var xpath = table.getAttribute("node"), collectionNode = XML.getSingleNode(elementsCheckedXML, this.xpath);
                            if (collectionNode) {
                                if (typeof newNode.length != "undefined" && newNode.length > 0) {
                                    var k = 0, maxk = newNode.length;
                                    for (;k < maxk; k++) {
                                        Sarissa.appendChildNode(collectionNode, cloneNodeElement(newNode[k]));
                                    }
                                } else {
                                    Sarissa.appendChildNode(collectionNode, cloneNodeElement(newNode));
                                }
                            }
                            config.UIForm.setElementsChecked(tableName, elementsCheckedXML);
                            UIContext.setUIForms(config.UIForm);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".add", $R);
            } finally {
                if (config && config.node) config.node = null;
            }
            return this;
        },
        remove: function(config) {
            try {
                if (config && config.table) {
                    if (config.UIForm && typeof config.table === "string") {
                        config.table = config.UIForm.getObject(config.table);
                    }
                    var table = config.table, elementNode = config.node, xpathIdent = config.xpathIdent, tableName = table.id;
                    if (typeof xpathIdent === "undefined" || xpathIdent == null) {
                        xpathIdent = "";
                    }
                    var UIContext = Rsis.UIContext.get(table);
                    if (!config.UIForm) config.UIForm = this.getUIForm(table);
                    if (config.UIForm) {
                        var elementsCheckedXML = config.UIForm.getElementsChecked(tableName);
                        if (elementsCheckedXML) {
                            var xpath = table.getAttribute("node"), collectionNode = XML.getSingleNode(elementsCheckedXML, this.xpath);
                            if (collectionNode) {
                                var oldChildNode = getNodes(elementsCheckedXML, this.xpath + config.xQuery);
                                if (oldChildNode && oldChildNode.length > 0) {
                                    var k = 0, maxk = oldChildNode.length;
                                    for (;k < maxk; k++) {
                                        if (xpathIdent != null && xpathIdent !== "") {
                                            collectionNode.removeChild(oldChildNode[k].parentNode);
                                        } else {
                                            collectionNode.removeChild(oldChildNode[k]);
                                        }
                                    }
                                }
                            }
                            config.UIForm.setElementsChecked(tableName, elementsCheckedXML);
                            UIContext.setUIForms(config.UIForm);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".remove", $R);
            }
            return this;
        },
        has: function(config) {
            try {
                if (config && config.table) {
                    if (config.UIForm && typeof config.table === "string") {
                        config.table = config.UIForm.getObject(config.table);
                    }
                    var table = config.table, tableName = table.id;
                    if (!config.UIForm) config.UIForm = this.getUIForm(table);
                    if (config.UIForm && config.xQuery) {
                        var elementsCheckedXML = config.UIForm.getElementsChecked(tableName);
                        if (elementsCheckedXML) {
                            var collectionNode = XML.getSingleNode(elementsCheckedXML, this.xpath + config.xQuery);
                            if (collectionNode) {
                                return true;
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".has", $R);
            }
            return false;
        },
        getListCache: function(config) {
            try {
                var collectionNode = null, xmlList = null;
                if (config && config.table) {
                    if (config.UIForm && typeof config.table === "string") {
                        config.table = config.UIForm.getObject(config.table);
                    }
                    var table = config.table, tableName = table.id;
                    if (!config.UIForm) config.UIForm = this.getUIForm(table);
                    if (config.UIForm && config.xQuery) {
                        var elementsCheckedXML = cloneObjXML(config.UIForm.getElementsChecked(tableName));
                        if (elementsCheckedXML) {
                            collectionNode = getNodes(elementsCheckedXML, this.xpath + config.xpath + config.xQuery);
                            if (collectionNode && config.getArrayList == true) {
                                xmlList = createObjXMLByXPath("/arrayList[@className='java.util.ArrayList']", 0);
                                if (xmlList) {
                                    for (var k = 0; k < collectionNode.length; k++) {
                                        Sarissa.appendChildNode(xmlList.documentElement.firstChild, collectionNode[k]);
                                    }
                                }
                            }
                        }
                    }
                }
                return {
                    nodes: collectionNode,
                    xmlList: xmlList
                };
            } catch (oErr) {
                outPrint(oErr, ".getListCache", $R);
            }
        },
        clear: function(UIForm, TABLE_NAME) {
            if (UIForm && TABLE_NAME) {
                var nodeDomain = getNodes(UIForm.domainXML, UIForm.getXPath());
                if (nodeDomain && nodeDomain.length > 0) {
                    var table = UIForm.getObject(TABLE_NAME), elementsCheckedXML = UIForm.getElementsChecked(table.id);
                    if (table && elementsCheckedXML) {
                        var nodesAll = getNodes(UIForm.getTableXML(table.id), table.getAttribute("node"));
                        if (nodesAll && nodesAll.length > 0) {
                            var k = 0, mx = nodesAll.length;
                            for (;k < mx; k++) {
                                nodesAll[k].setAttribute("indSelecionado", "0");
                            }
                            this.checkObjects(UIForm, nodesAll, table, true);
                        }
                        UIForm.setElementsChecked(table.id, null);
                        UIForm.setTableXML(table.id, $R.Cache.XML.createPageList());
                        UIForm.setDataScrollerXMLCache(table.id, null);
                    }
                }
            }
        }
    };
    $R.Cache.XML = {
        createPageList: function() {
            return createObjXML(addTagRoot('<page class="class rsis.middleware.dao.Page" firstPage="true" lastPage="true" ' + 'lastPageNumber="0" nextPageNumber="1" pageNumber="0" pageSize="0" previousPageNumber="-1" ' + 'thisPageFirstElementNumber="1" thisPageLastElementNumber="0" totalAllElements="0">' + '<pageElements className="java.util.ArrayList"></pageElements>' + "</page>"));
        },
        createTableXML: function(config) {
            try {
                var error = false;
                if (config && config.table) {
                    if (config.UIForm && typeof config.table == "string") {
                        config.table = config.UIForm.getObject(config.table);
                    }
                    var table = config.table, tableName = table.id;
                    if (!config.UIForm) config.UIForm = this.getUIForm(table);
                    if (config.UIForm) {
                        var totalElementsData = 0, pageNumber = config.initPage || 0, totalAllElements = 0, proxPage = 0, pageSize = 1, stringArgsDataTable = config.xpath.split("/");
                        var MANAGER_CACHE_PATH_STRING = stringArgsDataTable[stringArgsDataTable.length - 1];
                        if (MANAGER_CACHE_PATH_STRING !== "") {
                            MANAGER_CACHE_PATH_STRING = "/" + MANAGER_CACHE_PATH_STRING;
                        }
                        var tableXML = cloneObjXML(this.createPageList()), collectionNode = null, dataScroller = $R(table).getDSPage();
                        if (dataScroller != null) {
                            pageSize = isNaN(dataScroller.pSize) ? 1 : dataScroller.pSize;
                        }
                        if (tableXML) {
                            collectionNode = XML.getSingleNode(tableXML, "/page/pageElements");
                            while (collectionNode.hasChildNodes()) {
                                collectionNode.removeChild(collectionNode.firstChild);
                            }
                        }
                        var elementsCheckedXML = cloneObjXML(config.UIForm.getElementsChecked(tableName)), childNodeCache = null;
                        if (elementsCheckedXML) {
                            var checkAll = $(table.id + ".checkAll");
                            if (checkAll && checkAll.checked == true) {
                                checkAll.checked = false;
                            }
                            childNodeCache = getNodes(elementsCheckedXML, $R.Cache.xpath + MANAGER_CACHE_PATH_STRING);
                            if (childNodeCache && childNodeCache.length > 0) {
                                var count = pageNumber * pageSize, totalAllElements = childNodeCache.length;
                                maxCount = 0;
                                if (count == 0) {
                                    maxCount = totalAllElements < pageSize ? childNodeCache.length : count + pageSize;
                                } else {
                                    var totalPaginas = totalAllElements % pageSize == 0 ? parseInt(totalAllElements / pageSize, 10) : parseInt(totalAllElements / pageSize, 10) + 1;
                                    if (pageNumber == totalPaginas - 1) {
                                        maxCount = totalAllElements - pageSize < pageSize ? childNodeCache.length : count + pageSize - (count + pageSize - totalAllElements);
                                    } else {
                                        maxCount = totalAllElements - pageSize < pageSize ? childNodeCache.length : count + pageSize;
                                    }
                                }
                                var itPage = count, countRowTable = 0, countNumRegs = 0, nameCountRowsTable = Crud.getNameCountRowsTable(table);
                                for (;itPage < maxCount; itPage++) {
                                    if (childNodeCache[itPage]) {
                                        childNodeCache[itPage].setAttribute(nameCountRowsTable, countRowTable);
                                        Sarissa.appendChildNode(collectionNode, childNodeCache[itPage]);
                                        countRowTable++;
                                    }
                                }
                            }
                        }
                        var page = new Page(pageNumber, pageSize, totalAllElements);
                        if (tableXML) {
                            var objNoPage = getNodes(tableXML, "/page");
                            if (objNoPage && objNoPage.length > 0) {
                                objNoPage[0].setAttribute("pageNumber", page.getPageNumber());
                                objNoPage[0].setAttribute("totalAllElements", totalAllElements);
                                objNoPage[0].setAttribute("firstPage", page.isFirstPage());
                                objNoPage[0].setAttribute("lastPage", page.isLastPage());
                                objNoPage[0].setAttribute("lastPageNumber", page.getLastPageNumber());
                                objNoPage[0].setAttribute("nextPageNumber", page.getNextPageNumber());
                                objNoPage[0].setAttribute("thisPageFirstElementNumber", page.getThisPageFirstElementNumber());
                                objNoPage[0].setAttribute("thisPageLastElementNumber", page.getThisPageLastElementNumber());
                                objNoPage[0].setAttribute("pageSize", pageSize);
                                objNoPage[0].setAttribute("indAlterado", "1");
                                objNoPage[0].setAttribute("new", "true");
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".createTableXML", $R);
                error = true;
            } finally {
                if (!error && config && config.table) config.UIForm.setTableXML(table.id, tableXML, false);
            }
            return $R.Cache;
        },
        getSendList: function(UIForm, table) {
            try {
                if (UIForm && table !== "") {
                    if (typeof table == "string") {
                        table = UIForm.getObject(table);
                    }
                    var xpath = table.getAttribute("node"), arrayPath = xpath.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1];
                    var xmlListOrdens = "", transfer = {
                        UIForm: UIForm,
                        table: table,
                        xpath: xpathNode,
                        xQuery: "[@indSelecionado='1']",
                        getArrayList: true
                    };
                    if (typeof arguments[2] == "string") transfer["xQuery"] = arguments[2];
                    var transferReturn = $R.Cache.getListCache(transfer), nodes = transferReturn && transferReturn.nodes ? transferReturn.nodes : null;
                    if (nodes && nodes.length > 0) {
                        var xmlSendList = createObjXMLByXPath("/sendList/collections[@className='java.util.ArrayList']", 0);
                        if (xmlSendList) {
                            var fatherNode = XML.getSingleNode(xmlSendList, "/sendList/collections");
                            for (var k = 0; k < nodes.length; k++) {
                                var eNode = XMLRsis.XML.changeNodeName(nodes[k], nodes[k].nodeName, "collection");
                                if (eNode != null) {
                                    Sarissa.appendChildNode(fatherNode, eNode);
                                }
                            }
                            return xmlSendList;
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".getSendList", $R);
            }
            return null;
        },
        getSendXMLList: function(UIForm, xmlList, xPath) {
            try {
                if (UIForm && xPath != "" && xmlList != null) {
                    var xmlListOrdens = "", nodes = getNodes(xmlList, xPath);
                    if (nodes && nodes.length > 0) {
                        var xmlSendList = createObjXMLByXPath("/sendList/collections[@className='java.util.ArrayList']", 0);
                        if (xmlSendList) {
                            var fatherNode = XML.getSingleNode(xmlSendList, "/sendList/collections");
                            for (var k = 0; k < nodes.length; k++) {
                                var eNode = XMLRsis.XML.changeNodeName(nodes[k], nodes[k].nodeName, "collection");
                                if (eNode != null) {
                                    Sarissa.appendChildNode(fatherNode, eNode);
                                }
                            }
                            return xmlSendList;
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".getSendList", $R);
            }
            return null;
        }
    };
})(Rsis, this);

Rsis.extend({
    cache: {},
    expando: "Rsis" + (JRetail.rsis.VersionJS + Math.random()).replace(/\D/g, ""),
    noData: {
        embed: true,
        object: "clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",
        applet: true
    },
    hasData: function(elem) {
        elem = elem.nodeType ? Rsis.cache[elem[Rsis.expando]] : elem[Rsis.expando];
        return !!elem && !isEmptyDataObject(elem);
    },
    data: function(elem, name, data) {
        return internalData(elem, name, data);
    },
    removeData: function(elem, name) {
        return internalRemoveData(elem, name);
    },
    _data: function(elem, name, data) {
        return internalData(elem, name, data, true);
    },
    _removeData: function(elem, name) {
        return internalRemoveData(elem, name, true);
    },
    acceptData: function(elem) {
        if (elem.nodeType && elem.nodeType !== 1 && elem.nodeType !== 9) {
            return false;
        }
        var noData = elem.nodeName && Rsis.noData[elem.nodeName.toLowerCase()];
        return !noData || noData !== true && elem.getAttribute("classid") === noData;
    }
});

var core_strundefined = typeof undefined;

Rsis.support = function() {
    var support, all, a, input, select, fragment, opt, eventName, isSupported, i, div = document.createElement("div");
    div.setAttribute("className", "t");
    div.innerHTML = "  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>";
    all = div.getElementsByTagName("*");
    a = div.getElementsByTagName("a")[0];
    if (!all || !a || !all.length) {
        return {};
    }
    select = document.createElement("select");
    opt = select.appendChild(document.createElement("option"));
    input = div.getElementsByTagName("input")[0];
    a.style.cssText = "top:1px;float:left;opacity:.5";
    support = {
        getSetAttribute: div.className !== "t",
        leadingWhitespace: div.firstChild.nodeType === 3,
        tbody: !div.getElementsByTagName("tbody").length,
        htmlSerialize: !!div.getElementsByTagName("link").length,
        style: /top/.test(a.getAttribute("style")),
        hrefNormalized: a.getAttribute("href") === "/a",
        opacity: /^0.5/.test(a.style.opacity),
        cssFloat: !!a.style.cssFloat,
        checkOn: !!input.value,
        optSelected: opt.selected,
        enctype: !!document.createElement("form").enctype,
        html5Clone: document.createElement("nav").cloneNode(true).outerHTML !== "<:nav></:nav>",
        boxModel: document.compatMode === "CSS1Compat",
        deleteExpando: true,
        noCloneEvent: true,
        inlineBlockNeedsLayout: false,
        shrinkWrapBlocks: false,
        reliableMarginRight: true,
        boxSizingReliable: true,
        pixelPosition: false
    };
    input.checked = true;
    support.noCloneChecked = input.cloneNode(true).checked;
    select.disabled = true;
    support.optDisabled = !opt.disabled;
    try {
        delete div.test;
    } catch (e) {
        support.deleteExpando = false;
    }
    input = document.createElement("input");
    input.setAttribute("value", "");
    support.input = input.getAttribute("value") === "";
    input.value = "t";
    input.setAttribute("type", "radio");
    support.radioValue = input.value === "t";
    input.setAttribute("checked", "t");
    input.setAttribute("name", "t");
    fragment = document.createDocumentFragment();
    fragment.appendChild(input);
    support.appendChecked = input.checked;
    support.checkClone = fragment.cloneNode(true).cloneNode(true).lastChild.checked;
    if (div.attachEvent) {
        div.attachEvent("onclick", function() {
            support.noCloneEvent = false;
        });
        div.cloneNode(true).click();
    }
    for (i in {
        submit: true,
        change: true,
        focusin: true
    }) {
        div.setAttribute(eventName = "on" + i, "t");
        support[i + "Bubbles"] = eventName in window || div.attributes[eventName].expando === false;
    }
    div.style.backgroundClip = "content-box";
    div.cloneNode(true).style.backgroundClip = "";
    support.clearCloneStyle = div.style.backgroundClip === "content-box";
    Rsis(function() {
        var container, marginDiv, tds, divReset = "padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;", body = document.getElementsByTagName("body")[0];
        if (!body) {
            return;
        }
        container = document.createElement("div");
        container.style.cssText = "border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px";
        body.appendChild(container).appendChild(div);
        div.innerHTML = "<table><tr><td></td><td>t</td></tr></table>";
        tds = div.getElementsByTagName("td");
        tds[0].style.cssText = "padding:0;margin:0;border:0;display:none";
        isSupported = tds[0].offsetHeight === 0;
        tds[0].style.display = "";
        tds[1].style.display = "none";
        support.reliableHiddenOffsets = isSupported && tds[0].offsetHeight === 0;
        div.innerHTML = "";
        div.style.cssText = "box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;";
        support.boxSizing = div.offsetWidth === 4;
        support.doesNotIncludeMarginInBodyOffset = body.offsetTop !== 1;
        if (window.getComputedStyle) {
            support.pixelPosition = (window.getComputedStyle(div, null) || {}).top !== "1%";
            support.boxSizingReliable = (window.getComputedStyle(div, null) || {
                width: "4px"
            }).width === "4px";
            marginDiv = div.appendChild(document.createElement("div"));
            marginDiv.style.cssText = div.style.cssText = divReset;
            marginDiv.style.marginRight = marginDiv.style.width = "0";
            div.style.width = "1px";
            support.reliableMarginRight = !parseFloat((window.getComputedStyle(marginDiv, null) || {}).marginRight);
        }
        if (typeof div.style.zoom !== core_strundefined) {
            div.innerHTML = "";
            div.style.cssText = divReset + "width:1px;padding:1px;display:inline;zoom:1";
            support.inlineBlockNeedsLayout = div.offsetWidth === 3;
            div.style.display = "block";
            div.innerHTML = "<div></div>";
            div.firstChild.style.width = "5px";
            support.shrinkWrapBlocks = div.offsetWidth !== 3;
            if (support.inlineBlockNeedsLayout) {
                body.style.zoom = 1;
            }
        }
        body.removeChild(container);
        container = div = tds = marginDiv = null;
    });
    all = select = fragment = opt = a = input = null;
    return support;
}();

Rsis.extend({
    clone: function(elem, dataAndEvents, deepDataAndEvents) {
        var destElements, node, clone, i, srcElements, inPage = Rsis.contains(elem.ownerDocument, elem);
        if (Rsis.support.html5Clone || Rsis.isXMLDoc(elem) || !rnoshimcache.test("<" + elem.nodeName + ">")) {
            clone = elem.cloneNode(true);
        } else {
            fragmentDiv.innerHTML = elem.outerHTML;
            fragmentDiv.removeChild(clone = fragmentDiv.firstChild);
        }
        if ((!Rsis.support.noCloneEvent || !Rsis.support.noCloneChecked) && (elem.nodeType === 1 || elem.nodeType === 11) && !Rsis.isXMLDoc(elem)) {
            destElements = getAll(clone);
            srcElements = getAll(elem);
            for (i = 0; (node = srcElements[i]) != null; ++i) {
                if (destElements[i]) {
                    fixCloneNodeIssues(node, destElements[i]);
                }
            }
        }
        if (dataAndEvents) {
            if (deepDataAndEvents) {
                srcElements = srcElements || getAll(elem);
                destElements = destElements || getAll(clone);
                for (i = 0; (node = srcElements[i]) != null; i++) {
                    cloneCopyEvent(node, destElements[i]);
                }
            } else {
                cloneCopyEvent(elem, clone);
            }
        }
        destElements = getAll(clone, "script");
        if (destElements.length > 0) {
            setGlobalEval(destElements, !inPage && getAll(elem, "script"));
        }
        destElements = srcElements = node = null;
        return clone;
    },
    buildFragment: function(elems, context, scripts, selection) {
        var j, elem, contains, tmp, tag, tbody, wrap, l = elems.length, safe = createSafeFragment(context), nodes = [], i = 0;
        for (;i < l; i++) {
            elem = elems[i];
            if (elem || elem === 0) {
                if (Rsis.typeOf(elem) === "object") {
                    Rsis.merge(nodes, elem.nodeType ? [ elem ] : elem);
                } else if (!rhtml.test(elem)) {
                    nodes.push(context.createTextNode(elem));
                } else {
                    tmp = tmp || safe.appendChild(context.createElement("div"));
                    tag = (rtagName.exec(elem) || [ "", "" ])[1].toLowerCase();
                    wrap = wrapMap[tag] || wrapMap._default;
                    tmp.innerHTML = wrap[1] + elem.replace(rxhtmlTag, "<$1></$2>") + wrap[2];
                    j = wrap[0];
                    while (j--) {
                        tmp = tmp.lastChild;
                    }
                    if (!Rsis.support.leadingWhitespace && rleadingWhitespace.test(elem)) {
                        nodes.push(context.createTextNode(rleadingWhitespace.exec(elem)[0]));
                    }
                    if (!Rsis.support.tbody) {
                        elem = tag === "table" && !rtbody.test(elem) ? tmp.firstChild : wrap[1] === "<table>" && !rtbody.test(elem) ? tmp : 0;
                        j = elem && elem.childNodes.length;
                        while (j--) {
                            if (Rsis.getNodeName(tbody = elem.childNodes[j], "tbody") && !tbody.childNodes.length) {
                                elem.removeChild(tbody);
                            }
                        }
                    }
                    Rsis.merge(nodes, tmp.childNodes);
                    tmp.textContent = "";
                    while (tmp.firstChild) {
                        tmp.removeChild(tmp.firstChild);
                    }
                    tmp = safe.lastChild;
                }
            }
        }
        if (tmp) {
            safe.removeChild(tmp);
        }
        if (!Rsis.support.appendChecked) {
            Rsis.grep(getAll(nodes, "input"), fixDefaultChecked);
        }
        i = 0;
        while (elem = nodes[i++]) {
            if (selection && Rsis.inArray(elem, selection) !== -1) {
                continue;
            }
            contains = Rsis.contains(elem.ownerDocument, elem);
            tmp = getAll(safe.appendChild(elem), "script");
            if (contains) {
                setGlobalEval(tmp);
            }
            if (scripts) {
                j = 0;
                while (elem = tmp[j++]) {
                    if (rscriptType.test(elem.type || "")) {
                        scripts.push(elem);
                    }
                }
            }
        }
        tmp = null;
        return safe;
    },
    cleanData: function(elems, acceptData) {
        var elem, type, id, data, i = 0, internalKey = Rsis.expando, cache = Rsis.cache, deleteExpando = Rsis.support.deleteExpando, special = Rsis.event.special;
        for (;(elem = elems[i]) != null; i++) {
            if (acceptData || Rsis.acceptData(elem)) {
                id = elem[internalKey];
                data = id && cache[id];
                if (data) {
                    if (data.events) {
                        for (type in data.events) {
                            if (special[type]) {
                                Rsis.event.remove(elem, type);
                            } else {
                                Rsis.removeEvent(elem, type, data.handle);
                            }
                        }
                    }
                    if (cache[id]) {
                        delete cache[id];
                        if (deleteExpando) {
                            delete elem[internalKey];
                        } else if (typeof elem.removeAttribute !== core_strundefined) {
                            elem.removeAttribute(internalKey);
                        } else {
                            elem[internalKey] = null;
                        }
                        core_deletedIds.push(id);
                    }
                }
            }
        }
    }
});

function searchStringArguments(stringArgs, valor, splitParam, object) {
    try {
        if (typeof stringArgs === "string" && stringArgs !== "") {
            var list = stringArgs.split(splitParam);
            if (list && list.length > 0) {
                for (var j = 0; j < list.length; j++) {
                    if (list[j] == null) continue;
                    var array = list[j].match(/[u|i|s|v|e]$/);
                    if (array != null && array.length > 0) {
                        if (list[j] === valor) return true;
                    } else {
                        var exte = null, parent;
                        try {
                            var ns_string = list[j];
                            if (ns_string.search(/\$P./) > -1) {
                                ns_string = ns_string.replace("$P.", "");
                            }
                            exte = Rsis.str2Fn($P, ns_string);
                            parent = Rsis.namespace($P, ns_string) || this;
                        } catch (e) {
                            exte = Rsis.str2Fn($W, ns_string);
                            parent = Rsis.namespace(ns_string) || this;
                        }
                        if (exte) {
                            return exte.apply(parent, [ object, valor ]);
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "searchStringArguments", Rsis);
    }
    return false;
}

function isDocument(obj) {
    return obj != null && obj.nodeType == obj.DOCUMENT_NODE;
}

function isString(value) {
    return typeof value === "string";
}

function isNumber(value) {
    return typeof value === "number";
}

function isFunction(value) {
    return typeof value === "function";
}

function isBoolean(value) {
    return typeof value === "boolean";
}

function toBoolean(string) {
    var bool = isString(string) && function() {
        switch (false) {
          case string.toLowerCase() !== "true":
            return true;

          case string.toLowerCase() !== "false":
            return false;
        }
    }();
    if (typeof bool === "boolean") {
        return bool;
    }
    return void 0;
}

function toInt(str) {
    return parseInt(str, 10);
}

function isEmptyArray(value) {
    return typeof value == "undefined" || value == null || !(Rsis.isArray(value) && value.length > 0);
}

function isEmpty(value) {
    return typeof value == "undefined" || value == null || value === "";
}

function isNoEmpty(value) {
    return typeof value != "undefined" && value != null && value !== "";
}

function isUIForm(value) {
    return typeof value == "object" && value.hasOwnProperty("domainXML");
}

function getAll(context, tag) {
    var elems, elem, i = 0, found = typeof context.getElementsByTagName !== core_strundefined ? context.getElementsByTagName(tag || "*") : typeof context.querySelectorAll !== core_strundefined ? context.querySelectorAll(tag || "*") : undefined;
    if (!found) {
        for (found = [], elems = context.childNodes || context; (elem = elems[i]) != null; i++) {
            if (!tag || Rsis.getNodeName(elem, tag)) {
                found.push(elem);
            } else {
                Rsis.merge(found, getAll(elem, tag));
            }
        }
    }
    return tag === undefined || tag && Rsis.getNodeName(context, tag) ? Rsis.merge([ context ], found) : found;
}

function cloneCopyEvent(src, dest) {
    if (dest.nodeType !== 1 || !Rsis.hasData(src)) {
        return;
    }
    var type, i, l, oldData = Rsis._data(src), curData = Rsis._data(dest, oldData), events = oldData.events;
    if (events) {
        delete curData.handle;
        curData.events = {};
        for (type in events) {
            for (i = 0, l = events[type].length; i < l; i++) {
                Rsis.event.add(dest, type, events[type][i]);
            }
        }
    }
    if (curData.data) {
        curData.data = Rsis.extend({}, curData.data);
    }
}

function fixCloneNodeIssues(src, dest) {
    var nodeName, e, data;
    if (dest.nodeType !== 1) {
        return;
    }
    nodeName = dest.nodeName.toLowerCase();
    if (!Rsis.support.noCloneEvent && dest[Rsis.expando]) {
        data = Rsis._data(dest);
        for (e in data.events) {
            Rsis.removeEvent(dest, e, data.handle);
        }
        dest.removeAttribute(Rsis.expando);
    }
    if (nodeName === "script" && dest.text !== src.text) {
        disableScript(dest).text = src.text;
        restoreScript(dest);
    } else if (nodeName === "object") {
        if (dest.parentNode) {
            dest.outerHTML = src.outerHTML;
        }
        if (Rsis.support.html5Clone && (src.innerHTML && !Rsis.trim(dest.innerHTML))) {
            dest.innerHTML = src.innerHTML;
        }
    } else if (nodeName === "input" && manipulation_rcheckableType.test(src.type)) {
        dest.defaultChecked = dest.checked = src.checked;
        if (dest.value !== src.value) {
            dest.value = src.value;
        }
    } else if (nodeName === "option") {
        dest.defaultSelected = dest.selected = src.defaultSelected;
    } else if (nodeName === "input" || nodeName === "textarea") {
        dest.defaultValue = src.defaultValue;
    }
}

function internalRemoveData(elem, name, pvt) {
    if (!Rsis.acceptData(elem)) {
        return;
    }
    var i, l, thisCache, isNode = elem.nodeType, cache = isNode ? Rsis.cache : elem, id = isNode ? elem[Rsis.expando] : Rsis.expando;
    if (!cache[id]) {
        return;
    }
    if (name) {
        thisCache = pvt ? cache[id] : cache[id].data;
        if (thisCache) {
            if (!Rsis.isArray(name)) {
                if (name in thisCache) {
                    name = [ name ];
                } else {
                    name = Rsis.camelCase(name);
                    if (name in thisCache) {
                        name = [ name ];
                    } else {
                        name = name.split(" ");
                    }
                }
            } else {
                name = name.concat(Rsis.map(name, Rsis.camelCase));
            }
            for (i = 0, l = name.length; i < l; i++) {
                delete thisCache[name[i]];
            }
            if (!(pvt ? isEmptyDataObject : Rsis.isEmptyObject)(thisCache)) {
                return;
            }
        }
    }
    if (!pvt) {
        delete cache[id].data;
        if (!isEmptyDataObject(cache[id])) {
            return;
        }
    }
    if (isNode) {
        Rsis.cleanData([ elem ], true);
    } else if (Rsis.support.deleteExpando || cache != cache.window) {
        delete cache[id];
    } else {
        cache[id] = null;
    }
}

function createSafeFragment(document) {
    var list = nodeNames.split("|"), safeFrag = document.createDocumentFragment();
    if (safeFrag.createElement) {
        while (list.length) {
            safeFrag.createElement(list.pop());
        }
    }
    return safeFrag;
}

var nodeNames = "abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|" + "header|hgroup|mark|meter|nav|output|progress|section|summary|time|video", rinlineRsis = / Rsis\d+="(?:null|\d+)"/g, rnoshimcache = new RegExp("<(?:" + nodeNames + ")[\\s/>]", "i"), rleadingWhitespace = /^\s+/, rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi, rtagName = /<([\w:]+)/, rtbody = /<tbody/i, rhtml = /<|&#?\w+;/, rnoInnerhtml = /<(?:script|style|link)/i, manipulation_rcheckableType = /^(?:checkbox|radio)$/i, rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i, rscriptType = /^$|\/(?:java|ecma)script/i, rscriptTypeMasked = /^true\/(.*)/, rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g, wrapMap = {
    option: [ 1, "<select multiple='multiple'>", "</select>" ],
    legend: [ 1, "<fieldset>", "</fieldset>" ],
    area: [ 1, "<map>", "</map>" ],
    param: [ 1, "<object>", "</object>" ],
    thead: [ 1, "<table>", "</table>" ],
    tr: [ 2, "<table><tbody>", "</tbody></table>" ],
    col: [ 2, "<table><tbody></tbody><colgroup>", "</colgroup></table>" ],
    td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],
    _default: Rsis.support.htmlSerialize ? [ 0, "", "" ] : [ 1, "X<div>", "</div>" ]
}, safeFragment = createSafeFragment(document), fragmentDiv = safeFragment.appendChild(document.createElement("div"));

wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;

wrapMap.th = wrapMap.td;

Rsis.fn.extend({
    text: function(value) {
        return Rsis.access(this, function(value) {
            return value === undefined ? Rsis.getText(this) : this.empty().append((this[0] && this[0].ownerDocument || document).createTextNode(value));
        }, null, value, arguments.length);
    },
    wrapAll: function(html) {
        if (Rsis.isFunction(html)) {
            return this.each(function(i) {
                Rsis(this).wrapAll(html.call(this, i));
            });
        }
        if (this[0]) {
            var wrap = Rsis(html, this[0].ownerDocument).eq(0).clone(true);
            if (this[0].parentNode) {
                wrap.insertBefore(this[0]);
            }
            wrap.map(function() {
                var elem = this;
                while (elem.firstChild && elem.firstChild.nodeType === 1) {
                    elem = elem.firstChild;
                }
                return elem;
            }).append(this);
        }
        return this;
    },
    wrapInner: function(html) {
        if (Rsis.isFunction(html)) {
            return this.each(function(i) {
                Rsis(this).wrapInner(html.call(this, i));
            });
        }
        return this.each(function() {
            var self = Rsis(this), contents = self.contents();
            if (contents.length) {
                contents.wrapAll(html);
            } else {
                self.append(html);
            }
        });
    },
    wrap: function(html) {
        var isFunction = Rsis.isFunction(html);
        return this.each(function(i) {
            Rsis(this).wrapAll(isFunction ? html.call(this, i) : html);
        });
    },
    unwrap: function() {
        return this.parent().each(function() {
            if (!Rsis.getNodeName(this, "body")) {
                Rsis(this).replaceWith(this.childNodes);
            }
        }).end();
    },
    append: function() {
        return this.domManip(arguments, true, function(elem) {
            if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
                this.appendChild(elem);
            }
        });
    },
    prepend: function() {
        return this.domManip(arguments, true, function(elem) {
            if (this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9) {
                this.insertBefore(elem, this.firstChild);
            }
        });
    },
    before: function() {
        return this.domManip(arguments, false, function(elem) {
            if (this.parentNode) {
                this.parentNode.insertBefore(elem, this);
            }
        });
    },
    after: function() {
        return this.domManip(arguments, false, function(elem) {
            if (this.parentNode) {
                this.parentNode.insertBefore(elem, this.nextSibling);
            }
        });
    },
    remove: function(selector, keepData) {
        var elem, i = 0;
        for (;(elem = this[i]) != null; i++) {
            if (!selector || Rsis.filter(selector, [ elem ]).length > 0) {
                if (!keepData && elem.nodeType === 1) {
                    Rsis.cleanData(getAll(elem));
                }
                if (elem.parentNode) {
                    if (keepData && Rsis.contains(elem.ownerDocument, elem)) {
                        setGlobalEval(getAll(elem, "script"));
                    }
                    elem.parentNode.removeChild(elem);
                }
            }
        }
        return this;
    }
});

(function(window, undefined) {
    Rsis.find = Sizzle;
    Rsis.expr = Sizzle.selectors;
    Rsis.expr[":"] = Rsis.expr.pseudos;
    Rsis.unique = Sizzle.uniqueSort;
    Rsis.text = Sizzle.getText;
    Rsis.getText = Sizzle.getText;
    Rsis.isXMLDoc = Sizzle.isXML;
    Rsis.contains = Sizzle.contains;
    function bindJsFwks() {
        var _fw = undefined;
        JQuery = jQuery = window.jQuery;
        if (JQuery && JQuery.fn) {
            JQuery._FILE = "001jQmin.js";
            _fw = JQuery;
            jQuery.noConflict(true);
        }
        Zepto = Zepto = window.Zepto;
        if (Zepto && Zepto.fn) {
            Zepto._FILE = "001jZepto.js";
            _fw = Zepto;
            Zepto.noConflict(true);
        }
        Rsis.$ = _fw;
        Rsis.fw = Rsis.fn.fw = function() {
            if (arguments[0]) {
                return Rsis.$($R(arguments[0])[0]);
            } else return Rsis.$(this[0]);
        };
        function baseExtend(destination, source) {
            if (destination && source) {
                var src, copy, deep = false;
                for (var property in source) {
                    if (destination.hasOwnProperty(property)) {
                        src = destination[property];
                        copy = source[property];
                        if (destination === copy) {
                            continue;
                        }
                        if (deep && copy && (Rsis.isPlainObject(copy) || (copyIsArray = Rsis.isArray(copy)))) {
                            if (copyIsArray) {
                                copyIsArray = false;
                                clone = src && Rsis.isArray(src) ? src : [];
                            } else {
                                clone = src && Rsis.isPlainObject(src) ? src : {};
                            }
                            destination[property] = Rsis.extend(deep, clone, copy);
                        } else if (typeof copy !== "undefined") {
                            destination[property] = copy;
                        }
                    }
                    return destination;
                }
                Rsis.fn = baseExtend(Rsis.fn, Rsis.$.fn);
                Rsis = baseExtend(Rsis, Rsis.$);
            }
        }
    }
    bindJsFwks();
    rootRsis = Rsis(window.document);
    Rsis.event = Rsis.$.event;
})(window);

var runtil = /Until$/, rparentsprev = /^(?:parents|prev(?:Until|All))/, isSimple = /^.[^:#\[\.,]*$/, rneedsContext = Rsis.expr.match.needsContext, guaranteedUnique = {
    children: true,
    contents: true,
    next: true,
    prev: true
};

var r20 = /%20/g, rbracket = /\[\]$/, rCRLF = /\r?\n/g, rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i, rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParamsRsis(prefix, obj, traditional, add) {
    var name;
    if (Rsis.isArray(obj)) {
        Rsis.each(obj, function(i, v) {
            if (traditional || rbracket.test(prefix)) {
                add(prefix, v);
            } else {
                buildParamsRsis(prefix + "[" + (typeof v === "object" ? i : "") + "]", v, traditional, add);
            }
        });
    } else if (!traditional && Rsis.typeOf(obj) === "object") {
        for (name in obj) {
            buildParamsRsis(prefix + "[" + name + "]", obj[name], traditional, add);
        }
    } else {
        add(prefix, obj);
    }
}

Rsis.param = function(a, traditional) {
    var prefix, s = [], add = function(key, value) {
        value = Rsis.isFunction(value) ? value() : value == null ? "" : value;
        s[s.length] = encodeURIComponent(key) + "=" + encodeURIComponent(value);
    };
    if (traditional === undefined) {
        traditional = AjaxRsis.settings && AjaxRsis.settings.traditional;
    }
    if (Rsis.isArray(a) || typeof a.rsis !== "undefined" && !Rsis.isPlainObject(a)) {
        Rsis.each(a, function() {
            add(this.name, this.value);
        });
    } else {
        for (prefix in a) {
            buildParamsRsis(prefix, a[prefix], traditional, add);
        }
    }
    return s.join("&").replace(r20, "+");
};

if (!Rsis.browser.msie && HTMLElement) {
    HTMLElement.prototype.__defineGetter__("parentElement", function() {
        return this.parentNode == this.ownerDocument ? null : this.parentNode;
    });
    HTMLElement.prototype.__defineSetter__("innerText", function(sText) {
        this.innerHTML = _convertTextToHTML(sText);
        return sText;
    });
    HTMLElement.prototype.__defineGetter__("innerText", function() {
        var range = this.ownerDocument.createRange();
        range.selectNodeContents(this);
        return range.toString();
    });
    HTMLElement.prototype.__defineSetter__("outerHTML", function(html) {
        var rng = document.createRange();
        rng.selectNode(this);
        var newHTML = rng.createContextualFragment(html);
        this.parentNode.replaceChild(newHTML, this);
        return html;
    });
    HTMLElement.prototype.__defineGetter__("outerHTML", function() {
        var attr, attrs = this.attributes;
        var str = "<" + this.tagName;
        for (var _i = 0; _i < attrs.length; _i++) {
            var attr = attrs[_i];
            if (attr.specified) str = str + " " + attr.name + '="' + attr.value + '"';
        }
        if (!this.canHaveChildren) return str + ">";
        return str + ">" + this.innerHTML + "</" + this.tagName + ">";
    });
    function _convertTextToHTML(string) {
        try {
            var s = new String(string);
            var s = s.replace(/\&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/\n/g, "<BR>");
            while (/\s\s/.test(s)) {
                s = s.replace(/\s\s/, "&nbsp; ");
            }
            return s.replace(/\s/g, " ");
        } catch (oErr) {
            outPrint(oErr, "_convertTextToHTML");
        }
        return "";
    }
}

if (typeof window.localStorage === "undefined") {
    window.localStorage = {
        getItem: function(sKey) {
            if (!sKey || !this.hasOwnProperty(sKey)) {
                return null;
            }
            return unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"), "$1"));
        },
        key: function(nKeyId) {
            return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/, "").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[nKeyId]);
        },
        setItem: function(sKey, sValue) {
            if (!sKey) {
                return;
            }
            document.cookie = escape(sKey) + "=" + escape(sValue) + "; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/";
            this.length = document.cookie.match(/\=/g).length;
        },
        length: 0,
        removeItem: function(sKey) {
            if (!sKey || !this.hasOwnProperty(sKey)) {
                return;
            }
            document.cookie = escape(sKey) + "=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/";
            this.length--;
        },
        hasOwnProperty: function(sKey) {
            return new RegExp("(?:^|;\\s*)" + escape(sKey).replace(/[\-\.\+\*]/g, "\\$&") + "\\s*\\=").test(document.cookie);
        },
        clear: function() {
            var cookies = document.cookie.split(";");
            for (var i = 0; i < cookies.length; i++) {
                var spcook = cookies[i].split("=");
                document.cookie = spcook[0] + "=;expires=Thu, 21 Sep 1979 00:00:01 UTC;";
                this.length--;
            }
        }
    };
    window.localStorage.length = (document.cookie.match(/\=/g) || window.localStorage).length;
}

function $(_id) {
    try {
        if (!Rsis.isUndefined(_id) && _id != null && _id !== "") {
            var strArgs = _id.split("__");
            if (strArgs && strArgs.length > 1) {
                if (!Rsis.isUndefined(strArgs[0]) && strArgs[0] != null && strArgs[0] !== "") return $frame(strArgs[0], _id);
            } else {
                return document.getElementById(_id);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "$()", Rsis);
    }
    return null;
}

function $frame(_iframeName, _id) {
    try {
        var object = null;
        if (typeof _iframeName === "string" && _iframeName !== "" && (typeof _id === "string" && _id !== "")) {
            var iframeEl = document.getElementById(_iframeName);
            if (iframeEl) {
                if (iframeEl.contentDocument) {
                    object = $config(iframeEl.contentDocument.getElementById(_id));
                } else if (iframeEl.contentWindow) {
                    object = $config(iframeEl.contentWindow.document.getElementById(_id));
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "$frame()", Rsis);
    }
    return object;
}

function isArraylike(obj) {
    var length = obj.length, type = Rsis.typeOf(obj);
    if (type === "function" || Rsis.isWindow(obj)) {
        return false;
    }
    if (obj.nodeType === 1 && length) {
        return true;
    }
    return type === "array" || length === 0 || typeof length === "number" && length > 0 && length - 1 in obj;
}

function searchStringArgs(stringArgs, valor, splitParam) {
    try {
        if (typeof stringArgs === "string" && stringArgs !== "") {
            var list = stringArgs.split(splitParam);
            if (list && list.length > 0) {
                for (var j = 0; j < list.length; j++) {
                    if (list[j] === valor) return true;
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "searchStringArgs()", Rsis);
    }
    return false;
}

function getMountPath(args) {
    try {
        var s = "";
        if (args && args.length > 1) {
            for (var i = 1, maxlt = args.length; i < maxlt; i++) {
                s = s + "/" + args[i];
            }
        }
        return s;
    } catch (oErr) {
        outPrint(oErr, "getMountPath()", Rsis);
    }
}

document.onclick = function(event) {
    Rsis.closeListHolder(event);
};

(function($R) {
    var doc = document;
    $R.fn.loader = {
        _FILE: Rsis._FILE,
        iframeLoader: null,
        TARG_FORM: "FORM",
        TAG_IFRAME: "IFRAME",
        sAjax: {
            STATE_OK: 200,
            STATE_UNAUTHORIZED: 401,
            STATE_FORBIDDEN: 403,
            STATE_NOT_FOUND: 404,
            STATE_REQUEST_TIMEOUT: 408,
            STATE_GONE: 410,
            STATE_PRECONDITION_FAILED: 412,
            STATE_SESSION_TIMEOUT: 500,
            STATE_GATEWAY_TIMEOUT: 504
        },
        viewMsgs: false,
        _fail: false,
        _loadPanel: true,
        setLoadPanel: function(p) {
            this._loadPanel = p;
            return this;
        },
        getLoadPanel: function() {
            return this._loadPanel;
        },
        state: {
            isOk: function(req) {
                var thiz = this, shxr = Rsis.fn.loader.sAjax;
                if (req) {
                    return true;
                }
                return false;
            },
            get: function(req) {
                if (req) {
                    var thiz = this, shxr = Rsis.fn.loader.sAjax;
                    switch (req.status) {
                      case shxr.STATE_OK:
                        return thiz.isTimeoutSession(req) == false ? "Complete!" : "Session Timeout!";

                      case shxr.STATE_UNAUTHORIZED:
                        return "Un Authorized!";

                      case shxr.STATE_FORBIDDEN:
                        return "Forbidden!";

                      case shxr.STATE_NOT_FOUND:
                        return "Not Found!";

                      case shxr.STATE_REQUEST_TIMEOUT:
                        return "Request Timeout!";

                      case shxr.STATE_GONE:
                        return "Gone! The requested object did exist, but has since been deleted.";

                      case shxr.STATE_PRECONDITION_FAILED:
                        return "Precondition Failed!. A precondition for execution of that operation had not been met!";

                      case shxr.STATE_SESSION_TIMEOUT:
                        return "Internal Server Error!";

                      case shxr.STATE_GATEWAY_TIMEOUT:
                        return "Gateway Timeout!";

                      default:
                        return "Unknown State or not mapping!";
                    }
                }
            },
            hasXML: function(req) {
                return req.responseXML ? true : false;
            },
            isTimeoutSession: function(req) {
                try {
                    if (req && req.responseText && (req.responseXML == null || req.responseXML != null && req.responseXML.xml == "")) {
                        var objXHtml = createObjXML(req.responseText);
                        if (objXHtml && objXHtml.documentElement && objXHtml.documentElement.childNodes) {
                            var elements = objXHtml.documentElement.childNodes;
                            if (elements && elements.length > 0) {
                                var k = 0, mx = elements.length;
                                for (;k < mx; k++) {
                                    var el = elements[k];
                                    if (el && el.nodeName == "body") {
                                        var sessionExpired = el.getAttribute("sessionExpired");
                                        if (sessionExpired == "true") {
                                            return true;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    return false;
                } catch (oErr) {
                    outPrint(oErr, "this.isTimeoutSession()", this);
                }
            }
        },
        parserToHtml: function(req, ui) {
            try {
                var ObjDOM = {
                    contentBody: null,
                    title: null,
                    ui: ui,
                    scripts: false
                };
                if (req && req.responseText) {
                    var shxr = Rsis.fn.loader.sAjax;
                    if (req.status === shxr.STATE_OK) {
                        this.toHtml(req.responseText, ObjDOM);
                    } else {
                        var tdiv = document.createElement("div");
                        tdiv.innerHTML = req.responseText;
                        ObjDOM.contentBody = tdiv;
                        ObjDOM.title = ".:" + req.statusText + "-" + req.status + ":: JRetail";
                        if (ObjDOM.contentBody && ObjDOM.contentBody.id) {
                            ObjDOM.contentBody.id = ui + "." + ObjDOM.contentBody.id;
                        }
                    }
                } else if (req.body) {
                    var strhtml = req.body.innerHTML;
                    this.toHtml(strhtml, ObjDOM);
                    req.body.parentNode.removeChild(req.body);
                }
                return ObjDOM;
            } catch (oErr) {
                outPrint(oErr, "this.parserToHtml()", this);
            }
        },
        toHtml: function(responseText, ObjDOM) {
            var contentBody = null;
            if (typeof responseText !== "undefined" && responseText !== null && responseText !== "") {
                function registerNS(ns) {
                    if (typeof ns === "string") {
                        var nsParts = ns.replaceAll(".", " ");
                        nsParts = nsParts.capitalize();
                        nsParts = nsParts.replaceAll("Jretail", "JRetail");
                        return nsParts.replaceAll(" ", ".");
                    }
                    return null;
                }
                var elements = Rsis.parseHTML(responseText, true), incs = [], objScript = [], _ui = ObjDOM.ui, title = null;
                if (elements && elements.length > 0) {
                    var i = 0, max = elements.length;
                    for (;i < max; i++) {
                        if (elements[i] && elements[i].nodeName === "DIV") {
                            contentBody = elements[i];
                        } else if (elements[i] && elements[i].nodeName === "SCRIPT") {
                            var load = elements[i].getAttribute("load");
                            if (load == "false") {
                                if (elements[i].src && elements[i].src.search(/\?/) === -1) incs.push(elements[i].src + "?ui=" + _ui); else incs.push(elements[i].src + "&ui=" + _ui);
                            } else {
                                incs.push(elements[i].src + "&ui=" + _ui);
                            }
                            var stringArgs = elements[i].src.split("?")[0].split("/"), objectName = stringArgs[stringArgs.length - 1].split(".js")[0];
                            objectName = registerNS(objectName);
                            objScript.push(objectName);
                        } else if (elements[i] && elements[i].nodeName === "TITLE") {
                            title = elements[i].innerHTML;
                        }
                    }
                    ObjDOM.contentBody = contentBody;
                    ObjDOM.title = title;
                    ObjDOM.script = incs;
                    ObjDOM.objScript = objScript;
                    if (ObjDOM.contentBody && ObjDOM.contentBody.id) {
                        ObjDOM.contentBody.id = _ui + "." + ObjDOM.contentBody.id;
                    }
                }
            }
            return contentBody;
        },
        toScript: function(files) {
            try {
                if (files && files.length > 0) {
                    var i = 0, maxLen = files.length;
                    for (;i < maxLen; i++) {
                        var href = files[i];
                        if (typeof href === "string" && href != null && href !== "") {
                            var objectName = Rsis.registerName(href);
                            var objReg = undefined;
                            try {
                                objReg = eval(objectName);
                            } catch (e) {}
                            if (typeof objReg === "undefined") {
                                JRetail.inc.js(href, undefined, objectName, false);
                            }
                        }
                    }
                }
                return true;
            } catch (e) {
                return false;
            }
        },
        file: function() {
            try {
                var length = arguments.length, sts = this.loadSettings, settings = null;
                if (length == 0) {
                    return this;
                }
                settings = arguments[0];
                if (typeof settings !== "object") {
                    settings = sts;
                } else {
                    settings = Rsis.extend(sts, settings);
                }
                var obj = settings.object, host = settings.host, contextPath = settings.contextPath, defaultPath = settings.defaultPath, href = settings.url, instanceName = settings.instance, contentDialog = settings.contentDialog, form = $(obj.id.split(":")[0]);
                if (typeof href === "string" && href !== null && href !== "") {
                    var urlLocation = host;
                    if (defaultPath !== "") {
                        urlLocation = urlLocation + defaultPath;
                    }
                    if (obj) obj.setAttribute("data-url", href);
                    urlLocation = urlLocation + href;
                    this.loadDocument(urlLocation, contentDialog, obj, form, instanceName);
                }
            } catch (oErr) {
                outPrint(oErr, "this.load", this);
            }
        },
        loadDocument: function(url, container, obj, form, instanceName) {
            var that = this;
            try {
                if (!url) {
                    alert("A URL deve ser informada!\nThe URL must be informed!");
                    return false;
                }
                var req = new XMLHttpRequest(), msg = "";
                if (req && obj && form) {
                    var ajaxident = Rsis.now();
                    if (typeof instanceName === "undefined") {
                        instanceName = "ui" + ajaxident;
                    }
                    url = url + "&version=" + JRetail.rsis.VersionJS;
                    Properties.setProperty(ajaxident, req);
                    req.open("GET", url, true);
                    req.setRequestHeader("Content-Type", "text/html; charset=" + Rsis.charset);
                    req.setRequestHeader("Cache-Control", "max-age=200");
                    req.onreadystatechange = function() {
                        that.callBackLoad(obj, container, req, ajaxident);
                    };
                    req.send(null);
                    if (Rsis.browser.firefox && Rsis.browser.versionNumber < 4) {
                        that.callBackLoad(obj, container, req, ajaxident);
                    }
                }
            } catch (oErr) {
                if (typeof _Wf.StopLoadingWinDialog == "function") {
                    _Wf.dataUiLoadingOk = true;
                    _Wf.StopLoadingWinDialog();
                }
                outPrint(oErr, ".loadDocument", this);
            }
        },
        callBackLoad: function(obj, container, req, ajaxident) {
            try {
                if (req.readyState == 4) {
                    var thiz = Rsis.fn.loader, reqMsg = thiz.state.get(req), isComplete = thiz.state.isOk(req), body = document.body;
                    if (isComplete) {
                        if (req.status === AjaxRsis.STATE_OK) AjaxRsis.statusValidate(req);
                        var objDOM = thiz.parserToHtml(req, obj.id);
                        var dialog = window[obj.id];
                        if (obj && objDOM && objDOM.contentBody != null && objDOM.contentBody !== "") {
                            if (objDOM.script && objDOM.script.length > 0) {
                                if (dialog) {
                                    window[obj.id].allocatedObjects = objDOM.objScript;
                                }
                                JRetail.require(objDOM.script, function() {
                                    container.appendChild(objDOM.contentBody);
                                    objDOM.scripts = true;
                                    var shxr = Rsis.fn.loader.sAjax;
                                    if (req.status === shxr.STATE_OK) {
                                        thiz.initialize(obj, container, objDOM);
                                    } else {
                                        var title = objDOM.title ? objDOM.title : getAtt(obj, "data-title");
                                        if (dialog) {
                                            var userLoja = getAtt(body, "data-userloja") ? getAtt(body, "data-userloja") : "";
                                            dialog.setTextTitleBar(title, userLoja);
                                        }
                                        _Wf.dataUiLoadingOk = true;
                                        if (typeof _Wf.StopLoadingWinDialog == "function") {
                                            _Wf.StopLoadingWinDialog();
                                        }
                                    }
                                    return true;
                                });
                            } else {
                                container.appendChild(objDOM.contentBody);
                                var shxr = Rsis.fn.loader.sAjax;
                                if (req.status === shxr.STATE_OK) {
                                    thiz.initialize(obj, container, objDOM);
                                } else {
                                    var title = objDOM.title ? objDOM.title : getAtt(obj, "data-title");
                                    if (dialog) {
                                        var userLoja = getAtt(body, "data-userloja") ? getAtt(body, "data-userloja") : "";
                                        dialog.setTextTitleBar(title, userLoja);
                                    }
                                    _Wf.dataUiLoadingOk = true;
                                    if (typeof _Wf.StopLoadingWinDialog == "function") {
                                        _Wf.StopLoadingWinDialog();
                                    }
                                }
                            }
                        }
                    } else {
                        thiz._fail = true;
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".callBackLoad", this);
            } finally {
                Properties.remove(ajaxident);
            }
        },
        loadByIframe: function(obj, url) {
            var thiz = this;
            var newIFrame = thiz.iframeLoader || $("uiloaderiframe");
            if (!newIFrame) {
                newIFrame = document.createElement("IFRAME");
                newIFrame.id = "uiloaderiframe";
                document.body.appendChild(newIFrame);
            }
            if (newIFrame) {
                if (typeof Loading !== "undefined") {
                    Loading.start();
                }
                thiz.iframeLoader = newIFrame;
                newIFrame.src = url;
                thiz.temporizador = 600;
                if (navigator.userAgent.indexOf("MSIE") > -1 && !window.opera) {
                    newIFrame.onreadystatechange = function() {
                        if (newIFrame.readyState == "complete") {
                            thiz.renderContent(obj, getIframeDocument(thiz.iframeLoader));
                        }
                    };
                } else {
                    newIFrame.onload = function() {
                        thiz.renderContent(obj, getIframeDocument(thiz.iframeLoader));
                    };
                }
            }
        },
        getForms: function(formsInit) {
            try {
                if (formsInit) {
                    var ARRAY_FORMS = [], hasFormInit = false, countForms = 0;
                    for (var i = 0; i < formsInit.length; i++) {
                        var startInit = formsInit[i].getAttribute("startinit");
                        if (startInit === "true") {
                            hasFormInit = true;
                            ARRAY_FORMS[countForms++] = formsInit[i];
                        }
                    }
                    if (!hasFormInit) {
                        ARRAY_FORMS[0] = formsInit[0];
                    }
                    return ARRAY_FORMS;
                }
            } catch (oErr) {
                outPrint(oErr, "getForms", this);
            }
            return null;
        },
        initialize: function(obj, contentDialog, objDOM) {
            try {
                if (obj) {
                    var UIContext = Rsis.UIContext.get(obj.id), body = document.body;
                    var forms = obj.getElementsByTagName(this.TARG_FORM), it = 0, maxForms = forms.length, contentDialog = contentDialog || $(obj.id + ".container"), container = $(obj.id + ".ctrpanel"), execute = getAtt(container, "execute");
                    if (objDOM) {
                        var title = objDOM.title ? objDOM.title : getAtt(container, "data-title");
                        var dialog = window[obj.id];
                        if (dialog) {
                            var userLoja = getAtt(body, "data-userloja") ? getAtt(body, "data-userloja") : "";
                            dialog.setTextTitleBar(title, userLoja);
                        }
                    }
                    _Wf.dataUiLoadingOk = true;
                    if (typeof _Wf.StopLoadingWinDialog == "function") {
                        _Wf.StopLoadingWinDialog();
                    }
                    if (forms && forms.length > 0) {
                        setDataUIInCpts(forms, obj.id);
                        UIContext.forms = forms;
                        UIContext.formsStart = this.getForms(forms);
                        initializeForms(UIContext.formsStart);
                    }
                    var frames = obj.getElementsByTagName(this.TAG_IFRAME);
                    if (frames && frames.length > 0) {
                        setDataUIInCpts(frames, obj.id);
                        UIContext.frames = frames;
                    }
                    if (typeof Loading !== "undefined") {
                        Loading.init();
                    }
                    if (container) {
                        container.setAttribute("data-ui", obj.id);
                        container.setAttribute("class", "dPnlCenter");
                        if (container.style.width == null || container.style.width === "") {
                            container.style.width = Rsis.isMobileDevice ? "97%" : Rsis.hasScrollY() ? "980px" : "1002px";
                        }
                    }
                    var helpStored = $R.helpStored;
                    if (helpStored && helpStored.getEnableHelp()) {
                        $R.helpStored.initialize(helpStored.getSeqHelpApp(container));
                    }
                    shortcut.add("tab", function(event) {
                        return Rsis(event.target).focusNextInputField();
                    }, {
                        propagate: false,
                        target: UIContext.formsStart[0]
                    });
                    shortcut.add("alt+H", function(event) {
                        Crud.startHelpKeys(event, shortcut.getDialogId());
                    }, {
                        propagate: true
                    }, obj.id);
                    if (execute !== "") {
                        if (execute.search(/\(\)/) > -1) {
                            execute = execute.replace(/\(\)/, "(container)");
                        }
                        eval(execute);
                    } else {
                        init(container);
                    }
                    renderUIComponents(forms, container);
                }
            } catch (oErr) {
                outPrint(oErr, ".initialize", this);
                _Wf.dataUiLoadingOk = true;
                if (typeof _Wf.StopLoadingWinDialog == "function") {
                    _Wf.StopLoadingWinDialog();
                }
            }
            return false;
        },
        renderContent: function(obj, doc) {
            var thiz = this;
            if (doc) {
                var objDOM = thiz.parserToHtml(doc, obj.id);
                if (obj && objDOM && objDOM.contentBody != null && objDOM.contentBody !== "") {
                    obj.appendChild(objDOM.contentBody);
                    thiz.initialize(obj, objDOM);
                }
            }
        },
        callBackLoaderIframeValidate: function() {
            var thiz = this;
            try {
                if (thiz.temporizador > 0) {
                    if (verifyDownloadHtmlNeeded(thiz.iframeLoader)) {
                        clearInterval(thiz.timeLoadIframe);
                        thiz.temporizador = 0;
                        thiz.renderContent(getIframeDocument(thiz.iframeLoader));
                        return true;
                    } else {
                        thiz.timeLoadIframe = setInterval(function() {
                            thiz.callBackLoaderIframeValidate();
                        }, 50);
                    }
                } else {
                    return true;
                }
                thiz.temporizador--;
            } catch (oErr) {
                outPrint(oErr, ".callBackLoaderIframeValidate", thiz);
            }
        },
        temporizador: 0,
        timeLoadIframe: 0,
        loadSettings: {
            host: location.protocol + "//" + location.host,
            contextPath: contextPath,
            defaultPath: "",
            url: null
        },
        locationStorage: function(url, dataUi) {
            var dataUiStored = "", jssom = localStorage.getItem(url);
            if (jssom) {
                var objectStored = JSON.parse(jssom);
                if (objectStored && objectStored.dataUi && dataUi.length > 0) {
                    for (var i = 0; i < objectStored.dataUi.length; i++) {
                        var objUi = objectStored.dataUi[i];
                        if (!objUi.active) {
                            objUi.active = true;
                            dataUiStored = objUi.dataUiStored;
                            break;
                        }
                    }
                    if (dataUiStored == null || dataUiStored === "") {
                        objectStored.dataUi[objectStored.dataUi.length] = {
                            dataUiStored: dataUi,
                            active: true
                        };
                        dataUiStored = dataUi;
                    }
                    localStorage.setItem(url, JSON.stringify(objectStored));
                } else {
                    var URI_OBJ = {
                        dataUi: [ {
                            dataUiStored: dataUi,
                            active: true
                        } ]
                    };
                    localStorage.setItem(url, JSON.stringify(URI_OBJ));
                    dataUiStored = dataUi;
                }
            } else {
                var URI_OBJ = {
                    dataUi: [ {
                        dataUiStored: dataUi,
                        active: true
                    } ]
                };
                localStorage.setItem(url, JSON.stringify(URI_OBJ));
                dataUiStored = dataUi;
            }
            return dataUiStored;
        },
        inactiveLocationStorage: function(url, dataUi) {
            var dataUiStored = "", jssom = localStorage.getItem(url);
            if (jssom) {
                var objectStored = JSON.parse(jssom);
                if (objectStored && objectStored.dataUi && dataUi.length > 0) {
                    for (var i = 0; i < objectStored.dataUi.length; i++) {
                        var objUi = objectStored.dataUi[i];
                        if (objUi.dataUiStored == dataUi) {
                            objUi.active = false;
                            break;
                        }
                    }
                    localStorage.setItem(url, JSON.stringify(objectStored));
                }
            }
        },
        invalidateLocationStorage: function() {
            if (localStorage) {
                for (var ls in localStorage) {
                    var url = ls.toString();
                    if (typeof url == "string" && url !== null && url !== "") {
                        var jssom = localStorage.getItem(url);
                        if (typeof jssom == "string" && jssom !== null && jssom !== "") {
                            var objectStored = JSON.parse(jssom);
                            if (objectStored && objectStored.dataUi) {
                                for (var i = 0; i < objectStored.dataUi.length; i++) {
                                    var objUi = objectStored.dataUi[i];
                                    if (objUi.active) {
                                        objUi.active = false;
                                    }
                                }
                                localStorage.setItem(url, JSON.stringify(objectStored));
                            }
                        }
                    }
                }
            }
        },
        getWf: function() {
            var iframeEl = document.getElementById("ldn");
            if (iframeEl) {
                if (iframeEl.contentDocument) {
                    return iframeEl.contentDocument;
                } else if (iframeEl.contentWindow) {
                    return iframeEl.contentWindow;
                }
            }
            return null;
        }
    };
})(Rsis);

(function($R) {
    $R.fn.floatPanel = {
        show: function() {
            JRetail.floatPanel.show.apply(this, arguments);
            return this;
        },
        hidden: function() {
            JRetail.floatPanel.hidden.apply(this, arguments);
            return this;
        }
    };
    $R.floatPanel = $R.fn.floatPanel;
})(Rsis);

(function($R, window) {
    var win = $R.$(window), event_name = "orientationchange", initialOrientationIsLandscape, initialOrientationIsDefault, portraitMap = {
        "0": true,
        "180": true
    }, ww, wh, landscapeThreshold;
    if (window.orientation) {
        ww = window.innerWidth || win.width();
        wh = window.innerHeight || win.height();
        landscapeThreshold = 50;
        initialOrientationIsLandscape = ww > wh && ww - wh > landscapeThreshold;
        initialOrientationIsDefault = portraitMap[window.orientation];
        if (initialOrientationIsLandscape && initialOrientationIsDefault || !initialOrientationIsLandscape && !initialOrientationIsDefault) {
            portraitMap = {
                "-90": true,
                "90": true
            };
        }
    }
    $R.getOrientation = $R.fn.getOrientation = function() {
        var isPortrait = true, elem = document.documentElement;
        if (window.orientation) {
            isPortrait = portraitMap[window.orientation];
        } else {
            isPortrait = elem && elem.clientWidth / elem.clientHeight < 1.1;
        }
        return isPortrait ? "portrait" : "landscape";
    };
})(Rsis, window);

var $P = window.parent, $W = window, processCache = function() {}, processXMLCacheReturn = function() {}, erroTag = "Atencao: Nao foi encontrado a Tag do componente. Arquivo:", comboSelected, ctrlPressed = 0, altPressed = 0, shiftPressed = 0, effectiveDeviceWidth = function() {
    var ori = window.orientation;
    var deviceWidth = ori == 0 || ori == 180 ? window.screen.width : window.screen.height;
    if (Rsis.isMobileDevice && window.devicePixelRatio) {
        deviceWidth = deviceWidth / window.devicePixelRatio;
    }
    return deviceWidth;
}, effectiveDeviceHeight = function() {
    var ori = window.orientation;
    var deviceHeight = ori == 90 || ori == -90 ? window.screen.height : window.screen.width;
    if (Rsis.isMobileDevice && window.devicePixelRatio) {
        deviceHeight = deviceHeight / window.devicePixelRatio;
    }
    return deviceHeight;
}, GetWidth = function() {
    if (Rsis.isMobileDevice && Rsis.device.isPhone) {
        return effectiveDeviceWidth();
    }
    if (self.innerHeight) return self.innerWidth; else if (document.documentElement && document.documentElement.clientHeight) return document.documentElement.clientWidth; else if (document.body) return document.body.clientWidth;
    return 0;
}, GetHeight = function() {
    if (Rsis.isMobileDevice && Rsis.device.isPhone) {
        return effectiveDeviceHeight();
    }
    if (self.innerHeight) return self.innerHeight; else if (document.documentElement && document.documentElement.clientHeight) return document.documentElement.clientHeight; else if (document.body) return document.body.clientHeight;
    return 0;
}, MONITOR_WIDTH = GetWidth(), MONITOR_HEIGHT = GetHeight();

var _Wf = window.frames["ldn"];

(function($R) {
    function getParentNode(obj) {
        if (isNoEmpty(obj.nodeName) && (obj.nodeName.toLowerCase() == "th" || obj.nodeName.toLowerCase() == "td" || obj.nodeName.toLowerCase() == "tr")) {
            return getParentNode(obj.parentNode);
        }
        return obj;
    }
    UtilRsis = {
        _FILE: "002utilRsis.js",
        version: JRetail.rsis.VersionJS,
        setHint: function(obj) {
            try {
                if (obj) {
                    var component = obj.getAttribute("component");
                    if (isNoEmpty(component) && (component === "dataTable" || component === "editTable")) {
                        return $R(obj).helpConfig();
                    }
                    var helpAtt = obj.getAttribute("help"), helpKeys = obj.getAttribute("helpKeys");
                    if (helpAtt !== "true" && helpKeys !== "true") {
                        var $win = this.getParentWindow(obj), hint = "", WIDTH = 0;
                        var rt = "return ", jrt = "Rsis.Tip.";
                        if (obj.value && obj.value !== "" && obj.value.length > 0 || typeof obj.type !== "undefined" && obj.type === "button") {
                            WIDTH = toInt(obj.value.length) * 6.9 + 4;
                            hint = obj.value;
                            if (obj.type === "button") {
                                hint = obj.getAttribute("hint");
                            } else {
                                obj.setAttribute("hint", typeof hint == "undefined" || hint == null ? "" : hint);
                            }
                        }
                        var mover = rt + $win + jrt + "show(this, event,'" + hint + "'," + round(WIDTH, 2) + ");";
                        var mout = rt + $win + jrt + "hidden(this);";
                        setDOMEvent(obj, "onmouseover", mover);
                        setDOMEvent(obj, "onmouseout", mout);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".setHint", this);
            }
        },
        setHelp: function(obj) {
            this.confToolTip(obj, "help", "hintHelp", 500, "showHelp", "hiddenHelp");
        },
        setHelpKeys: function(obj) {
            this.confToolTip(obj, "helpKeys", "hintHelpKeys", 100, "showHelpKeys", "hiddenHelpKeys");
        },
        confToolTip: function(obj, att1, att2, widthValue, fnOver, fnOut) {
            try {
                if (obj) {
                    var helpAtt = obj.getAttribute(att1), hintHelp = obj.getAttribute(att2), mover = "", mout = "";
                    if (helpAtt === "true" && hintHelp != null && hintHelp !== "") {
                        var $win = this.getParentWindow(obj), lengthField = parseInt(hintHelp.length), WIDTH = lengthField * 6.9 + 4;
                        WIDTH = WIDTH >= widthValue ? widthValue : WIDTH;
                        var rt = "return ", jrt = "Rsis.Tip.";
                        mover = rt + $win + jrt + fnOver + "(this, event, '" + hintHelp + "'," + round(WIDTH, 2) + ");";
                        mout = rt + $win + jrt + fnOut + "(this);";
                    }
                    setDOMEvent(obj, "onmouseover", mover);
                    setDOMEvent(obj, "onmouseout", mout);
                }
            } catch (oErr) {
                outPrint(oErr, ".confToolTip", this);
            }
        },
        getParentWindow: function(object) {
            var $parent = "";
            try {
                var element = object && object.id ? object : getParentNode(object);
                if (element && element.id) {
                    var stringArgs = element.id.split("__");
                    if (stringArgs && stringArgs.length > 1) {
                        $parent = "$P.";
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".getParentWindow", this);
            }
            return $parent;
        },
        visibleObject: function(object, option) {
            if (object) {
                var ost = object.style;
                ost.visibility = option ? "visible" : "hidden";
                ost.display = option ? "block" : "none";
            }
        },
        CloseCombo: function(obj, event) {
            if (obj) {
                event = Rsis.events.getEvent(event);
                var element = Rsis.events.getTarget(event);
                try {
                    if (element && (element.getAttribute("comboElement") === "true" || element.getAttribute("autoCompleteElement") === "true" || element.getAttribute("suggestBoxElement") === "true" || element.getAttribute("listBoxElement") === "true")) {
                        return true;
                    }
                } catch (er) {
                    return true;
                }
                var UIContext = Rsis.UIContext.get(obj), formId = getAttMandatory(obj, "id");
                if (formId && UIContext && typeof UIContext.getUIForm == "function") {
                    var UIForm = UIContext.getUIForm(formId) || UIContext.getUIForm(obj);
                    if (UIForm != null) {
                        var combos = UIForm.getUIComponent("comboBox");
                        if (combos != undefined) {
                            var it = 0, max_it = combos.length;
                            for (;it < max_it; it++) {
                                optionHidden(combos[it]);
                            }
                        }
                        var combosAcs = UIForm.getUIComponent("comboActions");
                        if (combosAcs != undefined) {
                            var it = 0, max_it = combosAcs.length;
                            for (;it < max_it; it++) {
                                optionHidden(combosAcs[it]);
                            }
                        }
                        var autoComplete = UIForm.getUIComponent("autoComplete");
                        if (autoComplete != undefined) {
                            var it1 = 0, max_it1 = autoComplete.length;
                            for (;it1 < max_it1; it1++) {
                                optionHiddenAC(autoComplete[it1]);
                            }
                        }
                        var suggestBox = UIForm.getUIComponent("suggestBox");
                        if (suggestBox != undefined) {
                            var it1 = 0, max_it1 = suggestBox.length;
                            for (;it1 < max_it1; it1++) {
                                optionHiddenAC(suggestBox[it1]);
                            }
                        }
                        var listBoxs = UIForm.getUIComponent("listBox");
                        if (listBoxs != undefined) {
                            var it2 = 0, max_it2 = listBoxs.length;
                            for (;it2 < max_it2; it2++) {
                                optionHiddenAC(listBoxs[it2]);
                            }
                        }
                    }
                }
            }
            return true;
        },
        pressKey: function(o, evt, formId) {
            try {
                var rEvts = Rsis.events, bwr = Rsis.browser;
                evt = rEvts.getEvent(evt);
                var source = rEvts.getTarget(evt), charValue = rEvts.getCode(evt);
                switch (charValue) {
                  case rEvts.KEY_F5:
                    if (bwr.msie) {
                        evt.keyCode = 0;
                    }
                    return false;

                  case rEvts.KEY_BACKSPACE:
                    var typ = source.type;
                    return typ && (typ === "text" || typ === "textarea" || typ === "password") ? true : false;

                  case rEvts.KEY_ESC:
                    return false;

                  case rEvts.KEY_TAB:
                    return true;

                  case rEvts.KEY_RIGHT:
                    return true;

                  case rEvts.KEY_RETURN:
                    var UIContext = Rsis.UIContext.get(source);
                    if (!UIContext) {
                        UIContext = Rsis.UIContext.get(document.forms[0]);
                    }
                    var source = $(source.id);
                    if (source) {
                        var typ = source.type, UIForm = UIContext.getUIForm(source);
                        if (typ && typ === "text") {
                            var component = getAtt(source, "component"), pattern = getAtt(source, "mask");
                            if (pattern != null && pattern !== "" && (component !== "autoComplete" || component !== "comboBox")) {
                                formatField(source, pattern);
                                isEnterInputKey(source, evt, pattern);
                            }
                        }
                        if (typ && (typ === "text" || typ === "textarea" || typ === "password")) {
                            if (source.getAttribute("uppercase") === "true") {
                                toUpperCase(source);
                            }
                        }
                        var startEvent = source.getAttribute("startEvent");
                        if (source.id != null && source.id !== "" && startEvent != null && startEvent !== "") {
                            var objectId = source.id.split(".")[0], btnSearchField = $(objectId + ".btnSearchField");
                            if (btnSearchField) {
                                SelectBox.close(btnSearchField, evt);
                                return SearchField.searchOpen(btnSearchField);
                            }
                        }
                        if (UIForm) {
                            var toolBar = UIForm.getUIComponent("toolBar")[0];
                            if (toolBar && source.type !== "textarea" && startEvent != null && startEvent !== "" && searchStringArgs(startEvent, UIForm.state, ";")) {
                                var btnConfirm = $(toolBar.id + ".btnConfirm");
                                if (btnConfirm) {
                                    btnConfirm.click();
                                }
                            }
                        }
                        return typ && typ === "textarea" ? true : false;
                    } else {
                        rEvts.stopPropagation(evt);
                        return true;
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "pressKey()", this);
            }
        },
        getTable: function(UIForm, tableId) {
            if (UIForm && tableId != null && tableId !== "") {
                var table = UIForm.getObject(tableId);
                if (table) {
                    var component = getAttMandatory(table, "component");
                    if (component === "dataTable" || component === "editTable") {
                        return table;
                    }
                }
            }
            return null;
        }
    };
    Properties = {
        map: new Map(),
        setProperty: function(_key, _value) {
            this.map.put(_key, _value);
        },
        getProperty: function(_key) {
            return this.map.get(_key);
        },
        put: function(_key, _value) {
            this.map.put(_key, _value);
        },
        remove: function(_key) {
            this.map.remove(_key);
        }
    };
})(Rsis);

function ManagerCacheXML() {
    var self = this;
    var _INSERT = 1, _UPDATE = 2, _DELETE = 3, _SEARCH = 4, _SEARCH_CACHE = 5, _DELETE_CACHE = 6, _SEARCH_RETURN = 7, _UPDATE_LIST_ELEMENTS = 8, _UPDATE_ELEMENT = 9, _DELETE_CACHE_NOSEARCH = 10, _INSERT_AFTER = 11, _INSERT_PERSISTENCE = 12, _methods = [ [ "insert", _INSERT ], [ "update", _UPDATE ], [ "delete", _DELETE ], [ "search", _SEARCH ], [ "searchCache", _SEARCH_CACHE ], [ "deleteCache", _DELETE_CACHE ], [ "searchReturn", _SEARCH_RETURN ], [ "updateElement", _UPDATE_ELEMENT ], [ "updateList", _UPDATE_LIST_ELEMENTS ], [ "deleteCacheNosearch", _DELETE_CACHE_NOSEARCH ], [ "insertAfter", _INSERT_AFTER ], [ "insertPersistence", _INSERT_PERSISTENCE ] ];
    Rsis.each(_methods, function(i, method) {
        self[method[0]] = ManagerCacheProcess.bind(self, self, method[1]);
    });
    self.name = null;
    self.PO_INSERT = _INSERT;
    self.PO_UPDATE = _UPDATE;
    self.PO_DELETE = _DELETE;
    self.PO_SEARCH = _SEARCH;
    self.PO_SEARCH_CACHE = _SEARCH_CACHE;
    self.PO_DELETE_CACHE = _DELETE_CACHE;
    self.PO_SEARCH_RETURN = _SEARCH_RETURN;
    self.PO_UPDATE_LIST = _UPDATE_LIST_ELEMENTS;
    self.PO_UPDATE_ELEMENT = _UPDATE_ELEMENT;
    self.PO_DELETE_CACHE_NO_SEARCH = _DELETE_CACHE_NOSEARCH;
    self.PO_INSERT_AFTER = _INSERT_AFTER;
    self.PO_INSERT_PERSISTENCE = _INSERT_PERSISTENCE;
    self.initPage = 0;
    self.origem = -1;
    self.render = false;
    self.updateAll = null;
    self.object = null;
    self.node = null;
    self.objXML = null;
    self.UIForm = null;
    self.countCache = -1;
    self.path = "";
    self.pathDelete = "";
    self.xQuery = "";
    self.equals = _equals;
    self.process = _process;
    function _equals(other) {
        if (typeof other == "string") return self.name == other;
        return self.name == other.name;
    }
    function _process(origem, noCreateTableXML, noAfterRender) {
        ManagerCacheProcess(self, origem > 0 ? origem : self.origem, noCreateTableXML, noAfterRender);
    }
}

function outPrint(e, fn) {
    if (e instanceof MiddlewareViewException) {
        alert(e.message);
        console.log(e);
    } else {
        var arg = arguments, fileName = "", versionFile = "", bwr = Rsis.browser;
        if (typeof arg[2] === "object" && typeof arg[3] === "undefined") {
            fileName = arg[2]._FILE;
            versionFile = typeof arg[2].version !== "undefined" ? arg[2].version : UtilRsis.version;
        } else {
            fileName = arg[2];
            versionFile = arg[3];
        }
        if (isEmpty(versionFile)) {
            versionFile = "";
        }
        var methodName = typeof fn == "object" && fn.hasOwnProperty("callee") ? isEmpty(fn.callee.name) ? fn.callee : fn.callee.name : fn;
        eDescription = "", line = "";
        if (!bwr.msie) {
            eDescription = "[ " + e.message + " " + (e.description ? ", " + e.description : "") + " ]";
        } else {
            eDescription = "[ " + e.message + " ]";
        }
        try {
            line = e.lineNumber ? e.lineNumber : "";
        } catch (_e) {
            console.log(e);
        }
        alert(Message.parser("Atencao: {0}!\nFuncao {1} do arquivo: {2}, versao: {3}, linha: {4}.\nOS: {5}.\nBrowser: {6} - {7}.", eDescription, methodName, fileName, versionFile, line, Rsis.os.name, bwr.name, bwr.version));
        if (typeof Loading !== "undefined") {
            Loading.stop();
        }
    }
    console.log(e);
    throw e;
}

function searchStringArgs(stringArgs, valor, splitParam) {
    if (typeof stringArgs === "string" && stringArgs != null && stringArgs !== "") {
        var list = stringArgs.split(splitParam);
        if (list && list.length > 0) {
            for (var j = 0; j < list.length; j++) {
                if (list[j] === valor) {
                    return true;
                }
            }
        }
    }
    return false;
}

function setDOMEvent(obj, attribute, str) {
    str = Rsis.browser.msie ? Rsis.browser.versionNumber > 7 ? str : new Function(str) : str;
    obj.setAttribute(attribute, str);
}

function Trim(string) {
    return string ? string.replace(/^\s*/, "").replace(/\s*$/, "") : string;
}

function getAttMandatory(object, attribute) {
    if (object && attribute != null && attribute !== "") {
        var at = object.getAttribute(attribute);
        return at != undefined && at != null && at !== "null" ? at : "";
    } else if (!object || object == undefined) {
        alert(getMessageBundle("ERROR_TAG"));
    } else if (attribute == null || attribute === "") {
        alert(getMessageBundle("ERROR_ATTRIBUTE_TAG"));
    }
    return "";
}

function getAtt(object, attribute) {
    if (!object || object == undefined) {
        alert(getMessageBundle("ERROR_TAG"));
        return "";
    }
    if (object && attribute != null && (attribute !== "" && parseInt(attribute) == NaN || parseInt(attribute) != NaN)) {
        var at = object.getAttribute(attribute);
        return at != undefined && at != null && at !== "null" ? at : "";
    }
    return "";
}

function $object(_formId, _id) {
    if (_formId != undefined && _formId != null && _formId !== "" && (_id != undefined && _id != null && _id !== "")) {
        return $(_formId + ":" + _id);
    }
    return null;
}

function $$(_n) {
    if (_n != undefined && _n != null && _n !== "") {
        var strArgs = null;
        strArgs = _n.split("__");
        if (strArgs && strArgs.length > 1) {
            var _iframeName = strArgs[0];
            if (_iframeName != undefined && _iframeName != null && _iframeName !== "") {
                var iframeEl = document.getElementById(_iframeName);
                if (iframeEl) {
                    if (iframeEl.contentDocument) {
                        return iframeEl.contentDocument.getElementsByName(_n);
                    } else if (iframeEl.contentWindow) {
                        return iframeEl.contentWindow.document.getElementsByName(_n);
                    }
                }
            }
        } else {
            return document.getElementsByName(_n);
        }
    }
    return null;
}

function $Tag(_n, obj) {
    var strArgs, _iframeName, iframeEl, doc = arguments[2] ? arguments[2] : document;
    if (_n != undefined && _n != null && _n !== "") {
        if (typeof obj === "object" && obj.id) {
            var strArgs = null;
            strArgs = obj.id.split("__");
            if (strArgs && strArgs.length > 1) {
                _iframeName = strArgs[0];
                if (_iframeName != undefined && _iframeName != null && _iframeName !== "") {
                    iframeEl = document.getElementById(_iframeName);
                    if (iframeEl) {
                        if (iframeEl.contentDocument) {
                            return iframeEl.contentDocument.getElementsByTagName(_n);
                        } else if (iframeEl.contentWindow) {
                            return iframeEl.contentWindow.document.getElementsByTagName(_n);
                        }
                    }
                }
            } else {
                return doc.getElementsByTagName(_n);
            }
        } else {
            return doc.getElementsByTagName(_n);
        }
    }
    return null;
}

function getElementsByAtts(_uicontext, attrib, value, context_node, tag, brokeValue, arrayPart, nodeParam) {
    var nodes = [];
    if (context_node == null) {
        context_node = document;
    }
    if (tag == null) {
        tag = "*";
    }
    var elems = null;
    if (_uicontext) {
        elems = _uicontext.$Tag(tag, context_node);
    } else {
        elems = $Tag(tag, context_node);
    }
    if (elems && elems.length > 0) {
        for (var i = 0; i < elems.length; i += 1) {
            if (value) {
                var valueAtt = elems[i].getAttribute(attrib), valueAttribute = null;
                if (valueAtt && brokeValue) {
                    var vArrayAtt = valueAtt.split(brokeValue);
                    if (typeof nodeParam !== "undefined" && nodeParam != null && nodeParam !== "") {
                        if (vArrayAtt[0] === nodeParam) {
                            var valueAttribute = vArrayAtt[arrayPart];
                            if (valueAttribute && valueAttribute === value) {
                                nodes.push(elems[i]);
                            }
                            continue;
                        }
                    } else {
                        valueAttribute = vArrayAtt[arrayPart];
                    }
                }
                if (valueAttribute && valueAttribute === value) {
                    nodes.push(elems[i]);
                }
            } else {
                if (XML.hasAttribute(elems[i], attrib)) nodes.push(elems[i]);
            }
        }
    }
    return nodes;
}

function getElements(UIForm, selector) {
    var collections = null;
    if (!selector) {
        return null;
    }
    if (UIForm && typeof selector === "string" && selector != null && selector !== "") {
        var args = selector.split(";"), it = 0, max_l = args.length, state = UIForm.state;
        if (max_l <= 0) return null;
        collections = [];
        for (;it < max_l; it++) {
            var nm = args[it];
            if (nm != null && nm !== "") {
                var elem = UIForm.getObject(Trim(nm));
                if (elem) {
                    var component = elem.getAttribute("component");
                    collections.push({
                        object: elem,
                        state: state,
                        type: component
                    });
                }
            }
        }
    }
    return collections;
}

function $config(object) {
    try {
        if (object) {
            var stringArgs = object.id.split(":"), UIContext = Rsis.UIContext.get(object), UIForm = UIContext.getUIForm(stringArgs[0]);
            if (UIForm && UIForm.configXML) {
                var componenteName = object.getAttribute("component");
                if (componenteName === "label") {
                    configLabel(object, UIForm.configXML);
                } else if (componenteName === "input") {
                    configInput(object, UIForm.configXML);
                } else if (componenteName === "searchField") {
                    configSearchField(object, UIForm.configXML);
                } else if (componenteName == "comboBox") {
                    configComboBox(object, UIForm.configXML);
                } else if (componenteName === "autoComplete") {
                    configAutoComplete(object, UIForm.configXML);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "$config()", UtilRsis);
    }
    return object;
}

function $objectFrame(_iframeName, _formId, _id) {
    try {
        var object = null;
        if (_iframeName != undefined && _iframeName != null && _iframeName !== "" && (_formId != undefined && _formId != null && _formId !== "") && (_id != undefined && _id != null && _id !== "")) {
            var iframeEl = document.getElementById(_iframeName);
            if (iframeEl) {
                if (iframeEl.contentDocument) {
                    object = $config(iframeEl.contentDocument.getElementById(_formId + ":" + _id));
                } else if (iframeEl.contentWindow) {
                    object = $config(iframeEl.contentWindow.document.getElementById(_formId + ":" + _id));
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "$objectFrame()", UtilRsis);
    }
    return object;
}

function $getIframeByObject(object) {
    if (object) {
        var args_ = object.id.split("__");
        if (args_ && args_.length > 1) return $(args_[0]);
    }
    return null;
}

function $formsByObject(object) {
    if (object) return object.getElementsByTagName("form");
    return null;
}

function getMessageBundle(bundleKey, patternMessage, value) {
    try {
        var msgs = MESSAGES_JRETAIL;
        if (bundleKey && bundleKey !== "" && msgs && msgs[bundleKey]) {
            if (value != undefined && value != null && value !== "") return msgs[bundleKey].replace("XXX", value);
            return msgs[bundleKey];
        } else {
            return patternMessage;
        }
    } catch (oErr) {
        outPrint(oErr, "getMessageBundle()", UtilRsis);
    }
}

function MiddlewareViewException(exceptionType) {
    this.message = exceptionType;
    this.name = "MiddlewareViewException";
}

function isVisibled(object) {
    try {
        if (object) {
            Rsis(object).visible(getAttMandatory(object, "isVisible") === "true");
        }
    } catch (oErr) {
        outPrint(oErr, "getMessageBundle()", UtilRsis);
    }
}

function setVisibleDOMElement(object, visibleHidden) {
    if (object) {
        Rsis(object).visible(visibleHidden);
        var tableObject = $(object.id + ".table");
        if (tableObject) {
            Rsis(tableObject).visible(visibleHidden);
        }
    }
}

function converteNumero(numero) {
    var ret = "", aux = "", retornouPonto = false;
    if (numero == undefined || numero == null) return "0";
    for (var i = numero.length; i > 0; i--) {
        aux = getValidNumber(numero.substring(i - 1, i));
        if (aux !== "." || !retornouPonto) ret = aux + ret;
        if (aux === ".") retornouPonto = true;
    }
    if (ret === "") ret = "0";
    return ret;
}

function getValidNumber(number) {
    if (number === "0" || number === "1" || number === "2" || number === "3" || number === "4" || number === "5" || number === "6" || number === "7" || number === "8" || number === "9" || number === "." || number === "-") return number;
    if (number === ",") return ".";
    return "";
}

function setMask(obj, pattern) {
    if (obj && pattern !== "") {
        var sEvent = getStringEvent(obj), $win = UtilRsis.getParentWindow(obj), events = Rsis.events, rt = "return ";
        obj.setAttribute("mask", pattern);
        var on_focus = $win + "removeCaracs(this,'" + pattern + "');";
        if (obj.getAttribute("on-focus") != null) {
            on_focus = on_focus + " return " + $win + obj.getAttribute("on-focus");
        } else {
            on_focus = " return " + on_focus;
        }
        var on_blur = $win + "blurInputToXML(this, " + sEvent + ");";
        if (obj.getAttribute("on-blur") != null) {
            on_blur = on_blur + " return " + $win + obj.getAttribute("on-blur");
        } else {
            on_blur = "return " + on_blur;
        }
        events.add(obj, "onblur", $win + "SelectBox.close(this," + sEvent + "); " + on_blur).add("onkeypress", "return " + $win + "validateMask(" + sEvent + ", '" + pattern + "');").add("onfocus", on_focus);
    }
    return obj;
}

function Page(pageNumber, pageSize, totalAllElements) {
    this.pageNumber = pageNumber;
    this.pageSize = pageSize;
    this.totalAllElements = totalAllElements;
    this.pageElements;
    this.setPageElements = function(pageElements) {
        this.pageElements = pageElements;
    };
    this.getPageElements = function() {
        return this.pageElements;
    };
    this.getPageNumber = function() {
        return this.pageNumber;
    };
    this.getPageSize = function() {
        return this.pageSize;
    };
    this.getTotalAllElements = function() {
        return this.totalAllElements;
    };
    this.isFirstPage = function() {
        return this.getPageNumber() == 0 ? "true" : "false";
    };
    this.isLastPage = function() {
        return this.getPageNumber() >= this.getLastPageNumber() ? "true" : "false";
    };
    this.hasNextPage = function() {
        return !this.isLastPage() ? "true" : "false";
    };
    this.hasPreviousPage = function() {
        return this.getPageNumber() > 0 ? "true" : "false";
    };
    this.getLastPageNumber = function() {
        var totalResults = Math.ceil(this.getTotalAllElements() / this.getPageSize()) - 1;
        if (totalResults < 0) return 0;
        return totalResults;
    };
    this.getThisPageFirstElementNumber = function() {
        return this.getPageNumber() * this.getPageSize() + 1;
    };
    this.getThisPageLastElementNumber = function() {
        var fullPage = this.getThisPageFirstElementNumber() + this.getPageSize() - 1;
        return this.getTotalAllElements() < fullPage ? this.getTotalAllElements() : fullPage;
    };
    this.getNextPageNumber = function() {
        return this.getPageNumber() + 1;
    };
    this.getPreviousPageNumber = function() {
        return this.getPageNumber() - 1;
    };
    this.setTableXML = function(tableXML) {
        if (tableXML) {
            var nodeTableXML = getNodes(tableXML, ROOT_NODE + "/page");
            if (nodeTableXML && nodeTableXML.length > 0) {
                this.pageNumber = parseInt(getNodeValue(nodeTableXML, "pageNumber"), 10);
                this.totalAllElements = parseInt(getNodeValue(nodeTableXML, "totalAllElements"));
                this.pageSize = parseInt(getNodeValue(nodeTableXML, "pageSize"), 10);
            }
        }
    };
    this.getTotalPages = function() {
        if (this.totalAllElements % this.pageSize == 0) {
            return this.totalAllElements / this.pageSize;
        } else {
            return parseInt(this.totalAllElements / this.pageSize, 10) + 1;
        }
        return 0;
    };
}

function round(numero, nroCasas) {
    if (nroCasas > 7) nroCasas = 7;
    var multp = Math.pow(10, nroCasas);
    return Math.round(numero * multp) / multp;
}

String.prototype.replaceAll = function(stringToFind, stringToReplace) {
    return this.split(stringToFind).join(stringToReplace);
};

function pad(str, len, pad, dir) {
    if (str) {
        var STR_PAD_LEFT = 1, STR_PAD_RIGHT = 2, STR_PAD_BOTH = 3;
        if (Rsis.isUndefined(len)) {
            len = 0;
        }
        if (Rsis.isUndefined(pad)) {
            pad = " ";
        }
        if (Rsis.isUndefined(dir)) {
            dir = STR_PAD_RIGHT;
        }
        if (len + 1 >= str.length) {
            switch (dir) {
              case STR_PAD_LEFT:
                str = Array(len + 1 - str.length).join(pad) + str;
                break;

              case STR_PAD_BOTH:
                var right = Math.ceil((padlen = len - str.length) / 2);
                var left = padlen - right;
                str = Array(left + 1).join(pad) + str + Array(right + 1).join(pad);
                break;

              default:
                str = str + Array(len + 1 - str.length).join(pad);
                break;
            }
        }
    }
    return str;
}

function getLineNumberColumHeader(object) {
    var number = -1;
    if (object) {
        var isColumnHeader = getAtt(object, "isColumnHeader");
        if (isColumnHeader === "true") {
            var idObject = getAttMandatory(object, "id");
            if (idObject != null && idObject !== "") {
                var countColumnHeader = object.getAttribute("countColumnHeader");
                if (countColumnHeader != null && !isNaN(parseInt(countColumnHeader, 10))) {
                    number = toInt(countColumnHeader);
                }
            }
        }
    }
    return number;
}

function getStrPathNode(nodeName, positionNode) {
    if (nodeName !== "" && positionNode > 0) {
        var pathFatherNode = "";
        var args = nodeName.split("/");
        for (var i = 0; i < args.length - positionNode; i++) {
            if (args[i] != null && args[i] != "") {
                pathFatherNode += "/" + args[i];
            }
        }
        return pathFatherNode;
    }
    return null;
}

var noAction = function() {}, isEnterKeyDown = function(evt) {
    return Rsis.events.isEventEnter(evt, "keydown");
}, isEnterKeyUp = function(evt) {
    return Rsis.events.isEventEnter(evt, "keyup");
}, isEnterKeyPress = function(evt) {
    return Rsis.events.isEventEnter(evt, "keypress");
}, isOnClickEvent = function(evt) {
    evt = Rsis.events.getEvent(evt);
    return evt && evt.type === "click" ? true : false;
}, isKeyCodePress = function(evt, keyCode) {
    if (!keyCode) return false;
    evt = Rsis.events.getEvent(evt);
    var charValue = Rsis.events.getCode(evt, false);
    return evt && charValue == keyCode ? true : false;
};

function setFunction(obj, method, fn) {
    if (obj && method && fn) obj.setAttribute(method, Rsis.browser.msie ? new Function(fn) : fn);
}

function onlyDeveloperFunction(object) {
    if (object) {
        var isOdf = object.getAttribute("onlyDeveloperFunction");
        return isOdf == null || isOdf === "" || isOdf === "false" ? false : true;
    }
    return true;
}

function onMouseOutCell(object) {
    if (object) {
        var ost = object.style;
        ost.textDecoration = "underline";
        ost.color = "#0012FF";
    }
}

function onMouseOverCell(object) {
    if (object) {
        var ost = object.style;
        ost.textDecoration = "underline";
        ost.color = "#555555";
    }
}

function utf8Encode(argString) {
    if (argString === null || typeof argString === "undefined") {
        return "";
    }
    var string = argString + "";
    var utftext = "", start, end, stringl = 0;
    start = end = 0;
    stringl = string.length;
    for (var n = 0; n < stringl; n++) {
        var c1 = string.charCodeAt(n);
        var enc = null;
        if (c1 < 128) {
            end++;
        } else if (c1 > 127 && c1 < 2048) {
            enc = String.fromCharCode(c1 >> 6 | 192, c1 & 63 | 128);
        } else if ((c1 & 63488) != 55296) {
            enc = String.fromCharCode(c1 >> 12 | 224, c1 >> 6 & 63 | 128, c1 & 63 | 128);
        } else {
            if ((c1 & 64512) != 55296) {
                throw new RangeError("Unmatched trail surrogate at " + n);
            }
            var c2 = string.charCodeAt(++n);
            if ((c2 & 64512) != 56320) {
                throw new RangeError("Unmatched lead surrogate at " + (n - 1));
            }
            c1 = ((c1 & 1023) << 10) + (c2 & 1023) + 65536;
            enc = String.fromCharCode(c1 >> 18 | 240, c1 >> 12 & 63 | 128, c1 >> 6 & 63 | 128, c1 & 63 | 128);
        }
        if (enc !== null) {
            if (end > start) {
                utftext += string.slice(start, end);
            }
            utftext += enc;
            start = end = n + 1;
        }
    }
    if (end > start) {
        utftext += string.slice(start, stringl);
    }
    return utftext;
}

function escapeParam(strXml, isXML) {
    if (strXml) {
        var _charset = Rsis.charset;
        if (strXml != null && strXml !== "" && isXML) {
            strXml = strXml.replace('<?xml version="1.0"?>', '<?xml version="1.0" encoding="' + _charset + '"?>');
            strXml = strXml.replace('<?xml version="1.0" encoding="UTF-8"?>', '<?xml version="1.0" encoding="' + _charset + '"?>');
            strXml = strXml.replace('<?xml version="1.0" encoding="UTF-8"?>', '<?xml version="1.0" encoding="' + _charset + '"?>');
        }
        strXml = utf8Encode(strXml);
        strXml = escape(strXml);
        if (strXml != null && strXml !== "") {
            strXml = strXml.replaceAll(/[+]/g, "%2B");
        }
    }
    return strXml;
}

function browkeQueryString(value) {
    if (value != null && value !== "") {
        var stringReturn = {};
        var strArgs = value.split("&");
        for (var z = 0; z < strArgs.length; z++) {
            var params = strArgs[z];
            if (params != null && params !== "") {
                var paramSplit = params.replace("=", "::").split("::");
                var key = paramSplit[0];
                var strParam = paramSplit[1];
                stringReturn[key] = strParam;
            }
        }
        return stringReturn;
    }
    return null;
}

function toUpperCase(input) {
    input.value = input.value.toUpperCase();
    return false;
}

function renderCSSButton(button, _css) {
    if (button) {
        if (isEmpty(_css)) _css = "tbBtDsd";
        var element = Rsis.$(button);
        if (button.disabled) {
            element.addClass(_css);
        } else {
            element.removeClass(_css);
        }
    }
}

function identIsNull(UIForm, obj, listNameAtts) {
    if (UIForm && obj) {
        var component = getAttMandatory(obj, "component"), objectId = obj.id, enableColor = "#23405E", redColor = "#990000", readOnlyColor = "#444441", fontWeightNormal = "normal", fontWeightBold = "bold";
        if (component === "autoComplete" || component === "searchField") {
            var domainXML = getDomainXML(obj, UIForm), editable = getAttMandatory(obj, "editable"), isNull = false;
            var optionValueRef = getAttMandatory(obj, "optionValueRef");
            stringArgs = optionValueRef.split("@");
            ost = obj.style;
            var nodeDomain = getNodes(domainXML, stringArgs[0].replaceAll("###", "@"));
            if (component === "autoComplete") {
                if (!(nodeDomain && nodeDomain.length > 0)) {
                    optionValue = getAttMandatory(obj, "optionValue");
                    stringArgs = optionValue.split("@");
                    nodeDomain = getNodes(domainXML, stringArgs[0].replaceAll("###", "@"));
                }
            } else if (component === "searchField") {
                var resultSearch = $(objectId + ".resultSearch");
                ost = resultSearch ? resultSearch.style : null;
            }
            if (ost && nodeDomain && nodeDomain.length > 0) {
                var attTextRef = $R(obj).getAttNode(obj.getAttribute("optionTextRef"));
                if ($R.isArray(listNameAtts) && listNameAtts.length > 0) {
                    var models = UIForm.get(nodeDomain, listNameAtts), isEmptyId = false;
                    $R.each(models, function(index, value) {
                        isEmptyId = isEmpty(value);
                        return isEmptyId;
                    });
                    var value = getNodeValue(nodeDomain, attTextRef);
                    if (isEmptyId && isNoEmpty(value)) {
                        isNull = true;
                    }
                } else {
                    var ident = getNodeValue(nodeDomain, stringArgs[1]), value = getNodeValue(nodeDomain, attTextRef);
                    if (isEmpty(ident) && isNoEmpty(value)) {
                        isNull = true;
                    }
                }
                ost.color = enableColor;
                ost.fontWeight = fontWeightNormal;
                if (isNull) {
                    ost.color = redColor;
                    ost.fontWeight = fontWeightBold;
                } else {
                    if (searchStringArgs(editable, UIForm.state, ";")) {
                        ost.color = enableColor;
                        ost.fontWeight = fontWeightNormal;
                    } else {
                        ost.color = enableColor;
                        ost.fontWeight = fontWeightNormal;
                    }
                }
            }
        }
    }
}

function getDataScrollerByTable(tableId) {
    if (tableId != null && tableId !== "") {
        var dtStringArgs = tableId.split(":"), UIContext = Rsis.UIContext.get($(tableId)), UIForm = UIContext.getUIForm(dtStringArgs[0]);
        if (UIForm) {
            var dataScrollers = UIForm.getUIComponent("dataScroller");
            if (dataScrollers && dataScrollers.length > 0) {
                var dataScroller = null;
                for (var z = 0; z < dataScrollers.length; z++) {
                    var dataScroller = dataScrollers[z];
                    if (dataScroller && typeof dataScroller === "object" && (dataScroller.getAttribute("editTable") === tableId || dataScroller.getAttribute("dataTable") === tableId)) {
                        return dataScroller;
                    }
                }
            }
        }
    }
    return null;
}

function getURLParam(strParamName, container) {
    var strReturn = "", strHref = "";
    if (container) {
        strHref = container.getAttribute("data-url");
    } else {
        strHref = window.location.href;
    }
    if (strHref.indexOf("?") > -1) {
        var strQueryString = strHref.substr(strHref.indexOf("?")).toLowerCase();
        var aQueryString = strQueryString.split("&");
        for (var iParam = 0; iParam < aQueryString.length; iParam++) {
            if (aQueryString[iParam].indexOf(strParamName.toLowerCase() + "=") > -1) {
                var aParam = aQueryString[iParam].split("=");
                strReturn = aParam[1];
                break;
            }
        }
    }
    return unescape(strReturn);
}

function getAttFuncDeveloper(object, strAttribute) {
    var fDev = getAtt(object, strAttribute);
    if (fDev !== null && fDev !== "null" && fDev !== "") {
        var stringArgs = object.id.split("__");
        if (stringArgs && stringArgs.length > 1) {
            var body = getIframeDocument($(stringArgs[0])).getElementsByTagName("body")[0], isFrameId = getAtt(body, "frameId") !== "" ? true : false, isJsInParent = getAtt(body, "isJsInParent") === "true" ? true : false;
            if (isFrameId) {
                if (isJsInParent) return "$P." + fDev; else return "$W." + fDev;
            } else {
                return "$W." + fDev;
            }
        } else {
            return fDev;
        }
    }
    return "";
}

function getIframeDocument(iframe) {
    var doc;
    if (iframe.contentDocument) {
        doc = iframe.contentDocument;
    } else if (iframe.contentWindow) {
        doc = iframe.contentWindow.document;
    } else if (iframe.document) {
        doc = iframe.document;
    }
    return doc;
}

function getStringEvent(obj) {
    var stringArgs = obj.id.split("__");
    if (Rsis.browser.msie && stringArgs && stringArgs.length > 1) {
        var ifrm = getIframeDocument($(stringArgs[0]));
        if (ifrm) {
            var body = ifrm.getElementsByTagName("body")[0], isFrameId = getAtt(body, "frameId") !== "" ? true : false, isJsInParent = getAtt(body, "isJsInParent") === "true" ? true : false;
            if (isFrameId) {
                return "event";
            } else {
                return isJsInParent ? "$P.event" : "event";
            }
        } else return "event";
    } else return "event";
}

function findPosX(obj) {
    var curleft = 0;
    try {
        if (obj.offsetParent) {
            while (obj.offsetParent) {
                curleft = curleft + obj.offsetLeft;
                obj = obj.offsetParent;
            }
        } else if (obj.x) curleft = curleft + obj.x;
    } catch (oErr) {
        outPrint(oErr, "findPosX", UtilRsis);
    }
    return curleft;
}

function findPosY(obj) {
    try {
        var curtop = 0;
        if (obj.offsetParent) {
            while (obj.offsetParent) {
                curtop += obj.offsetTop;
                obj = obj.offsetParent;
            }
        } else if (obj.y) curtop += obj.y;
    } catch (oErr) {
        outPrint(oErr, "findPosY", UtilRsis);
    }
    return curtop;
}

function redirecionaLista() {
    if (comboSelected != undefined) {
        var target = $(comboSelected);
        if (target) {
            var listHolder = SelectBox.getListHolder(target);
            if (listHolder) {
                var shst = listHolder.style;
                shst.top = findPosY(target) + target.offsetHeight;
                shst.left = findPosX(target);
            }
        }
    }
}

function hasSelectedRadioRows(table) {
    if (table) {
        var tableId = getAttMandatory(table, "id");
        if (tableId == null || tableId == "") return null;
        var objectInput = $$(tableId + ".dtRadio");
        for (var i = 0; i < objectInput.length; i++) {
            if (objectInput[i] != undefined && objectInput[i].checked) {
                return objectInput[i];
            }
        }
    }
    return null;
}

function validaQtdChars(_c, _dc) {
    if (_c) {
        var obj = null;
        var dialogName = "";
        if (_c.id.search(/#/) > -1) dialogName = _c.id.split("#")[0] + "#";
        obj = $(dialogName + _dc);
        if (obj) {
            var qtde = _c.value.length, mxLen = getAtt(_c, "maxlength");
            mxLen = mxLen == null || mxLen === "" ? 255 : mxLen;
            if (qtde <= mxLen) {
                obj.value = mxLen - qtde;
                return true;
            } else {
                alert("A quantidade maxima de caracteres foi atingida.");
                _c.value = _c.value.substring(0, mxLen);
                obj.value = "0";
                return false;
            }
        }
    }
    return false;
}

function Map() {
    this.keyArray = new Array();
    this.valArray = new Array();
    this.put = function(key, val) {
        var elementIndex = this.findIt(key);
        if (elementIndex == -1) {
            this.keyArray.push(key);
            this.valArray.push(val);
        } else {
            this.valArray[elementIndex] = val;
        }
    };
    this.get = function(key) {
        var result = null;
        var elementIndex = this.findIt(key);
        if (elementIndex != -1) {
            result = this.valArray[elementIndex];
        }
        return result;
    };
    this.remove = function(key) {
        var result = null;
        var elementIndex = this.findIt(key);
        if (elementIndex != -1) {
            this.keyArray = this.removeAt(this.keyArray, elementIndex);
            this.valArray = this.removeAt(this.valArray, elementIndex);
        }
        return;
    };
    this.size = function() {
        return this.keyArray.length;
    };
    this.clear = function() {
        for (var i = 0; i < this.keyArray.length; i++) {
            this.keyArray.pop();
            this.valArray.pop();
        }
    };
    this.keySet = function() {
        return this.keyArray;
    };
    this.valSet = function() {
        return this.valArray;
    };
    this.showMe = function() {
        var result = "";
        for (var i = 0; i < this.keyArray.length; i++) {
            result += "Key: " + this.keyArray[i] + "\tValues: " + this.valArray[i] + "\n";
        }
        return result;
    };
    this.findIt = function(key) {
        var result = -1;
        for (var i = 0; i < this.keyArray.length; i++) {
            if (this.keyArray[i] == key) {
                result = i;
                break;
            }
        }
        return result;
    };
    this.removeAt = function(_this, index) {
        var part1 = _this.slice(0, index);
        var part2 = _this.slice(index + 1);
        return part1.concat(part2);
    };
}

function createPathFatherNode(xPath) {
    var pathFatherNode = "";
    if (xPath != null && xPath !== "") {
        var args = xPath.split("/");
        for (var i = 0; i < args.length - 1; i++) {
            if (args[i] != null && args[i] !== "") pathFatherNode += "/" + args[i];
        }
    }
    return pathFatherNode;
}

function validaTeclaPressionada(evt) {
    evt = Rsis.events.getEvent(evt);
    var keyCode = Rsis.events.getCode(evt);
    if (evt && keyCode != null && keyCode !== "") return keyCode == 0 || keyCode == 9 || keyCode == 16 || keyCode == 27 || evt.shiftKey && keyCode == 9;
    return false;
}

function renderHelp(object, UIForm, _enableHelp) {
    if (object) {
        var seqHelpApp = object.getAttribute("help"), helpKey = object.getAttribute("helpKey"), tabindex = parseInt(object.getAttribute("tabindex"), 10), className = "jretail-help-border", node, titleHelp, descriptionHelp, component;
        if (!isNaN(tabindex) && tabindex > -1) {
            object.setAttribute("tabindexValue", tabindex);
        }
        if (_enableHelp) {
            node = UIRsis.getElementNodesHelp(UIForm, seqHelpApp, helpKey);
            if (node != null) {
                titleHelp = node.getAttribute("descBreve") != null ? node.getAttribute("descBreve") : "";
                descriptionHelp = node.getAttribute("descLonga") != null ? node.getAttribute("descLonga") : "";
                if (descriptionHelp != "") {
                    object.help = "true";
                    object.setAttribute("help", "true");
                    object.setAttribute("hintHelp", "&lt;h1&gt;" + titleHelp + "&lt;/h1&gt;&lt;p&gt;" + descriptionHelp + "&lt;/p&gt;");
                    Rsis.addClass(object, className);
                } else {
                    object.help = "false";
                    object.setAttribute("help", "false");
                    Rsis.removeClass(object, className);
                }
            }
            if (!isNaN(tabindex) && tabindex > -1 && object.readOnly == true) {
                object.setAttribute("tabindex", "-1");
            }
            UtilRsis.setHelp(object);
        } else {
            component = object.getAttribute("component");
            object.help = "false";
            object.setAttribute("help", "false");
            Rsis.removeClass(object, className);
            var tabindexValue = parseInt(object.getAttribute("tabindexValue"), 10);
            if (!isNaN(tabindexValue) && tabindexValue > -1) {
                object.setAttribute("tabindex", tabindexValue);
            }
            setDOMEvent(object, "onmouseover", "");
            setDOMEvent(object, "onmouseout", "");
            UtilRsis.setHint(object);
        }
        object = null;
    }
}

function renderHelpKeys(object, UIForm, _enableHelp) {
    if (object) {
        var seqHelpApp, helpKey = object.getAttribute("helpKey"), tabindex = parseInt(object.getAttribute("tabindex"), 10), className = "jretail-help-border", body, stringArgs, node, titleHelp, descriptionHelp, component, msie = Rsis.browser.msie;
        if (!isNaN(tabindex) && tabindex > -1) {
            object.setAttribute("tabindexValue", tabindex);
        }
        if (_enableHelp) {
            body = null;
            stringArgs = object.id.split("__");
            if (stringArgs && stringArgs.length > 1) {
                body = getIframeDocument($(stringArgs[0])).getElementsByTagName("body")[0];
            } else {
                body = document.getElementsByTagName("body")[0];
            }
            var ctrpanel = $(object.id.split("#")[0] + ".ctrpanel");
            if (ctrpanel && !(stringArgs && stringArgs.length > 1)) {
                seqHelpApp = getAtt(ctrpanel, "seqHelpApp");
            } else {
                seqHelpApp = getAtt(body, "seqHelpApp");
            }
            if (helpKey != null) {
                object.helpKeys = "true";
                object.setAttribute("helpKeys", "true");
                object.setAttribute("hintHelpKeys", "&lt;h1&gt; SeqHelpApp:" + seqHelpApp + "&lt;/h1&gt;&lt;p&gt; HelpKey:" + helpKey + "&lt;/p&gt;");
                Rsis.addClass(object, className);
            }
            if (!isNaN(tabindex) && tabindex > -1 && object.readOnly == true) {
                object.setAttribute("tabindex", "-1");
            }
            UtilRsis.setHelpKeys(object);
        } else {
            component = object.getAttribute("component");
            object.helpKeys = "false";
            object.setAttribute("helpKeys", "false");
            Rsis.removeClass(object, className);
            if (!msie) object.style.border = "";
            setDOMEvent(object, "onmouseover", "");
            setDOMEvent(object, "onmouseout", "");
            var tabindexValue = parseInt(object.getAttribute("tabindexValue"), 10);
            if (!isNaN(tabindexValue) && tabindexValue > -1) {
                object.setAttribute("tabindex", tabindexValue);
            }
            UtilRsis.setHint(object);
        }
        object = null;
    }
}

function setCssHelp(object, help) {
    if (object) {
        var helpKeys = object.getAttribute("helpKeys"), component = object.getAttribute("component"), className = "jretail-help-border", msie = Rsis.browser.msie;
        if (help == null || help === "") {
            help = object.getAttribute("help");
        }
        if (component === "checkBox") {
            var objectCheck = $(object.id + ".dChk");
            if (objectCheck) {
                if (helpKeys !== "true") {
                    if (help === "true") {
                        Rsis.addClass(objectCheck, className);
                        if (!msie) {
                            objectCheck.style.border = "1px solid red";
                        }
                    } else {
                        Rsis.removeClass(objectCheck, className);
                        if (!msie) {
                            objectCheck.style.border = "";
                        }
                    }
                }
            }
        } else {
            if (helpKeys !== "true") {
                if (help === "true") {
                    Rsis.addClass(object, className);
                    if (!msie) {
                        object.style.border = "1px solid red";
                    }
                } else {
                    Rsis.removeClass(object, className);
                    if (!msie) {
                        object.style.border = "";
                    }
                }
            }
        }
    }
}

function setCssHelpKeys(object, helpKeys) {
    if (object) {
        var help = object.getAttribute("help"), component = object.getAttribute("component"), className = "jretail-help-border", msie = Rsis.browser.msie;
        if (helpKeys == null || helpKeys === "") {
            helpKeys = object.getAttribute("helpKeys");
        }
        if (component === "checkbox") {
            var objectCheck = $(object.id + ".dChk");
            if (objectCheck) {
                if (help !== "true") {
                    if (helpKeys === "true") {
                        Rsis.addClass(objectCheck, className);
                        if (!msie) {
                            objectCheck.style.border = "1px solid red";
                        }
                    } else {
                        Rsis.removeClass(objectCheck, className);
                        if (!msie) {
                            objectCheck.style.border = "";
                        }
                    }
                }
            }
        } else {
            if (help !== "true") {
                if (helpKeys === "true") {
                    Rsis.addClass(object, className);
                    if (!msie) {
                        object.style.border = "1px solid red";
                    }
                } else {
                    Rsis.removeClass(object, className);
                    if (!msie) {
                        object.style.border = "";
                    }
                }
            }
        }
    }
}

function renderHelpTable(object, UIForm, _enableHelp) {
    if (object) {
        var tHead = $R(object).getTHead(), className = "jretail-help-border", j = 0, maxLength, listTableCells, th, helpKey, titleHelp, descriptionHelp;
        if (tHead) {
            listTableCells = tHead.rows[tHead.rows.length - 1].cells;
            maxLength = listTableCells.length;
            for (;j < maxLength; j++) {
                th = listTableCells[j];
                if (th.id == null || th.id === "") {
                    th.id = object.id + "." + new Date().getTime();
                }
                if (_enableHelp) {
                    helpKey = th.getAttribute("helpKey");
                    var node = UIRsis.getElementNodesHelp(UIForm, null, helpKey);
                    if (node != null) {
                        titleHelp = node.getAttribute("descBreve") != null ? node.getAttribute("descBreve") : "";
                        descriptionHelp = node.getAttribute("descLonga") != null ? node.getAttribute("descLonga") : "";
                        if (descriptionHelp !== "") {
                            th.help = "true";
                            th.setAttribute("help", "true");
                            th.setAttribute("hintHelp", "&lt;h1&gt;" + titleHelp + "&lt;/h1&gt;&lt;p&gt;" + descriptionHelp + "&lt;/p&gt;");
                            Rsis.addClass(th, className);
                        } else {
                            th.help = "false";
                            th.setAttribute("help", "false");
                            Rsis.removeClass(th, className);
                        }
                    }
                    UtilRsis.setHelp(th);
                } else {
                    th.help = "false";
                    th.setAttribute("help", "false");
                    Rsis.removeClass(th, className);
                    setDOMEvent(th, "onmouseover", "");
                    setDOMEvent(th, "onmouseout", "");
                }
            }
        }
        object = null;
    }
}

function renderHelpKeysTable(object, UIForm, _enableHelp) {
    if (object) {
        var seqHelpApp = "", tHead = $R(object).getTHead(), className = "jretail-help-border";
        var stringArgs = object.id.split("__");
        if (stringArgs && stringArgs.length > 1) {
            body = getIframeDocument($(stringArgs[0])).getElementsByTagName("body")[0];
        } else {
            body = document.getElementsByTagName("body")[0];
        }
        var ctrpanel = $(object.id.split("#")[0] + ".ctrpanel");
        if (ctrpanel && !(stringArgs && stringArgs.length > 1)) {
            seqHelpApp = getAtt(ctrpanel, "seqHelpApp");
        } else {
            seqHelpApp = getAtt(body, "seqHelpApp");
        }
        if (tHead) {
            var listTableCells = tHead.rows[tHead.rows.length - 1].cells, j = 0, maxLength = listTableCells.length, helpKey, th;
            for (;j < maxLength; j++) {
                th = listTableCells[j];
                if (th.id == null || th.id === "") {
                    th.id = object.id + "." + new Date().getTime();
                }
                if (_enableHelp) {
                    helpKey = th.getAttribute("helpKey");
                    if (helpKey != null) {
                        th.helpKeys = "true";
                        th.setAttribute("helpKeys", "true");
                        th.setAttribute("hintHelpKeys", "&lt;h1&gt; SeqHelpApp: " + seqHelpApp + "&lt;/h1&gt;&lt;p&gt; HelpKey: " + helpKey + "&lt;/p&gt;");
                        Rsis.addClass(th, className);
                    }
                    UtilRsis.setHelpKeys(th);
                } else {
                    th.helpKeys = "false";
                    th.setAttribute("helpKeys", "false");
                    Rsis.removeClass(th, className);
                    setDOMEvent(th, "onmouseover", "");
                    setDOMEvent(th, "onmouseout", "");
                }
            }
        }
        object = null;
    }
}

function setJretailHelpBorder(strClassName) {
    if (typeof strClassName == "string" && (strClassName === "" || strClassName.search("jretail-help-border") == -1)) {
        return strClassName + " jretail-help-border";
    }
    return strClassName;
}

function createIndexKey(xpathArray, node) {
    var xpathIdent = "", count = 0, temp = "";
    if (xpathArray && xpathArray.length > 0) {
        var i = 0, max_i = xpathArray.length;
        for (;i < max_i; i++) {
            var args0 = Trim(xpathArray[i]), args1 = Trim(xpathArray[i + 1]);
            if (args0) {
                var valor = "", begin = "", tagAnd = "", end = "";
                if (count === 0) {
                    begin = "[";
                }
                if (count > 0) {
                    tagAnd = " and ";
                }
                var argsnode = args0.split("@"), nodenow = argsnode[0], proxNode = "";
                valor = getValorIdent(argsnode, node);
                if (temp != nodenow) {
                    temp = nodenow;
                }
                if (count > 0) {
                    nodenow = "";
                }
                if (!args1) {
                    end = "]";
                    count = 0;
                } else {
                    proxNode = args1.split("@")[0];
                }
                if (nodenow !== proxNode) {
                    end = "]";
                }
                count++;
                xpathIdent = xpathIdent + (nodenow + begin + tagAnd + "@" + argsnode[1] + "='" + valor + "'" + end);
                if (nodenow !== proxNode) {
                    count = 0;
                }
            }
        }
    }
    return xpathIdent;
}

function getValorIdent(argsOptionValueRef, node, index) {
    if (!index) index = 0;
    var valor = "";
    if (argsOptionValueRef && node != null) {
        var stringPath = argsOptionValueRef[0];
        if (stringPath && stringPath !== "") {
            stringPath = stringPath.replaceAll("###", "@");
            var elementNodes = getChildNodes(node, stringPath);
            if (elementNodes && elementNodes.length > 0) {
                valor = elementNodes[index].getAttribute(argsOptionValueRef[1]);
            }
        } else {
            valor = node.getAttribute(argsOptionValueRef[1]);
        }
    }
    return valor;
}

function getXPathIdent(argsOptionValueRef) {
    if (argsOptionValueRef && argsOptionValueRef.length) {
        var stringPath = argsOptionValueRef[0];
        if (stringPath && stringPath !== "") {
            return stringPath.replaceAll("###", "@");
        }
    }
    return "";
}

function setAttObject(obj, nodeName, value) {
    if (obj) {
        if (value != null) {
            obj.setAttribute(nodeName, value);
        }
    }
}

(function() {
    NoCompressRsis = {
        _FILE: "003noCompressRsis.js",
        version: JRetail.rsis.VersionJS
    };
})();

function compressAfterInit(UIForm, objXML, afterinit) {
    try {
        try {
            eval(afterinit);
        } catch (e) {
            if (afterinit.search(/\$P./) > -1) {
                afterinit = afterinit.replace("$P.", "");
            }
            eval(afterinit);
        }
    } catch (oErr) {
        outPrint(oErr, "compressAfterInit()", NoCompressRsis);
    }
}

function compressEvalRsis(exc, params) {
    try {
        if (typeof exc !== "undefined" && exc != null && exc !== "") {
            try {
                if (typeof params !== "undefined" && params !== "") {
                    return eval(exc).apply(null, params);
                } else {
                    return eval(exc);
                }
            } catch (e) {
                if (exc.search(/\$P./) > -1) {
                    exc = exc.replace("$P.", "");
                }
                if (typeof params !== "undefined" && params !== "") {
                    return eval(exc).apply(null, params);
                } else {
                    return eval(exc);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalRsis()", NoCompressRsis);
    }
}

function compressEvalRsisAll(exc, arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9) {
    if (typeof exc !== "undefined" && exc != null && exc !== "") {
        try {
            return eval(exc + "(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9);");
        } catch (e) {
            if (exc.search(/\$P./) > -1) {
                exc = exc.replace("$P.", "");
            }
            return eval(exc + "(arg0, arg1, arg2, arg3, arg4, arg5, arg6, arg7, arg8, arg9);");
        }
    }
}

function compressEvalRenderDevRsis(exc, obj, UIForm, node) {
    try {
        if (typeof exc !== "undefined" && exc != null && exc !== "") {
            try {
                return eval(exc + "(obj, UIForm, node)");
            } catch (e) {
                if (exc.search(/\$P./) > -1) {
                    exc = exc.replace("$P.", "");
                }
                return eval(exc + "(obj, UIForm, node)");
            }
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalRsis()", NoCompressRsis);
    }
}

function compressEvalRenderClearRsis(exc, obj, UIForm) {
    try {
        if (typeof exc !== "undefined" && exc != null && exc !== "") {
            try {
                return eval(exc + "(obj, UIForm)");
            } catch (e) {
                if (exc.search(/\$P./) > -1) {
                    exc = exc.replace("$P.", "");
                }
                return eval(exc + "(obj, UIForm)");
            }
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalRsis()", NoCompressRsis);
    }
}

function compressEvalCBETDev(ManagerCache, UIForm, objXML, radioButton, funCallBackDeveloper) {
    try {
        try {
            eval(funCallBackDeveloper);
        } catch (e) {
            if (funCallBackDeveloper.search(/\$P./) > -1) {
                funCallBackDeveloper = funCallBackDeveloper.replace("$P.", "");
            }
            eval(funCallBackDeveloper);
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalETDel()", NoCompressRsis);
    }
}

function compressAfterInit(UIForm, objXML, afterinit) {
    try {
        try {
            eval(afterinit);
        } catch (e) {
            if (afterinit.search(/\$P./) > -1) {
                afterinit = afterinit.replace("$P.", "");
            }
            eval(afterinit);
        }
    } catch (oErr) {
        outPrint(oErr, "compressAfterInit()", NoCompressRsis);
    }
}

function compressEvalAfterRen(executeRender) {
    try {
        try {
            eval(executeRender);
        } catch (e) {
            if (executeRender.search(/\$P./) > -1) {
                executeRender = executeRender.replace("$P.", "");
            }
            eval(executeRender);
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalAfterRen()", NoCompressRsis);
    }
}

function compressEvalInputRen(input, exec) {
    try {
        try {
            eval(exec + "(input)");
        } catch (e) {
            if (exec.search(/\$P./) > -1) {
                exec = exec.replace("$P.", "");
            }
            eval(exec + "(input)");
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalInputRen()", NoCompressRsis);
    }
}

function compressEvalMC(ManagerCache, exec) {
    try {
        try {
            eval(exec + "(ManagerCache);");
        } catch (e) {
            if (exec.search(/\$P./) > -1) {
                exec = exec.replace("$P.", "");
            }
            eval(exec + "(ManagerCache);");
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalMC()", NoCompressRsis);
    }
}

function compressEvalMCExec(ManagerCache, parameters, exec) {
    try {
        try {
            eval(exec + "(ManagerCache.UIForm, parameters );");
        } catch (e) {
            if (exec.search(/\$P./) > -1) {
                exec = exec.replace("$P.", "");
            }
            eval(exec + "(ManagerCache.UIForm, parameters );");
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalMCExec()", NoCompressRsis);
    }
}

function compressEvalMCCB(ManagerCache, objXML, exec) {
    try {
        try {
            eval(exec + "(ManagerCache, objXML );");
        } catch (e) {
            if (exec.search(/\$P./) > -1) {
                exec = exec.replace("$P.", "");
            }
            eval(exec + "(ManagerCache, objXML );");
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalMCCB()", NoCompressRsis);
    }
}

function compressEvalSfSetParamW(searchField, param, setParamsModal) {
    try {
        try {
            eval(setParamsModal + "(searchField, param);");
        } catch (e) {
            if (setParamsModal.search(/\$P./) > -1) {
                setParamsModal = setParamsModal.replace("$P.", "");
            }
            eval(setParamsModal + "(searchField, param);");
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalSfSetParamW()", NoCompressRsis);
    }
}

function compressEvalTp(tabPanel, exec) {
    try {
        try {
            eval(exec + "(tabPanel)");
        } catch (e) {
            if (exec.search(/\$P./) > -1) {
                exec = exec.replace("$P.", "");
            }
            eval(exec + "(tabPanel)");
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalTp()", NoCompressRsis);
    }
}

function compressEvalTBSearchParam(UIForm, QueryString, searchParameter) {
    try {
        try {
            eval(searchParameter + "(UIForm, QueryString);");
        } catch (e) {
            if (searchParameter.search(/\$P./) > -1) {
                searchParameter = searchParameter.replace("$P.", "");
            }
            eval(searchParameter + "(UIForm, QueryString);");
        }
    } catch (oErr) {
        outPrint(oErr, "compressEvalTBSearchParam()", NoCompressRsis);
    }
}

(function($R, window) {
    SelectBox = {
        _FILE: "005util.select.js",
        version: JRetail.rsis.VersionJS,
        close: function(obj, evt) {
            try {
                evt = Rsis.events.getEvent(evt);
                if (obj && (isOnClickEvent(evt) || evt.type == "scroll")) {
                    var formId = getAttMandatory(obj, "id").split(":")[0];
                    if (formId) {
                        var UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(formId);
                        if (UIForm != null) {
                            var autoComplete = UIForm.getUIComponent("autoComplete");
                            if (autoComplete != undefined) {
                                for (var it1 = 0; it1 < autoComplete.length; it1++) {
                                    optionHiddenAC(autoComplete[it1]);
                                }
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "SelectBox.close()", this);
            }
        },
        view: function(obj, evt) {
            try {
                evt = Rsis.events.getEvent(evt);
                if (obj && isOnClickEvent(evt)) {
                    var options = this.getListHolder(obj);
                    if (options) {
                        var optst = options.style;
                        if (optst.display == "none") {
                            $R(options).show();
                        } else {
                            $R(options).hide();
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "SelectBox.view()", this);
            }
        },
        createListHolder: function(iframe) {
            try {
                var doc = window.document;
                var list = null;
                if (iframe != null) {
                    var doc = getIframeDocument(iframe);
                    list = $frame(iframe.id, "listHolder");
                } else {
                    list = $("listHolder");
                }
                if (!list) {
                    var list = doc.createElement("DIV");
                    list.id = "listHolder";
                    doc.body.appendChild(list);
                }
            } catch (oErr) {
                outPrint(oErr, "SelectBox.createListHolder", this);
            }
            return list;
        },
        getListHolder: function(obj) {
            try {
                return $getIframeByObject(obj) != null ? $frame($getIframeByObject(obj).id, "listHolder") : $("listHolder");
            } catch (oErr) {
                outPrint(oErr, "SelectBox.getListHolder", this);
            }
            return null;
        },
        deleteListHolder: function(obj) {
            try {
                var doc = document, iframe = $getIframeByObject(obj), listHolder = $("listHolder");
                if (iframe) {
                    listHolder = $frame($getIframeByObject(obj).id, "listHolder");
                    doc = getIframeDocument(iframe);
                    if (doc && listHolder) {
                        doc.body.removeChild(listHolder);
                        return true;
                    }
                } else if (listHolder) {
                    doc.body.removeChild(listHolder);
                    return true;
                }
            } catch (oErr) {
                outPrint(oErr, "SelectBox.deleteListHolder", this);
            }
            return false;
        }
    };
    Util = {
        Select: {
            _FILE: SelectBox._FILE
        }
    };
})(Rsis, window);

var CrossDialogRsis = function($R) {
    return new function() {
        this._FILE = "006crossDialogRsis.js";
        this.version = JRetail.rsis.VersionJS;
    }();
}(Rsis);

this.childDialogArguments = null;

this._Wf = Rsis.fn.loader.getWf();

(function($R) {
    function _configAddressPrefix(address) {
        if (!address) return address;
        var addressPrefix = contextPath + "/jretail";
        return address.startsWith(addressPrefix) ? address : contextPath + address;
    }
    crossDialog = {
        windowDialog: null,
        errorMessage: "Nao foi possivel recuperar windowDialog, para abrir a tela do Relatorio.\n" + "Feche a(s) tela(s) ate o Menu Principal para executar o Relatorio\nErro:" + getMessageBundle("ERROR_FILE") + CrossDialogRsis._FILE + " " + getMessageBundle("ERROR_VERSION") + CrossDialogRsis.version + ".",
        _returnArray: window.dialogArguments,
        getReturnModal: function(returnModal) {
            return $R.browser.msie ? returnModal : returnModal ? returnModal[0] : null;
        },
        setParam: function(dialogName, key, value) {
            try {
                var UIContext = $R.UIContext.get(dialogName), p = UIContext.DialogParams();
                if (p == null || typeof p === "undefined" || typeof p === "string") {
                    p = [];
                }
                p[key] = value;
                UIContext.setDialogParams(p);
            } catch (oErr) {
                outPrint(oErr, ".setParam", CrossDialogRsis);
            }
        },
        setStatus: function(dialogName, s, f) {
            try {
                var UIContext = $R.UIContext.get(dialogName), p = UIContext.DialogParams();
                if (p == null || typeof p === "undefined" || typeof p === "string") {
                    p = [];
                }
                p["state"] = s;
                p["modalFormField"] = f;
                UIContext.setDialogParams(p);
            } catch (oErr) {
                outPrint(oErr, ".setStatus", CrossDialogRsis);
            }
        },
        setParamModal: function() {
            var paramArgs = [], args = arguments;
            if (args && args.length > 0) {
                paramArgs = args.length == 1 ? args[0] : args;
            }
            if ($R.browser.msie) {
                return paramArgs;
            } else {
                return [ paramArgs ];
            }
        },
        getDialogArguments: function(dialogName) {
            var returnArray = null;
            if (dialogName && window[dialogName]) {
                returnArray = window[dialogName].optns.dialogArguments;
                return returnArray ? returnArray : null;
            } else {
                returnArray = window.dialogArguments;
                return returnArray ? $R.browser.msie ? returnArray : returnArray[0] : null;
            }
        },
        getOpenerArguments: function(_arg_) {
            var returnArray = eval("window.opener." + _arg_ + ";");
            return returnArray ? $R.browser.msie ? returnArray : returnArray[0] : null;
        },
        setReturnValue: function() {
            var paramArgs = [], dialogName = null, args = argsToArray(arguments);
            if (args && args.length > 0) {
                dialogName = args.shift();
            }
            if (args && args.length > 0) {
                paramArgs = args;
            }
            if (dialogName && window[dialogName]) {
                var _dialog = window[dialogName];
                if (_dialog) _dialog.optns.returnValue = paramArgs.length == 1 ? paramArgs[0] : paramArgs;
            } else {
                window.returnValue = $R.browser.msie ? paramArgs : [ paramArgs ];
            }
        },
        showFile: function(_targetAction, _targetMethod, _params, _isDownload, _args, _title) {
            try {
                _title = isEmpty(_title) ? "_blank" : _title;
                if (typeof _params === "string" && _params === "") {
                    _params = "&xmlDomain=";
                }
                var params = [], brw = JRetail.browser;
                params["targetAction"] = _targetAction;
                params["targetMethod"] = _targetMethod;
                params["parameters"] = _params;
                params["isDownload"] = _isDownload;
                params["title"] = _title;
                window.childDialogArguments = this.setParamModal(params);
                var winTop = null;
                try {
                    winTop = window.open("about:blank", _title, _args);
                } catch (_e) {
                    if (isEmpty(_args)) {
                        var w = GetWidth();
                        var h = GetHeight();
                        _args = "menubar=no, location=no, scrollbars=yes, width=" + w + ", height=" + h;
                    }
                    winTop = window.open("about:blank", _title, _args);
                }
                if (winTop && winTop.closed == false) {
                    winTop.document.write(mountHtmlPage(params));
                    winTop.document.close();
                    winTop.focus();
                }
            } catch (oErr) {
                if (oErr instanceof MiddlewareViewException) {
                    alert(oErr.message);
                } else {
                    outPrint(oErr, ".showFile", CrossDialogRsis);
                }
            }
        },
        open: function(url, type, params, _args, brokeQueryString) {
            if (brokeQueryString) {
                params = this.getParamsQueryString(url, params);
            }
            window.childDialogArguments = this.setParamModal(params);
            var winTop = window.open(url, type, _args);
            if (winTop.closed == false) {
                winTop.dialogArguments = this.setParamModal(params);
            }
        },
        hasPlugin: function(ext) {
            var thisExt, findExt;
            for (var n = 0; n < navigator.plugins.length; n++) {
                for (var m = 0; m < navigator.plugins[n].length; m++) {
                    thisExt = navigator.plugins[n][m].description.toLowerCase();
                    findExt = thisExt.substring(0, thisExt.indexOf(" "));
                    if (findExt == ext) return true;
                }
            }
            return false;
        },
        getParamsQueryString: function(strHref, params) {
            if (!params) {
                params = [];
            }
            if (strHref && strHref.indexOf("?") > -1) {
                var strQueryString = strHref.substr(strHref.indexOf("?") + 1), aQueryString = strQueryString.split("&"), iParam = 0, maxQs = aQueryString.length;
                for (;iParam < maxQs; iParam++) {
                    var aParam = aQueryString[iParam].split("=");
                    if (aParam && aParam.length > 0 && aParam[0] !== "") {
                        params[unescape(aParam[0])] = unescape(aParam[1]);
                    }
                }
            }
            return params;
        },
        dialog: function(_params, dialogArguments) {
            try {
                if (!$R.isUndefined(Loading)) {
                    Loading.start(false);
                }
                var _onclose = null;
                if (typeof _params.callback == "function") {
                    _onclose = {
                        callback: _params.callback,
                        args: _params.callbackArgs
                    };
                }
                var dialog = $R.dialog();
                if (dialog) {
                    if (_params.width) {
                        _params.width = _params.width.replace("px", "").replace("%", "");
                    }
                    if (_params.height) {
                        _params.height = _params.height.replace("px", "").replace("%", "");
                    }
                    _params = this.getParamsQueryString(_params.url, _params);
                    _params.containerCss = {
                        width: _params.width || GetWidth(),
                        height: _params.height || GetHeight(),
                        left: _params.left,
                        top: _params.top,
                        right: _params.right,
                        float: _params["float"],
                        position: null
                    };
                    if (typeof dialogArguments !== "undefined") _params.dialogArguments = dialogArguments;
                    if (typeof _params.onClose === "function") _params.onClose = _onclose;
                    if (typeof _params.titlebar === "undefined") _params.titlebar = false;
                    if (typeof _params.fullscreen === "undefined") _params.fullscreen = false;
                    if (typeof _params.autoPosition === "undefined") _params.autoPosition = false;
                    if (typeof _params.modal === "undefined") _params.modal = false;
                    dialog.show(_params);
                }
            } catch (oErr) {
                outPrint(oErr, ".dialog", CrossDialogRsis);
            } finally {
                if (!$R.isUndefined(Loading)) {
                    Loading.stop(false);
                }
            }
        },
        show: function(_url, _params, _args, _callback, _callbackArgs) {
            try {
                if (!$R.isUndefined(Loading)) {
                    Loading.start(false);
                }
                _args = $R.isMobileDevice ? null : _args;
                _params = this.getParamsQueryString(_url, _params);
                var _onclose = null;
                if (typeof _callback == "function") {
                    _onclose = {
                        callback: _callback,
                        args: _callbackArgs
                    };
                }
                var dialog = $R.dialog();
                if (dialog) {
                    dialog.show({
                        url: _configAddressPrefix(_url),
                        dialogArguments: _params,
                        width: _args && _args[0] ? toInt(("" + _args[0]).replaceAll("px", "")) : null,
                        height: _args && _args[1] ? toInt(("" + _args[1]).replaceAll("px", "")) : null,
                        onClose: _onclose,
                        fullscreen: Rsis.isMobileDevice
                    });
                }
            } catch (oErr) {
                outPrint(oErr, ".showDialog", CrossDialogRsis);
            } finally {
                if (!$R.isUndefined(Loading)) {
                    Loading.stop(false);
                }
            }
        },
        close: function(name) {
            var dialog = window[name];
            if (dialog) {
                dialog.close();
                return true;
            }
            return false;
        }
    };
    function mountHtmlPage(jsonSerialized) {
        var html = '<html id="j_id_jsp_852758727_2"><head>';
        html += '<meta charset="' + $R.charset + '">';
        html += "<title>.::JRetail - Report::.</title>";
        html += '<link rel="shortcut icon" href="' + contextPath + contextResource + skinFolder + '/images/jretail.ico" type="image/x-icon">';
        html += '<link rel="stylesheet" type="text/css" href="' + contextPath + contextResource + skinFolder + '/css/rsis.css?version=1.30.1">';
        html += "<script> \n";
        html += ' var URL = "' + URL + '"; \n';
        html += ' var _targetAction = "' + jsonSerialized["targetAction"] + '"; \n';
        html += ' var _targetMethod = "' + jsonSerialized["targetMethod"] + '"; \n';
        html += ' var parameters = "' + jsonSerialized["parameters"] + '"; \n';
        html += " var isDownload = " + jsonSerialized["isDownload"] + "; \n";
        html += "<\/script>\n";
        html += "</head>";
        html += "<body>";
        html += '<form targetAction="" id="formView" node=""></form>';
        html += "<script>";
        html += 'var c = (document.all&&navigator.userAgent.indexOf("Win")!=-1)?1:0, \n';
        html += '\tv = navigator.appVersion.substring(navigator.appVersion.indexOf("MSIE ")+5, navigator.appVersion.indexOf("MSIE ")+8);';
        html += "\n";
        html += " function initView(){\n";
        html += " try {";
        html += " \n if (_targetAction && _targetMethod && parameters) {";
        html += ' var formView = window.document.getElementById("formView"), ';
        html += "\t  stringArgs;";
        html += ' if (formView && parameters !== "") {';
        html += '\tstringArgs = (""+parameters).split("&");';
        html += " if (stringArgs && stringArgs.length > 0) {";
        html += " for (var k=0; k < stringArgs.length; k++) {";
        html += " if (stringArgs[k]) {";
        html += ' var stringParam = stringArgs[k].split("=");';
        html += " if (stringParam[0]) {";
        html += ' var inputHidden   = document.createElement("INPUT");';
        html += " inputHidden.id    = stringParam[0];";
        html += " inputHidden.name  = stringParam[0];";
        html += ' inputHidden.type  = "hidden";';
        html += ' inputHidden.value = unescape(stringParam[1]?stringParam[1]:""); ';
        html += " formView.appendChild(inputHidden);";
        html += " }}}";
        html += ' formView.setAttribute("method", "POST");';
        html += ' formView.setAttribute("action", URL +"?targetAction="+ _targetAction + "&targetMethod=" + _targetMethod);';
        html += " formView.submit();";
        html += " }}";
        html += " }} catch(e) {";
        html += " alert(e);";
        html += " }}";
        html += "\n initView(); ";
        html += "<\/script>";
        html += "</body></html>";
        return html;
    }
    function argsToArray(args) {
        var array = [];
        if (args && args.length > 0) {
            for (var k = 0; k < args.length; k++) {
                array[k] = args[k];
            }
        }
        return array;
    }
})(Rsis);

(function($R) {
    var doc = document, d = [], w = [];
    $R.dialog = function() {
        return new $R._dialog();
    };
    $R._dialog = function() {
        this._FILE = CrossDialogRsis._FILE;
        this.d = {};
        this.id = null;
        this.gPopupIsShown = false;
        this.gHideSelects = false;
        this.gTabIndexes = new Array();
        this.gTabbableTags = new Array("A", "BUTTON", "TEXTAREA", "INPUT", "IFRAME"), this.create = function(id) {
            try {
                this.id = id;
                window[this.id] = this;
                $R.UIContext.add(this.id, $R.UIContext.getInstance(this));
                this.optns.zIndex = this.optns.zIndex + $R._dialogSequence;
                $R._dialogSequence += 1;
                var theBody = $Tag("BODY")[0], popmask = $(this.id + "." + $R._dialog.defaults.overlayId), popcont = $(this.id);
                if (this.optns.modal) {
                    if (!popmask) {
                        popmask = doc.createElement("div");
                        popmask.id = this.id + "." + $R._dialog.defaults.overlayId;
                        popmask.className = "confirm-overlay";
                        popmask.setAttribute("dialogElement", "true");
                        popmask.classList.add("dialog-active");
                        theBody.appendChild(popmask);
                    }
                }
                if (!popcont) {
                    popcont = doc.createElement("div");
                    popcont.id = this.id;
                    popcont.className = "confirm-container";
                    popcont.setAttribute("component", "dialog");
                    popcont.setAttribute("name", "dialog");
                    popcont.setAttribute("data-active", "yes");
                    popcont.innerHTML = '<div class="dmyu"><div class"dmr">Carregando...</div></div>';
                }
                if (popcont) {
                    popcont.innerHTML = this.strhtml(this.id);
                    $R(popcont).visible(false);
                    theBody.appendChild(popcont);
                }
                this.d.overlay = popmask;
                this.d.container = popcont;
                this.d.contentWindow = $(this.id);
                this.d.contentDialog = $(this.id + "." + $R._dialog.defaults.containerId);
            } catch (oErr) {
                outPrint(oErr, ".create", this);
            }
        };
        this.getNewDialogId = function() {
            return "ui" + getNewDialogId();
        };
        this.show = function(options) {
            try {
                var config = $R.extend({}, $R._dialog.defaults);
                this.optns = $R.extend({}, config, options);
                var instanceName = Rsis.fn.loader.locationStorage(this.optns.url, "ui" + getNewDialogId());
                this.create(instanceName);
                var __MONITOR_WIDTH = GetWidth(), __MONITOR_HEIGHT = GetHeight();
                if (typeof _Wf.StartLoadingDialog == "function") {
                    _Wf.StartLoadingDialog(instanceName);
                }
                var width = this.optns.width || __MONITOR_WIDTH - 7, height = this.optns.height || __MONITOR_HEIGHT, showCloseBox = this.optns.close, fullscreen = this.optns.fullscreen;
                $R._dialogSequence += 1;
                if (this.optns.modal && this.d.overlay) {
                    this.css(this.d.overlay, $R.extend(this.optns.overlayCss, {
                        display: "none",
                        opacity: this.optns.opacity / 100,
                        height: fullscreen ? "100%" : this.optns.dialog ? d[0] : 0,
                        width: fullscreen ? "100%" : this.optns.dialog ? d[1] : 0,
                        position: "absolute",
                        "overflow-y": "auto",
                        left: 0,
                        top: 0,
                        zIndex: this.optns.zIndex + $R._dialogSequence
                    }));
                }
                $R._dialogSequence += 1;
                this.css(this.d.container, $R.extend(this.optns.overlayCss, {
                    position: this.optns.fixed ? "fixed" : "absolute"
                }, this.containerCss, {
                    display: "none",
                    zIndex: this.optns.zIndex + $R._dialogSequence,
                    opacity: 1
                }));
                var popupTitleBar = $(this.id + ".popupTitleBar"), popCloseBox = $(this.id + ".popCloseBox"), titleBarHeight = 0;
                if (popCloseBox) {
                    popCloseBox.onclick = function(e) {
                        crossDialog.close();
                    };
                }
                this.gPopupIsShown = true;
                this.disableTabIndexes();
                this.getDimensions();
                this.center();
                var _Ht_ = __MONITOR_HEIGHT === height ? __MONITOR_HEIGHT : toInt(height) + titleBarHeight;
                var _width = fullscreen || this.optns.width == null ? "100%" : toInt(width) + "px";
                var _height = fullscreen || this.optns.height == null ? "100%" : _Ht_ + "px";
                $R.$(this.d.contentDialog).css({
                    width: _width,
                    position: "relative",
                    display: "block",
                    height: fullscreen ? "100%" : _Ht_ - 31 + "px"
                });
                var loading = $(this.id + ".loading");
                if (loading) {
                    loading.style.height = fullscreen ? "100%" : _Ht_ - 31 + "px";
                }
                this.sizeBackgroundPanel();
                if (this.optns.modal && this.d.overlay) $R(this.d.overlay).show();
                $R.$(this.d.container).css({
                    width: _width,
                    height: _height,
                    display: "inline-block",
                    visibility: "visible"
                });
                $R.$(this.d.container).show(200);
                this.d.contentWindow.style.height = _height;
                if (fullscreen) {
                    $R.$(this.d.container).css({
                        top: 0,
                        left: 0
                    });
                }
                this.d.contentWindow.dialogArguments = this.optns.dialogArguments;
                var urlId = this.optns.url;
                if (!urlId) {
                    alert("A URL deve ser informada!\nThe URL must be informed!");
                    return false;
                }
                if (urlId && urlId.search(/\?/) == -1) {
                    urlId += "?";
                }
                var fileConfig = {
                    instance: this.id,
                    object: this.d.contentWindow,
                    url: urlId + "&ui=" + escapeParam(this.id, false),
                    contentDialog: this.d.contentDialog,
                    visibled: true
                };
                Rsis.fn.loader.file(fileConfig);
                if (this.gHideSelects == true) {
                    this.hideSelectBoxes();
                }
            } catch (oErr) {
                if (typeof _Wf.StopLoadingWinDialog == "function") {
                    _Wf.StopLoadingWinDialog();
                    _Wf.dataUiLoadingOk = false;
                }
                outPrint(oErr, ".show", this);
            }
        };
        this.close = function() {
            try {
                this.gPopupIsShown = false;
                var theBody = $Tag("BODY")[0];
                if (theBody) theBody.style.overflow = "";
                this.restoreTabIndexes();
                if (this.d.container == null) {
                    return;
                }
                if (this.optns.modal && this.d.overlay) $R(this.d.overlay).hide();
                $R.$(this.d.container).hide(200);
                if (this.optns.onClose != null && typeof this.optns.onClose === "object" && typeof this.optns.onClose.callback == "function") {
                    this.remove();
                    if (this.gHideSelects == true) {
                        this.displaySelectBoxes();
                    }
                    this.optns.onClose.callback.apply(null, [ this.optns.returnValue, this.optns.onClose.args, this.optns ]);
                } else {
                    this.remove();
                    if (this.gHideSelects == true) {
                        this.displaySelectBoxes();
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "this.close()", this);
            }
        };
        this.unLocatedObjects = function() {
            var dataUi = this.id;
            var allcs = window[dataUi].allocatedObjects;
            if (allcs && allcs.length > 0) {
                for (var it = 0; it < allcs.length; it++) {
                    var _fn = allcs[it];
                    var ar = _fn.split(".");
                    var v = "", arr = [];
                    for (var k = 0; k < ar.length; k++) {
                        var v1 = ar[k];
                        if (v !== "" && v1 && k > 0) {
                            v += "." + v1;
                        } else v = v1;
                        arr.push(v);
                    }
                    var k = arr.length, max = arr.length - 1;
                    for (;k >= 0; k--) {
                        var _o = null;
                        try {
                            _o = eval(arr[k]);
                        } catch (_e) {}
                        if (typeof _o !== "undefined" && _o != null && _o.dataUi === dataUi) {
                            for (var i in _o) {
                                _o[i] = null;
                                delete _o[i];
                            }
                            try {
                                delete window[arr[k]];
                            } catch (_e) {
                                window[arr[k]] = undefined;
                            }
                        }
                    }
                }
            }
        };
        this.removeScript = function() {
            var body = document.body, dataUi = this.id, _head = document.head, rsis_load_ = $("rsis_load_" + dataUi);
            if (rsis_load_) {
                body.removeChild(rsis_load_);
            }
            var _fm_dialog = $("_fm_dialog_" + dataUi);
            if (_fm_dialog) {
                body.removeChild(_fm_dialog);
            }
            var _on_inj_done_ = $("_on_inj_done_" + dataUi);
            if (_on_inj_done_) {
                body.removeChild(_on_inj_done_);
            }
            var vs = document.scripts;
            if (vs && vs.length > 0) {
                for (var it = 0; it < vs.length; it++) {
                    if (vs[it] && vs[it].getAttribute("data-ui") === dataUi) {
                        if (!Rsis.browser.msie) {
                            _head.removeChild(vs[it]);
                        } else {
                            vs[it].parentNode.removeChild(vs[it]);
                        }
                    }
                }
            }
        };
        this.remove = function() {
            var body = document.body, popmask = $(this.id + "." + $R._dialog.defaults.overlayId), popcont = $(this.id), pwdBox = $("pwdBox");
            if (Crud && Crud.HELP_KEY_PRESS) {
                Crud.help(this.d.container);
            }
            shortcut.removeUi();
            if (popcont && popcont.parentNode) {
                popcont.parentNode.removeChild(popcont);
            } else if (popcont) {
                body.removeChild(popcont);
            }
            if (popmask && popmask.parentNode) {
                popmask.parentNode.removeChild(popmask);
            } else if (popmask) {
                body.removeChild(popmask);
            }
            if (typeof NavigableTree !== "undefined" && typeof NavigableTree.removeByDialogId == "function") {
                NavigableTree.removeByDialogId(this.id);
            }
            if (pwdBox && pwdBox.parentNode) {
                pwdBox.parentNode.removeChild(pwdBox);
            } else if (pwdBox) {
                body.removeChild(pwdBox);
            }
            JRetail.toolTip.remove(this);
            $R.Cache.removeStateDisplay(this.id);
            $R("calendarDiv").hide();
            this.unLocatedObjects();
            this.removeScript();
            $R.fn.loader.inactiveLocationStorage(this.optns.url, this.id);
            $R.UIContext.remove(this.id);
            try {
                delete window[this.id];
            } catch (_e) {
                window[this.id] = undefined;
            }
            $R._dialogSequence -= 3;
            this.d = {};
        };
        this.getVal = function(v, d) {
            return v ? typeof v === "number" ? v : v === "auto" ? 0 : v.indexOf("%") > 0 ? toInt(v.replace(/%/, "")) / 100 * (d === "h" ? w[0] : w[1]) : toInt(v.replace(/px/, "")) : null;
        };
        this.setTextTitleBar = function() {
            if (!this.optns.titlebar) return;
            var text = arguments && arguments[0] ? arguments[0] : this.optns.title;
            var userLoja = arguments && arguments[1] ? " - [" + arguments[1] + "]" : "";
            text = typeof text !== "undefined" && text != null && text !== "" ? text : "::";
            if (text) {
                text = text + " :: " + getMessageBundle("ERROR_VERSION") + UIRsis.version + userLoja + " ::.";
                var div = div = $(this.id + ".popupTitleBar");
                if (div) {
                    div.innerHTML = "<span>" + text + '</span><div id="modal-close-box" dialogElement="yes"><a href="javascript:void(0)" title="Close" id="popCloseBox" ' + " onclick=\"Rsis.closeListHolder(event); return crossDialog.close('" + this.id + '\');" class="modal-close" dialogElement="yes">&nbsp;</a></div>';
                }
            }
        };
        this.getDimensions = function() {
            var s = this, d, h = typeof window.innerHeight === "undefined" ? getViewportHeight() : window.innerHeight;
            d = [ getViewportHeight(), getViewportWidth() ];
            w = [ h, getViewportWidth() ];
        };
        this.setPosition = function() {
            var s = this, top, left, hc = w[0] / 2 - s.d.container.outerHeight / 2, vc = w[1] / 2 - s.d.container.outerWidth / 2, st = s.d.container.style.position !== "fixed" ? getScrollTop() : 0;
            if (s.optns.position && Object.prototype.toString.call(s.optns.position) === "[object Array]") {
                top = st + (s.optns.position[0] || hc);
                left = s.optns.position[1] || vc;
            } else {
                top = st + hc;
                left = vc;
            }
            this.css(s.d.container, {
                left: left,
                top: top
            });
        };
        this.center = function() {
            var s = this, width = s.optns.width, height = s.optns.height, titlebar = s.optns.titlebar;
            var __MONITOR_WIDTH = GetWidth(), __MONITOR_HEIGHT = GetHeight();
            if (s.gPopupIsShown == true) {
                if (width == null || isNaN(width)) {
                    width = s.d.container.offsetWidth;
                }
                if (height == null) {
                    height = s.d.container.offsetHeight;
                }
                var theBody = $Tag("BODY")[0], scTop = parseInt(getScrollTop(), 10), scLeft = parseInt(theBody.scrollLeft, 10);
                s.sizeBackgroundPanel();
                var titleBarHeight = 0, fullHeight = getViewportHeight(), fullWidth = getViewportWidth();
                if (typeof titlebar == "undefined") titlebar = true;
                var popupTitleBar = $(s.id + ".popupTitleBar");
                if (popupTitleBar) {
                    if (titlebar) titleBarHeight = parseInt(popupTitleBar.offsetHeight, 10); else $R(popupTitleBar).hide();
                }
                s.d.container.style.top = s.optns.fullscreen || width == 0 ? "0" : (__MONITOR_WIDTH === width ? 0 : scTop + (fullHeight - (height + titleBarHeight)) / 2) + "px";
                s.d.container.style.left = s.optns.fullscreen || height == 0 ? "0" : (__MONITOR_HEIGHT === height ? 0 : scLeft + (fullWidth - width) / 2) + "px";
                if (!s.optns.autoPosition) this.setPosition();
                if (!s.optns.modal && s.optns.containerCss) {
                    var st = s.d.container.style;
                    st.width = s.optns.containerCss.width;
                    st.height = s.optns.containerCss.height;
                    st.left = s.optns.containerCss.left;
                    st.top = s.optns.containerCss.top;
                    st.right = s.optns.containerCss.right;
                    st["float"] = s.optns.containerCss["float"];
                }
            }
        };
        this.bindEvents = function() {
            window.onresize = this.resize();
            window.onscroll = this.resize();
        };
        this.resize = function() {
            var s = this;
            var width = s.optns.width, height = s.optns.height, showCloseBox = s.optns.close;
            var __MONITOR_WIDTH = GetWidth(), __MONITOR_HEIGHT = GetHeight();
            s.getDimensions();
            s.center();
            var titleBarHeight = 0, popupTitleBar = $(s.id + ".popupTitleBar");
            if (popupTitleBar) {
                if (s.optns.titlebar) titleBarHeight = parseInt(popupTitleBar.offsetHeight, 10); else $R(popupTitleBar).hide();
            }
            var _Ht_ = __MONITOR_HEIGHT < height ? __MONITOR_HEIGHT : toInt(height) + titleBarHeight;
            s.d.container.style.width = __MONITOR_WIDTH < width ? "100%" : width + "px";
            s.d.container.style.height = _Ht_ + "px";
            s.d.contentDialog.style.height = _Ht_ - 31 + "px";
            if (!s.optns.modal && s.optns.containerCss) {
                var st = s.d.container.style;
                st.width = s.optns.containerCss.width;
                st.height = s.optns.containerCss.height;
                st.left = s.optns.containerCss.left;
                st.top = s.optns.containerCss.top;
                st.right = s.optns.containerCss.right;
                st["float"] = s.optns.containerCss["float"];
                if (s.optns.containerCss.height) {
                    var _Ht_ = s.optns.containerCss.height.replaceAll("px", "");
                    s.d.contentDialog.style.height = _Ht_ - 31 + "px";
                }
            }
        };
        this.sizeBackgroundPanel = function() {
            var s = this;
            var theBody = $Tag("BODY")[0], fullHeight = getViewportHeight(), fullWidth = getViewportWidth();
            if (fullHeight > theBody.scrollHeight) {
                popHeight = fullHeight;
            } else {
                popHeight = theBody.scrollHeight;
            }
            if (fullWidth > theBody.scrollWidth) {
                popWidth = fullWidth;
            } else {
                popWidth = theBody.scrollWidth;
            }
            if (s.optns.modal && s.d.overlay) {
                s.d.overlay.style.height = popHeight + "px";
                s.d.overlay.style.width = popWidth + "px";
            }
        };
        this.strhtml = function(id) {
            var str = "";
            str += '<div id="' + id + '.modalwrap" class="simplemodal-wrap">';
            str += '\t<div id="confirm" style="display: block;" dialogElement="yes">';
            str += '\t\t<div id="' + id + '.popupTitleBar" class="header" dialogElement="yes"><span></span></div>';
            str += "\t</div>";
            str += '\t<div id="' + id + '.loading" class="wdloading" style="display:none;">';
            str += '\t<div class="cmsg"><div class="msg">Carregando&hellip;</div>';
            str += '\t<div class="lpb"><div id="' + id + '.lpt" class="wdlpt" style="width:10%;"></div></div></div>';
            str += "\t</div>";
            str += '\t<div style="width:100%;height:100%;background-color:transparent;overflow-y:auto" data-index="0"';
            str += '\t id="' + id + "." + $R._dialog.defaults.containerId + '" data-ui="' + id + '" name="dialog" dialogElement="yes">';
            str += "\t</div>";
            str += "</div>";
            return str;
        };
        this.css = function(element, styles) {
            try {
                var STANDARD_CSS_OPACITY_SUPPORTED = function() {
                    var DIV = document.createElement("div");
                    DIV.style.cssText = "opacity:.55";
                    return /^0.55/.test(DIV.style.opacity);
                }();
                this.stripAlphaFromFilter_IE = function(filter) {
                    return (filter || "").replace(/alpha\([^\)]*\)/gi, "");
                };
                this.setOpacity_IE = function(element, value) {
                    if (STANDARD_CSS_OPACITY_SUPPORTED) {
                        return this.setOpacity(element, value);
                    }
                    element = this.hasLayout_IE(element);
                    var style = element.style, filter = style.filter;
                    if (value == 1 || value === "") {
                        filter = this.stripAlphaFromFilter_IE(filter);
                        if (filter) style.filter = filter; else style.removeAttribute("filter");
                        return element;
                    }
                    if (value < 1e-5) value = 0;
                    style.filter = this.stripAlphaFromFilter_IE(filter) + "alpha(opacity=" + value * 100 + ")";
                    return element;
                };
                this.hasLayout_IE = function(element) {
                    if (!element.currentStyle.hasLayout) element.style.zoom = 1;
                    return element;
                };
                this.setOpacity = function(element, value) {
                    if (value == 1 || value === "") value = ""; else if (value < 1e-5) value = 0;
                    element.style.opacity = value;
                    return element;
                };
                var elementStyle = element.style;
                if (typeof styles === "string") {
                    elementStyle.cssText += ";" + styles;
                    if (styles.include("opacity")) {
                        var opacity = styles.match(/opacity:\s*(\d?\.?\d*)/)[1];
                        this.setOpacity(element, opacity);
                    }
                    return element;
                }
                for (var property in styles) {
                    if (property === "opacity") {
                        this.setOpacity(element, styles[property]);
                    } else {
                        var value = styles[property];
                        if (property === "float" || property === "cssFloat") {
                            property = Rsis.isUndefined(elementStyle.styleFloat) ? "cssFloat" : "styleFloat";
                        }
                        elementStyle[property] = value;
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "this.css()", this);
            }
            return element;
        };
        this.keyDownHandler = function(e) {
            if (this.gPopupIsShown && e.keyCode == 9) return false;
        };
        this.disableTabIndexes = function() {
            if (doc.all) {
                var i = 0;
                for (var j = 0; j < this.gTabbableTags.length; j++) {
                    var tagElements = $Tag(this.gTabbableTags[j]);
                    for (var k = 0; k < tagElements.length; k++) {
                        this.gTabIndexes[i] = tagElements[k].tabIndex;
                        tagElements[k].tabIndex = "-1";
                        i++;
                    }
                }
            }
        };
        this.restoreTabIndexes = function() {
            if (doc.all) {
                var i = 0;
                for (var j = 0; j < this.gTabbableTags.length; j++) {
                    var tagElements = doc.getElementsByTagName(this.gTabbableTags[j]);
                    for (var k = 0; k < tagElements.length; k++) {
                        tagElements[k].tabIndex = this.gTabIndexes[i];
                        tagElements[k].tabEnabled = true;
                        i++;
                    }
                }
            }
        };
        this.hideSelectBoxes = function() {
            var x = $Tag("SELECT");
            for (i = 0; x && i < x.length; i++) {
                x[i].style.visibility = "hidden";
            }
        };
        this.displaySelectBoxes = function() {
            var x = $Tag("SELECT");
            for (i = 0; x && i < x.length; i++) {
                x[i].style.visibility = "visible";
            }
        };
    };
    $R._dialogSequence = 0;
    $R._dialog.defaults = {
        dialogArguments: null,
        returnValue: null,
        opacity: 50,
        overlayId: "overlay",
        overlayCss: {},
        containerId: "container",
        containerCss: {},
        minHeight: null,
        minWidth: null,
        maxHeight: null,
        maxWidth: null,
        autoResize: false,
        autoPosition: true,
        width: null,
        height: null,
        zIndex: 50,
        close: true,
        closeHTML: '<div id="modal-close-box"><a class="modalCloseImg" title="Close">&nbsp;</a></div>',
        closeClass: "confirm-close",
        escClose: true,
        overlayClose: false,
        fixed: false,
        position: [ ".2%", ".2%" ],
        persist: false,
        modal: true,
        fullscreen: false,
        message: null,
        titlebar: true,
        title: null,
        onOpen: null,
        onShow: null,
        onClose: {
            args: [],
            callback: function() {
                return null;
            }
        }
    };
    function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }
    function getNewDialogId() {
        var mLetras = "abcdefghijlmnpqrstuvxyzABCDEFGHIJLMNOPQRSTYXYZ0123456789", codigo = "", x = 0;
        for (;x < 4; x++) {
            var t = getRandomInt(0, 55);
            codigo = codigo + mLetras.substring(t - 1, t);
        }
        return codigo;
    }
    function getViewportHeight() {
        if (window.innerHeight != window.undefined) return window.innerHeight;
        if (doc.compatMode == "CSS1Compat") return doc.documentElement.clientHeight;
        if (doc.body) return doc.body.clientHeight;
        return window.undefined;
    }
    function getViewportWidth() {
        var offset = 17;
        var width = null;
        if (window.innerWidth != window.undefined) return window.innerWidth;
        if (doc.compatMode == "CSS1Compat") return doc.documentElement.clientWidth;
        if (doc.body) return doc.body.clientWidth;
    }
    function getScrollTop() {
        if (self.pageYOffset) {
            return self.pageYOffset;
        } else if (doc.documentElement && doc.documentElement.scrollTop) {
            return doc.documentElement.scrollTop;
        } else if (doc.body) {
            return doc.body.scrollTop;
        }
    }
    function getScrollLeft() {
        if (self.pageXOffset) {
            return self.pageXOffset;
        } else if (doc.documentElement && doc.documentElement.scrollLeft) {
            return doc.documentElement.scrollLeft;
        } else if (doc.body) {
            return doc.body.scrollLeft;
        }
    }
    if (!doc.all) {
        doc.onkeypress = $R._dialog.keyDownHandler;
    }
    $R.jsLoad = function(win, doc) {
        var env, head, pending = {}, pollCount = 0, queue = {
            js: []
        };
        function createNode(name, attrs) {
            var node = doc.createElement(name), attr;
            for (attr in attrs) {
                if (attrs.hasOwnProperty(attr)) {
                    node.setAttribute(attr, attrs[attr]);
                }
            }
            return node;
        }
        function finish(type) {
            var p = pending[type], callback, urls;
            if (p) {
                callback = p.callback;
                urls = p.urls;
                urls.shift();
                pollCount = 0;
                if (!urls.length) {
                    if (callback) {
                        callback.call(p.context, p.obj);
                    }
                    pending[type] = null;
                    if (queue[type].length) {
                        load(type);
                    }
                }
            }
        }
        function getEnv() {
            if (env) {
                return;
            }
            var ua = navigator.userAgent;
            env = {
                async: doc.createElement("script").async === true
            };
            (env.webkit = /AppleWebKit\//.test(ua)) || (env.ie = /MSIE/.test(ua)) || (env.opera = /Opera/.test(ua)) || (env.gecko = /Gecko\//.test(ua)) || (env.unknown = true);
        }
        function load(type, urls, callback, obj, context) {
            var _finish = function() {
                finish(type);
            }, i, len, node, p, pendingUrls, url;
            getEnv();
            if (urls) {
                urls = typeof urls === "string" ? [ urls ] : urls.concat();
                env.async = false;
                if (env.async || env.gecko || env.opera) {
                    queue[type].push({
                        urls: urls,
                        callback: callback,
                        obj: obj,
                        context: context
                    });
                } else {
                    for (i = 0, len = urls.length; i < len; ++i) {
                        queue[type].push({
                            urls: [ urls[i] ],
                            callback: i === len - 1 ? callback : null,
                            obj: obj,
                            context: context
                        });
                    }
                }
            }
            if (pending[type] || !(p = pending[type] = queue[type].shift())) {
                return;
            }
            head || (head = doc.head || doc.getElementsByTagName("head")[0]);
            pendingUrls = p.urls;
            for (i = 0, len = pendingUrls.length; i < len; ++i) {
                url = pendingUrls[i];
                node = createNode("script", {
                    charset: "utf-8",
                    type: "text/javascript",
                    src: url
                });
                if (env.ie) {
                    node.onreadystatechange = function() {
                        var readyState = this.readyState;
                        if (readyState === "loaded" || readyState === "complete") {
                            this.onreadystatechange = null;
                            _finish();
                        }
                    };
                } else {
                    node.onload = node.onerror = _finish;
                }
                head.appendChild(node);
            }
        }
        return {
            js: function(urls, callback, obj, context) {
                load("js", urls, callback, obj, context);
            }
        };
    }(window, window.document);
})(Rsis);

function LoadingRsis() {}

LoadingRsis._FILE = "007loadingRsis.js";

LoadingRsis.version = JRetail.rsis.VersionJS;

(function() {
    Loading = {
        vis: [ "block", "visible" ],
        hid: [ "none", "hidden" ],
        contentPanel: null,
        loadingPanel: null,
        loadingDialog: null,
        messageLabel: null,
        imgPleaseWait: null,
        width: 0,
        height: 0,
        init: function() {
            try {
                this.getWidthHeight();
                this.messageLabel = $("messageLabel");
                this.imgPleaseWait = $("imgPleaseWait");
                this.contentPanel = $("contentPanel");
                this.loadingDialog = $("loadingDialog");
                this.loadingPanel = $("ldgPnl");
                if (this.loadingPanel != null) {
                    var ld = this.loadingPanel.style;
                    ld.width = "100%";
                    ld.height = "100%";
                }
            } catch (oErr) {
                outPrint(oErr, "LoadingRsis.init()", LoadingRsis);
            }
        },
        getWidthHeight: function() {
            try {
                var doc = document, ie = Rsis.browser.msie, ieBox = ie && (doc.compatMode == null || doc.compatMode === "BackCompat"), canvasEl = ieBox ? doc.body : doc.documentElement;
                this.width = window.innerWidth || canvasEl.clientWidth;
                this.height = window.innerHeight || canvasEl.clientHeight;
            } catch (oErr) {
                outPrint(oErr, "LoadingRsis.getWidthHeight()", LoadingRsis);
            }
        },
        start: function(op) {
            var vis = this.vis, hid = this.hid;
            if (this.loadingPanel != null) {
                var st = this.loadingPanel.style;
                st.display = vis[0];
                st.visibility = vis[1];
            }
            var visDialog = "undefined" !== typeof op ? op ? vis : hid : vis;
            if (this.loadingDialog != null) {
                var stD = this.loadingDialog.style;
                stD.display = "table";
                stD.visibility = visDialog[1];
            }
            if (this.imgPleaseWait != null) {
                var stI = this.imgPleaseWait.style;
                stI.display = visDialog[0];
                stI.visibility = visDialog[1];
            }
            if (this.loadingDialog != null) {
                this.loadingDialog.className = "dgPnl";
                if (this.width == 0 || this.height == 0) {
                    this.getWidthHeight();
                }
                var stL = this.loadingDialog.style;
                if (stL) {
                    stL.left = Math.ceil((parseInt(this.width) - 270) / 2) + "px";
                    stL.top = Math.ceil((parseInt(this.height) - 85) / 2) + "px";
                }
            }
        },
        stop: function() {
            var hid = this.hid;
            if (this.loadingPanel != null) {
                var st = this.loadingPanel.style;
                st.display = hid[0];
                st.visibility = hid[1];
            }
            if (this.loadingDialog != null) {
                var stD = this.loadingDialog.style;
                stD.display = hid[0];
                stD.visibility = hid[1];
            }
            if (this.imgPleaseWait != null) {
                var stI = this.imgPleaseWait.style;
                stI.display = hid[0];
                stI.visibility = hid[1];
            }
        },
        readyState: function(f) {
            try {
                var req = Properties.getProperty(f), msg = this.messageLabel, str = "", MS_R = "MSG_READSTATE_", fnb = getMessageBundle;
                if (req) {
                    switch (req.readyState) {
                      case 0:
                        str = fnb(MS_R + "0", "Aguarde. Inicializando...");
                        break;

                      case 1:
                        str = fnb(MS_R + "1", "Aguardando Dados do Servidor...");
                        break;

                      case 2:
                        str = fnb(MS_R + "2", "Dados Recebidos. Iniciando Processamento...");
                        break;

                      case 3:
                        str = fnb(MS_R + "3", "Processando Dados Recebidos...");
                        break;

                      case 4:
                        this.stop();
                        break;
                    }
                    if (msg && req.readyState < 4) {
                        msg.className = "dgMsgs";
                        msg.innerHTML = str;
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "Loading.readyState()", LoadingRsis);
            }
        }
    };
})();

(function($R) {
    var _class = "Message";
    MessagesRsis = {
        _FILE: "008messagesRsis.js",
        version: JRetail.rsis.VersionJS
    };
    Message = {
        STRXML: '<?xml version="1.0" encoding="' + $R.charset + '"?>',
        XMLMSG: "/xmlMessages",
        PATHNODE: "/xmlMessages/message",
        PATH_NODE_HTML: "/html/body/h1",
        _override: true,
        getOverride: function() {
            return this._override;
        },
        setOverride: function(_o) {
            this._override = _o;
        },
        render: function(UIForm, objXML) {
            try {
                if (UIForm) {
                    this.setXML(UIForm, objXML);
                    this.outPrint(UIForm);
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".render()", MessagesRsis);
            }
        },
        close: function(UIForm) {
            try {
                if (UIForm) {
                    closeMessages(UIForm.getUIComponent("messages"));
                    UIForm.messagesXML = null;
                    UIForm.getMsgTemp();
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".close()", MessagesRsis);
            }
        },
        setXML: function(UIForm, objXML) {
            try {
                if (this.getOverride()) {
                    var xmlMessages = null;
                    if (objXML) {
                        xmlMessages = XML.broke(objXML, this.XMLMSG);
                        if (!xmlMessages) {
                            var objNo = getNodes(objXML, "/html");
                            if (objNo && objNo.length > 0) {
                                xmlMessages = createObjXML(this.STRXML + objNo.item(0).xml + "");
                            }
                        }
                    } else if (UIForm) {
                        xmlMessages = UIForm.messagesXML;
                    }
                    if (UIForm && objXML) {
                        UIForm.messagesXML = xmlMessages;
                    }
                } else {
                    this.add(UIForm, objXML);
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".setXML()", MessagesRsis);
            }
        },
        getXML: function(UIForm, objXML) {
            try {
                var xmlMessages = null;
                if (objXML) {
                    xmlMessages = XML.broke(objXML, this.XMLMSG);
                    if (!xmlMessages) {
                        var objNo = getNodes(objXML, "/html");
                        if (objNo && objNo.length > 0) {
                            xmlMessages = createObjXML(this.STRXML + objNo.item(0).xml + "");
                        }
                    }
                } else if (UIForm) {
                    xmlMessages = UIForm.messagesXML;
                }
                if (UIForm && objXML) {
                    UIForm.messagesXML = xmlMessages;
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".getXML()", MessagesRsis);
            }
            return xmlMessages;
        },
        add: function(UIForm, objXML) {
            try {
                if (UIForm && objXML) {
                    var xmlMessages = XML.broke(objXML, this.XMLMSG);
                    if (!xmlMessages) {
                        var objNo = getNodes(objXML, "/html");
                        if (objNo && objNo.length > 0) {
                            xmlMessages = createObjXML(this.STRXML + objNo.item(0).xml + "");
                        }
                    }
                    if (!this.getOverride() && UIForm.messagesXML == null) {
                        UIForm.messagesXML = UIForm.getMsgTemp();
                    }
                    if (xmlMessages) {
                        if (UIForm.messagesXML) {
                            var nodes = getNodes(xmlMessages, this.PATHNODE);
                            if (nodes && nodes.length > 0) {
                                var fatherNode = XML.getSingleNode(UIForm.messagesXML, this.XMLMSG);
                                for (var i = 0; i < nodes.length; i++) {
                                    Sarissa.appendChildNode(fatherNode, nodes.item(i));
                                }
                            }
                        } else {
                            UIForm.messagesXML = xmlMessages;
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".add()", MessagesRsis);
            } finally {
                this.setOverride(true);
            }
        },
        outPrint: function(UIForm) {
            try {
                if (UIForm && UIForm.messagesXML) {
                    UIForm.hasError = this.hasError(UIForm.messagesXML) || this.hasErrorHTML(UIForm.messagesXML) ? true : false;
                    this.closePwdBox(UIForm.getForm());
                    this.transferMessages(UIForm);
                    this.print(UIForm);
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".outPrint()", MessagesRsis);
            }
        },
        transferMessages: function(UIForm) {
            try {
                if (UIForm.messagesXML != null) {
                    var UIFormChild = UIForm.getUIForm();
                    if (UIFormChild != null) {
                        UIFormChild.messagesXML = cloneObjXML(UIForm.messagesXML);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".transferMessages()", MessagesRsis);
            }
        },
        hasError: function(messagesXML) {
            return this.hasMessage(messagesXML, this.PATHNODE, "[@error='true']");
        },
        hasErrorHTML: function(messagesXML) {
            return this.hasMessage(messagesXML, this.PATH_NODE_HTML, "");
        },
        hasMessage: function(messagesXML, path, param) {
            try {
                if (messagesXML != null) {
                    if (typeof param !== "string") param = "";
                    var nodes = getNodes(messagesXML, path + param);
                    return nodes && nodes.length > 0 ? true : false;
                } else {
                    return false;
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".hasMessage()", MessagesRsis);
                return true;
            }
            return false;
        },
        getPrintParams: function(UIForm, objXML, xpathNode) {
            try {
                if (UIForm) {
                    var xmlMsg = UIForm.messagesXML;
                    if (objXML != null) {
                        xmlMsg = objXML;
                    }
                    var message = UIForm.getUIComponent("messages");
                    if (message) {
                        var messageType = message.getAttribute("messageType"), hasMsgDefault = true, nodes = getNodes(xmlMsg, xpathNode);
                        if (!(nodes && nodes.length > 0) && xpathNode !== this.PATH_NODE_HTML) {
                            nodes = getNodes(xmlMsg, this.PATH_NODE_HTML);
                            hasMsgDefault = false;
                        }
                        if (nodes && nodes.length > 0) {
                            _deleteMessageRows(message);
                            var messageArgs = messageType.split(";");
                            if (messageArgs && messageArgs.length > 0) {
                                var msgId = message.getAttribute("id"), msgst = message.style;
                                msgst.display = "block";
                                var msgPanel = $(msgId + ".divMessages");
                                if (msgPanel) {
                                    var mpanelst = msgPanel.style;
                                    mpanelst.display = "block";
                                }
                                var btnMsgMin = $(msgId + ".btnMsgMin");
                                if (btnMsgMin) {
                                    btnMsgMin.className = "bgMsg";
                                }
                                var tBodyMessage = $(msgId + ".tbody");
                                return {
                                    objet: message,
                                    nodes: nodes,
                                    msgType: messageType,
                                    hasMsgDft: hasMsgDefault,
                                    args: messageArgs,
                                    tBodyMsg: tBodyMessage
                                };
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".getPrintParams()", MessagesRsis);
            }
            return null;
        },
        print: function(UIForm) {
            try {
                if (UIForm && UIForm.messagesXML) {
                    var tfr = this.getPrintParams(UIForm, null, this.PATHNODE);
                    if (tfr != null) {
                        var message = tfr.object, nodes = tfr.nodes, messageType = tfr.msgType, hasMsgDefault = tfr.hasMsgDft;
                        messageArgs = tfr.args, tBodyMessage = tfr.tBodyMsg;
                        if (nodes && nodes.length > 0 && tBodyMessage) {
                            for (var i = 0; i < messageArgs.length; i++) {
                                var type = messageArgs[i], imgName = "", queyMessage = "", hasMsg = false;
                                switch (type) {
                                  case "i":
                                    queyMessage = "info";
                                    imgName = "mInf";
                                    hasMsg = true;
                                    break;

                                  case "w":
                                    queyMessage = "warn";
                                    imgName = "mWar";
                                    hasMsg = true;
                                    break;

                                  case "e":
                                    queyMessage = "error";
                                    imgName = "mErr";
                                    hasMsg = true;
                                    break;
                                }
                                if (hasMsg) {
                                    var pth = this.PATHNODE;
                                    if (!hasMsgDefault && type == "e") {
                                        pth = this.PATH_NODE_HTML;
                                        imgName = "red";
                                    }
                                    var pathErrorString = ROOT_NODE + pth + "[@" + queyMessage + "='true']", msgNodes = getNodes(UIForm.messagesXML, pathErrorString);
                                    _addMessage(tBodyMessage, msgNodes, imgName, hasMsgDefault);
                                }
                            }
                        }
                        UIForm.setMsgTemp(cloneObjXML(UIForm.messagesXML));
                        UIForm.messagesXML = null;
                    }
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".print()", MessagesRsis);
            }
        },
        printHTML: function(UIForm, objXML) {
            try {
                if (UIForm && objXML) {
                    var tfr = this.getPrintParams(UIForm, objXML, this.PATHNODE);
                    if (tfr != null) {
                        var nodes = tfr.nodes, tBodyMessage = tfr.tBodyMsg;
                        if (nodes && nodes.length > 0 && tBodyMessage) {
                            var str = "<li>";
                            str = str + '<span class="msgs mErr"></span>';
                            str = str + '<span align="left">' + getNodeText(nodes) + "</span>";
                            str = str + "<li>";
                            tBodyMessage.innerHTML = str;
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".printHTML()", MessagesRsis);
            }
        },
        closePwdBox: function(form) {
            try {
                var iframe = $getIframeByObject(form), doc = window.document, list = null;
                if (iframe != null) {
                    doc = getIframeDocument(iframe);
                    list = $frame(iframe.id, "pwdBox");
                } else {
                    list = $("pwdBox");
                }
                if (list) {
                    list.style.display = "none";
                }
            } catch (oErr) {
                outPrint(oErr, _class + ".closePwdBox()", MessagesRsis);
            }
        },
        parser: function() {
            return parseString.apply(this, arguments);
        },
        alert: function() {
            try {
                var msg = parseString.apply(this, arguments);
                alert(msg);
                return msg;
            } catch (oErr) {
                outPrint(oErr, ".alert", MessagesRsis);
            }
        },
        confirm: function() {
            try {
                return window.confirm(parseString.apply(this, arguments));
            } catch (oErr) {
                outPrint(oErr, ".confirm", MessagesRsis);
            }
        }
    };
    function parseString() {
        var SKIP_INDEXES = 1;
        var templateArgs = arguments, message = "", template = templateArgs[0];
        message += template.replace(/\{\d+\}/g, function(match) {
            var index = +match.slice(1, -1), shiftedIndex = index + SKIP_INDEXES;
            if (shiftedIndex < templateArgs.length) {
                return toDebugString(templateArgs[shiftedIndex]);
            }
            return match;
        });
        return message;
    }
    function toDebugString(obj) {
        if (typeof obj === "function") {
            return obj.toString().replace(/ \{[\s\S]*$/, "");
        } else if (typeof obj === "undefined") {
            return "undefined";
        } else if (typeof obj !== "string") {
            return obj.toString();
        }
        return obj;
    }
})(Rsis);

function renderMessages(messages, status) {
    try {
        if (messages && messages.getAttribute) {
            var messagesId = messages.getAttribute("id"), stringArgs = messagesId.split(":"), UIContext = Rsis.UIContext.get(messages), UIForm = UIContext.getUIForm(stringArgs[0]);
            UIForm.hasError = Message.hasError(UIForm.messagesXML) || Message.hasErrorHTML(UIForm.messagesXML) ? true : false;
            Message.closePwdBox(UIForm.getForm());
            Message.transferMessages(UIForm);
            Message.print(UIForm);
            if (!Message.getOverride()) Message.getOverride(true);
        }
    } catch (oErr) {
        outPrint(oErr, "renderMessages()", MessagesRsis);
    }
}

function _addMessage(tBodyMessage, nodes, imgName, hasMsgDefault) {
    try {
        if (tBodyMessage && (nodes && nodes.length > 0)) {
            var str = "";
            for (var i = 0; i < nodes.length; i++) {
                str = str + "<li>";
                str = str + '<span class="msgs ' + imgName + '"></span>';
                str = str + "<span>";
                if (hasMsgDefault) {
                    str = str + getNodeValueId(nodes, "msg", i) + "</span>";
                } else {
                    str = str + getNodeText(nodes[0]);
                }
                str = str + "</span>";
                str = str + "</li>";
            }
            tBodyMessage.innerHTML += str;
        }
    } catch (oErr) {
        outPrint(oErr, "_addMessage()", MessagesRsis);
    }
}

function closeMessages(message) {
    try {
        if (message) {
            var messageId = message.getAttribute("id"), strArgs = messageId.split(":"), UIContext = Rsis.UIContext.get(message), UIForm = UIContext.getUIForm(strArgs[0]);
            if (UIForm) {
                UIForm.hasError = false;
                Message.closePwdBox(UIForm.getForm());
            }
            var stringArgs = messageId.split("."), msgPanel = $(stringArgs[0]);
            if (msgPanel) {
                msgPanel.style.display = "none";
            }
        }
    } catch (oErr) {
        outPrint(oErr, "closeMessages()", MessagesRsis);
    }
}

function _deleteMessageRows(obj) {
    try {
        if (obj) {
            var objId = obj.getAttribute("id"), ul = $(objId + ".tbody");
            if (ul) {
                ul.innerHTML = "";
            }
        }
    } catch (oErr) {
        outPrint(oErr, "_deleteMessageRows()", MessagesRsis);
    }
}

function minimizeMessages(message) {
    try {
        if (message) {
            var messageId = message.getAttribute("id"), stringArgs = messageId.split("."), btnMsgMin = $(stringArgs[0] + ".btnMsgMin"), msgPanel = $(stringArgs[0] + ".divMessages");
            if (msgPanel) {
                var msgp = msgPanel.style, hPx = "100%";
                if (msgp.display === "block") {
                    msgp.display = "none";
                    btnMsgMin.className = "bgMsg";
                    hPx = "17px";
                } else {
                    msgp.display = "block";
                    btnMsgMin.className = "bgxMsg";
                }
                $(stringArgs[0]).style.height = hPx;
            }
        }
    } catch (oErr) {
        outPrint(oErr, "minimizeMessages()", MessagesRsis);
    }
}

var URL = contextPath + "/ServletInvoker", vTimes = 0;

(function($R) {
    var allTypes = "*/".concat("*");
    function _createXmlHttpRequest() {
        return new XMLHttpRequest();
    }
    AjaxRsis = {
        _FILE: "009ajaxRsis.js",
        version: JRetail.rsis.VersionJS,
        STATE_OK: 200,
        STATE_UNAUTHORIZED: 401,
        STATE_FORBIDDEN: 403,
        STATE_REQUEST_TIMEOUT: 408,
        STATE_SESSION_TIMEOUT: 500,
        _loadPanel: true,
        setLoadPanel: function(p) {
            this._loadPanel = p;
            return this;
        },
        getLoadPanel: function() {
            return this._loadPanel;
        },
        state: {
            STATE_OK: 200,
            STATE_UNAUTHORIZED: 401,
            STATE_FORBIDDEN: 403,
            STATE_NOT_FOUND: 404,
            STATE_REQUEST_TIMEOUT: 408,
            STATE_GONE: 410,
            STATE_PRECONDITION_FAILED: 412,
            STATE_SESSION_TIMEOUT: 500,
            STATE_GATEWAY_TIMEOUT: 504,
            isOk: function(req) {
                var thiz = this;
                if (req) {
                    return req.status === thiz.STATE_OK && thiz.isTimeoutSession(req) == false ? true : false;
                }
                return false;
            },
            get: function(req) {
                if (req) {
                    var thiz = this;
                    switch (req.status) {
                      case thiz.STATE_OK:
                        return thiz.isTimeoutSession(req) == false ? "Complete!" : "Session Timeout!";

                      case thiz.STATE_UNAUTHORIZED:
                        return "Un Authorized!";

                      case thiz.STATE_FORBIDDEN:
                        return "Forbidden!";

                      case thiz.STATE_NOT_FOUND:
                        return "Not Found!";

                      case thiz.STATE_REQUEST_TIMEOUT:
                        return "Request Timeout!";

                      case thiz.STATE_GONE:
                        return "Gone! The requested object did exist, but has since been deleted.";

                      case thiz.STATE_PRECONDITION_FAILED:
                        return "Precondition Failed!. A precondition for execution of that operation had not been met!";

                      case thiz.STATE_SESSION_TIMEOUT:
                        return "Session Timeout!";

                      case thiz.STATE_GATEWAY_TIMEOUT:
                        return "Gateway Timeout!";

                      default:
                        {
                            return "Unknown State or not mapping!. XHR.state: [" + req.status + "]";
                        }
                    }
                }
            },
            hasXML: function(req) {
                return req.responseXML ? true : false;
            },
            isTimeoutSession: function(req) {
                try {
                    var responseXML = req ? req.responseXML : null, responseText = req ? req.responseText : null;
                    if (req && responseText && (responseXML == null || responseXML != null && responseXML.xml == "")) {
                        var objXHtml = createObjXML(responseText);
                        if (objXHtml && objXHtml.documentElement && objXHtml.documentElement.childNodes) {
                            var elements = objXHtml.documentElement.childNodes;
                            if (elements && elements.length > 0) {
                                var k = 0, mx = elements.length;
                                for (;k < mx; k++) {
                                    var el = elements[k];
                                    if (el && el.nodeName == "body") {
                                        var sessionExpired = el.getAttribute("sessionExpired");
                                        if (sessionExpired == "true") {
                                            return true;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    return false;
                } catch (oErr) {
                    outPrint(oErr, ".isTimeoutSession", this);
                }
            }
        },
        callActionDeveloper: function(formId, url, targetAction, targetMethod, callBackFunctionDeveloper, parameters, callBackFunction) {
            try {
                if (Rsis.isUndefined(callBackFunction) || callBackFunction == null || callBackFunction === "") {
                    callBackFunction = "callBackInitAction";
                }
                _callAction(formId, url, targetAction, targetMethod, callBackFunction, "", parameters, true, callBackFunctionDeveloper);
            } catch (oErr) {
                outPrint(oErr, ".callActionDeveloper", this);
            }
        },
        callActionSyncDeveloper: function(formId, url, targetAction, targetMethod, callBackFunctionDeveloper, parameters, callBackFunction) {
            try {
                if (Rsis.isUndefined(callBackFunction) || callBackFunction == null || callBackFunction === "") {
                    callBackFunction = "callBackInitAction";
                }
                _callAction(formId, url, targetAction, targetMethod, callBackFunction, "", parameters, false, callBackFunctionDeveloper);
            } catch (oErr) {
                outPrint(oErr, ".callActionSyncDeveloper", this);
            }
        },
        callAction: function(formId, url, targetAction, targetMethod, callBackFunction, callComponent, parameters) {
            try {
                _callAction(formId, url, targetAction, targetMethod, callBackFunction, callComponent, parameters, true, "");
            } catch (oErr) {
                outPrint(oErr, ".callAction", this);
            }
        },
        callActionSync: function(formId, url, targetAction, targetMethod, callBackFunction, callComponent, parameters) {
            try {
                _callAction(formId, url, targetAction, targetMethod, callBackFunction, callComponent, parameters, false, "");
            } catch (oErr) {
                outPrint(oErr, ".callActionSync", this);
            }
        },
        settings: {
            url: URL,
            type: "POST",
            loading: true,
            async: true,
            uiform: null,
            formName: "",
            dataType: "xml",
            contentType: "application/x-www-form-urlencoded",
            charset: "charset=UTF-8",
            accepts: {
                text: "text/plain",
                html: "text/html",
                xml: "application/xml, text/xml",
                json: "application/json, text/javascript"
            },
            contents: {
                xml: /xml/,
                html: /html/,
                json: /json/
            },
            responseFields: {
                xml: "responseXML",
                text: "responseText",
                json: "responseJSON"
            },
            callBack: null,
            object: null,
            parameters: null,
            callBackDev: null,
            form: null,
            action: null,
            method: null,
            loadSettings: null,
            success: null,
            error: null,
            render: null
        },
        getAccepts: function(st) {
            if (!st || !allTypes) return "*";
            return st.dataTypes[0] && st.accepts[st.dataTypes[0]] ? st.accepts[st.dataTypes[0]] + (st.dataTypes[0] !== "*" ? ", " + allTypes + ";" : "") : st.accepts["*"];
        },
        getContentType: function(st) {
            return (st.contents[st.dataType].test(st.dataType) ? st.contentType : st.accepts[st.dataType].split(",")[0]) + ";" + st.charset;
        },
        ajaxHandleResponses: function(st, req, responses) {
            var firstDataType, ct, finalDataType, type, contents = st.contents, dataTypes = st.dataTypes;
            while (dataTypes[0] === "*") {
                dataTypes.shift();
                if (ct === undefined) {
                    ct = st.mimeType || req.getResponseHeader("Content-Type");
                }
            }
            if (ct) {
                for (type in contents) {
                    if (contents[type] && contents[type].test(ct)) {
                        dataTypes.unshift(type);
                        break;
                    }
                }
            }
            if (dataTypes[0] in responses) {
                finalDataType = dataTypes[0];
            } else {
                for (type in responses) {
                    if (!dataTypes[0] || s.converters[type + " " + dataTypes[0]]) {
                        finalDataType = type;
                        break;
                    }
                    if (!firstDataType) {
                        firstDataType = type;
                    }
                }
                finalDataType = finalDataType || firstDataType;
            }
            if (finalDataType) {
                if (finalDataType !== dataTypes[0]) {
                    dataTypes.unshift(finalDataType);
                }
                return responses[finalDataType];
            }
        },
        call: function(url, options) {
            try {
                if (typeof url === "object") {
                    options = url;
                    url = undefined;
                }
                if (url) {
                    st.url = url;
                }
                var st = this._configSettings(options);
                this._loading(st);
                var req = _createXmlHttpRequest();
                if (req) {
                    if (isEmpty(st.formName)) {
                        st.formName = st.form != null ? st.form.id : $R.now();
                    }
                    req.formName = st.formName;
                    Properties.setProperty(st.formName, req);
                    req.onreadystatechange = function() {
                        AjaxRsis.callBack(req, st);
                    };
                    req.open(st.type, st.url, st.async);
                    this.send.apply(null, [ req, st ]);
                }
            } catch (oErr) {
                outPrint(oErr, ".call", AjaxRsis);
            }
        },
        _configSettings: function(options) {
            options = options || {};
            var st = $R.extend({}, this.settings, options);
            if (!st.url) {
                alert("A URL deve ser informada!\nThe URL must be informed!");
                return;
            }
            if (isNoEmpty(st.uiform) || isNoEmpty(st.UIForm)) {
                st.uiform = st.UIForm ? st.UIForm : st.uiform;
                st.formName = st.uiform.getForm().id;
                if (isEmpty(st.action)) {
                    st.action = st.uiform.getTargetAction();
                }
                st.form = st.uiform.getForm();
            }
            if (isEmpty(st.formName)) {
                st.formName = st.form != null ? st.form.id : $R.now();
            }
            st.dataTypes = $R.$.trim(st.dataType || "*").toLowerCase().match(/\S+/g) || [ "" ];
            return st;
        },
        _loading: function(st) {
            if (st.loading) {
                var hasLoad = !$R.isUndefined(Loading) && AjaxRsis.getLoadPanel();
                if (st.async && hasLoad || hasLoad) {
                    Loading.start();
                }
            } else {
                this.loading(st);
            }
        },
        send: function(req, st) {
            var self = AjaxRsis;
            req.setRequestHeader("Content-Type", self.getContentType(st));
            if (st.dataType !== "xml") {
                req.setRequestHeader("Accept", self.getAccepts(st));
            }
            req.send(AjaxRsis.getParameters(st));
        },
        getParameters: function(st) {
            var parameters = "isCallAjax=true&";
            if (st) {
                if (st.form != null && st.action == null) {
                    parameters = parameters + "targetAction=" + getAttMandatory(st.form, "targetAction") + "&";
                } else if (st.action != null) {
                    parameters = parameters + "targetAction=" + st.action + "&";
                }
                if (st.method != null) {
                    parameters = parameters + "targetMethod=" + st.method + "&";
                }
                if (st.parameters) {
                    var callParams = st.parameters;
                    if (Rsis.isArray(callParams)) {
                        parameters = parameters + callParams.join("&");
                    } else if (typeof callParams !== "string") {
                        parameters = parameters + $R.param(callParams, st.traditional);
                    } else {
                        parameters = parameters + callParams;
                    }
                }
                if (st.data) {
                    parameters = parameters + st.data;
                }
            }
            return parameters;
        },
        callBack: function(req, st) {
            try {
                var formId = st.formName, callBackFunction = st.callBack, callComponent = st.object, callBackDeveloper = st.callBackDev;
                if (st.loading) {
                    if (!$R.isUndefined(Loading) && this.getLoadPanel()) {
                        Loading.readyState(formId);
                    }
                } else {
                    this.checkStatus(st);
                }
                if (req.readyState == 4) {
                    if (typeof callBackFunction === "string" && callBackFunction !== "") {
                        var evalString = callBackFunction + "('" + formId;
                        if (!$R.isUndefined(callBackDeveloper) && callBackDeveloper !== "") {
                            evalString = evalString + "','" + callBackDeveloper;
                        }
                        evalString = evalString + "','" + callComponent + "'," + JSON.stringify(st) + ");";
                        compressEvalRsis(evalString);
                    } else if (typeof st.success == "function" || typeof st.error == "function" || typeof st.render == "function") {
                        this.callBackProcess(formId, st);
                    } else if (typeof callBackFunction == "function") {
                        callBackFunction.apply(null, [ formId, callComponent, st ]);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".callBack", this);
            } finally {
                if (st.loading && req.readyState == 4 && !this.getLoadPanel()) {
                    this.setLoadPanel(true);
                }
            }
        },
        callBackProcess: function(f, st) {
            var UIContext = null;
            try {
                var Transfer = AjaxRsis.process(f, st);
                if (Transfer && Transfer.UIForm && (Transfer.objXML || Transfer.response)) {
                    var objXML = Transfer.objXML, response = Transfer.response, UIForm = Transfer.UIForm;
                    UIContext = $R.UIContext.get(UIForm);
                    Message.render(UIForm, objXML);
                    if (UIForm.hasError == false) {
                        if (typeof st.success === "function") {
                            st.success.apply(null, [ UIForm, objXML, st.object, response ]);
                        }
                    } else {
                        if (typeof st.error === "function") {
                            st.error.apply(null, [ UIForm, objXML, st.object, response ]);
                        }
                    }
                    if (typeof st.render === "function") {
                        st.render.apply(null, [ UIForm, objXML, st.object, response ]);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".callBackProcess", this);
            } finally {
                if (!UIContext) UIContext = $R.UIContext.get($(f));
                UIContext.fileUpload = null;
                Crud.sendUpload = false;
            }
        },
        process: function(f, st) {
            try {
                var req = Properties.getProperty(f), self = this;
                if (req && req.readyState == 4) {
                    if (self.statusValidate(req)) {
                        var UIContext = $R.UIContext.get($(f));
                        if (typeof st === "object") {
                            return {
                                response: st.dataType !== "xml" ? $R.$.parseJSON(req[self.ajaxHandleResponses(st, req, st.responseFields)]) : null,
                                objXML: st.dataType == "xml" ? createObjXML(req.responseText) : null,
                                UIForm: UIContext.getUIForm(f)
                            };
                        } else {
                            return {
                                response: null,
                                objXML: createObjXML(req.responseText),
                                UIForm: UIContext.getUIForm(f)
                            };
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".process", this);
            } finally {
                Properties.remove(f);
            }
            return null;
        },
        statusValidate: function(req) {
            if (req) {
                var ajSt = this.state;
                var isComplete = ajSt.isOk(req);
                if (!isComplete) {
                    alert(ajSt.get(req) + " - " + getMessageBundle("ERR_SESSION_EXPIRES"));
                    this.startLogin(req);
                }
                return isComplete;
            }
            return false;
        },
        startLogin: function(req) {
            window.location.reload(true);
        },
        getRequestHeaders: function(url, callBackDeveloper, async) {
            try {
                if (url == undefined || url == null || url == "") {
                    alert("A URL deve ser informada!");
                    return;
                }
                var req = new XMLHttpRequest(), bwr = JRetail.browser;
                if (req) {
                    req.onreadystatechange = function() {
                        if (req.readyState == 4) {
                            var hdr = new Header(req);
                            if (!$R.isUndefined(callBackDeveloper) && callBackDeveloper != "") {
                                eval(callBackDeveloper + "(hdr);");
                            } else {
                                return hdr;
                            }
                        }
                    };
                    req.open("HEAD", url, async);
                    req.send(null);
                    if (bwr.firefox && bwr.versionNumber < 4 && !async) {
                        if (req.readyState == 4) {
                            var hdr = new Header(req);
                            if (!$R.isUndefined(callBackDeveloper) && callBackDeveloper !== "") {
                                eval(callBackDeveloper + "(hdr);");
                            } else {
                                return hdr;
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".getHeaders", this);
            }
        },
        loadSettings: {
            title: "Aguarde o Processamento",
            message: "Inicializando..."
        },
        checkStatus: function(st) {
            var req = Properties.getProperty(st.formName), str = "", ld = $("ajaxLoading"), msg = $("ajaxLoading.msgs-span"), MS_R = "MSG_READSTATE_", fnb = getMessageBundle;
            if (req) {
                switch (req.readyState) {
                  case 0:
                    str = fnb(MS_R + "0", "Inicializando...");
                    break;

                  case 1:
                    str = fnb(MS_R + "1", "Aguardando Dados do Servidor...");
                    break;

                  case 3:
                    str = fnb(MS_R + "3", "Processando Dados Recebidos...");
                    break;

                  case 4:
                    ld.style.display = "none";
                    break;
                }
                if (msg && req.readyState < 4) {
                    msg.innerHTML = str;
                }
            }
        },
        loading: function(st) {
            var options = {};
            if (typeof st.loadSettings == "object") {
                options = $R.extend({}, this.loadSettings, st.loadSettings);
            }
            var ld = $("ajaxLoading");
            if (ld == null) {
                var doc = window.document;
                ld = doc.createElement("div");
                ld.id = "ajaxLoading";
                ld.className = "dMsgAjx";
                ld.innerHTML = this.createHtmlLoading(options);
                doc.body.appendChild(ld);
            }
            if (ld) {
                ld.style.display = "block";
            }
        },
        createHtmlLoading: function(ajxLdn) {
            var html = "";
            html = html + " <div>";
            html = html + ' <div class="hMsgAjx">';
            html = html + ' <span class="tMsgAjx" id="ajaxLoading.tle">' + ajxLdn.title + "</span>";
            html = html + ' <div class="btsMsgAjx">';
            html = html + ' <input id="ajaxLoading.btnMin" type="button" class="bgMsg" onclick="AjaxRsis.minMsgs(this);">';
            html = html + ' <input id="ajaxLoading.btnClose" type="button" class="brMsg" onclick="AjaxRsis.closeMsgs(this);">';
            html = html + " </div></div></div>";
            html = html + ' <div id="ajaxLoading.msgs" class="dbMsgAjx" style="display:block;">';
            html = html + ' <span id="ajaxLoading.msgs-span">' + ajxLdn.message + "</span>";
            html = html + ' <img src="' + contextResource + skinFolder + '/images/pleasewait.gif"></img>';
            html = html + " </div>";
            return html;
        },
        minMsgs: function(btnMsgMin) {
            if (btnMsgMin) {
                var msgPanel = $("ajaxLoading.msgs");
                if (msgPanel) {
                    var msgp = msgPanel.style;
                    if (msgp.display === "block") {
                        msgp.display = "none";
                        btnMsgMin.className = "bgMsg";
                    } else {
                        msgp.display = "block";
                        btnMsgMin.className = "bgxMsg";
                    }
                }
            }
        },
        closeMsgs: function(btnMsgCls) {
            var msgPanel = $("ajaxLoading");
            if (msgPanel) {
                msgPanel.style.display = "none";
            }
        }
    };
    function addHeaders(request, options) {
        var headers = options.headers || {};
        for (var header in headers) {
            request.setRequestHeader(header, headers[header]);
        }
    }
    function createRequest(url, options) {
        var request = _createXmlHttpRequest(), method = options.type || "GET";
        request.formName = options.formName;
        request.open(method, url);
        request.withCredentials = options.withCredentials || false;
        addHeaders(request, options);
        return request;
    }
    function addHandlers(request, resolve, reject) {
        request.onload = function() {
            if (request.status >= 200 && request.status < 400) {
                resolve(_process(request));
            } else {
                var error = Error(request.statusText || "Unknown failure; possibly CORS");
                error.status = request.status;
                reject(error, request);
            }
        };
        request.onerror = function(e) {
            reject(this, e);
        };
    }
    function encodeQuery(data) {
        var urlData = [];
        for (var key in data) {
            var value = Array.isArray(data[key]) ? data[key] : [ data[key] ];
            value.forEach(function(v) {
                urlData.push(encodeURIComponent(key) + "=" + encodeURIComponent(v));
            });
        }
        return urlData.join("&");
    }
    function _process(response) {
        if (!response) return null;
        var transfer = null, self = AjaxRsis, f = response.formName;
        if (self.statusValidate(response)) {
            var UIForm = $R.getUIForm($(f));
            transfer = {
                response: response,
                objXML: createObjXML(response.responseText),
                UIForm: UIForm
            };
        }
        return transfer;
    }
    function load(url, options) {
        if (url) {
            url = options.url || url;
        }
        var st = AjaxRsis._configSettings(options);
        AjaxRsis._loading(st);
        var request = createRequest(url, st);
        var promise = new Promise(function(resolve, reject) {
            addHandlers(request, resolve, reject);
            AjaxRsis.send(request, st);
        });
        function headers(executor) {
            return new Promise(function(resolve, reject) {
                executor = executor || resolve;
                request.onreadystatechange = function() {
                    if (this.readyState == this.HEADERS_RECEIVED) {
                        executor(request.getAllResponseHeaders());
                    }
                };
                promise.then(resolve);
                promise["catch"](reject);
            });
        }
        function json(executor) {
            return new Promise(function(resolve, reject) {
                promise.then(JSON.parse).then(executor || resolve);
                promise["catch"](reject);
            });
        }
        promise.json = json;
        promise.headers = headers;
        return promise;
    }
    var ajaxPromises = {
        version: "__VERSION__",
        get: function(url, options) {
            options = options || {};
            options.type = "GET";
            options.data = null;
            return load(url, options);
        },
        post: function(data, options) {
            options = options || {};
            var url = URL;
            options.type = "POST";
            options.headers = options.headers || {};
            options.data = encodeQuery(data);
            return load(url, options);
        },
        postJson: function(data, options) {
            options = options || {};
            var url = URL;
            options.type = "POST";
            options.headers = options.headers || {};
            options.headers["Content-Type"] = "application/json; charset=UTF-8";
            options.data = JSON.stringify(data);
            return load(url, options);
        },
        head: function(url, options) {
            options = options || {};
            options.type = "HEAD";
            options.data = null;
            return load(url, options).headers();
        }
    };
    AjaxRsis.promises = ajaxPromises;
})(Rsis);

function callAction(formId, url, targetAction, targetMethod, callBackFunction, callComponent, parameters, async) {
    _callAction(formId, url, targetAction, targetMethod, callBackFunction, callComponent, parameters, async, "");
}

function _callAction(formId, url, targetAction, targetMethod, callBackFunction, callComponent, parameters, async, callBackDeveloper) {
    var _targetAction = "targetAction=" + targetAction, _targetMethod = "targetMethod=" + targetMethod, params = _targetAction + "&" + _targetMethod + "&" + parameters;
    AjaxRsis.call({
        url: url,
        callBack: callBackFunction,
        object: callComponent,
        parameters: params,
        async: async,
        callBackDev: callBackDeveloper,
        formName: formId
    });
}

function Header(req) {
    var cacheControl, from, accept, acceptEncoding, acceptLanguage, userAgent, referer, authorization, chargeTo, ifModifiedSince, pragma, lastModified, expires, sessionTimeOut, allHeaders = null;
    construtor(req);
    function construtor(req) {
        allHeaders = req.getAllResponseHeaders();
        from = req.getResponseHeader("From");
        accept = req.getResponseHeader("Accept");
        acceptEncoding = req.getResponseHeader("Accept-Encoding");
        acceptLanguage = req.getResponseHeader("Accept-Language");
        userAgent = req.getResponseHeader("User-Agent");
        referer = req.getResponseHeader("Referer");
        authorization = req.getResponseHeader("Authorization");
        chargeTo = req.getResponseHeader("Charge-To");
        ifModifiedSince = req.getResponseHeader("If-Modified-Since");
        cacheControl = req.getResponseHeader("Cache-Control");
        pragma = req.getResponseHeader("Pragma");
        lastModified = req.getResponseHeader("Last-Modified");
        expires = req.getResponseHeader("Expires");
        sessionTimeOut = req.getResponseHeader("SessionTimeOut");
    }
    this.getAllHeaders = function() {
        return allHeaders;
    };
    this.isNoCache = function() {
        if (this.isPragmaNoCache() || this.isCacheControlNoCache()) return true;
        return false;
    };
    this.getCacheControl = function() {
        return cacheControl;
    };
    this.setCacheControl = function(cc) {
        cacheControl = cc;
    };
    this.isCacheControlNoCache = function() {
        if (cacheControl != null && cacheControl.toLowerCase() == "no-cache") return true;
        return false;
    };
    this.getPragma = function() {
        return pragma;
    };
    this.setPragma = function(pga) {
        pragma = pga;
    };
    this.isPragmaNoCache = function() {
        if (pragma != null && pragma.toLowerCase() == "no-cache") return true;
        return false;
    };
    this.getLastModified = function() {
        return lastModified;
    };
    this.setLastModified = function(lm) {
        lastModified = lm;
    };
    this.getExpires = function() {
        return expires;
    };
    this.setExpires = function(exp) {
        expires = exp;
    };
    this.getSessionTimeOut = function() {
        return sessionTimeOut;
    };
    this.setSessionTimeOut = function(timeOut) {
        sessionTimeOut = timeOut;
    };
    this.getFrom = function() {
        return from;
    };
    this.setFrom = function(f) {
        from = f;
    };
    this.getAccept = function() {
        return accept;
    };
    this.setAccept = function(ac) {
        accept = ac;
    };
    this.getAcceptEncoding = function() {
        return acceptEncoding;
    };
    this.setAcceptEncoding = function(ace) {
        acceptEncoding = ace;
    };
    this.getAcceptLanguage = function() {
        return acceptLanguage;
    };
    this.setAcceptLanguage = function(al) {
        acceptLanguage = al;
    };
    this.getUserAgent = function() {
        return userAgent;
    };
    this.setUserAgent = function(ua) {
        userAgent = ua;
    };
    this.getReferer = function() {
        return referer;
    };
    this.setReferer = function(r) {
        referer = r;
    };
    this.getAuthorization = function() {
        return authorization;
    };
    this.setAuthorization = function(aut) {
        authorization = aut;
    };
    this.getChargeTo = function() {
        return chargeTo;
    };
    this.setChargeTo = function(ct) {
        chargeTo = ct;
    };
    this.getIfModifiedSince = function() {
        return ifModifiedSince;
    };
    this.setIfModifiedSince = function(ims) {
        ifModifiedSince = ims;
    };
}

function XMLRsis() {}

XMLRsis._FILE = "010xmlRsis.js";

XMLRsis.version = JRetail.rsis.VersionJS;

function XmlRsis() {}

XmlRsis._FILE = XMLRsis._FILE;

var ROOT_NODE = "/root";

function addTagRoot(xml) {
    return '<?xml version="1.0" encoding="' + Rsis.charset + '"?><root>' + xml + "</root>";
}

function createObjXML(strXML) {
    if (strXML != undefined && (strXML != null && strXML != "")) {
        var parser = new DOMParser();
        return parser.parseFromString(strXML, "text/xml");
    }
}

function cloneObjXML(objXML) {
    if (typeof objXML != "undefined" && objXML != null) {
        return createObjXML(objXML.xml);
    }
    return null;
}

function createObjXMLByXPath(xPath, index) {
    try {
        if (xPath != undefined && xPath != null && xPath != "") {
            if (index == undefined) {
                index = 0;
            }
            var strArgs = xPath.split("/");
            var xml = _createStringXML(strArgs, index);
            return createObjXML(addTagRoot(xml));
        }
    } catch (oErr) {
        outPrint(oErr, "createObjXMLByXPath", XMLRsis);
    }
    return null;
}

function _createStringXML(xml, length) {
    length++;
    var prefix = _createAtts(xml[length], true);
    var sufix = _createAtts(xml[length], false);
    if (length == xml.length - 1) {
        return "<" + prefix + "></" + sufix + ">";
    } else {
        return "<" + prefix + ">" + _createStringXML(xml, length) + "</" + sufix + ">";
    }
}

function _createAtts(str, isprefix) {
    var init = str.search(/\[/);
    var fine = str.search(/\]/);
    if (init == -1 && fine == -1) {
        return str;
    }
    if (isprefix) {
        var attributes = str.substring(init + 1, fine);
        if (attributes != null && attributes != "") {
            attributes = attributes.replaceAll("###", "");
            attributes = attributes.replaceAll(/\@/, "");
            attributes = attributes.replaceAll("and", "");
            attributes = attributes.replaceAll("'", '"');
            attributes = attributes.replaceAll("or", "");
            attributes = attributes.replaceAll(/\!=/, "=");
            attributes = attributes.replaceAll(/\>=/, "=");
            attributes = attributes.replaceAll(/\<=/, "=");
            attributes = attributes.replaceAll(/\==/, "=");
        }
        return str.substring(0, init) + " " + attributes;
    } else {
        return str.substring(0, init);
    }
}

function cloneNodeElement(node) {
    if (node) {
        var objXML = createObjXML(node.cloneNode(true).xml);
        if (objXML) {
            return objXML.documentElement;
        }
    }
    return null;
}

function cloneNodeXML(objXML, objNo, cloneChildes) {
    if (objXML && objNo) {
        var newNode = objNo.cloneNode(cloneChildes);
        objXML.appendChild(newNode);
    }
}

function getNodes(objXML, path) {
    var len = arguments.length, data = null, noRootPath = false;
    if (objXML && typeof path !== "undefined" && path != null && path !== "") {
        objXML.setProperty("SelectionNamespaces", "xmlns:xhtml='http://www.w3.org/1999/xhtml'");
        objXML.setProperty("SelectionNamespaces", "xmlns:xhtml='http://www.w3.org/1999/xhtml' " + "xmlns:xsl='http://www.w3.org/1999/XSL/Transform'");
        objXML.setProperty("SelectionLanguage", "XPath");
        if (len > 2) {
            data = arguments[2];
            noRootPath = arguments[3];
        }
        if (!noRootPath && path.search(ROOT_NODE) === -1) {
            path = ROOT_NODE + path;
        }
        if (data != null && data !== "") {
            path = path.replaceAll("###", "@");
            if (typeof data !== "undefined" && data !== "" && Trim(Sarissa.getText(objXML.selectNodes(path)[0], false)) == data) {
                return objXML.selectNodes(path)[0];
            }
        } else {
            path = path.replaceAll("###", "@");
            if (objXML && objXML.selectNodes(path)) {
                return objXML.selectNodes(path);
            }
        }
    }
    return null;
}

function getNodeElement(UIForm, objXML, subPath, isClone) {
    var node = null;
    if (UIForm != null) {
        var myXML = isClone == true ? cloneObjXML(objXML) : objXML;
        var nodeName = UIForm.getXPath();
        if (myXML != null && nodeName != null) {
            var myNode = getNodes(myXML, nodeName + (subPath != null ? subPath : ""));
            if (myNode != null && myNode.length > 0) {
                var node = myNode[0];
            }
        }
    }
    return node;
}

function getChildNodes(objNo, subPath) {
    if (objNo && subPath != null) {
        subPath = subPath.replaceAll("###", "@");
        if (subPath.charAt(0) == "/") {
            subPath = subPath.substring(1, subPath.length);
        }
        var myNode = objNo.selectNodes(subPath);
        if (myNode && myNode.length > 0) {
            return myNode;
        }
    }
    return null;
}

function getNodeValue(objNo, nameAtt, isSingleNode) {
    if (objNo && nameAtt !== "") {
        if (typeof isSingleNode !== "undefined" && isSingleNode == true) {
            return objNo.getAttribute(nameAtt) == null ? "" : objNo.getAttribute(nameAtt);
        } else if (objNo.length > 0) {
            return objNo[0].getAttribute(nameAtt) == null ? "" : objNo[0].getAttribute(nameAtt);
        }
    }
    return "";
}

function getNodeText(node) {
    return node ? Sarissa.getText(node, true) : "";
}

function getNodeValueId(objNo, nameAtt, idNode) {
    try {
        if (objNo && objNo.length) {
            if (idNode <= objNo.length - 1) {
                return objNo[idNode].getAttribute(nameAtt) == null ? "" : objNo[idNode].getAttribute(nameAtt);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "getNodeValueId", XMLRsis);
    }
    return "";
}

function setAttributeNode(objNo, nameAtt, valueAtt) {
    try {
        if (typeof valueAtt != "undefined" && valueAtt != null) {
            if (objNo) {
                if (objNo.length > 0) objNo[0].setAttribute(Trim(nameAtt), valueAtt); else if (objNo.ELEMENT_NODE === 1 && !objNo.typeNode) objNo.setAttribute(Trim(nameAtt), valueAtt);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "setAttributeNode", XMLRsis);
    }
}

function setTextNode(objNo, value) {
    try {
        if (objNo) {
            if (JRetail.browser.msie) {
                objNo.text = value;
            } else {
                objNo.textContent = value;
            }
        }
    } catch (oErr) {
        outPrint(oErr, "setTextNode", XMLRsis);
    }
}

function replaceNode(objXML, pathNode, newNode) {
    try {
        var nodes = getNodes(objXML, pathNode);
        var oldNode = nodes.length > 0 ? nodes[0] : null;
        if (oldNode) {
            var node = objXML.documentElement.firstChild;
            if (JRetail.browser.msie) node.replaceChild(newNode, oldNode); else node.replaceChild(node.ownerDocument.importNode(newNode, true), oldNode);
        }
        return objXML;
    } catch (oErr) {
        outPrint(oErr, "replaceNode", XMLRsis);
    }
}

function brokeImplementObjXML(objXML, nodeName) {
    if (nodeName != null && nodeName !== "" && objXML) {
        var root = objXML.documentElement;
        if (root) {
            var objNo = root.selectNodes("/root" + nodeName);
            if (objNo && objNo.length > 0) {
                return createObjXML(addTagRoot(objNo.item(0).xml));
            }
        }
    }
    return null;
}

function getParentNode(node, length) {
    length--;
    if (length == 0) {
        return node.parentNode;
    } else {
        return getParentNode(node.parentNode, length);
    }
}

function storeObjXML(objXML, tagDataIsland) {
    try {
        var _DATA_ISLAND_ID = $(tagDataIsland);
        if (objXML && _DATA_ISLAND_ID) {
            Sarissa.updateContentFromNode(objXML, _DATA_ISLAND_ID, "", "");
        }
    } catch (oErr) {
        outPrint(oErr, "storeObjXML()", XMLRsis);
    }
}

function storeStringXML(stringXML, tagDataIsland) {
    try {
        var _DATA_ISLAND_ID = $(tagDataIsland);
        if (_DATA_ISLAND_ID && (stringXML != undefined && stringXML != "")) {
            var objXML = criaObjXML(stringXML);
            Sarissa.updateContentFromNode(objXML, _DATA_ISLAND_ID, "", "");
        }
    } catch (oErr) {
        outPrint(oErr, "storeStringXML", XMLRsis);
    }
}

function cleanStoredXML(tagDataIsland) {
    try {
        if (tagDataIsland != null && tagDataIsland != "") {
            var _DATA_ISLAND_ID = $(tagDataIsland);
            if (_DATA_ISLAND_ID) _DATA_ISLAND_ID.value = "";
        }
    } catch (oErr) {
        outPrint(oErr, "cleanStoredXML", XMLRsis);
    }
}

function getObjXML(tagDataIsland) {
    try {
        if (tagDataIsland != null && tagDataIsland !== "") {
            var doc = document, strXML = doc.getElementById(tagDataIsland).value;
            if (strXML.replace(/^\s*|\s*$/g, "") != "") {
                return new DOMParser().parseFromString(strXML, "text/xml");
            }
        }
    } catch (oErr) {
        outPrint(oErr, "getObjXML", XMLRsis);
        return null;
    }
    return null;
}

function errorMsgValidate(strXML, messageComponent) {
    try {
        if (strXML != "") {
            var objXML = criaObjXML(strXML);
            var objNo = getNodes(objXML, ROOT_NODE + "/mensagens/mensagem[@tipo = 'erro']");
            if (objNo && objNo.length > 0) {
                var _i;
                var _strError = "";
                if (objNo.length) {
                    for (_i = 0; _i < objNo.length; _i++) {
                        if (_strError != "") {
                            _strError += "\n";
                        }
                        _strError += objNo[_i].getAttribute("texto");
                    }
                } else {
                    _strError += objNo.getAttribute("texto");
                }
                if (_strError) {
                    if (messageComponent != null && messageComponent != "" && $(messageComponent)) {
                        $(messageComponent).innerText = _strError;
                    } else {
                        alert(_strError);
                    }
                }
                return true;
            }
        }
    } catch (oErr) {
        outPrint(oErr, "errorMsgValidate", XMLRsis);
        return false;
    }
    return false;
}

function showMessage(objXML, msgType) {
    try {
        if (objXML != null) {
            var objNo = getNodes(objXML, ROOT_NODE + "/mensagens/mensagem[@tipo='" + msgType + "']");
            if (objNo && objNo.length > 0) {
                var _msg = objNo[0].getAttribute("texto");
                if (_msg) {
                    alert(_msg);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "showMessage", XMLRsis);
    }
}

function getNodeAttributes(objXML, stringAttributes) {
    try {
        var stringNodesValue = "";
        if (objXML != null && (stringAttributes != null && stringAttributes != "")) {
            var path = getStringPath(objXML, stringAttributes, "");
            path = path.replaceAll("###", "@");
            var node = getNodes(objXML, ROOT_NODE + path);
            if (node && node.length > 0) {
                for (var i = 0; i < node.length; i++) {
                    var listPathNodes = stringAttributes.split(",");
                    if (listPathNodes && listPathNodes.length > 0) {
                        for (var k = 0; k < listPathNodes.length; k++) {
                            var str = Trim(listPathNodes[k]);
                            if (str != "") {
                                if (str.substring(0, 1) == "'") {
                                    stringNodesValue += str.replace(/'/g, "");
                                } else {
                                    var stringPath = str.split("@")[0];
                                    stringPath = stringPath.replaceAll("###", "@");
                                    var stringAttribute = str.split("@")[1];
                                    stringAttribute = stringAttribute.replaceAll("###", "@");
                                    if (stringPath && stringPath != "" && (stringAttribute && stringAttribute != "")) {
                                        var nodes = getNodes(objXML, ROOT_NODE + stringPath);
                                        var attributeNode = stringAttribute == undefined ? "" : stringAttribute;
                                        if (attributeNode != undefined && attributeNode != "") {
                                            var vle = getNodeValueId(nodes, attributeNode, i);
                                            stringNodesValue += vle == null ? "" : vle;
                                        } else {
                                            var vle = getNodeText(nodes[0]);
                                            stringNodesValue += vle == null ? "" : vle;
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "getNodeAttributes", XMLRsis);
    }
    return stringNodesValue;
}

function parserNodesXML(args, xmlSource, xmlDestination) {
    if (args != null && args !== "" && xmlSource != null && xmlDestination != null) {
        var stringArgsNode = args.split(",");
        if (stringArgsNode && stringArgsNode.length > 0) {
            for (var i = 0; i < stringArgsNode.length; i++) {
                stringArgsNode[i] = Trim(stringArgsNode[i]);
                var stringArgs = stringArgsNode[i].split("::");
                if (stringArgs && stringArgs.length > 0) {
                    var sourceNodePath = stringArgs[0];
                    var destinationNodePath = stringArgs[1];
                    if (sourceNodePath && sourceNodePath.length > 0 && (destinationNodePath && destinationNodePath.length > 0)) {
                        var stringArgsSourcePath = sourceNodePath.split("@");
                        var stringArgsDestPath = destinationNodePath.split("@");
                        if (stringArgsSourcePath && stringArgsSourcePath.length > 0 && (stringArgsDestPath && stringArgsDestPath.length > 0)) {
                            var sourceNode = getNodes(cloneObjXML(xmlSource), stringArgsSourcePath[0].replaceAll("###", "@"));
                            var destinatNode = getNodes(cloneObjXML(xmlDestination), stringArgsDestPath[0].replaceAll("###", "@"));
                            if (destinatNode && destinatNode.length > 0) {
                                var fatherNode = xmlDestination.documentElement.selectSingleNode(ROOT_NODE + stringArgsDestPath[0]);
                                if (fatherNode && (sourceNode && sourceNode.length > 0)) {
                                    var oldChildNode = null;
                                    if (stringArgsSourcePath[0] != null && stringArgsSourcePath[0] != "") {
                                        var stringArgsOldChildNode = stringArgsSourcePath[0].split("/");
                                        oldChildNode = getNodes(xmlDestination, stringArgsDestPath[0] + "/" + stringArgsOldChildNode[stringArgsOldChildNode.length - 1]);
                                    }
                                    if (!(oldChildNode && oldChildNode.length > 0)) {
                                        Sarissa.appendChildNode(fatherNode, sourceNode[0]);
                                    } else {
                                        Sarissa.replaceChildNode(fatherNode, sourceNode[0], oldChildNode[0]);
                                    }
                                    fatherNode.setAttribute("nodeIsSaved", "false");
                                    fatherNode.setAttribute("changedNode", "yes");
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

function parserAttributesXML(stringArgs, xmlSource, xmlDestination) {
    if (stringArgs != null && stringArgs != "" && xmlSource != null && xmlDestination != null) {
        var stringArgsNode = stringArgs.split(",");
        if (stringArgsNode && stringArgsNode.length > 0) {
            for (var itr = 0; itr < stringArgsNode.length; itr++) {
                stringArgsNode[itr] = Trim(stringArgsNode[itr]);
                var stringArgs = stringArgsNode[itr].split("::");
                if (stringArgs && stringArgs.length > 0) {
                    var sourceNodePath = stringArgs[0];
                    var destinationNodePath = stringArgs[1];
                    if (sourceNodePath && sourceNodePath.length > 0 && (destinationNodePath && destinationNodePath.length > 0)) {
                        var stringArgsSourcePath = sourceNodePath.split("@");
                        var stringArgsDestPath = destinationNodePath.split("@");
                        if (stringArgsSourcePath && stringArgsSourcePath.length > 0 && (stringArgsDestPath && stringArgsDestPath.length > 0)) {
                            var sourceNode = getNodes(xmlSource, stringArgsSourcePath[0].replaceAll("###", "@"));
                            var destinatNode = getNodes(xmlDestination, stringArgsDestPath[0].replaceAll("###", "@"));
                            if (sourceNode && sourceNode.length > 0 && (destinatNode && destinatNode.length > 0)) {
                                destinatNode[0].setAttribute(stringArgsDestPath[1], getNodeValue(sourceNode, stringArgsSourcePath[1]));
                                if (getNodeValue(destinatNode[0], stringArgsDestPath[1]) != getNodeValue(sourceNode, stringArgsSourcePath[1])) {
                                    destinatNode[0].setAttribute("changedNode", "yes");
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

function clearAttributesXML(stringArgs, xmlDestination) {
    try {
        if (stringArgs != null && stringArgs != "" && xmlDestination != null) {
            var stringArgsNode = stringArgs.split(",");
            if (stringArgsNode && stringArgsNode.length > 0) {
                for (var i = 0; i < stringArgsNode.length; i++) {
                    var stringArgs = stringArgsNode[i].split("::");
                    if (stringArgs && stringArgs.length > 0) {
                        var destinationNodePath = stringArgs[1];
                        if (destinationNodePath && destinationNodePath.length > 0) {
                            var stringArgsDestPath = destinationNodePath.split("@");
                            if (stringArgsDestPath && stringArgsDestPath.length > 0) {
                                var destinatNode = getNodes(xmlDestination, stringArgsDestPath[0].replaceAll("###", "@"));
                                if (destinatNode && destinatNode.length > 0) {
                                    setAttributeNode(destinatNode, stringArgsDestPath[1], "");
                                    destinatNode[0].setAttribute("changedNode", "yes");
                                }
                            }
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "clearAttributesXML", XMLRsis);
    }
}

function getStringPath(objXML, optionValue, optionValueRef, stringValues) {
    return _getStringPath(objXML, optionValue, optionValueRef, stringValues, 0);
}

function getStringPathByLength(objXML, optionValue, optionValueRef, stringValues, _COUNT_ID) {
    return _getStringPath(objXML, optionValue, optionValueRef, stringValues, _COUNT_ID);
}

function _getStringPath(objXML, optionValue, optionValueRef, stringValues, _COUNT_ID) {
    try {
        var path = "";
        if (optionValue != "") {
            var _COUNT_ID = _COUNT_ID == undefined || _COUNT_ID == null || _COUNT_ID == "" ? 0 : _COUNT_ID;
            var stringArgsOptionValue = optionValue.split(",");
            if (optionValueRef != null && optionValueRef != "") {
                var stringArgsOptionValueRef = optionValueRef.split(",");
                var stringArgsValues = "";
                if (stringValues != null && stringValues != undefined && stringValues != "") {
                    var stringArgsValues = (stringValues + "").split(",");
                }
                if (stringArgsOptionValue && stringArgsOptionValue.length > 0 && (stringArgsOptionValueRef && stringArgsOptionValueRef.length > 0)) {
                    var tempPathNode = "";
                    for (var i = 0; i < stringArgsOptionValue.length; i++) {
                        if (stringArgsOptionValue[i] != "") {
                            var pathNodeOptionValue = stringArgsOptionValue[i].split("@")[0];
                            pathNodeOptionValue = pathNodeOptionValue.replaceAll("###", "@");
                            var attNameOptionValue = stringArgsOptionValue[i].split("@")[1];
                            var pathNodeOptionValueRef = stringArgsOptionValueRef[i].split("@")[0];
                            pathNodeOptionValueRef = pathNodeOptionValueRef.replaceAll("###", "@");
                            var attNameOptionValueRef = stringArgsOptionValueRef[i].split("@")[1];
                            var nodeDomain = getNodes(objXML, ROOT_NODE + pathNodeOptionValueRef);
                            var identAttr = "";
                            if (stringArgsValues != "") {
                                var identAttr = stringArgsValues[i];
                            } else {
                                var identAttr = getNodeValueId(nodeDomain, attNameOptionValueRef, _COUNT_ID);
                            }
                            if (i == 0 && pathNodeOptionValue != tempPathNode) {
                                path = pathNodeOptionValue + "[@" + attNameOptionValue + "='" + identAttr + "'";
                                tempPathNode = pathNodeOptionValue;
                            } else if (i > 0 && pathNodeOptionValue == tempPathNode) {
                                path += " and @" + attNameOptionValue + "='" + identAttr + "'";
                                tempPathNode = pathNodeOptionValue;
                            } else if (i > 0 && pathNodeOptionValue != tempPathNode) {
                                path += "]" + pathNodeOptionValue + "[@" + attNameOptionValue + "='" + identAttr + "'";
                                tempPathNode = pathNodeOptionValue;
                            }
                        }
                    }
                    path += "]";
                }
            } else if (optionValueRef == null || optionValueRef == "") {
                if (stringArgsOptionValue && stringArgsOptionValue.length > 0) {
                    var tempPathNode = "";
                    for (var i = 0; i < stringArgsOptionValue.length; i++) {
                        var str = stringArgsOptionValue[i];
                        if (str != "") {
                            if (str.substring(0, 1) != "'") {
                                var pathNodeOptionValue = str.split("@")[0];
                                pathNodeOptionValue = pathNodeOptionValue.replaceAll("###", "@");
                                var attNameOptionValue = str.split("@")[1];
                                if (i == 0 && pathNodeOptionValue != tempPathNode) {
                                    path = pathNodeOptionValue;
                                    tempPathNode = pathNodeOptionValue;
                                } else if (pathNodeOptionValue != tempPathNode) {
                                    path += pathNodeOptionValue;
                                    tempPathNode = pathNodeOptionValue;
                                }
                            }
                        }
                    }
                }
            }
            return path;
        }
    } catch (oErr) {
        outPrint(oErr, "getStringPath", XMLRsis);
    }
    return "";
}

function valueStringConcat(objXML, stringArgs) {
    try {
        var values = "";
        if (objXML && stringArgs != "") {
            var stringArgsOptionValue = stringArgs.split(",");
            if (stringArgsOptionValue && stringArgsOptionValue.length > 0) {
                for (var i = 0; i < stringArgsOptionValue.length; i++) {
                    if (stringArgsOptionValue[i] != "") {
                        var pathNodeOptionValue = stringArgsOptionValue[i].split("@")[0];
                        pathNodeOptionValue = pathNodeOptionValue.replaceAll("###", "@");
                        var attNameOptionValue = stringArgsOptionValue[i].split("@")[1];
                        if (i > 0) {
                            values += ",";
                        }
                        var node = getNodes(objXML, ROOT_NODE + pathNodeOptionValue);
                        if (node && node.length > 0) {
                            values += getNodeValue(node, attNameOptionValue);
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "valueStringConcat", XMLRsis);
    }
    return values;
}

function changeNodeName(object, domainXML, CHANGE_NODE_NAME) {
    try {
        if (object && domainXML != null) {
            var buttonId = getAttMandatory(object, "id");
            var stringArgsForm = buttonId.split(":");
            var form = $(stringArgsForm[0]);
            var CHANGE_NODE_NAME = getAtt(object, "changeNodeName");
            var changeNodeNamePath = getAtt(object, "changeNodeNamePath");
            var argsPath = CHANGE_NODE_NAME.split("::");
            if (argsPath && argsPath.length > 0) {
                var xPathNode = argsPath[0];
                var newNodeName = argsPath[1];
                if (xPathNode && xPathNode != null && xPathNode != "" && newNodeName && newNodeName != null && newNodeName != "") {
                    var splitNodeName = xPathNode.split("/");
                    var newDomainXML = XML.broke(cloneObjXML(domainXML), xPathNode);
                    if (newDomainXML) {
                        var className = "";
                        var childNode = getNodes(newDomainXML, "/" + splitNodeName[splitNodeName.length - 1]);
                        if (childNode && childNode.length > 0) {
                            var className = childNode[0].getAttribute("className");
                        }
                        var parameters = "xmlDomain=" + escapeParam(newDomainXML.xml, true);
                        parameters += "&nodeName=" + escapeParam(newNodeName, false);
                        parameters += "&className=" + escapeParam(className, false);
                        parameters += "&xPath=" + escapeParam(changeNodeNamePath, false);
                        AjaxRsis.callActionSync(form.id, URL, getAttMandatory(form, "targetAction"), "changeNodeName", "", "", parameters);
                        var req = Properties.getProperty(form.id);
                        if (AjaxRsis.statusValidate(req) == false) return;
                        var domainXMLChanged = createObjXML(req.responseText), isFullySelectedXml = getAtt(object, "isFullySelectedXml");
                        if (isFullySelectedXml == "true") {
                            var fatherNode = null, xPathFatherNode = getStrPathNode(xPathNode, 1);
                            if (xPathFatherNode != null && xPathFatherNode != "") {
                                fatherNode = XML.getSingleNode(domainXML, "/" + xPathFatherNode);
                            }
                            if (fatherNode) {
                                var childNodeOld = getNodes(domainXML, xPathNode);
                                var childNodeNew = getNodes(domainXMLChanged, "/" + newNodeName);
                                if (childNodeNew && childNodeNew.length > 0 && (childNodeOld && childNodeOld.length > 0)) {
                                    Sarissa.replaceChildNode(fatherNode, childNodeNew.item(0), childNodeOld.item(0));
                                    return domainXML;
                                }
                            }
                        } else {
                            return domainXMLChanged;
                        }
                    }
                } else {
                    throw "Both source and destination xPath must be provided";
                }
            } else {
                throw "Both source and destination xPath must be provided";
            }
        }
    } catch (oErr) {
        outPrint(oErr, "changeNodeName", XMLRsis);
    }
    return null;
}

function cloneXMLCleanList(objXML, path) {
    try {
        if (objXML) {
            var objXMLTemp = cloneObjXML(objXML), args = path.split("/"), fatherNode = XML.getSingleNode(objXMLTemp, ROOT_NODE + "/" + args[1] + "/" + args[2]), nodesTemp = getNodes(objXMLTemp, path);
            if (nodesTemp && nodesTemp.length > 0) {
                for (var k = 0; k < nodesTemp.length; k++) {
                    if (fatherNode) {
                        fatherNode.removeChild(nodesTemp[k]);
                    }
                }
                return objXMLTemp;
            }
        }
    } catch (oErr) {
        outPrint(oErr, "cloneXMLCleanList", XMLRsis);
    }
    return null;
}

function getObjXMLByLength(UIForm, COUNT_ROW, object, len) {
    if (object && parseInt(len) != -1 && (UIForm && UIForm.getTableXML(object.id))) {
        var stringNodeRoot = getAttMandatory(object, "node"), path = ROOT_NODE + stringNodeRoot + "[@" + COUNT_ROW + "='" + len + "']", tableContent = $(object.id + ".tBdy"), objNode = getNodes(UIForm.getTableXML(object.id), path);
        if (objNode && objNode.length > 0) {
            if (parseInt(len) === 0 && tableContent.rows[0] && tableContent.rows[0].cells[0] && tableContent.rows[0].cells[0].childNodes[0] && tableContent.rows[0].cells[0].childNodes[0].type == "radio") {
                objNode[0].setAttribute("indSelecionado", "1");
            }
            return XML.broke(cloneObjXML(UIForm.getTableXML(object.id)), stringNodeRoot + "[@" + COUNT_ROW + "='" + len + "']");
        }
    }
    return null;
}

function getNodeByLength(UIForm, COUNT_ROW, object, len) {
    if (object && parseInt(len, 10) != -1 && (UIForm && UIForm.getTableXML(object.id))) {
        var stringNodeRoot = getAttMandatory(object, "node"), tableXML = UIForm.getTableXML(object.id), tableContent = $(object.id + ".tBdy"), stringPathNode = stringNodeRoot + "[@" + COUNT_ROW + "='" + parseInt(len) + "']", objNode = getNodes(UIForm.getTableXML(object.id), ROOT_NODE + stringPathNode);
        if (objNode && objNode.length > 0) {
            if (parseInt(len) === 0 && tableContent.rows[0].cells[0].childNodes[0].type == "radio") {
                objNode[0].setAttribute("indSelecionado", "1");
            }
        }
        return objNode;
    }
    return null;
}

function getDomainXML(obj, UIForm) {
    var domainXML = null;
    if (obj && UIForm) {
        var isColHdr = getAtt(obj, "isColumnHeader") === "true" ? true : false, numberColumn = -1, pathNodeEditTable = "", xml = getAtt(obj, "xml");
        if (xml != null && xml !== "") {
            var componentParam = $(xml);
            if (componentParam && componentParam.name === "xml") {
                domainXML = getObjXML(xml);
            } else {
                var table = UtilRsis.getTable(UIForm, xml);
                if (table != null) {
                    domainXML = UIForm.getTableXML(table.id);
                } else {
                    domainXML = UIForm.getParams(xml);
                }
            }
        } else if (isColHdr) {
            var numberColumn = getLineNumberColumHeader(obj);
            if (numberColumn != -1) {
                var nameEditTable = obj.id.split(".")[0], editTable = $(nameEditTable.split("::")[0]), pathNodeEditTable = getAttMandatory(editTable, "node");
                domainXML = getObjXMLByLength(UIForm, "countRowsTable", editTable, numberColumn);
                UIForm.setDomainTableXML(editTable, domainXML);
            }
        } else {
            domainXML = UIForm.domainXML;
        }
    }
    return domainXML;
}

function setDomainXML(obj, UIForm, domainXML, optionValue) {
    if (obj && UIForm) {
        var UIContext = Rsis.UIContext.get(UIForm);
        var isColHdr = $R(obj).isColHeader(), xml = obj.getAttribute("xml");
        if (xml != null && xml !== "") {
            var componentParam = $(xml);
            if (componentParam && componentParam.name == "xml") {
                storeObjXML(domainXML, xml);
            } else {
                var table = UtilRsis.getTable(UIForm, xml);
                if (table != null) {
                    UIForm.setTableXML(table.id, domainXML);
                } else {
                    UIForm.setParams(xml, domainXML);
                }
            }
        } else if (isColHdr) {
            var nameEditTable = obj.id.split(".")[0], editTable = $(nameEditTable.split("::")[0]), pathNodeEditTable = getAttMandatory(editTable, "node"), numberColumn = getLineNumberColumHeader(obj);
            if (editTable != null && UIForm.getTableXML(editTable.id) && numberColumn != -1) {
                var fatherNodeTable = XML.getSingleNode(UIForm.getTableXML(editTable.id), ROOT_NODE + getStrPathNode(pathNodeEditTable, 1));
                oldChildNode = getNodeByLength(UIForm, "countRowsTable", editTable, numberColumn);
                if (fatherNodeTable && oldChildNode && oldChildNode.length > 0) {
                    var stringPathPai = getStringPath(domainXML, optionValue, "", ""), args = stringPathPai.split("/"), childNodeNew = getNodes(cloneObjXML(domainXML), ROOT_NODE + "/" + args[1]);
                    if (childNodeNew && childNodeNew.length > 0) {
                        Sarissa.replaceChildNode(fatherNodeTable, childNodeNew[0], oldChildNode[0]);
                    }
                    if (typeof ManagerCacheProcess == "function" && UIForm.getDataScrollerXMLCache(editTable.id) != null) {
                        var myCache = UIContext.cache.getInstance(editTable.id);
                        myCache.object = editTable;
                        myCache.UIForm = UIForm;
                        myCache.node = getNodes(cloneObjXML(domainXML), ROOT_NODE + "/" + args[1]);
                        myCache.path = pathNodeEditTable;
                        ManagerCacheProcess(myCache, myCache.PO_UPDATE, true);
                    }
                }
            }
        } else {
            UIForm.domainXML = domainXML;
        }
    }
}

function getDomainXMLLine(UIForm, editTable, oElem, pathNode, attributeNode) {
    if (UIForm && editTable) {
        var tableContent = $(editTable.id + ".tBdy");
        var isRadioButton = tableContent && tableContent.rows[0] && tableContent.rows[0].cells[0] && tableContent.rows[0].cells[0].childNodes[0] && tableContent.rows[0].cells[0].childNodes[0].type == "radio";
        if (typeof attributeNode != "undefined" && attributeNode != "") {
            var nameCountRowsTable = Crud.getNameCountRowsTable(editTable);
            var stringPathNode = pathNode + "[@" + nameCountRowsTable + "='" + parseInt(oElem.value, 10) + "']";
            var objNode = getNodes(UIForm.getTableXML(editTable.id), stringPathNode);
            if (objNode && objNode.length > 0 && isRadioButton == true) {
                objNode[0].setAttribute("indSelecionado", "1");
            }
            var tableXML = XML.broke(cloneObjXML(UIForm.getTableXML(editTable.id)), stringPathNode.replace(ROOT_NODE, ""));
            return tableXML;
        } else {
            var nodeText = getNodes(UIForm.getTableXML(editTable.id), pathNode, oElem.value);
            if (nodeText && isRadioButton == true) {
                nodeText[0].setAttribute("indSelecionado", "1");
            }
            return nodeText != null ? createObjXML(nodeText.item(0).xml) : null;
        }
    }
    return null;
}

XMLRsis.XML = {
    getSendList: function(UIForm, tableName) {},
    changeNodeName: function(eNode, nodeName, newNodeName) {
        if (eNode && nodeName != null && newNodeName != null) {
            if (eNode && eNode.length > 0) {
                var fatherNewNode = cloneNodeElement(eNode[0].parentNode);
                if (fatherNewNode) {
                    Sarissa.clearChildNodes(fatherNewNode);
                }
                for (var i = 0; i < eNode.length; i++) {
                    var str = eNode[i] ? eNode[i].xml : null;
                    if (str != null) {
                        var strNode = XMLRsis.XML.replaceName(str, nodeName, newNodeName);
                        if (strNode) {
                            var newXML = createObjXML(addTagRoot(strNode));
                            if (newXML) {
                                Sarissa.appendChildNode(fatherNewNode, newXML.documentElement.firstChild);
                            }
                        }
                    }
                }
                return fatherNewNode;
            } else {
                var str = eNode ? eNode.xml : null;
                if (str != null) {
                    var strNode = XMLRsis.XML.replaceName(str, nodeName, newNodeName);
                    if (strNode) {
                        var newXML = createObjXML(addTagRoot(strNode));
                        if (newXML) {
                            return newXML.documentElement.firstChild;
                        }
                    }
                }
            }
        }
        return null;
    },
    replaceName: function(str, nodeName, newNodeName) {
        if (str != null) {
            var prefix = str.substring(0, nodeName.length + 1);
            var content = str.substring(nodeName.length + 1, str.length - nodeName.length - 1);
            var sufix = str.substring(str.length - nodeName.length - 1, str.length);
            if (prefix != "" && content != "" && sufix != "") {
                prefix = prefix.replace(nodeName, newNodeName);
                sufix = sufix.replace(nodeName, newNodeName);
                return prefix + content + sufix;
            }
        }
        return null;
    }
};

(function($R) {
    XML = {
        broke: function(objXML, nodeName) {
            return brokeImplementObjXML(objXML, nodeName);
        },
        clone: function(objXML) {
            return cloneObjXML(objXML);
        },
        create: function(value, xml) {
            if (!value) return null;
            var xmlDocument = createObjXML(typeof value === "string" ? value.search("<root>") === -1 ? addTagRoot(value) : value : value && value.length > 0 ? addTagRoot(value[0].xml) : addTagRoot(value.xml));
            if (xml && xmlDocument) {
                var fatherNode = null, nodeNew = xmlDocument.documentElement.firstChild;
                if (typeof xml.documentElement !== "undefined") {
                    fatherNode = xml.documentElement.firstChild;
                } else {
                    fatherNode = xml.length > 0 ? xml[0] : xml;
                }
                if (fatherNode && nodeNew) {
                    Sarissa.appendChildNode(fatherNode, nodeNew);
                }
            }
            return xmlDocument;
        },
        getSingleNode: function(objXML, xPath, noRootPath) {
            if (!noRootPath && xPath.search(ROOT_NODE) === -1) {
                xPath = ROOT_NODE + xPath;
            }
            if (objXML && typeof xPath == "string") {
                return objXML.documentElement.selectSingleNode(xPath);
            }
            return null;
        },
        getNodesLike: function(objXML, xPath, att, value, noRootPath) {
            if (!noRootPath && xPath.search(ROOT_NODE) === -1) {
                xPath = ROOT_NODE + xPath;
            }
            if (objXML && typeof xPath === "string") return getNodes(objXML, xPath + "[contains(@" + att + ",'" + value + "')]");
        },
        deleteNodes: function(objXML, xPath) {
            if (objXML && typeof xPath === "string") {
                var nodes = getNodes(objXML, xPath);
                if (nodes && nodes.length > 0) {
                    var fatherNode = this.getSingleNode(objXML, createPathFatherNode(xPath)), i = 0, mxln = nodes.length;
                    for (;i < mxln; i++) {
                        fatherNode.removeChild(nodes[i]);
                    }
                }
            }
            return objXML;
        },
        getAttributeNode: function(nodes, name) {
            var node = nodes && nodes.length > 0 ? nodes[0] : nodes;
            for (var i = 0; i < node.attributes.length; i++) {
                var att = node.attributes[i];
                if (att.nodeName === name) {
                    return att;
                }
            }
            return null;
        },
        hasAttribute: function(nodes, name) {
            var node = nodes && nodes.length > 0 ? nodes[0] : nodes;
            return !!this.getAttributeNode(node, name);
        },
        createCompositeKey: function(obj, objXML, _xpath) {
            if (obj && objXML) {
                var ck = obj.getAttribute("compositeKey");
                if (typeof ck !== "undefined" && ck !== null && ck !== "") {
                    var arry = ck.split("@");
                    if (arry && arry.length > 0) {
                        var xpathNode = obj.getAttribute("node"), xpathIdent = null;
                        if (typeof _xpath !== "undefined" && _xpath !== null && _xpath !== "") {
                            xpathNode = _xpath;
                        }
                        var xpath = xpathNode, nodes = getNodes(objXML, xpath), arrayPath = xpath.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1];
                        var nodesCache = getNodes(objXML, "/managerCache/" + arrayPath[arrayPath.length - 1]);
                        if (nodesCache && nodesCache.length > 0 && !(nodes && nodes.length > 0)) {
                            nodes = nodesCache;
                        }
                        if (nodes && nodes.length > 0) {
                            var checkBox = $R.Cache.getCheckBox(obj);
                            if (checkBox) {
                                if (!xpathIdent && checkBox.getAttribute("pathNodeIdent")) {
                                    xpathIdent = getAtt(checkBox, "pathNodeIdent");
                                }
                            } else if (obj.getAttribute("component") == "autoComplete") {
                                if (!xpathIdent && obj.getAttribute("pathNodeIdent")) {
                                    xpathIdent = getAtt(obj, "pathNodeIdent");
                                }
                            }
                            var it = 0, max = nodes.length, mx = arry.length;
                            for (;it < max; it++) {
                                var elementNode = null, valueIdent = "";
                                if (xpathIdent != null && xpathIdent !== "") {
                                    var childNode = getChildNodes(nodes[it], xpathIdent);
                                    if (childNode && childNode.length > 0) {
                                        elementNode = childNode[0];
                                    }
                                } else {
                                    elementNode = nodes[it];
                                }
                                if (elementNode) {
                                    var k = 0;
                                    for (;k < mx; k++) {
                                        var attPk = arry[k];
                                        if (attPk) {
                                            var p = elementNode.getAttribute(attPk);
                                            if (p != null) {
                                                valueIdent += p + "";
                                            }
                                        }
                                    }
                                    if (obj.getAttribute("component") == "autoComplete" && (xpathIdent != null && xpathIdent !== "") && elementNode.parentNode) {
                                        elementNode.parentNode.setAttribute("compositeKey", valueIdent);
                                    } else {
                                        elementNode.setAttribute("compositeKey", valueIdent);
                                    }
                                }
                            }
                        }
                    }
                }
            }
            return objXML;
        }
    };
    $R.XML = XML;
})(Rsis);

XMLRsis.XML = Object.extend(XMLRsis.XML, XML);

(function($R) {
    UIRsis = {
        _FILE: "011UIRsis.js",
        version: JRetail.rsis.VersionJS,
        INITIAL: "n",
        INCLUDING: "i",
        UPDATING: "u",
        SEARCHING: "s",
        EXCLUDING: "e",
        VISUALIZING: "v",
        HELP: "h",
        VALIDATE_ERROR: true,
        setValidateErrorUIForm: function(_vldte) {
            UIRsis.VALIDATE_ERROR = _vldte;
        },
        getValidateErrorUIForm: function() {
            return UIRsis.VALIDATE_ERROR;
        },
        getInstanceFrame: function(key, funcName) {
            if (window.frames && window.frames[key]) if (funcName != null && funcName != "") return eval('window.frames["' + key + '"].' + funcName + ";"); else return eval('window.frames["' + key + '"]');
            return null;
        },
        MIDDLEWARE_SRC: contextPath + "/middleware.view/js",
        ERROR_XML_MSG: "N&atilde;o foi possivel recuperar o objeto XML. Entre em contato com o administrador do sistema.",
        ERROR_NODE_XML_MSG: "N&atilde;o foi possivel recuperar o objeto Node do XML. Entre em contato com o administrador do sistema.",
        ERROR_PARAM_MSG: "Parametros n&atilde;o informados. Entre em contato com o administrador do sistema.",
        ERROR_LIB: "Biblioteca javascript n&atilde;o foi incluida!",
        FORM_ACCESSED: null,
        XPATH_HELP_COMPONENTS: "/aplicacaoComponentes/aplicacaoComponente",
        getElementNodesHelp: function(UIForm, seqHelpApp, helpKey) {
            try {
                if (UIForm) {
                    var xmlHelpApp = UIForm.getParams("xmlHelpApp");
                    if (xmlHelpApp) {
                        var nodes = getNodes(xmlHelpApp, "/aplicacao" + this.XPATH_HELP_COMPONENTS + "[@helpKey='" + helpKey + "']");
                        if (nodes && nodes.length > 0) {
                            return nodes[0];
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".getElementNodesHelp", this);
            }
            return null;
        },
        validateComponents: function(COMPONENTS) {
            try {
                if (COMPONENTS) {
                    var mdsrc = this.MIDDLEWARE_SRC, fni = JRetail.inc.js, fnv = isValidParameters, udf = undefined;
                    if (typeof UtilLibRsis === "undefined") {
                        fni(mdsrc + "/utilLibRsis.js", udf, "UtilLibRsis");
                    }
                    var clazz = "TextAreaRsis";
                    if (fnv(COMPONENTS["textarea"], clazz)) {
                        fni(mdsrc + "/textAreaRsis.js", udf, clazz);
                    }
                    clazz = "ButtonRsis";
                    if (fnv(COMPONENTS["button"], clazz)) {
                        fni(mdsrc + "/buttonRsis.js", udf, clazz);
                    }
                    clazz = "FileUploadRsis";
                    if (fnv(COMPONENTS["fileUpload"], clazz)) {
                        fni(mdsrc + "/fileUploadRsis.js", udf, clazz);
                    }
                    clazz = "ListBoxRsis";
                    if (fnv(COMPONENTS["listBox"], clazz)) {
                        fni(mdsrc + "/listBoxRsis.js", udf, clazz);
                    }
                    clazz = "ComboRsis";
                    if (fnv(COMPONENTS["comboBox"], clazz)) {
                        fni(mdsrc + "/comboRsis.js", udf, clazz);
                    }
                    clazz = "ComboActionsRsis";
                    if (fnv(COMPONENTS["comboActions"], clazz)) {
                        fni(mdsrc + "/comboActionsRsis.js", udf, clazz);
                    }
                    clazz = "SearchFieldRsis";
                    if (fnv(COMPONENTS["searchField"], clazz)) {
                        fni(mdsrc + "/searchFieldRsis.js", udf, clazz);
                    }
                    clazz = "RadioButtonRsis";
                    if (fnv(COMPONENTS["radioButton"], clazz)) {
                        fni(mdsrc + "/radiobuttonRsis.js", udf, clazz);
                    }
                    clazz = "CheckBoxRsis";
                    if (fnv(COMPONENTS["checkBox"], clazz)) {
                        fni(mdsrc + "/checkboxRsis.js", udf, clazz);
                    }
                    clazz = "AccordionRsis";
                    if (fnv(COMPONENTS["accordion"], clazz)) {
                        fni(mdsrc + "/accordionRsis.js", udf, clazz);
                    }
                    clazz = "CollapsedRsis";
                    if (fnv(COMPONENTS["collapsed"], clazz)) {
                        fni(mdsrc + "/collapsedRsis.js", udf, clazz);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".validateComponents", this);
            }
        },
        getUICollection: function(uiForm, COMPONENTS, form, cpName, tagName) {
            try {
                if (COMPONENTS && cpName != null && tagName != null) {
                    var cps = form.getElementsByTagName(tagName);
                    if (cps && cps.length > 0) {
                        var cMsgs = "messages";
                        if (cpName === cMsgs) {
                            COMPONENTS[cpName] = null;
                        } else {
                            COMPONENTS[cpName] = new Array();
                        }
                        COMPONENTS["isArrayCpts"] = true;
                        var mx = cps.length, it = 0, countCps = 0;
                        for (;it < mx; it++) {
                            var cpt = cps[it];
                            if (cpt) {
                                var component = cpt.getAttribute("component");
                                if (cpName === component) {
                                    if (cpName === cMsgs) {
                                        COMPONENTS[cpName] = cpt;
                                    } else {
                                        COMPONENTS[cpName][countCps++] = cpt;
                                    }
                                }
                            }
                        }
                        if (typeof uiForm !== undefined && uiForm != null) {
                            uiForm.setUIComponents(cpName, COMPONENTS[cpName]);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "getUICollection", this);
            }
        },
        setUICollections: function(uiForm, cps, form) {
            try {
                if (cps && form) {
                    var input = "input", label = "label", table = "table", textarea = "textarea", iframe = "iframe", div = "div";
                    var gtCp = this.getUICollection;
                    gtCp(uiForm, cps, form, label, label);
                    gtCp(uiForm, cps, form, label, "span");
                    gtCp(uiForm, cps, form, input, input);
                    gtCp(uiForm, cps, form, "autoComplete", input);
                    gtCp(uiForm, cps, form, "suggestBox", input);
                    gtCp(uiForm, cps, form, textarea, textarea);
                    gtCp(uiForm, cps, form, "button", "button");
                    gtCp(uiForm, cps, form, "messages", div);
                    gtCp(uiForm, cps, form, "toolBar", div);
                    gtCp(uiForm, cps, form, "editTable", table);
                    gtCp(uiForm, cps, form, "dataTable", table);
                    gtCp(uiForm, cps, form, "dataGrid", div);
                    gtCp(uiForm, cps, form, "dataScroller", div);
                    gtCp(uiForm, cps, form, "comboBox", input);
                    gtCp(uiForm, cps, form, "comboActions", input);
                    gtCp(uiForm, cps, form, "searchField", div);
                    gtCp(uiForm, cps, form, "footBar", table);
                    gtCp(uiForm, cps, form, "radioButton", div);
                    gtCp(uiForm, cps, form, "checkBox", div);
                    gtCp(uiForm, cps, form, "listBox", input);
                    gtCp(uiForm, cps, form, "fileUpload", input);
                    gtCp(uiForm, cps, form, "photoSlide", div);
                    gtCp(uiForm, cps, form, "listNote", div);
                    gtCp(uiForm, cps, form, "accordion", "ul");
                    gtCp(uiForm, cps, form, "collapsed", "fieldset");
                    gtCp(uiForm, cps, form, iframe, iframe);
                }
            } catch (oErr) {
                outPrint(oErr, "setUICollections()", this);
            }
        }
    };
    $R.fn.ui = $R.extend({}, $R.ui, UIRsis);
})(Rsis);

function _UIContext() {
    this.dialog = null;
    this.formsStart = new Array();
    this.forms = null;
    this.frames = null;
    this._dialogParams = null;
    this._UIComponentsPanel = new Array();
    this.cache = new MCache();
    this.navigable = typeof NavigableTree !== "undefined" ? new NavigableTree() : null;
    this._UIForms = new Array();
    this.$ = function(_id_) {
        if (this.dialog && _id_.search(/#/) == -1) {
            return $(this.dialog.id + "#" + _id_);
        } else return $(_id_);
    };
    this.$Tag = function(_n, obj) {
        if (this.dialog) {
            return $Tag(_n, obj, $(this.dialog.id));
        } else return $Tag(_n, obj);
    };
    this.getId = function() {
        return this.dialog ? this.dialog.id : "default";
    };
    this.setDialogParams = function(p) {
        return this._dialogParams = p;
    };
    this.DialogParams = function() {
        if (this._dialogParams === null) {
            this._dialogParams = this.dialog && this.dialog.optns ? this.dialog.optns.dialogArguments : crossDialog.getDialogArguments();
        }
        return this._dialogParams;
    };
    this.getDialogParam = function(key) {
        if (this._dialogParams === null) {
            this._dialogParams = this.dialog && this.dialog.optns ? this.dialog.optns.dialogArguments : crossDialog.getDialogArguments();
        }
        return this._dialogParams ? this._dialogParams[key] : null;
    };
    this.setUIComponentPanel = function(key, cmpt) {
        this._UIComponentsPanel[key] = cmpt;
    };
    this.getUIComponentPanel = function(key) {
        return this._UIComponentsPanel[key];
    };
    this.getAllUIComponentsPanel = function() {
        return this._UIComponentsPanel;
    };
    this.setUIForms = function() {
        var args = arguments, key = null, uif = null, length = args.length;
        if (length == 0) return;
        if (length > 1) {
            key = args[0];
            uif = args[1];
        } else {
            if (isUIForm(args[0])) {
                key = args[0].getForm().id;
                uif = args[0];
            }
        }
        this._UIForms[key] = uif;
    };
    this.getUIForms = function() {
        return this._UIForms;
    };
    this.getUIForm = function(key) {
        if (typeof key === "string" && key !== "") {
            if (this.dialog && this.dialog.id && key.search(/#/) == -1) {
                key = this.dialog.id + "#" + key;
            }
            return this._UIForms[key];
        } else if (Rsis.isArray(key)) {
            var array = [];
            for (var k in key) {
                array.push(this.getUIForm(k));
            }
            return array;
        } else if (key == null || key === "") {
            return this._UIForms[this.formsStart[0].id];
        } else if (key) {
            return this.getUIFormByObject(key);
        } else {
            return null;
        }
    };
    this.getUIFormByObject = function(_obj) {
        if (_obj && _obj.id) {
            return this.getUIForm(_obj.id.split(":")[0]);
        } else if (_obj && _obj.name) {
            return this.getUIForm(_obj.name.split(":")[0]);
        }
        return null;
    };
}

function _UIForm() {
    var _super = null, countMask = 0, _form = null, _UIComponents = new Array(), _UIMask = new Array(), _stateCache = null, father = null, MSG_TEMP = null, _dialogContainer = null;
    this.binding = false;
    this.method = "init";
    this.state = UIRsis.SEARCHING;
    this.domainXML = null;
    this.domainXMLTemplate = null;
    this.tableXML = null;
    this.domainTableXML = null;
    this.pageFilterXML = null;
    this.elementsChecked = null;
    this.messagesXML = null;
    this.configXML = null;
    this.userRolersXML = null;
    this.otherRolesXML = null;
    this.objXMLTemp = null;
    this._params = null;
    this.hasError = false;
    this._UIForm = null;
    this.setSuper = function(_UIForm) {
        if (_super == null) {
            _super = Rsis.UIContext.get(_UIForm);
        }
        if (_super && _form.getAttribute("father") != null) {
            _super.setUIForms(_form.getAttribute("father"), _UIForm);
        }
    };
    this.getSuper = function() {
        if (_super && _form.getAttribute("father") != null) {
            return _super.getUIForm(_form.getAttribute("father"));
        } else return null;
    };
    this.getDialogContainer = function() {
        return this._dialogContainer || document.getElementsByTagName("body")[0];
    };
    this.setDialogContainer = function(_dialog) {
        if (typeof _dialog !== "undefined" && _dialog !== null && _dialog !== "") {
            if (typeof _dialog === "string") {
                this._dialogContainer = this.getObject(_dialog + ".container");
            } else {
                this._dialogContainer = _dialog;
            }
        }
    };
    this.getDialogId = function() {
        var dataUi = null;
        if (this.getForm() && this.getForm().id && this.getForm().id.search(/#/) > -1) {
            dataUi = this.getForm().id.split("#")[0];
        } else if (this.getForm() && typeof this.getForm().getAttribute !== "undefined") dataUi = this.getForm().getAttribute("data-ui");
        return dataUi ? dataUi : "default";
    };
    this.set = function() {
        var nodes = scope = null, args = arguments, len = args.length;
        if (len == 0) return;
        if (len == 1) {
            if (typeof args[0] === "object") {
                scope = args[0];
            } else return;
            nodes = getNodes(this.domainXML, this.getXPath());
        } else if (len > 1) {
            nodes = isString(args[0]) ? getNodes(this.domainXML, this.getXPath() + args[0]) : isFunction(args[0]) ? args[0](this) : args[0];
            scope = args[1];
        }
        Rsis(nodes).setAtt(scope);
        this.bind(this.componentsForm());
        return this;
    };
    this.get = function() {
        var nodes = scope = null, args = arguments, len = args.length;
        if (len == 0) return;
        if (len == 1) {
            if (typeof args[0] === "object" || Rsis.isArray(args[0])) {
                scope = args[0];
            } else return;
            nodes = getNodes(this.domainXML, this.getXPath());
        } else if (len > 1) {
            nodes = isString(args[0]) ? getNodes(this.domainXML, this.getXPath() + args[0]) : isFunction(args[0]) ? args[0](this) : args[0];
            scope = args[1];
        }
        return Rsis(nodes).getAtt(scope);
    };
    this.setDomainXML = function(objXML, xPath, binding) {
        if (objXML) {
            if (isBoolean(xPath) && typeof binding == "undefined") {
                binding = xPath;
                xPath = null;
            }
            if (typeof binding == "undefined") {
                binding = this.binding;
            }
            if (typeof xPath !== "string") xPath = this.getXPath();
            var domainXML = XML.broke(objXML, "/xmlDomain" + xPath);
            if (domainXML) {
                this.domainXML = domainXML;
            } else {
                var node = getNodes(objXML, xPath);
                if (node && node.length > 0) {
                    this.domainXML = objXML;
                }
            }
            if (binding) {
                if (!this.domainXML) {
                    this.domainXML = this.domainXMLTemplate;
                }
                this.bind(this.componentsForm());
            }
        }
        return this;
    };
    this.setDomainXMLTemplate = function(objXML, xPath) {
        if (objXML) {
            if (typeof xPath !== "string") xPath = this.getXPath();
            this.domainXMLTemplate = brokeImplementObjXML(objXML, "/xmlDomainTemplate" + xPath);
        }
        return this;
    };
    this.dataScrollerXMLCache = new Array();
    this.isCached = 0;
    this.setForm = function(f) {
        _form = f;
    };
    this.getForm = function() {
        return _form;
    };
    this.getXPath = function() {
        var xpth = this.getForm().getAttribute("node");
        return xpth == null ? "" : xpth;
    };
    function isNotNull(string) {
        return typeof string === "string" && string != null && string !== "";
    }
    function add(cpt, queryparams) {
        if (cpt) {
            var params = cpt.getAttribute("params"), xml = cpt.getAttribute("xml");
            if (isNotNull(params) && Rsis.inArray(params, queryparams) == -1) {
                queryparams.push(params);
            }
            if (isNotNull(xml) && Rsis.inArray(xml, queryparams) == -1) {
                queryparams.push(xml);
            }
        }
    }
    function createValueTagParams(object) {
        var cpts = object.querySelectorAll("[params],[xml]"), queryparams = [];
        if (cpts && cpts.length > 0) {
            var k = 0, cont = cpts.length;
            for (;k < cont; k++) {
                add(cpts[k], queryparams);
            }
        }
        return queryparams;
    }
    function configXPathTagParams(value) {
        var xpath = [];
        if (value.length > 0) {
            for (var i = 0; i < value.length; i++) {
                xpath[i] = "/" + value[i];
            }
        }
        return xpath;
    }
    this.setParams = function(key, param, xPath, binding) {
        var length = arguments.length;
        if ($R.isXMLDoc(arguments[0]) && length >= 1 && length < 3) {
            param = arguments[0];
            key = createValueTagParams(this.getForm());
            xPath = configXPathTagParams(key);
            if (length == 2) {
                binding = arguments[length];
            }
        } else if (isBoolean(xPath) && typeof binding == "undefined") {
            binding = xPath;
            xPath = null;
        }
        if (this._params == null) {
            this._params = new Array();
        }
        if (typeof binding == "undefined") {
            binding = this.binding;
        }
        var stringparams = "";
        if (typeof xPath !== "undefined" && xPath != null && xPath !== "") {
            if (Rsis.isArray(xPath)) {
                if (Rsis.isArray(key) && Rsis.isArray(xPath) && key.length === xPath.length) {
                    var k = 0, length = key.length;
                    for (;k < length; k++) {
                        var stringPath = xPath[k], stringKey = key[k];
                        if (typeof stringPath !== "undefined" && stringPath != null && stringPath !== "") {
                            this._params[stringKey] = XML.broke(param, stringPath);
                            if (binding) {
                                if (k > 0) stringparams += ",";
                                stringparams += '[params="' + stringKey + '"],[xml="' + stringKey + '"]';
                            }
                        }
                    }
                }
            } else {
                this._params[key] = XML.broke(param, xPath);
                if (binding) stringparams += '[params="' + key + '"],[xml="' + key + '"]';
            }
        } else if (key !== null && typeof key === "object") {
            for (name in key) {
                var stringKey = name, stringPath = key[name];
                if (isNoEmpty(stringPath)) {
                    this._params[stringKey] = XML.broke(param, stringPath);
                    if (binding) {
                        if (k > 0) stringparams += ",";
                        stringparams += '[params="' + stringKey + '"],[xml="' + stringKey + '"]';
                    }
                }
            }
        } else if (typeof key === "string") {
            this._params[key] = param;
            if (binding) stringparams += '[params="' + key + '"],[xml="' + key + '"]';
        }
        if (binding && !isEmpty(stringparams)) {
            this.bind(this.getForm().querySelectorAll(stringparams));
        }
        return this;
    };
    this.getParams = function(key) {
        return this._params != null ? validateUndefined(this._params[key]) : null;
    };
    this.setUIComponents = function(key, cmpts) {
        _UIComponents[key] = cmpts;
    };
    this.getUIComponent = function(key) {
        return validateUndefined(_UIComponents[key]);
    };
    this.getAllUIComponents = function() {
        return _UIComponents;
    };
    this.addUIMask = function(stringMask) {
        _UIMask[countMask++] = stringMask;
    };
    this.getUIMask = function() {
        return _UIMask;
    };
    this.clearUIMask = function() {
        _UIMask = new Array();
    };
    this.hasErrorValidate = function() {
        return UIRsis.getValidateErrorUIForm() === false ? true : this.hasError === false ? true : false;
    };
    this.setCache = function(obj) {
        this.isCached = obj === true ? 1 : 0;
    };
    this.getCached = function() {
        return this.isCached;
    };
    this.setNodeToDomainTableXML = function(NODE) {
        if (NODE && NODE.length > 0) {
            if (this.domainTableXML == null) {
                this.domainTableXML = new Array();
            }
            this.domainTableXML = createObjXML(addTagRoot(NODE.xml));
        }
    };
    this.setStateCache = function(_state_) {
        _stateCache = _state_;
    };
    this.getStateCache = function() {
        return _stateCache;
    };
    function _stateValidated(_, value) {
        return _.state === value;
    }
    this.isInsert = function() {
        return _stateValidated(this, UIRsis.INCLUDING);
    };
    this.isUpdate = function() {
        return _stateValidated(this, UIRsis.UPDATING);
    };
    this.isInsertUpdate = function() {
        return _stateValidated(this, UIRsis.UPDATING) || _stateValidated(this, UIRsis.INCLUDING);
    };
    this.isSearch = function() {
        return _stateValidated(this, UIRsis.SEARCHING);
    };
    this.isVisualize = function() {
        return _stateValidated(this, UIRsis.VISUALIZING);
    };
    function getTableXML(objXML, prefix, xpathTable) {
        var objXML = arguments[0];
        var tableXML = null;
        if (objXML != null) {
            if (!prefix) prefix = "/xmlTable";
            if (!xpathTable) xpathTable = "/page";
            var hasNodeTable = getNodes(objXML, prefix + xpathTable);
            if (hasNodeTable && hasNodeTable.length > 0) {
                tableXML = XML.broke(objXML, prefix + xpathTable);
            }
        }
        return tableXML;
    }
    function getNodeTable(thiz, object, indSelecionado) {
        if (!object || !indSelecionado) return null;
        var nodes = getNodes(thiz.getTableXML(object.id), object.getAttribute("node") + "[@" + indSelecionado + "='1']");
        if (nodes && nodes.length > 0) {
            return nodes[0];
        }
        return null;
    }
    this.getNodeTable = function(arg0, arg1) {
        var indSelecionado = isEmpty(arg1) ? "indSelecionado" : arg1;
        if (isNoEmpty(arg0)) {
            if (isString(arg0)) {
                var table = this.getObject(arg0);
                if (table) {
                    return getNodeTable(this, table, indSelecionado);
                }
            } else if (typeof arg0 === "object" && typeof arg0.getAttribute == "function" && isNoEmpty(arg0.getAttribute("component"))) {
                var isTable = new RegExp(/^$|(?:data|edit)table/i).test(arg0.getAttribute("component").toLowerCase());
                if (isTable) return getNodeTable(this, arg0, indSelecionado);
            }
        }
        return null;
    };
    this.setTableXML = function(tableName, _tableXML, binding, iscreatecache) {
        var tableXML = getTableXML(_tableXML);
        if (_tableXML && tableXML) {
            _tableXML = tableXML;
        }
        if (this.tableXML == null) {
            this.tableXML = new Array();
        }
        if (typeof binding == "undefined") {
            binding = this.binding;
        }
        if (tableName && typeof tableName !== "string" && typeof tableName.id !== "undefined") {
            tableName = tableName.id;
        }
        if (tableName && _tableXML) {
            _tableXML = this.createCompositeKey(tableName, _tableXML);
        }
        this.tableXML[tableName] = _tableXML;
        if (binding) {
            var t = $(tableName), s = getDataScrollerByTable(tableName);
            if (_tableXML) {
                if (t.getAttribute("cacheNodesChecked") === "true" && iscreatecache) {
                    $R.Cache.createNodeElements({
                        table: t
                    });
                }
                this.bind([ t, s ]);
            } else {
                $R(t).drawBody(true);
                this.bind([ t, s ]);
            }
        }
        return this;
    };
    this.getTableXML = function(tableName) {
        if (tableName && typeof tableName !== "string" && typeof tableName.id !== "undefined") {
            tableName = tableName.id;
        }
        return this.tableXML != null ? validateUndefined(this.tableXML[tableName]) : null;
    };
    this.updateNodeTableXML = function(table, oNode, binding, iscreatecache) {
        if (table) {
            if (isString(table)) table = this.getObject(table);
            if (!oNode) {
                oNode = this.domainXML;
            }
            var nodeName = table.getAttribute("node"), pathFatherNode = createPathFatherNode(nodeName), _tableXML = this.getTableXML(table.id);
            if (_tableXML != null) {
                var newDomainNode = null;
                if (oNode.nodeType === Node.DOCUMENT_NODE && oNode.nodeType !== Node.ELEMENT_NODE) {
                    newDomainNode = XML.clone(oNode).documentElement.firstChild;
                } else {
                    newDomainNode = oNode.nodeType == Node.ELEMENT_NODE ? oNode : oNode[0];
                }
                var fatherNode = XML.getSingleNode(_tableXML, pathFatherNode), replacedNode = getNodes(_tableXML, nodeName + "[@indSelecionado='1']");
                if (replacedNode && replacedNode.length > 0) {
                    newDomainNode.setAttribute("indSelecionado", "1");
                    var countCache = replacedNode[0].getAttribute("countCache");
                    if (isNoEmpty(countCache)) {
                        newDomainNode.setAttribute("countCache", countCache);
                    }
                    Sarissa.replaceChildNode(fatherNode, newDomainNode, replacedNode[0]);
                }
                if (typeof binding == "undefined") {
                    binding = this.binding;
                }
                this.setTableXML(table.id, _tableXML, binding, iscreatecache);
            }
        }
        return this;
    };
    this.setDataScrollerXMLCache = function(tableName, _xmlCache) {
        if (this.dataScrollerXMLCache == null) {
            this.dataScrollerXMLCache = new Array();
        }
        if (tableName && _xmlCache) {
            if (typeof tableName !== "string" && typeof tableName.id !== "undefined") tableName = tableName.id;
            _xmlCache = this.createCompositeKey(tableName, _xmlCache);
        }
        this.dataScrollerXMLCache[tableName] = _xmlCache;
        return this;
    };
    this.getDataScrollerXMLCache = function(id) {
        return this.dataScrollerXMLCache != null ? validateUndefined(this.dataScrollerXMLCache[id]) : null;
    };
    this.createCompositeKey = function(id, _xml) {
        return XML.createCompositeKey($(id), _xml, null);
    };
    this.setPageFilterXML = function(id, _pageFilterXML) {
        if (this.pageFilterXML == null) {
            this.pageFilterXML = new Array();
        }
        this.pageFilterXML[id] = _pageFilterXML;
    };
    this.getPageFilterXML = function(id) {
        return this.pageFilterXML != null ? validateUndefined(this.pageFilterXML[id]) : null;
    };
    this.setDomainTableXML = function(id, _tableXML) {
        if (this.domainTableXML == null) {
            this.domainTableXML = new Array();
        }
        this.domainTableXML[id] = _tableXML;
        return this;
    };
    this.getDomainTableXML = function(id) {
        return this.domainTableXML != null ? validateUndefined(this.domainTableXML[id]) : null;
    };
    this.setElementsChecked = function(id, xmlElements) {
        if (this.elementsChecked == null) {
            this.elementsChecked = new Array();
        }
        this.elementsChecked[id] = xmlElements;
        return this;
    };
    this.getElementsChecked = function(id) {
        return this.elementsChecked != null ? validateUndefined(this.elementsChecked[id]) : null;
    };
    this.setUIForm = function(_uiform) {
        this._UIForm = _uiform;
    };
    this.getTargetAction = function() {
        return getAttMandatory(this.getForm(), "targetAction");
    }, this.getUIForm = function() {
        return validateUndefined(this._UIForm);
    };
    function getStateEditable(s) {
        if (s == UIRsis.INCLUDING || s == UIRsis.UPDATING || s == UIRsis.SEARCHING) return s;
        return UIRsis.UPDATING;
    }
    this.render = function(args, state) {
        if (args) {
            if (isEmpty(state)) state = this.state;
            if (isBoolean(state)) {
                state = state ? getStateEditable(this.state) : UIRsis.VISUALIZING;
            }
            if (isString(args)) {
                Rsis.render(this.getObject(args), state, true);
            } else {
                if (Rsis.isArray(args)) {
                    var arrayIsString = true;
                    for (var i = 0; i < args.length; i++) {
                        if (typeof args[i] !== "string") {
                            arrayIsString = false;
                            break;
                        }
                    }
                    Rsis.render(arrayIsString ? this.getObject(args) : args, state, true);
                } else if (typeof args === "object") {
                    Rsis.render(args, state, true);
                }
            }
        } else {
            renderUIForm(this, this.state);
        }
        return this;
    };
    this.$R = function(_o_) {
        return $R(this.getObject(_o_));
    };
    this.getObject = function(object) {
        var thiz = this;
        if (typeof object !== "undefined" && object != null) {
            if (typeof object === "string") {
                if (object !== "") {
                    if (thiz.getForm() != null) {
                        return $object(thiz.getForm().id, object);
                    }
                }
            } else if (Rsis.isArray(object) && thiz.getForm() != null) {
                var i = 0, _form = thiz.getForm(), mxl = object.length, arrayObjects = [];
                for (;i < mxl; i++) {
                    var id = object[i];
                    if (typeof id == "string" && id != null && id !== "") {
                        arrayObjects.push($object(_form.id, id));
                    }
                }
                if (arrayObjects.length > 0) {
                    return arrayObjects;
                }
            }
        }
        return null;
    };
    this.bind = function(args) {
        $R.render(args, this.state, false);
        return this;
    };
    this.http = function(options) {
        var UIForm = options.UIForm || this, xmlDomain = options.xmlDomain || (this.domainXML ? this.domainXML.xml : ""), parameters = options.parameters || [ "xmlDomain=" + escapeParam(xmlDomain, true) ], action = typeof options.action == "undefined" ? UIForm.getTargetAction() : options.action, loading = typeof options.loading == "undefined" ? true : options.loading, async = typeof options.async == "undefined" && !isBoolean(options.async) ? true : options.async, method = options.method, obj = options.object, success = options.success, error = options.error, render = options.render, self = this;
        if (isEmpty(method)) {
            console.log(">Error: The action execution method was not implemented!");
            return false;
        }
        AjaxRsis.call({
            async: async,
            loading: loading,
            uiform: UIForm,
            method: method,
            action: action,
            dataType: options.dataType,
            parameters: parameters,
            object: obj,
            success: typeof success === "function" ? success : function(_UIForm, objXML, obj) {
                Message.render(UIForm, objXML);
                UIForm.setDomainXMLTemplate(objXML);
                UIForm.setDomainXML(objXML, true);
                UIForm.setParams(objXML);
            },
            error: typeof error === "function" ? error : function(_UIForm, objXML, obj) {
                Message.render(UIForm, objXML);
            },
            render: typeof render === "function" ? render : function(_UIForm, objXML, obj) {
                UIForm.render();
            }
        });
        return this;
    };
    this.reload = function() {
        reloadComponents(this);
        return this.getAllUIComponents();
    };
    this.getMsgTemp = function() {
        var temp = null;
        if (MSG_TEMP != null) {
            var temp = cloneObjXML(MSG_TEMP);
            MSG_TEMP = null;
        }
        return temp;
    };
    this.setMsgTemp = function(t) {
        MSG_TEMP = t;
    };
    function validateUndefined(_p_) {
        return typeof _p_ === "undefined" ? null : _p_;
    }
    this.componentsForm = function() {
        var COMPONENTS = this.getAllUIComponents();
        return COMPONENTS["radioButton"].concat(COMPONENTS["checkBox"]).concat(COMPONENTS["label"]).concat(COMPONENTS["input"]).concat(COMPONENTS["textarea"]).concat(COMPONENTS["autoComplete"]).concat(COMPONENTS["suggestBox"]).concat(COMPONENTS["listBox"]).concat(COMPONENTS["comboBox"]).concat(COMPONENTS["comboActions"]).concat(COMPONENTS["searchField"]).concat(COMPONENTS["fileUpload"]).concat(COMPONENTS["button"]);
    };
    this.dialogArguments = function(value) {
        var uic = $R.UIContext.get(this);
        if (uic) {
            return isString(value) && isNoEmpty(value) ? uic.getDialogParam(value) : uic.DialogParams();
        }
        return null;
    };
    this.getDialogParams = this.dialogArguments;
    this.xml2Json = function(domain) {
        if (!domain) domain = this.domainXML;
        if (domain) {
            var root = domain.documentElement, nodeName = root.firstChild ? root.firstChild.nodeName : "root", x2js = new X2JS(), json = x2js.xml2json(root.firstChild);
            if (json) {
                json._jsonName = nodeName;
                return json;
            }
        }
        return null;
    };
    this.json2Xml = function(domain, isUpdateDomain) {
        if (domain) {
            var x2js = new X2JS(), dxml = null, json = {};
            if (isNoEmpty(domain._jsonName)) {
                json[domain._jsonName] = domain;
            } else {
                json = domain;
            }
            dxml = x2js.json2xml_str(json);
            if (dxml) {
                var objXML = XML.create(dxml);
                if (isUpdateDomain) {
                    this.domainXML = objXML;
                }
                return objXML;
            }
        }
        return null;
    };
}

function initializeUIContent() {
    try {
        if (typeof _Wf === "undefined") {
            _Wf = Rsis.fn.loader.getWf();
        }
        Rsis.fn.loader.invalidateLocationStorage();
        var doc = document, ctrpanel = $("ctrpanel");
        if (doc.title) {
            doc.title = doc.title + " :: " + getMessageBundle("ERROR_VERSION") + UIRsis.version + " ::.";
        }
        if (ctrpanel && ctrpanel.style) {
            if (isEmpty(ctrpanel.style.width)) {
                ctrpanel.style.width = "100%";
            }
            if (isEmpty(ctrpanel.style.height)) {
                ctrpanel.style.height = "100%";
            }
        }
        var UIContext = Rsis.UIContext.get(arguments[0]);
        UIContext.forms = doc.forms;
        UIContext.frames = $Tag("IFRAME");
        UIContext.formsStart = getStartInitForms();
        initializeUIComponents();
        var body = doc.getElementsByTagName("body")[0], execute = getAtt(body, "execute"), defer = getAtt(body, "defer");
        if (typeof Loading !== "undefined") {
            Loading.init();
        }
        var helpStored = $R.helpStored;
        if (helpStored && helpStored.getEnableHelp()) {
            $R.helpStored.initialize(helpStored.getSeqHelpApp(body.firstChild));
        }
        if (execute !== "") {
            if (execute.search(/\(\)/) > -1) {
                execute.replace(/\(\)/, "(body.firstChild)");
            }
            eval(execute);
        } else {
            init(body.firstChild);
        }
        renderUIComponents();
        shortcut.add("alt+H", function(event) {
            Crud.startHelpKeys(event, shortcut.getDialogId());
        }, {
            type: "keydown",
            propagate: true
        }, body.firstChild);
    } catch (oErr) {
        outPrint(oErr, "initializeUIContent", UIRsis);
    }
    return false;
}

function reloadComponents(UIForm) {
    try {
        if (UIForm) {
            var form = UIForm.getForm(), UIContext = Rsis.UIContext.get(form), COMPONENTS = [], formName = form.id;
            if (typeof formName !== "undefined" && formName != null && formName !== "") {
                if (UIContext && UIContext.dialog) {
                    var ui = UIContext.dialog.id, dataUiForm = form.getAttribute("data-ui");
                    if (dataUiForm == null || dataUiForm === "") {
                        form.setAttribute("data-ui", ui);
                    }
                }
                if (typeof iframeName != "undefined" && iframeName != null && iframeName !== "") {
                    formName = iframeName + "__" + formName;
                }
                form.id = formName;
            }
            UIRsis.setUICollections(UIForm, COMPONENTS, form);
            form.reset();
            UIContext.setUIForms(formName, UIForm);
            UIRsis.validateComponents(COMPONENTS);
            if (UIContext.dialog) {
                var dataUi = UIContext.dialog.id;
                setDataUI(COMPONENTS, dataUi);
                setDataUITabbedPanes(COMPONENTS, dataUi);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "reloadComponents()", UIRsis);
    }
}

function initializeUIComponents(_p) {
    try {
        var UIContext = Rsis.UIContext.get(_p);
        if (UIContext.formsStart && UIContext.formsStart.length > 0) {
            initializeForms(UIContext.formsStart);
        }
    } catch (oErr) {
        outPrint(oErr, "initializeUIComponents", UIRsis);
    }
}

function initializeForms(FORMS, iframeName) {
    try {
        if (FORMS) {
            var UIContext = null;
            for (var i = 0, MAX_LENGTH = FORMS.length; i < MAX_LENGTH; i++) {
                var form = FORMS[i];
                if (form) {
                    UIContext = Rsis.UIContext.get(form);
                    var uiForm = new _UIForm(), COMPONENTS = [];
                    uiForm.setForm(form);
                    var formName = form.id;
                    if (isNoEmpty(formName)) {
                        if (UIContext && UIContext.dialog) {
                            var ui = UIContext.dialog.id, dataUiForm = form.getAttribute("data-ui");
                            if (dataUiForm == null || dataUiForm === "") {
                                form.setAttribute("data-ui", ui);
                            }
                        }
                        if (isNoEmpty(iframeName)) {
                            formName = iframeName + "__" + formName;
                        }
                        form.id = formName;
                    }
                    UIRsis.setUICollections(uiForm, COMPONENTS, form);
                    form.reset();
                    UIContext.setUIForms(formName, uiForm);
                    UIRsis.validateComponents(COMPONENTS);
                    if (UIContext.dialog) {
                        var dataUi = UIContext.dialog.id;
                        setDataUI(COMPONENTS, dataUi);
                        setDataUITabbedPanes(COMPONENTS, dataUi);
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "initializeForms", UIRsis);
    }
}

function getComponents(object) {
    try {
        if (object) {
            var UIContext = Rsis.UIContext.get(object);
            var COMPONENTS = [];
            UIRsis.setUICollections(null, COMPONENTS, object);
            var id = getAttMandatory(object, "id");
            if (id !== null && id !== "") {
                var stringArgs = id.split(":");
                var UIForm = UIContext.getUIForm(stringArgs[0]);
                if (UIForm && UIForm.configXML) {
                    configForm(COMPONENTS, UIForm);
                }
            }
            return COMPONENTS;
        }
    } catch (oErr) {
        outPrint(oErr, "getComponents", UIRsis);
    }
    return null;
}

function renderUIComponents() {
    try {
        var UIContext = Rsis.UIContext.get(arguments[1]);
        var length = arguments && arguments.length ? arguments.length : null, formsInit = arguments && arguments[0] ? getStartInitForms(arguments[0]) : UIContext.formsStart, object = null, dataUi = null;
        if (length > 1 && Rsis.typeOf(arguments[1]) === "object") {
            dataUi = arguments[1].parentNode.getAttribute("data-ui");
            object = $(dataUi + ".ctrpanel");
        }
        if (UIContext && formsInit && formsInit.length > 0) {
            var arrayList = UIContext.getUIForms(), MAX_I = formsInit.length;
            for (var i = 0; i < MAX_I; i++) {
                var UIForm = arrayList[formsInit[i].id];
                if (UIForm) {
                    var componentsWindow = UIForm.getAllUIComponents();
                    if (dataUi !== null && dataUi !== "") {
                        UIForm.getForm().setAttribute("data-ui", dataUi);
                        setDataUI(componentsWindow, dataUi);
                        setDataUITabbedPanes(componentsWindow, dataUi);
                    }
                    UIForm.setDialogContainer(object);
                    UIRsis.validateComponents(componentsWindow);
                    if (UIForm.configXML) {
                        configForm(componentsWindow, UIForm);
                    }
                    renderEdit(componentsWindow, UIForm.state);
                    renderForm(componentsWindow, UIForm.state);
                    renderTable(componentsWindow, UIForm.state);
                    renderDataGrids(componentsWindow, UIForm.state);
                    renderToolBars(componentsWindow, UIForm.state);
                    renderMessagesPanel(componentsWindow, UIForm.state);
                    renderListNode(componentsWindow, UIForm.state);
                    renderFoolBars(componentsWindow, UIForm.state);
                    renderSlidePhoto(componentsWindow, UIForm.state);
                    renderAccordions(componentsWindow, UIForm.state);
                    renderCollapseds(componentsWindow, UIForm.state);
                }
            }
        }
        var body = document.getElementsByTagName("body")[0], executeRender = null;
        if (Rsis.typeOf(object) === "object") {
            executeRender = getAtt(object, "executeRender");
        } else {
            executeRender = getAtt(body, "executeRender");
        }
        if (executeRender != null && executeRender !== "") {
            compressEvalAfterRen(executeRender);
        }
    } catch (oErr) {
        outPrint(oErr, "renderUIComponents", UIRsis);
    }
}

function renderUIForm(UIForm, state) {
    try {
        if (UIForm) {
            if (!state) state = UIForm.state;
            var componentsWindow = UIForm.getAllUIComponents();
            UIRsis.validateComponents(componentsWindow);
            if (UIForm.configXML) {
                configForm(componentsWindow, UIForm);
            }
            renderEdit(componentsWindow, state);
            renderTable(componentsWindow, state);
            renderDataScrollerPage(componentsWindow, state);
            renderDataGrids(componentsWindow, state);
            renderToolBars(componentsWindow, state);
            renderForm(componentsWindow, state);
            renderMessagesPanel(componentsWindow, state);
            renderListNode(componentsWindow, state);
            renderFoolBars(componentsWindow, state);
            renderSlidePhoto(componentsWindow, state);
            renderAccordions(componentsWindow, state);
            renderCollapseds(componentsWindow, state);
        }
    } catch (oErr) {
        outPrint(oErr, "renderUIForm", UIRsis);
    }
}

function renderForm(COMPONENTS, status) {
    try {
        if (!COMPONENTS) return;
        var fnu = "FUNCTION_UNDEFINED", gtM = getMessageBundle, elb = UIRsis.ERROR_LIB;
        Rsis.ui.start("RadioButtonRsis", COMPONENTS["radioButton"], status).start("CheckBoxRsis", COMPONENTS["checkBox"], status);
        Rsis.ui.start("LabelRsis", COMPONENTS["label"], status).start("InputRsis", COMPONENTS["input"], status).start("TextAreaRsis", COMPONENTS["textarea"], status).start("AutoCompleteRsis", COMPONENTS["autoComplete"], status).start("SuggestBoxRsis", COMPONENTS["suggestBox"], status).start("ListBoxRsis", COMPONENTS["listBox"], status).start("ComboRsis", COMPONENTS["comboBox"], status).start("ComboActionsRsis", COMPONENTS["comboActions"], status).start("SearchFieldRsis", COMPONENTS["searchField"], status).start("FileUploadRsis", COMPONENTS["fileUpload"], status);
        var buttons = COMPONENTS["button"];
        if (buttons != undefined && (buttons && buttons.length > 0)) {
            var b = 0, max_b = buttons.length;
            for (;b < max_b; b++) {
                var includeLib = getAtt(buttons[b], "includeLib");
                if (includeLib === "true" && typeof renderButton === "function") {
                    if (typeof ButtonRsis === "undefined") throw new MiddlewareViewException(gtM(fnu, elb, "ButtonRsis"));
                    renderButton(buttons[b], status);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderForm", UIRsis);
    } finally {
        _NO_RENDER_INPUT = false;
    }
}

function renderAccordions(COMPONENTS, status) {
    try {
        if (!COMPONENTS) return;
        Rsis.ui.start("AccordionRsis", COMPONENTS["accordion"], status);
    } catch (oErr) {
        outPrint(oErr, "renderAccordions", UIRsis);
    }
}

function renderCollapseds(COMPONENTS, status) {
    try {
        if (!COMPONENTS) return;
        Rsis.ui.start("CollapsedRsis", COMPONENTS["collapsed"], status);
    } catch (oErr) {
        outPrint(oErr, "renderCollapseds", UIRsis);
    }
}

function renderSlidePhoto(COMPONENTS, status) {
    try {
        Rsis.ui.start("PhotoSlideRsis", COMPONENTS["photoSlide"], status);
    } catch (oErr) {
        outPrint(oErr, "renderSlidePhoto", UIRsis);
    }
}

function renderListNode(COMPONENTS, status) {
    try {
        Rsis.ui.start("ListNoteRsis", COMPONENTS["listNote"], status);
    } catch (oErr) {
        outPrint(oErr, "renderListNode", UIRsis);
    }
}

function renderFileUploadsForm(COMPONENTS, status) {
    try {
        Rsis.ui.start("FileUploadRsis", COMPONENTS["fileUpload"], status);
    } catch (oErr) {
        outPrint(oErr, "renderFileUploadsForm", UIRsis);
    }
}

function renderRadio(COMPONENTS, status) {
    try {
        Rsis.ui.start("RadioButtonRsis", COMPONENTS["radioButton"], status);
    } catch (oErr) {
        outPrint(oErr, "renderRadio", UIRsis);
    }
}

function renderCheck(COMPONENTS, status) {
    try {
        Rsis.ui.start("CheckBoxRsis", COMPONENTS["checkBox"], status);
    } catch (oErr) {
        outPrint(oErr, "renderCheck", UIRsis);
    }
}

function renderTable(COMPONENTS, status) {
    try {
        if (!COMPONENTS) return;
        Rsis.ui.start("DataTableRsis", COMPONENTS["dataTable"], status);
    } catch (oErr) {
        outPrint(oErr, "renderTable", UIRsis);
    }
}

function renderEdit(COMPONENTS, status) {
    try {
        if (!COMPONENTS) return;
        Rsis.ui.start("EditTableRsis", COMPONENTS["editTable"], status);
    } catch (oErr) {
        outPrint(oErr, "renderEdit", UIRsis);
    }
}

function renderDataGrids(COMPONENTS, status) {
    try {
        Rsis.ui.start("DataGridRsis", COMPONENTS["dataGrid"], status);
    } catch (oErr) {
        outPrint(oErr, "renderDataGrids", UIRsis);
    }
}

function renderDataScrollerPage(COMPONENTS, status) {
    try {
        if (!COMPONENTS) return;
        Rsis.ui.start("DataScrollRsis", COMPONENTS["dataScroller"], status);
    } catch (oErr) {
        outPrint(oErr, "renderDataScrollerPage()", UIRsis);
    }
}

function renderToolBars(COMPONENTS, status) {
    try {
        if (!COMPONENTS) return;
        Rsis.ui.start("ToolBarRsis", COMPONENTS["toolBar"], status);
    } catch (oErr) {
        outPrint(oErr, "renderToolBars", UIRsis);
    }
}

function renderMessagesPanel(COMPONENTS, status) {
    try {
        var messages = COMPONENTS["messages"];
        if (isValidParameters(messages, "renderMessages")) {
            renderMessages(messages, status);
        }
    } catch (oErr) {
        outPrint(oErr, "renderMessagesPanel", UIRsis);
    }
}

function renderFoolBars(COMPONENTS, status) {
    try {
        Rsis.ui.start("FootBarRsis", COMPONENTS["footBar"], status);
    } catch (oErr) {
        outPrint(oErr, "renderFoolBars", UIRsis);
    }
}

function renderTabbedPanes(COMPONENTS) {
    try {
        Rsis.ui.start("TabbedPaneRsis", COMPONENTS["tabbedPane"], status);
    } catch (oErr) {
        outPrint(oErr, "renderTabbedPanes", UIRsis);
    }
}

function renderDependents(obj, UIForm, elements) {
    try {
        if (!elements) {
            return;
        }
        if (UIForm && (elements && elements.length > 0)) {
            var renderDependentsDev = obj.getAttribute("renderDependentsDev");
            if (renderDependentsDev) {
                elements = compressEvalRsisAll(renderDependentsDev, obj, UIForm, elements);
            }
            var it = 0, max_l = elements.length, state = "";
            if (max_l <= 0) return;
            for (;it < max_l; it++) {
                var target = elements[it];
                if (target) {
                    var object = target.object, state = target.state;
                    Rsis.render(object, state, true);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderDependents", UIRsis);
    }
}

function formToXML(UIForm) {
    try {
        if (UIForm) {
            var COMPONENTS = UIForm.getAllUIComponents();
            Rsis.ui.update("inputToXML", COMPONENTS["input"]).update("textAreaToXML", COMPONENTS["textarea"]);
        }
    } catch (oErr) {
        outPrint(oErr, "formToXML", UIRsis);
    }
    return true;
}

function updateForm(UIForm) {
    try {
        if (UIForm) {
            updateComponents(UIForm.getAllUIComponents());
        }
    } catch (oErr) {
        outPrint(oErr, "updateForm", UIRsis);
    }
}

function updateComponents(COMPONENTS) {
    try {
        if (COMPONENTS) {
            Rsis.ui.update("xmlToInput", COMPONENTS["input"]).update("xmlToTextArea", COMPONENTS["textarea"]).update("xmlToCombo", COMPONENTS["textarea"]).update("xmlToCombo", COMPONENTS["comboActions"]).update("xmlToSelect", COMPONENTS["autoComplete"]).update("xmlToSelect", COMPONENTS["suggestBox"]).update("xmlToRadioButton", COMPONENTS["radioButton"]).update("xmlToSearchField", COMPONENTS["searchField"]).update("xmlToListBox", COMPONENTS["listBox"]);
        }
    } catch (oErr) {
        outPrint(oErr, "updateComponents()", UIRsis);
    }
}

function clearForm(UIForm) {
    try {
        if (UIForm) {
            clearFormByComponents(UIForm.getAllUIComponents());
        }
    } catch (oErr) {
        outPrint(oErr, "clearForm", UIRsis);
    }
}

function clearFormByComponents(COMPONENTS) {
    try {
        if (COMPONENTS) {
            Rsis.ui.clear("clearInput", COMPONENTS["input"]).clear("clearTextArea", COMPONENTS["textarea"]).clear("clearAutoComplete", COMPONENTS["autoComplete"]).clear("clearSuggestBox", COMPONENTS["suggestBox"]).clear("clearComboBox", COMPONENTS["comboBox"]).clear("clearComboBox", COMPONENTS["comboActions"]).clear("clearSearchField", COMPONENTS["searchField"]).clear("clearRadioButton", COMPONENTS["radioButton"]).clear("clearCheckBox", COMPONENTS["checkBox"]).clear("clearInput", COMPONENTS["fileUpload"]);
        }
    } catch (oErr) {
        outPrint(oErr, "clearFormByComponents", UIRsis);
    }
}

function updateXMLFormToDialogArgs() {
    try {
        var UIContext = Rsis.UIContext.get(arguments[0]), param = UIContext.DialogParams();
        if (param && param != null) {
            var modalFormField = param["modalFormField"], searchNode = param["searchNode"], status = param["state"], inputSearchValue = param["inputSearchValue"], stringDomainXML = param["domainXML"];
            if (isNoEmpty(modalFormField) && modalFormField.search(/#/) > -1) {
                modalFormField = modalFormField.split("#")[1];
            }
            if (UIContext.dialog && UIContext.dialog.id) {
                modalFormField = UIContext.dialog.id + "#" + modalFormField;
            }
            var UIForm = UIContext.getUIForm(modalFormField);
            if (UIForm) {
                var form = UIForm.getForm(), stringNode = UIForm.getXPath();
                switch (status) {
                  case UIRsis.SEARCHING:
                    if (typeof stringDomainXML == "undefined" || stringDomainXML == null || stringDomainXML === "") {
                        UIForm.domainXML = cloneObjXML(XML.broke(UIForm.domainXMLTemplate, stringNode));
                    }
                    UIForm.state = UIRsis.SEARCHING;
                    break;

                  case UIRsis.INCLUDING:
                    if (typeof stringDomainXML == "undefined" || stringDomainXML === "") {
                        UIForm.domainXML = cloneObjXML(XML.broke(UIForm.domainXMLTemplate, stringNode));
                    } else {
                        UIForm.domainXML = createObjXML(stringDomainXML);
                    }
                    UIForm.state = UIRsis.INCLUDING;
                    break;

                  case UIRsis.UPDATING:
                    UIForm.domainXML = createObjXML(stringDomainXML);
                    UIForm.state = UIRsis.UPDATING;
                    break;
                }
                if (typeof searchNode !== "undefined" && searchNode !== null && searchNode !== "") {
                    if (status === UIRsis.INCLUDING || status === UIRsis.SEARCHING) {
                        var stringArgsNodes = searchNode.split("@");
                        if (stringArgsNodes && stringArgsNodes.length > 0) {
                            var nodes = getNodes(UIForm.domainXML, ROOT_NODE + stringNode);
                            if (stringArgsNodes[0] !== "") {
                                nodes = getNodes(UIForm.domainXML, ROOT_NODE + stringArgsNodes[0]);
                            }
                            if (nodes && nodes.length > 0 && (inputSearchValue != undefined && inputSearchValue !== "") && (searchNode != undefined && searchNode !== "")) {
                                var stringArgsNodes = searchNode.split("@");
                                if (stringArgsNodes && stringArgsNodes.length > 0) {
                                    nodes[0].setAttribute(stringArgsNodes[1], inputSearchValue);
                                }
                            }
                        }
                    }
                }
                if (UIForm.domainXML) {
                    UIContext.setUIForms(modalFormField, UIForm);
                    var cps = UIForm.getAllUIComponents();
                    renderForm(cps, UIForm.state);
                    renderToolBars(cps, UIForm.state);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "updateXMLFormToDialogArgs()", UIRsis);
    }
}

function enableHelpApp(COMPONENTS, UIForm, enableHelp) {
    try {
        Rsis.ui.help("renderHelpLabel", COMPONENTS["label"], UIForm, enableHelp).help("renderHelpInput", COMPONENTS["input"], UIForm, enableHelp).help("renderHelpTextArea", COMPONENTS["textarea"], UIForm, enableHelp).help("renderHelpFileUpload", COMPONENTS["fileUpload"], UIForm, enableHelp).help("renderHelpCombo", COMPONENTS["comboBox"], UIForm, enableHelp).help("renderHelpComboActions", COMPONENTS["comboActions"], UIForm, enableHelp).help("renderHelpSearchField", COMPONENTS["searchField"], UIForm, enableHelp).help("renderHelpAutoComplete", COMPONENTS["autoComplete"], UIForm, enableHelp).help("renderHelpListBox", COMPONENTS["listBox"], UIForm, enableHelp).help("renderHelpSuggestBox", COMPONENTS["suggestBox"], UIForm, enableHelp).help("renderHelpPhotoSlide", COMPONENTS["photoSlide"], UIForm, enableHelp).help("renderHelpRadioButton", COMPONENTS["radioButton"], UIForm, enableHelp).help("renderHelpCheckBox", COMPONENTS["checkBox"], UIForm, enableHelp).help("renderHelpButton", COMPONENTS["button"], UIForm, enableHelp, true).help("renderHelpToolBar", COMPONENTS["toolBar"], UIForm, enableHelp).help("renderHelpEditTable", COMPONENTS["editTable"], UIForm, enableHelp).help("renderHelpTable", COMPONENTS["dataTable"], UIForm, enableHelp).help("renderHelpDataScroller", COMPONENTS["dataScroller"], UIForm, enableHelp);
    } catch (oErr) {
        outPrint(oErr, "configHelpApp", UIRsis);
    }
}

function enableHelpKeys(COMPONENTS, UIForm, enableHelp) {
    try {
        Rsis.ui.help("renderHelpKeysLabel", COMPONENTS["label"], UIForm, enableHelp).help("renderHelpKeysInput", COMPONENTS["input"], UIForm, enableHelp).help("renderHelpKeysTextArea", COMPONENTS["textarea"], UIForm, enableHelp).help("renderHelpKeysFileUpload", COMPONENTS["fileUpload"], UIForm, enableHelp).help("renderHelpKeysCombo", COMPONENTS["comboBox"], UIForm, enableHelp).help("renderHelpKeysComboActions", COMPONENTS["comboActions"], UIForm, enableHelp).help("renderHelpKeysSearchField", COMPONENTS["searchField"], UIForm, enableHelp).help("renderHelpKeysAutoComplete", COMPONENTS["autoComplete"], UIForm, enableHelp).help("renderHelpKeysListBox", COMPONENTS["listBox"], UIForm, enableHelp).help("renderHelpKeysSuggestBox", COMPONENTS["suggestBox"], UIForm, enableHelp).help("renderHelpKeysPhotoSlide", COMPONENTS["photoSlide"], UIForm, enableHelp).help("renderHelpKeysRadioButton", COMPONENTS["radioButton"], UIForm, enableHelp).help("renderHelpKeysCheckBox", COMPONENTS["checkBox"], UIForm, enableHelp).help("renderHelpKeysButton", COMPONENTS["button"], UIForm, enableHelp, true).help("renderHelpKeysToolBar", COMPONENTS["toolBar"], UIForm, enableHelp).help("renderHelpKeysEditTable", COMPONENTS["editTable"], UIForm, enableHelp).help("renderHelpKeysTable", COMPONENTS["dataTable"], UIForm, enableHelp).help("renderHelpKeysDataScroller", COMPONENTS["dataScroller"], UIForm, enableHelp);
    } catch (oErr) {
        outPrint(oErr, "configHelpKeys", UIRsis);
    }
}

function init() {
    try {
        var UIContext = Rsis.UIContext.get(arguments[0]), forms = UIContext.formsStart;
        if (forms && forms.length > 0) {
            for (var i = 0; i < forms.length; i++) {
                var fs = forms[i];
                AjaxRsis.callAction(fs.id, URL, getAttMandatory(fs, "targetAction"), "init", "callBackInit", "", "xmlDomain=");
            }
        }
    } catch (oErr) {
        outPrint(oErr, "init", UIRsis);
    }
}

function initActionForms(forms, callBackFuntion, arrayParams, METHOD_NAME) {
    try {
        if (forms && forms.length > 0 && arrayParams !== "") {
            if (typeof METHOD_NAME === "undefined" || METHOD_NAME == null || METHOD_NAME === "") {
                METHOD_NAME = "init";
            }
            for (var i = 0; i < forms.length; i++) {
                var fac = forms[i], callBack = "";
                if (typeof callBackFuntion === "object") {
                    callBack = callBackFuntion[i];
                } else {
                    callBack = callBackFuntion;
                }
                var PARAMS_STRING = "";
                if (typeof callBackFuntion === "object") {
                    PARAMS_STRING = arrayParams[i];
                } else {
                    PARAMS_STRING = arrayParams;
                }
                AjaxRsis.callActionDeveloper(fac.id, URL, getAttMandatory(fac, "targetAction"), METHOD_NAME, callBack, PARAMS_STRING);
            }
        } else {
            alert(getMessageBundle("ERROR_TAG"));
        }
    } catch (oErr) {
        outPrint(oErr, "initActionForms", UIRsis);
    }
}

function initAction(forms, callBackFuntion, params, METHOD_NAME, _callbackInit) {
    try {
        if (forms && forms.length > 0 && params !== "") {
            if (typeof METHOD_NAME === "undefined" || METHOD_NAME == null || METHOD_NAME === "") {
                METHOD_NAME = "init";
            }
            for (var i = 0; i < forms.length; i++) {
                var formAction = forms[i];
                AjaxRsis.callActionDeveloper(formAction.id, URL, getAttMandatory(formAction, "targetAction"), METHOD_NAME, callBackFuntion, params, _callbackInit);
            }
        } else {
            alert(getMessageBundle("ERROR_TAG"));
        }
    } catch (oErr) {
        outPrint(oErr, "initAction", UIRsis);
    }
}

function callBackInitAction(f, funCallBackDeveloper) {
    try {
        var st = arguments[arguments.length - 1];
        var Transfer = AjaxRsis.process(f, typeof st == "object" ? st : null);
        if (Transfer && Transfer.objXML && Transfer.UIForm) {
            var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
            var form = UIForm.getForm(), nodeNameForm = UIForm.getXPath();
            var UIContext = Rsis.UIContext.get(form), COMPONENTS = UIForm.getAllUIComponents();
            if (COMPONENTS) {
                Message.render(UIForm, objXML);
                if (UIForm.hasError == false) {
                    UIForm.setDomainXMLTemplate(objXML);
                    UIForm.setDomainXML(objXML);
                    if (!UIForm.domainXML) {
                        UIForm.domainXML = XML.clone(UIForm.domainXMLTemplate);
                    }
                    UIForm.configXML = XML.broke(objXML, "/xmlConfig/configComponents");
                    var COMPONENTS = UIForm.getAllUIComponents();
                    if (UIForm.configXML) {
                        configForm(COMPONENTS, UIForm);
                    }
                    UIForm.isCached = 1;
                    if (funCallBackDeveloper != undefined && funCallBackDeveloper !== "") {
                        compressAfterInit(UIForm, objXML, funCallBackDeveloper);
                    }
                    var dataTables = COMPONENTS["dataTable"];
                    if (dataTables != undefined) {
                        for (var n = 0; n < dataTables.length; n++) {
                            var nodeName = getAttMandatory(dataTables[n], "node");
                            UIForm.setTableXML(dataTables[n].id, XML.broke(objXML, "/xmlTable/page" + nodeName));
                        }
                    }
                    var dataGrids = COMPONENTS["dataGrid"];
                    if (dataGrids != undefined) {
                        for (var t = 0; t < dataGrids.length; t++) {
                            UIForm.setTableXML(dataGrids[t].id, XML.broke(objXML, "/xmlDataGrid/dataGrid"));
                        }
                        renderDataGrids(COMPONENTS, UIForm.state);
                    }
                    var editTables = COMPONENTS["editTable"];
                    if (editTables != undefined) {
                        for (var k = 0; k < editTables.length; k++) {
                            if (typeof createTables === "function") createTables(UIForm, objXML, editTables[k], COMPONENTS, nodeNameForm);
                        }
                    }
                    renderRadio(COMPONENTS, UIForm.state);
                    renderListNode(COMPONENTS, UIForm.state);
                    renderSlidePhoto(COMPONENTS, UIForm.state);
                    UIContext.setUIForms(f, UIForm);
                    var updateFromDialog = getAtt(form, "updateFromDialog");
                    if (updateFromDialog !== "false") {
                        if (UIForm.domainXML != null) {
                            crossDialog.setParam(UIForm.getDialogId(), "domainXML", UIForm.domainXML.xml);
                        }
                        updateXMLFormToDialogArgs(form);
                    }
                    var container = UIForm.getDialogContainer(), afterinit = getAttFuncDeveloper(container, "afterinit");
                    if (afterinit !== "") {
                        compressAfterInit(UIForm, objXML, afterinit);
                    }
                }
            } else {
                alert(getMessageBundle("ERROR_TAG"));
            }
        }
    } catch (oErr) {
        outPrint(oErr, "callBackInitAction", UIRsis);
    }
}

function callBackInit(f, callComponent, st) {
    try {
        var Transfer = AjaxRsis.process(f, st);
        if (Transfer && Transfer.objXML && Transfer.UIForm) {
            var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
            Message.render(UIForm, objXML);
            var form = UIForm.getForm(), nodeNameForm = UIForm.getXPath();
            var UIContext = Rsis.UIContext.get(form), COMPONENTS = UIForm.getAllUIComponents();
            if (COMPONENTS) {
                if (UIForm.hasError == false) {
                    UIForm.setDomainXMLTemplate(objXML);
                    UIForm.setDomainXML(objXML);
                    if (!UIForm.domainXML) {
                        UIForm.domainXML = XML.clone(UIForm.domainXMLTemplate);
                    }
                    UIForm.configXML = XML.broke(objXML, "/xmlConfig/configComponents");
                    var COMPONENTS = UIForm.getAllUIComponents();
                    if (UIForm.configXML) {
                        configForm(COMPONENTS, UIForm);
                    }
                    UIForm.isCached = 1;
                    var dataTables = COMPONENTS["dataTable"];
                    if (dataTables != undefined) {
                        for (var n = 0; n < dataTables.length; n++) {
                            UIForm.setTableXML(dataTables[n].id, XML.broke(objXML, "/xmlTable" + dataTables[n].getAttribute("node")));
                        }
                    }
                    var dataGrids = COMPONENTS["dataGrid"];
                    if (dataGrids != undefined) {
                        for (var t = 0; t < dataGrids.length; t++) {
                            UIForm.setTableXML(dataGrids[t].id, XML.broke(objXML, "/xmlDataGrid/dataGrid"));
                        }
                        renderDataGrids(COMPONENTS, UIForm.state);
                    }
                    var editTables = COMPONENTS["editTable"];
                    if (isValidParameters(editTables, createTables)) {
                        for (var k = 0; k < editTables.length; k++) {
                            if (typeof EditTableRsis !== "undefined") {
                                createTables(UIForm, objXML, editTables[k], COMPONENTS, nodeNameForm);
                            }
                        }
                    }
                    renderListNode(COMPONENTS, UIForm.state);
                    renderSlidePhoto(COMPONENTS, UIForm.state);
                    UIContext.setUIForms(f, UIForm);
                    var updateFromDialog = getAtt(form, "updateFromDialog");
                    if (updateFromDialog !== "false") {
                        updateXMLFormToDialogArgs(form);
                    }
                    var container = UIForm.getDialogContainer(), afterinit = getAttFuncDeveloper(container, "afterinit");
                    if (afterinit !== "") {
                        compressAfterInit(UIForm, objXML, afterinit);
                    }
                }
            } else {
                alert(getMessageBundle("ERROR_TAG"));
            }
        }
    } catch (oErr) {
        outPrint(oErr, "callBackInit", UIRsis);
    }
}

function getStartInitForms() {
    try {
        var formsInit = arguments && arguments[0] ? arguments[0] : document.forms;
        if (formsInit) {
            var ARRAY_FORMS = [], hasFormInit = false, countForms = 0;
            for (var i = 0; i < formsInit.length; i++) {
                var startInit = formsInit[i].getAttribute("startinit");
                if (startInit === "true") {
                    hasFormInit = true;
                    ARRAY_FORMS[countForms++] = formsInit[i];
                }
            }
            if (!hasFormInit) {
                ARRAY_FORMS[0] = formsInit[0];
            }
            return ARRAY_FORMS;
        }
    } catch (oErr) {
        outPrint(oErr, "getStartInitForms", UIRsis);
    }
    return null;
}

function isValidParameters(args1, args2) {
    if (args1 != undefined && (args1 && args1.length > 0) && typeof window[args2] == "undefined") {
        return true;
    }
    return false;
}

function setDataUITabbedPanes(COMPONENTS, dataUi) {
    try {
        var cpts = COMPONENTS["tabbedPane"];
        if (cpts && cpts.length > 0) {
            for (var n = 0; n < cpts.length; n++) {
                cpts[n].setAttribute("data-ui", dataUi);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "setDataUITabbedPanes", UIRsis);
    }
}

function setDataUIInCpts(cpts, dataUi) {
    try {
        if (cpts && cpts.length > 0) {
            for (var n = 0; n < cpts.length; n++) {
                cpts[n].setAttribute("data-ui", dataUi);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "setDataUITabbedPanes()", UIRsis);
    }
}

function setDataUI(COMPONENTS, dataUi) {
    try {
        if (COMPONENTS) {
            var arrayCpt = ("label input textarea fileUpload comboBox searchField autoComplete suggestBox" + " button messages toolBar editTable dataTable dataScroller comboActions footBar radioButton" + " checkBox listBox fileUpload photoSlide listNote accordion collapsed tabbedPane dataGrid").split(" ");
            if (arrayCpt && arrayCpt.length > 0) {
                for (var k = 0; k < arrayCpt.length; k++) {
                    var name = arrayCpt[k];
                    if (name) {
                        if (name === "messages") {
                            var messages = COMPONENTS[name];
                            if (messages && messages[0]) messages[0].setAttribute("data-ui", dataUi); else if (messages && typeof messages.setAttribute !== "undefined") messages.setAttribute("data-ui", dataUi);
                        } else {
                            var cpts = COMPONENTS[name];
                            if (cpts && cpts.length > 0) {
                                for (var n = 0; n < cpts.length; n++) {
                                    cpts[n].setAttribute("data-ui", dataUi);
                                }
                            }
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "setDataUI", UIRsis);
    }
}

function setDataUICpt(component, cpt) {
    if (component && cpt && typeof cpt.setAttribute !== "undefined") {
        var dataUi = component.getAttribute("data-ui");
        if (dataUi !== null && dataUi !== "") {
            cpt.setAttribute("data-ui", dataUi);
        }
    }
}

function configForm(COMPONENTS, UIForm) {
    try {
        var labels = COMPONENTS["label"];
        if (isValidParameters(labels, "configLabel")) {
            for (var n = 0; n < labels.length; n++) {
                configLabel(labels[n], UIForm.configXML);
            }
        }
        var inputs = COMPONENTS["input"];
        if (isValidParameters(inputs, "configInput")) {
            for (var m = 0; m < inputs.length; m++) {
                configInput(inputs[m], UIForm.configXML);
            }
        }
        var textAreas = COMPONENTS["textarea"];
        if (isValidParameters(textAreas, "configTextArea")) {
            for (var z = 0; z < textAreas.length; z++) {
                configTextArea(textAreas[z], UIForm.configXML);
            }
        }
        var fileUploads = COMPONENTS["fileUpload"];
        if (isValidParameters(fileUploads, "configFileUpload")) {
            for (var itm = 0; itm < fileUploads.length; itm++) {
                configFileUpload(fileUploads[itm], UIForm.configXML);
            }
        }
        var combos = COMPONENTS["comboBox"];
        if (isValidParameters(combos, "configComboBox")) {
            for (var q = 0; q < combos.length; q++) {
                configComboBox(combos[q], UIForm.configXML);
            }
        }
        var searchFields = COMPONENTS["searchField"];
        if (isValidParameters(searchFields, "configSearchField")) {
            for (var f = 0; f < searchFields.length; f++) {
                configSearchField(searchFields[f], UIForm.configXML);
            }
        }
        var autoCompletes = COMPONENTS["autoComplete"];
        if (isValidParameters(autoCompletes, "configAutoComplete")) {
            for (var a = 0; a < autoCompletes.length; a++) {
                configAutoComplete(autoCompletes[a], UIForm.configXML);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "configForm", UIRsis);
    }
}

function Sarissa() {}

Sarissa.VERSION = "0.9.9.5";

Sarissa._FILE = "012sarissa.js";

Sarissa.PARSED_OK = "Document contains no parsing errors";

Sarissa.PARSED_EMPTY = "Document is empty";

Sarissa.PARSED_UNKNOWN_ERROR = "Not well-formed or other error";

Sarissa.IS_ENABLED_TRANSFORM_NODE = false;

Sarissa.REMOTE_CALL_FLAG = "gr.abiss.sarissa.REMOTE_CALL_FLAG";

Sarissa._lastUniqueSuffix = 0;

Sarissa._getUniqueSuffix = function() {
    return Sarissa._lastUniqueSuffix++;
};

Sarissa._SARISSA_IEPREFIX4XSLPARAM = "";

Sarissa._SARISSA_HAS_DOM_IMPLEMENTATION = document.implementation && true;

Sarissa._SARISSA_HAS_DOM_CREATE_DOCUMENT = Sarissa._SARISSA_HAS_DOM_IMPLEMENTATION && document.implementation.createDocument;

Sarissa._SARISSA_HAS_DOM_FEATURE = Sarissa._SARISSA_HAS_DOM_IMPLEMENTATION && document.implementation.hasFeature;

Sarissa._SARISSA_IS_MOZ = Sarissa._SARISSA_HAS_DOM_CREATE_DOCUMENT && Sarissa._SARISSA_HAS_DOM_FEATURE;

Sarissa._SARISSA_IS_SAFARI = navigator.userAgent.toLowerCase().indexOf("safari") != -1 || navigator.userAgent.toLowerCase().indexOf("konqueror") != -1;

Sarissa._SARISSA_IS_SAFARI_OLD = Sarissa._SARISSA_IS_SAFARI && parseInt((navigator.userAgent.match(/AppleWebKit\/(\d+)/) || {})[1], 10) < 420;

Sarissa._SARISSA_IS_IE = Rsis.browser.msie || document.all && window.ActiveXObject && navigator.userAgent.toLowerCase().indexOf("msie") > -1 && navigator.userAgent.toLowerCase().indexOf("opera") == -1;

Sarissa._SARISSA_IS_OPERA = navigator.userAgent.toLowerCase().indexOf("opera") != -1;

if (!window.Node || !Node.ELEMENT_NODE) {
    Node = {
        ELEMENT_NODE: 1,
        ATTRIBUTE_NODE: 2,
        TEXT_NODE: 3,
        CDATA_SECTION_NODE: 4,
        ENTITY_REFERENCE_NODE: 5,
        ENTITY_NODE: 6,
        PROCESSING_INSTRUCTION_NODE: 7,
        COMMENT_NODE: 8,
        DOCUMENT_NODE: 9,
        DOCUMENT_TYPE_NODE: 10,
        DOCUMENT_FRAGMENT_NODE: 11,
        NOTATION_NODE: 12
    };
}

Sarissa._CHARSET = Rsis.charset;

if (Sarissa._SARISSA_IS_SAFARI_OLD) {
    HTMLHtmlElement = document.createElement("html").constructor;
    Node = HTMLElement = {};
    HTMLElement.prototype = HTMLHtmlElement.__proto__.__proto__;
    HTMLDocument = Document = document.constructor;
    var x = new DOMParser();
    XMLDocument = x.constructor;
    Element = x.parseFromString("<Single />", "text/xml").documentElement.constructor;
    x = null;
}

if (Rsis.browser.msie && Rsis.browser.versionNumber < 9 && typeof XMLDocument == "undefined" && typeof Document != "undefined") {
    XMLDocument = Document;
}

Array.prototype.isEmpty = function() {
    if (this && this.length > 0) return false;
    return true;
};

if (Sarissa._SARISSA_IS_IE) {
    Sarissa._SARISSA_IEPREFIX4XSLPARAM = "xsl:";
    var _SARISSA_DOM_PROGID = "";
    var _SARISSA_XMLHTTP_PROGID = "";
    var _SARISSA_DOM_XMLWRITER = "";
    Sarissa.pickRecentProgID = function(idList) {
        var bFound = false, e;
        var o2Store;
        for (var i = 0; i < idList.length && !bFound; i++) {
            try {
                var oDoc = new ActiveXObject(idList[i]);
                o2Store = idList[i];
                bFound = true;
            } catch (objException) {
                e = objException;
            }
        }
        if (!bFound) {
            throw "Could not retrieve a valid progID of Class: " + idList[idList.length - 1] + ". (original exception: " + e + ")";
        }
        idList = null;
        return o2Store;
    };
    _SARISSA_DOM_PROGID = null;
    _SARISSA_THREADEDDOM_PROGID = null;
    _SARISSA_XSLTEMPLATE_PROGID = null;
    _SARISSA_XMLHTTP_PROGID = null;
    XMLHttpRequest = function() {
        if (!_SARISSA_XMLHTTP_PROGID) {
            _SARISSA_XMLHTTP_PROGID = Sarissa.pickRecentProgID([ "Msxml2.XMLHTTP.6.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP" ]);
        }
        return new ActiveXObject(_SARISSA_XMLHTTP_PROGID);
    };
    Sarissa.getDomDocument = function(sUri, sName) {
        if (!_SARISSA_DOM_PROGID) {
            try {
                _SARISSA_DOM_PROGID = Sarissa.pickRecentProgID([ "Msxml2.DOMDocument.6.0", "Msxml2.DOMDocument.3.0", "MSXML2.DOMDocument", "MSXML.DOMDocument", "Microsoft.XMLDOM" ]);
            } catch (e) {
                _SARISSA_DOM_PROGID = "noActiveX";
            }
        }
        var oDoc = _SARISSA_DOM_PROGID == "noActiveX" ? document.createElement("xml") : new ActiveXObject(_SARISSA_DOM_PROGID);
        try {
            oDoc.validateOnParse = false;
            oDoc.resolveExternals = "false";
            oDoc.setProperty("ProhibitDTD", false);
        } catch (e) {}
        if (sName) {
            var prefix = "";
            if (sUri) {
                if (sName.indexOf(":") > 1) {
                    prefix = sName.substring(0, sName.indexOf(":"));
                    sName = sName.substring(sName.indexOf(":") + 1);
                } else {
                    prefix = "a" + Sarissa._getUniqueSuffix();
                }
            }
            if (sUri) {
                oDoc.loadXML("<" + prefix + ":" + sName + " xmlns:" + prefix + '="' + sUri + '"' + " />");
            } else {
                oDoc.loadXML("<" + sName + " />");
            }
        }
        return oDoc;
    };
    Sarissa.getParseErrorText = function(oDoc) {
        var parseErrorText = Sarissa.PARSED_OK;
        if (oDoc && oDoc.parseError && oDoc.parseError.errorCode && oDoc.parseError.errorCode != 0) {
            parseErrorText = "XML Parsing Error: " + oDoc.parseError.reason + "\nLocation: " + oDoc.parseError.url + "\nLine Number " + oDoc.parseError.line + ", Column " + oDoc.parseError.linepos + ":\n" + oDoc.parseError.srcText + "\n";
            for (var i = 0; i < oDoc.parseError.linepos; i++) {
                parseErrorText += "-";
            }
            parseErrorText += "^\n";
        } else if (oDoc.documentElement === null) {
            parseErrorText = Sarissa.PARSED_EMPTY;
        }
        return parseErrorText;
    };
    Sarissa.setXpathNamespaces = function(oDoc, sNsSet) {
        oDoc.setProperty("SelectionLanguage", "XPath");
        oDoc.setProperty("SelectionNamespaces", sNsSet);
    };
    XSLTProcessor = function() {
        if (!_SARISSA_XSLTEMPLATE_PROGID) {
            _SARISSA_XSLTEMPLATE_PROGID = Sarissa.pickRecentProgID([ "Msxml2.XSLTemplate.6.0", "MSXML2.XSLTemplate.3.0" ]);
        }
        this.template = new ActiveXObject(_SARISSA_XSLTEMPLATE_PROGID);
        this.processor = null;
    };
    XSLTProcessor.prototype.importStylesheet = function(xslDoc) {
        if (!_SARISSA_THREADEDDOM_PROGID) {
            _SARISSA_THREADEDDOM_PROGID = Sarissa.pickRecentProgID([ "MSXML2.FreeThreadedDOMDocument.6.0", "MSXML2.FreeThreadedDOMDocument.3.0" ]);
        }
        xslDoc.setProperty("SelectionLanguage", "XPath");
        xslDoc.setProperty("SelectionNamespaces", "xmlns:xsl='http://www.w3.org/1999/XSL/Transform'");
        var converted = new ActiveXObject(_SARISSA_THREADEDDOM_PROGID);
        try {
            converted.resolveExternals = true;
            converted.setProperty("AllowDocumentFunction", true);
            converted.setProperty("AllowXsltScript", true);
        } catch (e) {}
        if (xslDoc.url && xslDoc.selectSingleNode("//xsl:*[local-name() = 'import' or local-name() = 'include']") != null) {
            converted.async = false;
            converted.load(xslDoc.url);
        } else {
            converted.loadXML(xslDoc.xml);
        }
        converted.setProperty("SelectionNamespaces", "xmlns:xsl='http://www.w3.org/1999/XSL/Transform'");
        var output = converted.selectSingleNode("//xsl:output");
        if (output) {
            this.outputMethod = output.getAttribute("method");
        } else {
            delete this.outputMethod;
        }
        this.template.stylesheet = converted;
        this.processor = this.template.createProcessor();
        this.paramsSet = [];
    };
    XSLTProcessor.prototype.transformToDocument = function(sourceDoc) {
        var outDoc;
        if (_SARISSA_THREADEDDOM_PROGID) {
            this.processor.input = sourceDoc;
            outDoc = new ActiveXObject(_SARISSA_DOM_PROGID);
            this.processor.output = outDoc;
            this.processor.transform();
            return outDoc;
        } else {
            if (!_SARISSA_DOM_XMLWRITER) {
                _SARISSA_DOM_XMLWRITER = Sarissa.pickRecentProgID([ "Msxml2.MXXMLWriter.6.0", "Msxml2.MXXMLWriter.3.0", "MSXML2.MXXMLWriter", "MSXML.MXXMLWriter", "Microsoft.XMLDOM" ]);
            }
            this.processor.input = sourceDoc;
            outDoc = new ActiveXObject(_SARISSA_DOM_XMLWRITER);
            this.processor.output = outDoc;
            this.processor.transform();
            var oDoc = new ActiveXObject(_SARISSA_DOM_PROGID);
            oDoc.loadXML(outDoc.output + "");
            return oDoc;
        }
    };
    XSLTProcessor.prototype.transformToFragment = function(sourceDoc, ownerDoc) {
        this.processor.input = sourceDoc;
        this.processor.transform();
        var s = this.processor.output;
        var f = ownerDoc.createDocumentFragment();
        var container;
        if (this.outputMethod == "text") {
            f.appendChild(ownerDoc.createTextNode(s));
        } else if (ownerDoc.body && ownerDoc.body.innerHTML) {
            container = ownerDoc.createElement("div");
            container.innerHTML = s;
            while (container.hasChildNodes()) {
                f.appendChild(container.firstChild);
            }
        } else {
            var oDoc = new ActiveXObject(_SARISSA_DOM_PROGID);
            if (s.substring(0, 5) == "<?xml") {
                s = s.substring(s.indexOf("?>") + 2);
            }
            var xml = "".concat("<my>", s, "</my>");
            oDoc.loadXML(xml);
            container = oDoc.documentElement;
            while (container.hasChildNodes()) {
                f.appendChild(container.firstChild);
            }
        }
        return f;
    };
    XSLTProcessor.prototype.setParameter = function(nsURI, name, value) {
        value = value ? value : "";
        if (nsURI) {
            this.processor.addParameter(name, value, nsURI);
        } else {
            this.processor.addParameter(name, value);
        }
        nsURI = "" + (nsURI || "");
        if (!this.paramsSet[nsURI]) {
            this.paramsSet[nsURI] = [];
        }
        this.paramsSet[nsURI][name] = value;
    };
    XSLTProcessor.prototype.getParameter = function(nsURI, name) {
        nsURI = "" + (nsURI || "");
        if (this.paramsSet[nsURI] && this.paramsSet[nsURI][name]) {
            return this.paramsSet[nsURI][name];
        } else {
            return null;
        }
    };
    XSLTProcessor.prototype.clearParameters = function() {
        for (var nsURI in this.paramsSet) {
            for (var name in this.paramsSet[nsURI]) {
                if (nsURI != "") {
                    this.processor.addParameter(name, "", nsURI);
                } else {
                    this.processor.addParameter(name, "");
                }
            }
        }
        this.paramsSet = [];
    };
} else {
    if (Sarissa._SARISSA_HAS_DOM_CREATE_DOCUMENT) {
        Sarissa.__handleLoad__ = function(oDoc) {
            Sarissa.__setReadyState__(oDoc, 4);
        };
        _sarissa_XMLDocument_onload = function() {
            Sarissa.__handleLoad__(this);
        };
        Sarissa.__setReadyState__ = function(oDoc, iReadyState) {
            oDoc.readyState = iReadyState;
            oDoc.readystate = iReadyState;
            if (oDoc.onreadystatechange != null && typeof oDoc.onreadystatechange == "function") {
                oDoc.onreadystatechange();
            }
        };
        Sarissa.getDomDocument = function(sUri, sName) {
            var oDoc = document.implementation.createDocument(sUri ? sUri : null, sName ? sName : null, null);
            if (!oDoc.onreadystatechange) {
                oDoc.onreadystatechange = null;
            }
            if (!oDoc.readyState) {
                oDoc.readyState = 0;
            }
            oDoc.addEventListener("load", _sarissa_XMLDocument_onload, false);
            return oDoc;
        };
        if (window.XMLDocument) {} else if (Sarissa._SARISSA_HAS_DOM_FEATURE && window.Document && !Document.prototype.load && document.implementation.hasFeature("LS", "3.0")) {
            Sarissa.getDomDocument = function(sUri, sName) {
                var oDoc = document.implementation.createDocument(sUri ? sUri : null, sName ? sName : null, null);
                return oDoc;
            };
        } else {
            Sarissa.getDomDocument = function(sUri, sName) {
                var oDoc = document.implementation.createDocument(sUri ? sUri : null, sName ? sName : null, null);
                if (oDoc && (sUri || sName) && !oDoc.documentElement) {
                    oDoc.appendChild(oDoc.createElementNS(sUri, sName));
                }
                return oDoc;
            };
        }
        XMLDocument.prototype.__defineGetter__("xml", function() {
            return new XMLSerializer().serializeToString(this);
        });
        Node.prototype.__defineGetter__("xml", function() {
            return new XMLSerializer().serializeToString(this);
        });
    }
}

if (!window.DOMParser) {
    if (Sarissa._SARISSA_IS_SAFARI) {
        DOMParser = function() {};
        DOMParser.prototype.parseFromString = function(sXml, contentType) {
            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", "data:text/xml;charset=" + Sarissa._CHARSET + "," + encodeURIComponent(sXml), false);
            xmlhttp.send(null);
            return xmlhttp.responseXML;
        };
    } else if (Sarissa.getDomDocument && Sarissa.getDomDocument() && Sarissa.getDomDocument(null, "bar").xml) {
        DOMParser = function() {};
        DOMParser.prototype.parseFromString = function(sXml, contentType) {
            var doc = Sarissa.getDomDocument();
            try {
                doc.validateOnParse = false;
                doc.setProperty("ProhibitDTD", false);
            } catch (e) {}
            doc.loadXML(sXml);
            return doc;
        };
    }
}

if (Rsis.browser.msie && Rsis.browser.versionNumber >= 9 && window.DOMParser) {
    if (Sarissa.getDomDocument && Sarissa.getDomDocument() && Sarissa.getDomDocument(null, "bar").xml) {
        DOMParser.prototype.parseFromString = function(sXml, contentType) {
            var doc = Sarissa.getDomDocument();
            try {
                doc.validateOnParse = false;
                doc.setProperty("ProhibitDTD", false);
            } catch (e) {}
            doc.loadXML(sXml);
            return doc;
        };
    }
}

if (typeof document.importNode == "undefined" && Sarissa._SARISSA_IS_IE) {
    try {
        document.importNode = function(oNode, bChildren) {
            var tmp;
            if (oNode.nodeName == "#text") {
                return document.createTextNode(oNode.data);
            } else {
                if (oNode.nodeName == "tbody" || oNode.nodeName == "tr") {
                    tmp = document.createElement("table");
                } else if (oNode.nodeName == "td") {
                    tmp = document.createElement("tr");
                } else if (oNode.nodeName == "option") {
                    tmp = document.createElement("select");
                } else {
                    tmp = document.createElement("div");
                }
                if (bChildren) {
                    tmp.innerHTML = oNode.xml ? oNode.xml : oNode.outerHTML;
                } else {
                    tmp.innerHTML = oNode.xml ? oNode.cloneNode(false).xml : oNode.cloneNode(false).outerHTML;
                }
                return tmp.getElementsByTagName("*")[0];
            }
        };
    } catch (e) {}
}

if (!Sarissa.getParseErrorText) {
    Sarissa.getParseErrorText = function(oDoc) {
        var parseErrorText = Sarissa.PARSED_OK;
        if (!oDoc || !oDoc.documentElement) {
            parseErrorText = Sarissa.PARSED_EMPTY;
        } else if (oDoc.documentElement.tagName == "parsererror") {
            parseErrorText = oDoc.documentElement.firstChild.data;
            parseErrorText += "\n" + oDoc.documentElement.firstChild.nextSibling.firstChild.data;
        } else if (oDoc.getElementsByTagName("parsererror").length > 0) {
            var parsererror = oDoc.getElementsByTagName("parsererror")[0];
            parseErrorText = Sarissa.getText(parsererror, true) + "\n";
        } else if (oDoc.parseError && oDoc.parseError.errorCode != 0) {
            parseErrorText = Sarissa.PARSED_UNKNOWN_ERROR;
        }
        return parseErrorText;
    };
}

Sarissa.getText = function(oNode, deep) {
    var s = "";
    if (!oNode) return s;
    var nodes = oNode.childNodes;
    if (oNode.nodeType == Node.ATTRIBUTE_NODE && nodes.length == 0) {
        return oNode.value;
    }
    for (var i = 0; i < nodes.length; i++) {
        var node = nodes[i];
        var nodeType = node.nodeType;
        if (nodeType == Node.TEXT_NODE || nodeType == Node.CDATA_SECTION_NODE) {
            s += node.data;
        } else if (deep === true && (nodeType == Node.ELEMENT_NODE || nodeType == Node.DOCUMENT_NODE || nodeType == Node.DOCUMENT_FRAGMENT_NODE)) {
            s += Sarissa.getText(node, true);
        }
    }
    return s;
};

if ((Rsis.browser.msie && Rsis.browser.versionNumber >= 9 && window.XMLSerializer || !window.XMLSerializer) && Sarissa.getDomDocument && Sarissa.getDomDocument("", "foo", null).xml) {
    XMLSerializer = function() {};
    XMLSerializer.prototype.serializeToString = function(oNode) {
        return oNode.xml;
    };
}

Sarissa.stripTags = function(s) {
    return s ? s.replace(/<[^>]+>/g, "") : s;
};

Sarissa.clearChildNodes = function(oNode) {
    while (oNode.firstChild) {
        oNode.removeChild(oNode.firstChild);
    }
};

Sarissa.copyChildNodes = function(nodeFrom, nodeTo, bPreserveExisting) {
    if (Sarissa._SARISSA_IS_SAFARI && nodeTo.nodeType == Node.DOCUMENT_NODE) {
        nodeTo = nodeTo.documentElement;
    }
    if (!nodeFrom || !nodeTo) {
        throw "Both source and destination nodes must be provided";
    }
    if (!bPreserveExisting) {
        Sarissa.clearChildNodes(nodeTo);
    }
    var ownerDoc = nodeTo.nodeType == Node.DOCUMENT_NODE ? nodeTo : nodeTo.ownerDocument;
    var nodes = nodeFrom.childNodes;
    var i;
    if (typeof ownerDoc.importNode != "undefined") {
        for (i = 0; i < nodes.length; i++) {
            nodeTo.appendChild(ownerDoc.importNode(nodes[i], true));
        }
    } else {
        for (i = 0; i < nodes.length; i++) {
            nodeTo.appendChild(nodes[i].cloneNode(true));
        }
    }
};

Sarissa.moveChildNodes = function(nodeFrom, nodeTo, bPreserveExisting) {
    if (!nodeFrom || !nodeTo) {
        throw "Both source and destination nodes must be provided";
    }
    if (!bPreserveExisting) {
        Sarissa.clearChildNodes(nodeTo);
    }
    var nodes = nodeFrom.childNodes;
    if (nodeFrom.ownerDocument == nodeTo.ownerDocument) {
        while (nodeFrom.firstChild) {
            nodeTo.appendChild(nodeFrom.firstChild);
        }
    } else {
        var ownerDoc = nodeTo.nodeType == Node.DOCUMENT_NODE ? nodeTo : nodeTo.ownerDocument;
        var i;
        if (typeof ownerDoc.importNode != "undefined") {
            for (i = 0; i < nodes.length; i++) {
                nodeTo.appendChild(ownerDoc.importNode(nodes[i], true));
            }
        } else {
            for (i = 0; i < nodes.length; i++) {
                nodeTo.appendChild(nodes[i].cloneNode(true));
            }
        }
        Sarissa.clearChildNodes(nodeFrom);
    }
};

Sarissa.xmlize = function(anyObject, objectName, indentSpace, skipEscape) {
    indentSpace = indentSpace ? indentSpace : "";
    var s = indentSpace + "<" + objectName + ">";
    var isLeaf = false;
    if (!(anyObject instanceof Object) || anyObject instanceof Number || anyObject instanceof String || anyObject instanceof Boolean || anyObject instanceof Date) {
        s += skipEscape ? Sarissa.escape(anyObject) : anyObject;
        isLeaf = true;
    } else {
        s += "\n";
        var isArrayItem = anyObject instanceof Array;
        for (var name in anyObject) {
            if (anyObject[name] instanceof Function) {
                continue;
            }
            s += Sarissa.xmlize(anyObject[name], isArrayItem ? 'array-item key="' + name + '"' : name, indentSpace + " ");
        }
        s += indentSpace;
    }
    return s += objectName.indexOf(" ") != -1 ? "</array-item>\n" : "</" + objectName + ">\n";
};

Sarissa.escape = function(sXml) {
    return sXml.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&apos;");
};

Sarissa.unescape = function(sXml) {
    return sXml.replace(/&apos;/g, "'").replace(/&quot;/g, '"').replace(/&gt;/g, ">").replace(/&lt;/g, "<").replace(/&amp;/g, "&");
};

Sarissa.updateCursor = function(oTargetElement, sValue) {
    if (oTargetElement && oTargetElement.style && oTargetElement.style.cursor != undefined) {
        oTargetElement.style.cursor = sValue;
    }
};

Sarissa.updateContentFromURI = function(sFromUrl, oTargetElement, xsltproc, callback, skipCache) {
    try {
        Sarissa.updateCursor(oTargetElement, "wait");
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.open("GET", sFromUrl, true);
        xmlhttp.onreadystatechange = function() {
            if (xmlhttp.readyState == 4) {
                try {
                    var oDomDoc = xmlhttp.responseXML;
                    if (oDomDoc && Sarissa.getParseErrorText(oDomDoc) == Sarissa.PARSED_OK) {
                        Sarissa.updateContentFromNode(xmlhttp.responseXML, oTargetElement, xsltproc);
                        if (callback) {
                            callback(sFromUrl, oTargetElement);
                        }
                    } else {
                        throw Sarissa.getParseErrorText(oDomDoc);
                    }
                } catch (e) {
                    if (callback) {
                        callback(sFromUrl, oTargetElement, e);
                    } else {
                        throw e;
                    }
                }
            }
        };
        if (skipCache) {
            var oldage = "Sat, 1 Jan 2000 00:00:00 GMT";
            xmlhttp.setRequestHeader("If-Modified-Since", oldage);
        }
        xmlhttp.send("");
    } catch (e) {
        Sarissa.updateCursor(oTargetElement, "auto");
        if (callback) {
            callback(sFromUrl, oTargetElement, e);
        } else {
            throw e;
        }
    }
};

Sarissa.updateContentFromNode = function(oNode, oTargetElement, xsltproc) {
    try {
        Sarissa.updateCursor(oTargetElement, "wait");
        Sarissa.clearChildNodes(oTargetElement);
        var ownerDoc = oNode.nodeType == Node.DOCUMENT_NODE ? oNode : oNode.ownerDocument;
        if (ownerDoc.parseError && ownerDoc.parseError.errorCode != 0) {
            var pre = document.createElement("pre");
            pre.appendChild(document.createTextNode(Sarissa.getParseErrorText(ownerDoc)));
            oTargetElement.appendChild(pre);
        } else {
            if (xsltproc) {
                oNode = xsltproc.transformToDocument(oNode);
            }
            if (oTargetElement.tagName.toLowerCase() == "textarea" || oTargetElement.tagName.toLowerCase() == "input") {
                oTargetElement.value = new XMLSerializer().serializeToString(oNode);
            } else {
                try {
                    oTargetElement.appendChild(oTargetElement.ownerDocument.importNode(oNode, true));
                } catch (e) {
                    oTargetElement.innerHTML = new XMLSerializer().serializeToString(oNode);
                }
            }
        }
    } catch (e) {
        throw e;
    } finally {
        Sarissa.updateCursor(oTargetElement, "auto");
    }
};

Sarissa.formToQueryString = function(oForm) {
    var qs = "";
    for (var i = 0; i < oForm.elements.length; i++) {
        var oField = oForm.elements[i];
        var sFieldName = oField.getAttribute("name") ? oField.getAttribute("name") : oField.getAttribute("id");
        if (sFieldName && (!oField.disabled || oField.type == "hidden")) {
            switch (oField.type) {
              case "hidden":
              case "text":
              case "textarea":
              case "password":
                qs += sFieldName + "=" + encodeURIComponent(oField.value) + "&";
                break;

              case "select-one":
                qs += sFieldName + "=" + encodeURIComponent(oField.options[oField.selectedIndex].value) + "&";
                break;

              case "select-multiple":
                for (var j = 0; j < oField.length; j++) {
                    var optElem = oField.options[j];
                    if (optElem.selected === true) {
                        qs += sFieldName + "[]" + "=" + encodeURIComponent(optElem.value) + "&";
                    }
                }
                break;

              case "checkbox":
              case "radio":
                if (oField.checked) {
                    qs += sFieldName + "=" + encodeURIComponent(oField.value) + "&";
                }
                break;
            }
        }
    }
    return qs.substr(0, qs.length - 1);
};

Sarissa.updateContentFromForm = function(oForm, oTargetElement, xsltproc, callback) {
    try {
        Sarissa.updateCursor(oTargetElement, "wait");
        var params = Sarissa.formToQueryString(oForm) + "&" + Sarissa.REMOTE_CALL_FLAG + "=true";
        var xmlhttp = new XMLHttpRequest();
        var bUseGet = oForm.getAttribute("method") && oForm.getAttribute("method").toLowerCase() == "get";
        if (bUseGet) {
            xmlhttp.open("GET", oForm.getAttribute("action") + "?" + params, true);
        } else {
            xmlhttp.open("POST", oForm.getAttribute("action"), true);
            xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
            xmlhttp.setRequestHeader("Content-length", params.length);
            xmlhttp.setRequestHeader("Connection", "close");
        }
        xmlhttp.onreadystatechange = function() {
            try {
                if (xmlhttp.readyState == 4) {
                    var oDomDoc = xmlhttp.responseXML;
                    if (oDomDoc && Sarissa.getParseErrorText(oDomDoc) == Sarissa.PARSED_OK) {
                        Sarissa.updateContentFromNode(xmlhttp.responseXML, oTargetElement, xsltproc);
                        if (callback) {
                            callback(oForm, oTargetElement);
                        }
                    } else {
                        throw Sarissa.getParseErrorText(oDomDoc);
                    }
                }
            } catch (e) {
                if (callback) {
                    callback(oForm, oTargetElement, e);
                } else {
                    throw e;
                }
            }
        };
        xmlhttp.send(bUseGet ? "" : params);
    } catch (e) {
        Sarissa.updateCursor(oTargetElement, "auto");
        if (callback) {
            callback(oForm, oTargetElement, e);
        } else {
            throw e;
        }
    }
    return false;
};

Sarissa.getFunctionName = function(oFunc) {
    if (!oFunc || typeof oFunc != "function") {
        throw "The value of parameter 'oFunc' must be a function";
    }
    if (oFunc.name) {
        return oFunc.name;
    }
    var sFunc = oFunc.toString();
    alert("sFunc: " + sFunc);
    var name = sFunc.substring(sFunc.indexOf("function") + 8, sFunc.indexOf("("));
    if (!name || name.length == 0 || name == " ") {
        name = "SarissaAnonymous" + Sarissa._getUniqueSuffix();
        window[name] = oFunc;
    }
    return name;
};

Sarissa.setRemoteJsonCallback = function(url, callback, callbackParam) {
    if (!callbackParam) {
        callbackParam = "callback";
    }
    var callbackFunctionName = Sarissa.getFunctionName(callback);
    var id = "sarissa_json_script_id_" + Sarissa._getUniqueSuffix();
    var oHead = document.getElementsByTagName("head")[0];
    var scriptTag = document.createElement("script");
    scriptTag.type = "text/javascript";
    scriptTag.id = id;
    scriptTag.onload = function() {};
    if (url.indexOf("?") != -1) {
        url += "&" + callbackParam + "=" + callbackFunctionName;
    } else {
        url += "?" + callbackParam + "=" + callbackFunctionName;
    }
    scriptTag.src = url;
    oHead.appendChild(scriptTag);
    return id;
};

Sarissa.appendChildNode = function(nodeTree, nodeForAppend) {
    if (Sarissa._SARISSA_IS_IE) {
        nodeTree.appendChild(nodeForAppend);
    } else {
        if (Sarissa._SARISSA_IS_SAFARI && nodeTree.nodeType == Node.DOCUMENT_NODE) {
            nodeTree = nodeTree.documentElement;
        }
        if (!nodeForAppend || !nodeTree) {
            throw "Both source and destination nodes must be provided";
        }
        var ownerDoc = nodeTree.nodeType == Node.DOCUMENT_NODE ? nodeTree : nodeTree.ownerDocument;
        var node = nodeForAppend;
        if (typeof ownerDoc.importNode != "undefined") {
            if (node) {
                nodeTree.appendChild(ownerDoc.importNode(node, true));
            }
        } else {
            nodeTree.appendChild(node.cloneNode(true));
        }
    }
};

Sarissa.importChildNode = function(fatherNode, nodeForAppend) {
    if (Sarissa._SARISSA_IS_IE) {
        return fatherNode.importNode(nodeForAppend, true);
    } else {
        if (Sarissa._SARISSA_IS_SAFARI && fatherNode.nodeType == Node.DOCUMENT_NODE) {
            fatherNode = fatherNode.documentElement;
        }
        if (!nodeForAppend || !fatherNode) {
            throw "Both source and destination nodes must be provided";
        }
        var ownerDoc = fatherNode.nodeType == Node.DOCUMENT_NODE ? fatherNode : fatherNode.ownerDocument;
        if (typeof ownerDoc.importNode != "undefined") {
            if (nodeForAppend) {
                return ownerDoc.importNode(nodeForAppend, true);
            }
        } else {
            return nodeForAppend.cloneNode(true);
        }
    }
};

Sarissa.replaceChildNode = function(fatherNode, nodeNew, nodeReplaced) {
    if (nodeNew) nodeNew.setAttribute("isSarissaChange", "yes");
    if (Sarissa._SARISSA_IS_IE) {
        fatherNode.replaceChild(nodeNew, nodeReplaced);
    } else {
        var ownerDoc = fatherNode.nodeType == Node.DOCUMENT_NODE ? fatherNode : fatherNode.ownerDocument;
        if (typeof ownerDoc.replaceChild != "undefined") {
            if (nodeNew) {
                fatherNode.replaceChild(ownerDoc.importNode(nodeNew, true), nodeReplaced);
            }
        } else {
            fatherNode.replaceChild(nodeNew, nodeReplaced);
        }
    }
};

Sarissa.insertBefore = function(fatherNode, nodeReferece, nodeForAppend) {
    if (Sarissa._SARISSA_IS_IE) {
        fatherNode.insertBefore(nodeForAppend.cloneNode(true), nodeReferece);
    } else {
        if (Sarissa._SARISSA_IS_SAFARI && fatherNode.nodeType == Node.DOCUMENT_NODE) {
            fatherNode = fatherNode.documentElement;
        }
        if (!nodeForAppend || !fatherNode) {
            throw "Both source and destination nodes must be provided";
        }
        var ownerDoc = fatherNode.nodeType == Node.DOCUMENT_NODE ? fatherNode : fatherNode.ownerDocument;
        if (typeof ownerDoc.importNode != "undefined") {
            if (nodeForAppend) {
                return fatherNode.insertBefore(ownerDoc.importNode(nodeForAppend, true), nodeReferece);
            }
        } else {
            return fatherNode.insertBefore(nodeForAppend, nodeReferece);
        }
    }
};

function Sarissa_ieemu_xpath() {}

Sarissa_ieemu_xpath._FILE = "013sarissa_ieemu_xpath.js";

if (Sarissa._SARISSA_HAS_DOM_FEATURE && document.implementation.hasFeature("XPath", "3.0")) {
    SarissaNodeList = function(i) {
        this.length = i;
    };
    SarissaNodeList.prototype = [];
    SarissaNodeList.prototype.constructor = Array;
    SarissaNodeList.prototype.item = function(i) {
        return i < 0 || i >= this.length ? null : this[i];
    };
    SarissaNodeList.prototype.expr = "";
    if (window.XMLDocument && !XMLDocument.prototype.setProperty) {
        XMLDocument.prototype.setProperty = function(x, y) {};
    }
    Sarissa.setXpathNamespaces = function(oDoc, sNsSet) {
        oDoc._sarissa_useCustomResolver = true;
        var namespaces = sNsSet.indexOf(" ") > -1 ? sNsSet.split(" ") : [ sNsSet ];
        oDoc._sarissa_xpathNamespaces = [];
        for (var i = 0; i < namespaces.length; i++) {
            var ns = namespaces[i];
            var colonPos = ns.indexOf(":");
            var assignPos = ns.indexOf("=");
            if (colonPos > 0 && assignPos > colonPos + 1) {
                var prefix = ns.substring(colonPos + 1, assignPos);
                var uri = ns.substring(assignPos + 2, ns.length - 1);
                oDoc._sarissa_xpathNamespaces[prefix] = uri;
            } else {
                throw "Bad format on namespace declaration(s) given";
            }
        }
    };
    XMLDocument.prototype._sarissa_useCustomResolver = false;
    XMLDocument.prototype._sarissa_xpathNamespaces = [];
    XMLDocument.prototype.selectNodes = function(sExpr, contextNode, returnSingle) {
        var nsDoc = this;
        var nsresolver;
        if (this._sarissa_useCustomResolver) {
            nsresolver = function(prefix) {
                var s = nsDoc._sarissa_xpathNamespaces[prefix];
                if (s) {
                    return s;
                } else {
                    throw "No namespace URI found for prefix: '" + prefix + "'";
                }
            };
        } else {
            nsresolver = this.createNSResolver(this.documentElement);
        }
        var result = null;
        if (!returnSingle) {
            var oResult = this.evaluate(sExpr, contextNode ? contextNode : this, nsresolver, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);
            var nodeList = new SarissaNodeList(oResult.snapshotLength);
            nodeList.expr = sExpr;
            for (var i = 0; i < nodeList.length; i++) {
                nodeList[i] = oResult.snapshotItem(i);
            }
            result = nodeList;
        } else {
            result = this.evaluate(sExpr, contextNode ? contextNode : this, nsresolver, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
        }
        return result;
    };
    var _setAttribute = Element.prototype.setAttribute;
    Element.prototype.setAttribute = function(attrName, attrValue) {
        if (!attrName) return;
        var oldAttValue = this.getAttribute(attrName);
        if (this.hasAttribute(attrName)) {
            if (typeof attrValue !== "undefined") {
                _setAttribute.call(this, attrName, attrValue);
            }
        } else {
            _setAttribute.call(this, attrName, typeof attrValue === "undefined" ? "" : attrValue);
        }
        if (attrName !== "changedNode" && attrValue !== oldAttValue) {
            _setAttribute.call(this, attrName + "-ch", "1");
        } else this.removeAttribute(attrName + "-ch");
    };
    Element.prototype.selectNodes = function(sExpr) {
        var doc = this.ownerDocument;
        if (doc.selectNodes) {
            return doc.selectNodes(sExpr, this);
        } else {
            throw "Method selectNodes is only supported by XML Elements";
        }
    };
    XMLDocument.prototype.selectSingleNode = function(sExpr, contextNode) {
        sExpr = sExpr.replaceAll("###", "");
        var ctx = contextNode ? contextNode : null;
        return this.selectNodes(sExpr, ctx, true);
    };
    Element.prototype.selectSingleNode = function(sExpr) {
        var doc = this.ownerDocument;
        if (doc.selectSingleNode) {
            return doc.selectSingleNode(sExpr, this);
        } else {
            throw "Method selectNodes is only supported by XML Elements";
        }
    };
    Sarissa.IS_ENABLED_SELECT_NODES = true;
}

function Sarissa_table_utils() {}

Sarissa_table_utils._FILE = "014sarissa_table_utils.js";

Sarissa.sortHtmlTableData = function(clickedElem, iFunc, bSkipCache, oCallbac) {
    var oTbl = clickedElem.parentNode.parentNode;
    while (oTbl.nodeName.toLowerCase() != "table") {
        oTbl = oTbl.parentNode;
    }
    if (!oTbl.id) {
        oTbl.id = "SarissaTable" + Sarissa.tableIdGenCount++;
    }
    var iColIndex = clickedElem.cellIndex;
    var matrix;
    if (!bSkipCache && Sarissa.tableDataCache[oTbl.id]) {
        matrix = Sarissa.tableDataCache[oTbl.id];
    } else {
        matrix = this.getArrayFromTableData(oTbl, null, null, "th");
        if (!bSkipCache) {
            Sarissa.tableDataCache[oTbl.id] = matrix;
        }
    }
    if (!Sarissa.tableColumnSortStates[oTbl.id]) {
        Sarissa.tableColumnSortStates[oTbl.id] = [];
    }
    var sortedColumn = [];
    for (var i = 0; i < matrix.length; i++) {
        sortedColumn[i] = Sarissa.stripTags(matrix[i][iColIndex]) + "_mbns_" + i;
    }
    if (iFunc) {
        sortedColumn.sort(iFunc);
    } else {
        sortedColumn.sort();
    }
    var sortOrder = Sarissa.tableColumnSortStates[oTbl.id][iColIndex];
    if (sortOrder != "asc") {
        Sarissa.tableColumnSortStates[oTbl.id][iColIndex] = "asc";
    } else {
        sortedColumn.reverse();
        Sarissa.tableColumnSortStates[oTbl.id][iColIndex] = "desc";
    }
    var sortedMatrix = [];
    for (var j = 0; j < matrix.length; j++) {
        var indexItem = sortedColumn[j];
        var iRow = indexItem.substring(indexItem.indexOf("_mbns_") + 6, indexItem.length);
        sortedMatrix[j] = [];
        for (var k = 0; k < matrix[j].length; k++) {
            sortedMatrix[j][k] = matrix[iRow][k];
        }
    }
    this.updateTableData(oTbl, sortedMatrix, null, null, "th");
    if (oCallbac) {
        oCallbac(oTbl, iColIndex);
    }
};

Sarissa.tableIdGenCount = 0;

Sarissa.tableColumnSortStates = [];

Sarissa.tableDataCache = [];

Sarissa.tableDataCacheSize = 0;

Sarissa.tableDataCacheMaxSize = 5;

Sarissa.tableDataCachePut = function(sTableId, oArr) {
    if (Sarissa.tableDataCacheSize.length >= Sarissa.tableDataCacheMaxSize) {
        Sarissa.tableDataCache.shift();
        Sarissa.tableDataCacheSize--;
    }
    Sarissa.tableDataCache[sTableId] = oArr;
    Sarissa.tableDataCacheSize++;
};

Sarissa.tableDataCacheMoveColumn = function(sTableId, oldColumnIndex, newColumnIndex) {
    var oldMatrix = Sarissa.tableDataCache[sTableId];
    var newMatrix = [];
    var oldRow, movedColumn, newRow;
    for (var i = 0; i < oldMatrix.length; i++) {
        oldRow = oldMatrix[i];
        movedColumn = oldRow.splice(oldColumnIndex, 1);
        newRow = [];
        for (var j = 0; j < oldArr.length; J++) {
            if (j == newColumnIndex) {
                newRow.put(movedColumn);
            }
            newRow.put(oldRow[j]);
        }
        newMatrix[i] = newRow;
    }
    Sarissa.tableDataCache[sTableId] = newMatrix;
};

Sarissa.SORT_IGNORE_CASE = function(a, b) {
    var strA = a.toLowerCase(), strB = b.toLowerCase();
    if (strA < strB) return -1; else if (strA > strB) return 1; else return 0;
};

Sarissa.SORT_DATE_US = function(a, b) {
    var datA = new Date(a.substring(0, a.lastIndexOf("_mbns_"))), datB = new Date(b.substring(0, b.lastIndexOf("_mbns_")));
    if (datA < datB) return -1; else if (datA > datB) return 1; else return 0;
};

Sarissa.SORT_DATE_EU = function(a, b) {
    var strA = a.substring(0, a.lastIndexOf("_mbns_")).split("/"), strB = b.substring(0, b.lastIndexOf("_mbns_")).split("/"), datA = new Date(strA[2], strA[1], strA[0]), datB = new Date(strB[2], strB[1], strB[0]);
    if (datA < datB) return -1; else if (datA > datB) return 1; else return 0;
};

Sarissa.getArrayFromTableData = function(oElem, sRowName, sCellName, sHeadingName, bStripTags) {
    if (!sRowName) {
        sRowName = "tr";
    }
    if (!sCellName) {
        sCellName = "td";
    }
    if (!sHeadingName) {
        sHeadingName = "th";
    }
    var rows = oElem.getElementsByTagName(sRowName);
    var matrix = [];
    for (var i = 0, j = 0; i < rows.length; i++) {
        var row = rows[i];
        if (!sHeadingName || row.getElementsByTagName(sHeadingName).length == 0) {
            matrix[j] = [];
            var cells = row.getElementsByTagName(sCellName);
            for (var k = 0; k < cells.length; k++) {
                matrix[j][k] = bStripTags ? Sarissa.stripTags(cells[k].innerHTML) : cells[k].innerHTML;
            }
            j++;
        }
    }
    return matrix;
};

Sarissa.updateTableData = function(oElem, newData, sRowName, sCellName, sHeadingName) {
    if (!sRowName) {
        sRowName = "tr";
    }
    if (!sCellName) {
        sCellName = "td";
    }
    var rows = oElem.getElementsByTagName(sRowName);
    for (var i = 0, j = 0; i < newData.length && j < rows.length; j++) {
        var row = rows[j];
        if (!sHeadingName || row.getElementsByTagName(sHeadingName).length == 0) {
            var cells = row.getElementsByTagName(sCellName);
            for (var k = 0; k < cells.length; k++) {
                cells[k].innerHTML = newData[i][k];
            }
            i++;
        }
    }
};

function Calendar() {}

Calendar._FILE = "015calendar.js";

Calendar.version = JRetail.rsis.VersionJS;

Calendar.objs = {
    _objects: null,
    add: function(_fs) {
        if (this._objects == null) this._objects = new Map();
        var key = getIframeId();
        if (typeof key == "undefined" || key == null || key === "") {
            key = "noframe";
        } else key = "frame";
        this._objects.put(key, _fs);
    },
    get: function() {
        var key = getIframeId();
        if (typeof key == "undefined" || key == null || key === "") {
            key = "noframe";
        } else key = "frame";
        if (typeof key !== "undefined" && key !== null && key !== "") {
            if (this._objects && typeof key === "string") {
                return this._objects.get(key);
            }
        }
        return null;
    },
    remove: function(key) {
        var key = getIframeId();
        if (typeof key == "undefined" || key == null || key === "") {
            key = "noframe";
        } else key = "frame";
        var c = this.get(key);
        for (var i in c) {
            c[i] = null;
        }
        this.add(c);
        this._objects.remove(key);
    },
    position: function(obj, calendarDiv) {
        if (obj && calendarDiv) {
            var lst = calendarDiv.style, _t_ = $(obj.id.split("#")[0] + ".container"), _wh = $R(obj).position(), wg = hg = 0;
            var dialogUi = $(obj.id.split("#")[0]);
            if (dialogUi) {
                wg = dialogUi.offsetWidth;
                hg = dialogUi.offsetHeight;
            }
            if (wg == GetWidth() && hg == GetHeight()) {
                if (_wh.top != null && _wh.left != null) {
                    var posY = findPosY(obj) + obj.offsetHeight - _wh.top, posYListHolder = posY + calendarDiv.firstChild.clientHeight;
                    if (posYListHolder > _t_.clientHeight) {
                        lst.top = posY - calendarDiv.firstChild.clientHeight - obj.offsetHeight + "px";
                    } else lst.top = posY + "px";
                    lst.left = findPosX(obj) - _wh.left + "px";
                } else {
                    var posY = findPosY(obj) + obj.offsetHeight, posYListHolder = posY + calendarDiv.firstChild.clientHeight;
                    if (posYListHolder > _t_.clientHeight) {
                        lst.top = posY - calendarDiv.firstChild.clientHeight - obj.offsetHeight + "px";
                    } else lst.top = posY + "px";
                    lst.left = findPosX(obj) + "px";
                }
            }
        }
    }
};

var pathToImages = contextResource + skinFolder + "/images/calendar/", ctDocument, ctIframeDoc, iframeDocId = null, turnOffYearSpan = false, weekStartsOnSunday = true, showWeekNumber = false, languageCode = "pt-br", calendar_display_time = true;

var todayStringFormat = "[todayString] [UCFdayString]. [day]. [monthString] [year]", speedOfSelectBoxSliding = 200, intervalSelectBox_minutes = 5, intervalSelectBox_seconds = 5, calendar_offsetTop = 0, calendar_offsetLeft = 0, calendarDiv = null, MSIE = false, Opera = false;

if (Rsis.browser.msie) MSIE = true;

if (navigator.userAgent.indexOf("Opera") >= 0) Opera = true;

switch (languageCode) {
  case "en":
    var monthArray = [ "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December" ];
    var monthArrayShort = [ "Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec" ];
    var dayArray = [ "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun" ];
    var weekString = "Week";
    var todayString = "";
    break;

  case "es":
    var monthArray = [ "Enero", "Febrero", "Marzo", "April", "Mayo", "Junio", "Julio", "Agosto", "Septiembre", "Octubre", "Noviembre", "Diciembre" ];
    var monthArrayShort = [ "Ene", "Feb", "Mar", "Abr", "May", "Jun", "Jul", "Ago", "Sep", "Oct", "Nov", "Dic" ];
    var dayArray = [ "Lun", "Mar", "Mie", "Jue", "Vie", "Sab", "Dom" ];
    var weekString = "Semana";
    var todayString = "Hoy es";
    break;

  case "pt-br":
    var monthArray = [ "Janeiro", "Fevereiro", "Mar&ccedil;o", "Abril", "Maio", "Junho", "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro" ];
    var monthArrayShort = [ "Jan", "Fev", "Mar", "Abr", "Mai", "Jun", "Jul", "Ago", "Set", "Out", "Nov", "Dez" ];
    var dayArray = [ "Seg", "Ter", "Qua", "Qui", "Sex", "S&aacute;b", "Dom" ];
    var weekString = "Sem.";
    var todayString = "Hoje &eacute;";
    break;
}

if (weekStartsOnSunday) {
    var tempDayName = dayArray[6];
    for (var theIx = 6; theIx > 0; theIx--) {
        dayArray[theIx] = dayArray[theIx - 1];
    }
    dayArray[0] = tempDayName;
}

var window_width;

var window_height;

function startWidthHeightCalendar() {
    var ie = Rsis.browser.msie;
    var ieBox = ie && (ctDocument.compatMode == null || ctDocument.compatMode == "BackCompat");
    var canvasEl = ieBox ? ctDocument.body : ctDocument.documentElement;
    window_width = window.innerWidth || canvasEl.clientWidth;
    window_height = window.innerHeight || canvasEl.clientHeight;
}

function getWidthWindowCalendar() {
    return window_width;
}

function getWidthHeightCalendar() {
    return window_height;
}

function getIframeId() {
    return ctIframeDoc ? ctIframeDoc.id + "__" : "";
}

var daysInMonthArray = [ 31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31 ];

var currentMonth;

var currentYear;

var currentHour;

var currentMinute;

var currentSecond;

var calendarContentDiv;

var returnDateTo;

var returnFormat;

var activeSelectBoxMonth;

var activeSelectBoxYear;

var activeSelectBoxHour;

var activeSelectBoxMinute;

var activeSelectBoxSecond;

var iframeObj = false;

var iframeObj2 = false;

function EIS_FIX_EI1(where2fixit) {
    var ifr = getIframeId();
    if (!iframeObj2) return;
    iframeObj2.style.display = "block";
    iframeObj2.style.height = $(ifr + where2fixit).offsetHeight + 1 + "px";
    iframeObj2.style.width = $(ifr + where2fixit).offsetWidth + "px";
    iframeObj2.style.left = getleftPos($(ifr + where2fixit)) + 1 - calendar_offsetLeft + "px";
    iframeObj2.style.top = getTopPos($(ifr + where2fixit)) - $(ifr + where2fixit).offsetHeight - calendar_offsetTop + "px";
}

function EIS_Hide_Frame() {
    if (iframeObj2) iframeObj2.style.display = "none";
}

var returnDateToYear;

var returnDateToMonth;

var returnDateToDay;

var returnDateToHour;

var returnDateToMinute;

var returnDateToSecond;

var inputYear;

var inputMonth;

var inputDay;

var inputHour;

var inputMinute;

var inputSecond;

var calendarDisplayTime = false;

var selectBoxHighlightColor = "#D60808";

var selectBoxRolloverBgColor = "#DCE5ED";

var selectBoxMovementInProgress = false;

var activeSelectBox = false;

function cancelCalendarEvent() {
    return false;
}

function isLeapYear(inputYear) {
    if (inputYear % 400 == 0 || inputYear % 4 == 0 && inputYear % 100 != 0) return true;
    return false;
}

var activeSelectBoxMonth = false;

var activeSelectBoxDirection = false;

function highlightMonthYear() {
    if (activeSelectBoxMonth) activeSelectBoxMonth.className = "";
    activeSelectBox = this;
    if (this.className == "monthYearActive") {
        this.className = "";
    } else {
        this.className = "monthYearActive";
        activeSelectBoxMonth = this;
    }
    if (this.innerHTML.indexOf("-") >= 0 || this.innerHTML.indexOf("+") >= 0) {
        if (this.className == "monthYearActive") selectBoxMovementInProgress = true; else selectBoxMovementInProgress = false;
        if (this.innerHTML.indexOf("-") >= 0) activeSelectBoxDirection = -1; else activeSelectBoxDirection = 1;
    } else selectBoxMovementInProgress = false;
}

function showMonthDropDown() {
    var ifr = getIframeId();
    if ($(ifr + "monthDropDown").style.display == "block") {
        $(ifr + "monthDropDown").style.display = "none";
        EIS_Hide_Frame();
    } else {
        $(ifr + "monthDropDown").style.display = "block";
        $(ifr + "yearDropDown").style.display = "none";
        $(ifr + "hourDropDown").style.display = "none";
        $(ifr + "minuteDropDown").style.display = "none";
        $(ifr + "secondDropDown").style.display = "none";
        if (MSIE) {
            EIS_FIX_EI1("monthDropDown");
        }
    }
}

function showYearDropDown() {
    var ifr = getIframeId();
    if ($(ifr + "yearDropDown").style.display == "block") {
        $(ifr + "yearDropDown").style.display = "none";
        EIS_Hide_Frame();
    } else {
        $(ifr + "yearDropDown").style.display = "block";
        $(ifr + "monthDropDown").style.display = "none";
        $(ifr + "hourDropDown").style.display = "none";
        $(ifr + "minuteDropDown").style.display = "none";
        $(ifr + "secondDropDown").style.display = "none";
        if (MSIE) {
            EIS_FIX_EI1("yearDropDown");
        }
    }
}

function showHourDropDown() {
    var ifr = getIframeId();
    if ($(ifr + "hourDropDown").style.display == "block") {
        $(ifr + "hourDropDown").style.display = "none";
        EIS_Hide_Frame();
    } else {
        $(ifr + "hourDropDown").style.display = "block";
        $(ifr + "monthDropDown").style.display = "none";
        $(ifr + "yearDropDown").style.display = "none";
        $(ifr + "minuteDropDown").style.display = "none";
        $(ifr + "secondDropDown").style.display = "none";
        if (MSIE) {
            EIS_FIX_EI1("hourDropDown");
        }
    }
}

function showMinuteDropDown() {
    var ifr = getIframeId();
    if ($(ifr + "minuteDropDown").style.display == "block") {
        $(ifr + "minuteDropDown").style.display = "none";
        EIS_Hide_Frame();
    } else {
        $(ifr + "minuteDropDown").style.display = "block";
        $(ifr + "monthDropDown").style.display = "none";
        $(ifr + "yearDropDown").style.display = "none";
        $(ifr + "hourDropDown").style.display = "none";
        $(ifr + "secondDropDown").style.display = "none";
        if (MSIE) {
            EIS_FIX_EI1("minuteDropDown");
        }
    }
}

function showSecondDropDown() {
    var ifr = getIframeId();
    if ($(ifr + "secondDropDown").style.display == "block") {
        $(ifr + "secondDropDown").style.display = "none";
        EIS_Hide_Frame();
    } else {
        $(ifr + "secondDropDown").style.display = "block";
        $(ifr + "monthDropDown").style.display = "none";
        $(ifr + "yearDropDown").style.display = "none";
        $(ifr + "hourDropDown").style.display = "none";
        $(ifr + "minuteDropDown").style.display = "none";
        if (MSIE) {
            EIS_FIX_EI1("secondDropDown");
        }
    }
}

function selectMonth() {
    var ifr = getIframeId();
    $(ifr + "calendar_month_txt").innerHTML = this.innerHTML;
    currentMonth = this.id.replace(/[^\d]/g, "");
    $(ifr + "monthDropDown").style.display = "none";
    EIS_Hide_Frame();
    for (var no = 0; no < monthArray.length; no++) {
        $(ifr + "monthDiv_" + no).style.color = "";
    }
    this.style.color = selectBoxHighlightColor;
    activeSelectBoxMonth = this;
    writeCalendarContent();
}

function selectHour() {
    var ifr = getIframeId();
    $(ifr + "calendar_hour_txt").innerHTML = this.innerHTML;
    currentHour = this.innerHTML.replace(/[^\d]/g, "");
    $(ifr + "hourDropDown").style.display = "none";
    EIS_Hide_Frame();
    if (activeSelectBoxHour) {
        activeSelectBoxHour.style.color = "";
    }
    activeSelectBoxHour = this;
    this.style.color = selectBoxHighlightColor;
}

function selectMinute() {
    var ifr = getIframeId();
    $(ifr + "calendar_minute_txt").innerHTML = this.innerHTML;
    currentMinute = this.innerHTML.replace(/[^\d]/g, "");
    $(ifr + "minuteDropDown").style.display = "none";
    EIS_Hide_Frame();
    if (activeSelectBoxMinute) {
        activeSelectBoxMinute.style.color = "";
    }
    activeSelectBoxMinute = this;
    this.style.color = selectBoxHighlightColor;
}

function selectSecond() {
    var ifr = getIframeId();
    $(ifr + "calendar_second_txt").innerHTML = this.innerHTML;
    currentSecond = this.innerHTML.replace(/[^\d]/g, "");
    $(ifr + "secondDropDown").style.display = "none";
    EIS_Hide_Frame();
    if (activeSelectBoxSecond) {
        activeSelectBoxSecond.style.color = "";
    }
    activeSelectBoxSecond = this;
    this.style.color = selectBoxHighlightColor;
}

function selectYear() {
    var ifr = getIframeId();
    $(ifr + "calendar_year_txt").innerHTML = this.innerHTML;
    currentYear = this.innerHTML.replace(/[^\d]/g, "");
    $(ifr + "yearDropDown").style.display = "none";
    EIS_Hide_Frame();
    if (activeSelectBoxYear) {
        activeSelectBoxYear.style.color = "";
    }
    activeSelectBoxYear = this;
    this.style.color = selectBoxHighlightColor;
    writeCalendarContent();
}

function switchMonth() {
    if (this.src.indexOf("left") >= 0) {
        currentMonth = currentMonth - 1;
        if (currentMonth < 0) {
            currentMonth = 11;
            currentYear = currentYear - 1;
        }
    } else {
        currentMonth = currentMonth + 1;
        if (currentMonth > 11) {
            currentMonth = 0;
            currentYear = currentYear / 1 + 1;
        }
    }
    writeCalendarContent();
}

function createMonthDiv() {
    var ifr = getIframeId();
    var div = ctDocument.createElement("DIV");
    div.className = "monthYearPicker";
    div.id = ifr + "monthPicker";
    for (var no = 0; no < monthArray.length; no++) {
        var subDiv = ctDocument.createElement("DIV");
        subDiv.innerHTML = monthArray[no];
        subDiv.onmouseover = highlightMonthYear;
        subDiv.onmouseout = highlightMonthYear;
        subDiv.onclick = selectMonth;
        subDiv.id = ifr + "monthDiv_" + no;
        subDiv.style.width = "56px";
        subDiv.onselectstart = cancelCalendarEvent;
        div.appendChild(subDiv);
        if (currentMonth && currentMonth == no) {
            subDiv.style.color = selectBoxHighlightColor;
            activeSelectBoxMonth = subDiv;
        }
    }
    return div;
}

function changeSelectBoxYear(e, inputObj) {
    var ifr = getIframeId();
    if (!inputObj) inputObj = this;
    var yearItems = inputObj.parentNode.getElementsByTagName("DIV");
    if (inputObj.innerHTML.indexOf("-") >= 0) {
        var startYear = yearItems[1].innerHTML / 1 - 1;
        if (activeSelectBoxYear) {
            activeSelectBoxYear.style.color = "";
        }
    } else {
        var startYear = yearItems[1].innerHTML / 1 + 1;
        if (activeSelectBoxYear) {
            activeSelectBoxYear.style.color = "";
        }
    }
    for (var no = 1; no < yearItems.length - 1; no++) {
        yearItems[no].innerHTML = startYear + no - 1;
        yearItems[no].id = ifr + "yearDiv" + (startYear / 1 + no / 1 - 1);
    }
    if (activeSelectBoxYear) {
        activeSelectBoxYear.style.color = "";
        if ($(ifr + "yearDiv" + currentYear)) {
            activeSelectBoxYear = $(ifr + "yearDiv" + currentYear);
            activeSelectBoxYear.style.color = selectBoxHighlightColor;
        }
    }
}

function changeSelectBoxHour(e, inputObj) {
    var ifr = getIframeId();
    if (!inputObj) inputObj = this;
    var hourItems = inputObj.parentNode.getElementsByTagName("DIV");
    if (inputObj.innerHTML.indexOf("-") >= 0) {
        var startHour = hourItems[1].innerHTML / 1 - 1;
        if (startHour < 0) startHour = 0;
        if (activeSelectBoxHour) {
            activeSelectBoxHour.style.color = "";
        }
    } else {
        var startHour = hourItems[1].innerHTML / 1 + 1;
        if (startHour > 14) startHour = 14;
        if (activeSelectBoxHour) {
            activeSelectBoxHour.style.color = "";
        }
    }
    var prefix = "";
    for (var no = 1; no < hourItems.length - 1; no++) {
        if (startHour / 1 + no / 1 < 11) prefix = "0"; else prefix = "";
        hourItems[no].innerHTML = prefix + (startHour + no - 1);
        hourItems[no].id = ifr + "hourDiv" + (startHour / 1 + no / 1 - 1);
    }
    if (activeSelectBoxHour) {
        activeSelectBoxHour.style.color = "";
        if ($(ifr + "hourDiv" + currentHour)) {
            activeSelectBoxHour = $(ifr + "hourDiv" + currentHour);
            activeSelectBoxHour.style.color = selectBoxHighlightColor;
        }
    }
}

function updateYearDiv() {
    var ifr = getIframeId();
    var yearSpan = 5;
    if (turnOffYearSpan) {
        yearSpan = 0;
    }
    var div = $(ifr + "yearDropDown");
    var yearItems = div.getElementsByTagName("DIV");
    for (var no = 1; no < yearItems.length - 1; no++) {
        yearItems[no].innerHTML = currentYear / 1 - yearSpan + no;
        if (currentYear == currentYear / 1 - yearSpan + no) {
            yearItems[no].style.color = selectBoxHighlightColor;
            activeSelectBoxYear = yearItems[no];
        } else {
            yearItems[no].style.color = "";
        }
    }
}

function updateMonthDiv() {
    var ifr = getIframeId();
    for (var no = 0; no < 12; no++) {
        $(ifr + "monthDiv_" + no).style.color = "";
    }
    $(ifr + "monthDiv_" + currentMonth).style.color = selectBoxHighlightColor;
    activeSelectBoxMonth = $(ifr + "monthDiv_" + currentMonth);
}

function updateHourDiv() {
    var ifr = getIframeId();
    var div = $(ifr + "hourDropDown");
    var hourItems = div.getElementsByTagName("DIV");
    var addHours = 0;
    if (currentHour / 1 - 6 + 1 < 0) {
        addHours = (currentHour / 1 - 6 + 1) * -1;
    }
    for (var no = 1; no < hourItems.length - 1; no++) {
        var prefix = "";
        if (currentHour / 1 - 6 + no + addHours < 10) prefix = "0";
        hourItems[no].innerHTML = prefix + (currentHour / 1 - 6 + no + addHours);
        if (currentHour == currentHour / 1 - 6 + no) {
            hourItems[no].style.color = selectBoxHighlightColor;
            activeSelectBoxHour = hourItems[no];
        } else {
            hourItems[no].style.color = "";
        }
    }
}

function updateMinuteDiv() {
    var ifr = getIframeId();
    for (var no = 0; no < 60; no += intervalSelectBox_minutes) {
        var prefix = "";
        if (no < 10) prefix = "0";
        $(ifr + "minuteDiv_" + prefix + no).style.color = "";
    }
    if ($(ifr + "minuteDiv_" + currentMinute)) {
        $(ifr + "minuteDiv_" + currentMinute).style.color = selectBoxHighlightColor;
        activeSelectBoxMinute = $(ifr + "minuteDiv_" + currentMinute);
    }
}

function updateSecondDiv() {
    var ifr = getIframeId();
    for (var no2 = 0; no2 < 60; no2 += intervalSelectBox_seconds) {
        var prefix = "";
        if (no2 < 10) prefix = "0";
        $(ifr + "secondDiv_" + prefix + no2).style.color = "";
    }
    if ($(ifr + "secondDiv_" + currentSecond)) {
        $(ifr + "secondDiv_" + currentSecond).style.color = selectBoxHighlightColor;
        activeSelectBoxSecond = $(ifr + "secondDiv_" + currentSecond);
    }
}

function createYearDiv() {
    var ifr = getIframeId();
    if (!$(ifr + "yearDropDown")) {
        var div = ctDocument.createElement("DIV");
        div.className = "monthYearPicker";
    } else {
        var div = $(ifr + "yearDropDown");
        var subDivs = div.getElementsByTagName("DIV");
        for (var no = 0; no < subDivs.length; no++) {
            subDivs[no].parentNode.removeChild(subDivs[no]);
        }
    }
    var d = new Date();
    if (currentYear) {
        d.setFullYear(currentYear);
    }
    var startYear = d.getFullYear() / 1 - 5;
    var yearSpan = 10;
    if (!turnOffYearSpan) {
        var subDiv = ctDocument.createElement("DIV");
        subDiv.innerHTML = "&nbsp;&nbsp;- ";
        subDiv.onclick = changeSelectBoxYear;
        subDiv.onmouseover = highlightMonthYear;
        subDiv.onmouseout = function() {
            selectBoxMovementInProgress = false;
        };
        subDiv.onselectstart = cancelCalendarEvent;
        div.appendChild(subDiv);
    } else {
        startYear = d.getFullYear() / 1 - 0;
        yearSpan = 2;
    }
    for (var no = startYear; no < startYear + yearSpan; no++) {
        var subDiv = ctDocument.createElement("DIV");
        subDiv.innerHTML = no;
        subDiv.onmouseover = highlightMonthYear;
        subDiv.onmouseout = highlightMonthYear;
        subDiv.onclick = selectYear;
        subDiv.id = ifr + "yearDiv" + no;
        subDiv.onselectstart = cancelCalendarEvent;
        div.appendChild(subDiv);
        if (currentYear && currentYear == no) {
            subDiv.style.color = selectBoxHighlightColor;
            activeSelectBoxYear = subDiv;
        }
    }
    if (!turnOffYearSpan) {
        var subDiv = ctDocument.createElement("DIV");
        subDiv.innerHTML = "&nbsp;&nbsp;+ ";
        subDiv.onclick = changeSelectBoxYear;
        subDiv.onmouseover = highlightMonthYear;
        subDiv.onmouseout = function() {
            selectBoxMovementInProgress = false;
        };
        subDiv.onselectstart = cancelCalendarEvent;
        div.appendChild(subDiv);
    }
    return div;
}

function slideCalendarSelectBox() {
    var ifr = getIframeId();
    if (selectBoxMovementInProgress) {
        if (activeSelectBox.parentNode.id == ifr + "hourDropDown") {
            changeSelectBoxHour(false, activeSelectBox);
        }
        if (activeSelectBox.parentNode.id == ifr + "yearDropDown") {
            changeSelectBoxYear(false, activeSelectBox);
        }
    }
    setTimeout("slideCalendarSelectBox()", speedOfSelectBoxSliding);
}

function createHourDiv() {
    var ifr = getIframeId();
    if (!$(ifr + "hourDropDown")) {
        var div = ctDocument.createElement("DIV");
        div.className = "monthYearPicker";
    } else {
        var div = $(ifr + "hourDropDown");
        var subDivs = div.getElementsByTagName("DIV");
        for (var no = 0; no < subDivs.length; no++) {
            subDivs[no].parentNode.removeChild(subDivs[no]);
        }
    }
    if (!currentHour) currentHour = 0;
    var startHour = currentHour / 1;
    if (startHour > 14) startHour = 14;
    var subDiv = ctDocument.createElement("DIV");
    subDiv.innerHTML = "&nbsp;&nbsp;- ";
    subDiv.onclick = changeSelectBoxHour;
    subDiv.onmouseover = highlightMonthYear;
    subDiv.onmouseout = function() {
        selectBoxMovementInProgress = false;
    };
    subDiv.onselectstart = cancelCalendarEvent;
    div.appendChild(subDiv);
    for (var no = startHour; no < startHour + 10; no++) {
        var prefix = "";
        if (no / 1 < 10) prefix = "0";
        var subDiv = ctDocument.createElement("DIV");
        subDiv.innerHTML = prefix + no;
        subDiv.onmouseover = highlightMonthYear;
        subDiv.onmouseout = highlightMonthYear;
        subDiv.onclick = selectHour;
        subDiv.id = ifr + "hourDiv" + no;
        subDiv.onselectstart = cancelCalendarEvent;
        div.appendChild(subDiv);
        if (currentYear && currentYear == no) {
            subDiv.style.color = selectBoxHighlightColor;
            activeSelectBoxYear = subDiv;
        }
    }
    var subDiv = ctDocument.createElement("DIV");
    subDiv.innerHTML = "&nbsp;&nbsp;+ ";
    subDiv.onclick = changeSelectBoxHour;
    subDiv.onmouseover = highlightMonthYear;
    subDiv.onmouseout = function() {
        selectBoxMovementInProgress = false;
    };
    subDiv.onselectstart = cancelCalendarEvent;
    div.appendChild(subDiv);
    return div;
}

function createMinuteDiv() {
    var ifr = getIframeId();
    if (!$(ifr + "minuteDropDown")) {
        var div = ctDocument.createElement("DIV");
        div.className = "monthYearPicker";
    } else {
        var div = $(ifr + "minuteDropDown");
        var subDivs = div.getElementsByTagName("DIV");
        for (var no = 0; no < subDivs.length; no++) {
            subDivs[no].parentNode.removeChild(subDivs[no]);
        }
    }
    var startMinute = 0;
    var prefix = "";
    for (var no = startMinute; no < 60; no += intervalSelectBox_minutes) {
        if (no < 10) prefix = "0"; else prefix = "";
        var subDiv = ctDocument.createElement("DIV");
        subDiv.innerHTML = prefix + no;
        subDiv.onmouseover = highlightMonthYear;
        subDiv.onmouseout = highlightMonthYear;
        subDiv.onclick = selectMinute;
        subDiv.id = ifr + "minuteDiv_" + prefix + no;
        subDiv.onselectstart = cancelCalendarEvent;
        div.appendChild(subDiv);
        if (currentYear && currentYear == no) {
            subDiv.style.color = selectBoxHighlightColor;
            activeSelectBoxYear = subDiv;
        }
    }
    return div;
}

function createSecondDiv() {
    var ifr = getIframeId();
    if (!$(ifr + "secondDropDown")) {
        var div = ctDocument.createElement("DIV");
        div.className = "monthYearPicker";
    } else {
        var div = $(ifr + "secondDropDown");
        var subDivs = div.getElementsByTagName("DIV");
        for (var no2 = 0; no2 < subDivs.length; no2++) {
            subDivs[no2].parentNode.removeChild(subDivs[no2]);
        }
    }
    var startSecond = 0;
    var prefix = "";
    for (var no2 = startSecond; no2 < 60; no2 += intervalSelectBox_seconds) {
        if (no2 < 10) prefix = "0"; else prefix = "";
        var subDiv = ctDocument.createElement("DIV");
        subDiv.innerHTML = prefix + no2;
        subDiv.onmouseover = highlightMonthYear;
        subDiv.onmouseout = highlightMonthYear;
        subDiv.onclick = selectSecond;
        subDiv.id = ifr + "secondDiv_" + prefix + no2;
        subDiv.onselectstart = cancelCalendarEvent;
        div.appendChild(subDiv);
        if (currentYear && currentYear == no2) {
            subDiv.style.color = selectBoxHighlightColor;
            activeSelectBoxYear = subDiv;
        }
    }
    return div;
}

function highlightSelect() {
    if (this.className == "selectBoxTime") {
        this.className = "selectBoxTimeOver";
        this.getElementsByTagName("IMG")[0].src = pathToImages + "down_time_over.gif";
    } else if (this.className == "selectBoxTimeOver") {
        this.className = "selectBoxTime";
        this.getElementsByTagName("IMG")[0].src = pathToImages + "down_time.gif";
    }
    if (this.className == "selectBox") {
        this.className = "selectBoxOver";
        this.getElementsByTagName("IMG")[0].src = pathToImages + "down_over.gif";
    } else if (this.className == "selectBoxOver") {
        this.className = "selectBox";
        this.getElementsByTagName("IMG")[0].src = pathToImages + "down.gif";
    }
}

function highlightArrow() {
    if (this.src.indexOf("over") >= 0) {
        if (this.src.indexOf("left") >= 0) this.src = pathToImages + "left.gif";
        if (this.src.indexOf("right") >= 0) this.src = pathToImages + "right.gif";
    } else {
        if (this.src.indexOf("left") >= 0) this.src = pathToImages + "left_over.gif";
        if (this.src.indexOf("right") >= 0) this.src = pathToImages + "right_over.gif";
    }
}

function highlightClose() {
    if (this.src.indexOf("over") >= 0) {
        this.src = pathToImages + "close.gif";
    } else {
        this.src = pathToImages + "close_over.gif";
    }
}

function closeCalendar() {
    var ifr = getIframeId();
    $(ifr + "yearDropDown").style.display = "none";
    $(ifr + "monthDropDown").style.display = "none";
    $(ifr + "hourDropDown").style.display = "none";
    $(ifr + "minuteDropDown").style.display = "none";
    $(ifr + "secondDropDown").style.display = "none";
    var cldr = Calendar.objs.get(), calendarDiv = null;
    if (cldr) calendarDiv = cldr.calendarDiv;
    calendarDiv.style.display = "none";
    if (iframeObj) {
        iframeObj.style.display = "none";
        EIS_Hide_Frame();
    }
    if (activeSelectBoxMonth) activeSelectBoxMonth.className = "";
    if (activeSelectBoxYear) activeSelectBoxYear.className = "";
}

function writeTopBar() {
    var ifr = getIframeId();
    var cldr = Calendar.objs.get(), calendarDiv = null;
    if (cldr) calendarDiv = cldr.calendarDiv;
    var topBar = ctDocument.createElement("DIV");
    topBar.className = "topBar";
    topBar.id = ifr + "topBar";
    calendarDiv.appendChild(topBar);
    var leftDiv = ctDocument.createElement("DIV");
    leftDiv.style.marginRight = "1px";
    var img = ctDocument.createElement("IMG");
    img.src = pathToImages + "left.gif";
    img.onmouseover = highlightArrow;
    img.onclick = switchMonth;
    img.onmouseout = highlightArrow;
    leftDiv.appendChild(img);
    topBar.appendChild(leftDiv);
    if (Opera) leftDiv.style.width = "16px";
    var rightDiv = ctDocument.createElement("DIV");
    rightDiv.style.marginRight = "1px";
    var img = ctDocument.createElement("IMG");
    img.src = pathToImages + "right.gif";
    img.onclick = switchMonth;
    img.onmouseover = highlightArrow;
    img.onmouseout = highlightArrow;
    rightDiv.appendChild(img);
    if (Opera) rightDiv.style.width = "16px";
    topBar.appendChild(rightDiv);
    var monthDiv = ctDocument.createElement("DIV");
    monthDiv.id = ifr + "monthSelect";
    monthDiv.onmouseover = highlightSelect;
    monthDiv.onmouseout = highlightSelect;
    monthDiv.onclick = showMonthDropDown;
    monthDiv.className = "monthSelect";
    monthDiv.style.width = "40%";
    var span = ctDocument.createElement("SPAN");
    span.innerHTML = monthArray[currentMonth];
    span.id = ifr + "calendar_month_txt";
    monthDiv.appendChild(span);
    var img = ctDocument.createElement("IMG");
    img.src = pathToImages + "down.gif";
    img.style.position = "absolute";
    img.style.right = "0px";
    monthDiv.appendChild(img);
    monthDiv.className = "selectBox";
    if (Opera) {
        img.style.cssText = "float:right;position:relative";
        img.style.position = "relative";
        img.style.styleFloat = "right";
    }
    topBar.appendChild(monthDiv);
    var monthPicker = createMonthDiv();
    monthPicker.style.left = "37px";
    monthPicker.style.top = monthDiv.offsetTop + monthDiv.offsetHeight + 1 + "px";
    monthPicker.style.width = "60px";
    monthPicker.id = ifr + "monthDropDown";
    calendarDiv.appendChild(monthPicker);
    var yearDiv = ctDocument.createElement("DIV");
    yearDiv.onmouseover = highlightSelect;
    yearDiv.onmouseout = highlightSelect;
    yearDiv.onclick = showYearDropDown;
    var span = ctDocument.createElement("SPAN");
    span.innerHTML = currentYear;
    span.id = ifr + "calendar_year_txt";
    yearDiv.appendChild(span);
    topBar.appendChild(yearDiv);
    var img = ctDocument.createElement("IMG");
    img.src = pathToImages + "down.gif";
    yearDiv.appendChild(img);
    yearDiv.className = "selectBox";
    if (Opera) {
        yearDiv.style.width = "50px";
        img.style.cssText = "float:right";
        img.style.position = "relative";
        img.style.styleFloat = "right";
    }
    var yearPicker = createYearDiv();
    yearPicker.style.left = "113px";
    yearPicker.style.top = monthDiv.offsetTop + monthDiv.offsetHeight + 1 + "px";
    yearPicker.style.width = "35px";
    yearPicker.id = ifr + "yearDropDown";
    calendarDiv.appendChild(yearPicker);
    var img = ctDocument.createElement("IMG");
    img.src = pathToImages + "close.gif";
    img.style.styleFloat = "right";
    img.onmouseover = highlightClose;
    img.onmouseout = highlightClose;
    img.onclick = closeCalendar;
    topBar.appendChild(img);
    if (!ctDocument.all) {
        img.style.position = "absolute";
        img.style.right = "2px";
    }
}

function writeCalendarContent() {
    var ifr = getIframeId();
    var cldr = Calendar.objs.get(), calendarDiv = null, calendarContentDiv = null;
    if (cldr) {
        calendarDiv = cldr.calendarDiv;
        calendarContentDiv = cldr.calendarContentDiv;
    }
    var calendarContentDivExists = true;
    if (!calendarContentDiv) {
        calendarContentDiv = ctDocument.createElement("DIV");
        calendarDiv.appendChild(calendarContentDiv);
        calendarContentDivExists = false;
        cldr.calendarContentDiv = calendarContentDiv;
        Calendar.objs.add(cldr);
    }
    currentMonth = currentMonth / 1;
    var d = new Date();
    d.setFullYear(currentYear);
    d.setDate(1);
    d.setMonth(currentMonth);
    var dayStartOfMonth = d.getDay();
    if (!weekStartsOnSunday) {
        if (dayStartOfMonth == 0) dayStartOfMonth = 7;
        dayStartOfMonth--;
    }
    $(ifr + "calendar_year_txt").innerHTML = currentYear;
    $(ifr + "calendar_month_txt").innerHTML = monthArray[currentMonth];
    $(ifr + "calendar_hour_txt").innerHTML = currentHour / 1 > 9 ? currentHour : "0" + currentHour;
    $(ifr + "calendar_minute_txt").innerHTML = currentMinute / 1 > 9 ? currentMinute : "0" + currentMinute;
    $(ifr + "calendar_second_txt").innerHTML = currentSecond / 1 > 9 ? currentSecond : "0" + currentSecond;
    var existingTable = calendarContentDiv.getElementsByTagName("TABLE");
    if (existingTable.length > 0) {
        calendarContentDiv.removeChild(existingTable[0]);
    }
    var calTable = ctDocument.createElement("TABLE");
    calTable.width = "100%";
    calTable.cellSpacing = "0";
    calendarContentDiv.appendChild(calTable);
    var calTBody = ctDocument.createElement("TBODY");
    calTable.appendChild(calTBody);
    var row = calTBody.insertRow(-1);
    row.className = "calendar_week_row";
    if (showWeekNumber) {
        var cell = row.insertCell(-1);
        cell.innerHTML = weekString;
        cell.className = "calendar_week_column";
        cell.style.backgroundColor = selectBoxRolloverBgColor;
    }
    for (var no = 0; no < dayArray.length; no++) {
        var cell = row.insertCell(-1);
        cell.innerHTML = dayArray[no];
    }
    var row = calTBody.insertRow(-1);
    if (showWeekNumber) {
        var cell = row.insertCell(-1);
        cell.className = "calendar_week_column";
        cell.style.backgroundColor = selectBoxRolloverBgColor;
        var week = getWeek(currentYear, currentMonth, 1);
        cell.innerHTML = week;
    }
    for (var no = 0; no < dayStartOfMonth; no++) {
        var cell = row.insertCell(-1);
        cell.innerHTML = "&nbsp;";
    }
    var colCounter = dayStartOfMonth;
    var daysInMonth = daysInMonthArray[currentMonth];
    if (daysInMonth == 28) {
        if (isLeapYear(currentYear)) daysInMonth = 29;
    }
    for (var no = 1; no <= daysInMonth; no++) {
        d.setDate(no - 1);
        if (colCounter > 0 && colCounter % 7 == 0) {
            var row = calTBody.insertRow(-1);
            if (showWeekNumber) {
                var cell = row.insertCell(-1);
                cell.className = "calendar_week_column";
                var week = getWeek(currentYear, currentMonth, no);
                cell.innerHTML = week;
                cell.style.backgroundColor = selectBoxRolloverBgColor;
            }
        }
        var cell = row.insertCell(-1);
        if (currentYear == inputYear && currentMonth == inputMonth && no == inputDay) {
            cell.className = "activeDay";
        }
        cell.innerHTML = no;
        cell.onclick = pickDate;
        colCounter++;
    }
    if (!ctDocument.all) {
        if (calendarContentDiv.offsetHeight) $(ifr + "topBar").style.top = calendarContentDiv.offsetHeight + $(ifr + "timeBar").offsetHeight + $(ifr + "topBar").offsetHeight - 1 + "px"; else {
            $(ifr + "topBar").style.top = "";
            $(ifr + "topBar").style.bottom = "0px";
        }
    }
    if (iframeObj) {
        if (!calendarContentDivExists) setTimeout("resizeIframe()", 350); else setTimeout("resizeIframe()", 10);
    }
}

function resizeIframe() {
    var cldr = Calendar.objs.get(), calendarDiv = null;
    if (cldr) calendarDiv = cldr.calendarDiv;
    iframeObj.style.width = calendarDiv.offsetWidth + "px";
    iframeObj.style.height = calendarDiv.offsetHeight + "px";
}

function pickTodaysDate() {
    var d = new Date();
    currentMonth = d.getMonth();
    currentYear = d.getFullYear();
    pickDate(false, d.getDate());
}

function pickDate(e, inputDay) {
    var month = currentMonth / 1 + 1;
    if (month < 10) month = "0" + month;
    var day;
    if (!inputDay && this) day = this.innerHTML; else day = inputDay;
    if (day / 1 < 10) day = "0" + day;
    if (returnFormat) {
        currentMinute = parseInt(currentMinute, 10) < 10 ? "0" + parseInt(currentMinute, 10) : currentMinute;
        currentSecond = parseInt(currentSecond, 10) < 10 ? "0" + parseInt(currentSecond, 10) : currentSecond;
        returnFormat = returnFormat.replace("dd", day);
        returnFormat = returnFormat.replace("MM", month);
        returnFormat = returnFormat.replace("yyyy", currentYear);
        returnFormat = returnFormat.replace("HH", currentHour);
        returnFormat = returnFormat.replace("mm", currentMinute);
        returnFormat = returnFormat.replace("ss", currentSecond);
        returnFormat = returnFormat.replace("d", day / 1);
        returnFormat = returnFormat.replace("M", month / 1);
        returnDateTo.value = returnFormat;
        if (InputRsis) {
            InputRsis.setCalendarInput(returnDateTo);
        }
        if (JRetail.browser.firefox) {
            returnDateTo.focus();
        }
        try {
            if (returnDateTo.onchange) returnDateTo.onchange();
        } catch (e) {}
    } else {
        for (var no = 0; no < returnDateToYear.options.length; no++) {
            if (returnDateToYear.options[no].value == currentYear) {
                returnDateToYear.selectedIndex = no;
                break;
            }
        }
        for (var no = 0; no < returnDateToMonth.options.length; no++) {
            if (returnDateToMonth.options[no].value == parseFloat(month)) {
                returnDateToMonth.selectedIndex = no;
                break;
            }
        }
        for (var no = 0; no < returnDateToDay.options.length; no++) {
            if (returnDateToDay.options[no].value == parseFloat(day)) {
                returnDateToDay.selectedIndex = no;
                break;
            }
        }
        if (calendarDisplayTime) {
            for (var no = 0; no < returnDateToHour.options.length; no++) {
                if (returnDateToHour.options[no].value == parseFloat(currentHour)) {
                    returnDateToHour.selectedIndex = no;
                    break;
                }
            }
            for (var no = 0; no < returnDateToMinute.options.length; no++) {
                if (returnDateToMinute.options[no].value == parseFloat(currentMinute)) {
                    returnDateToMinute.selectedIndex = no;
                    break;
                }
            }
            for (var no = 0; no < returnDateToSecond.options.length; no++) {
                if (returnDateToSecond.options[no].value == parseFloat(currentSecond)) {
                    returnDateToSecond.selectedIndex = no;
                    break;
                }
            }
        }
    }
    closeCalendar();
}

function getWeek(year, month, day) {
    if (!weekStartsOnSunday) {
        day = day / 1;
    } else {
        day = day / 1 + 1;
    }
    year = year / 1;
    month = month / 1 + 1;
    var a = Math.floor((14 - month) / 12);
    var y = year + 4800 - a;
    var m = month + 12 * a - 3;
    var jd = day + Math.floor((153 * m + 2) / 5) + 365 * y + Math.floor(y / 4) - Math.floor(y / 100) + Math.floor(y / 400) - 32045;
    var d4 = (jd + 31741 - jd % 7) % 146097 % 36524 % 1461;
    var L = Math.floor(d4 / 1460);
    var d1 = (d4 - L) % 365 + L;
    NumberOfWeek = Math.floor(d1 / 7) + 1;
    return NumberOfWeek;
}

function writeTimeBar() {
    var ifr = getIframeId();
    var cldr = Calendar.objs.get(), calendarDiv = null;
    if (cldr) calendarDiv = cldr.calendarDiv;
    var timeBar = ctDocument.createElement("DIV");
    timeBar.id = ifr + "timeBar";
    timeBar.className = "timeBar";
    var subDiv = ctDocument.createElement("DIV");
    subDiv.innerHTML = "Time:";
    var hourDiv = ctDocument.createElement("DIV");
    hourDiv.onmouseover = highlightSelect;
    hourDiv.onmouseout = highlightSelect;
    hourDiv.onclick = showHourDropDown;
    hourDiv.style.width = "30px";
    var span = ctDocument.createElement("SPAN");
    span.innerHTML = currentHour;
    span.id = ifr + "calendar_hour_txt";
    hourDiv.appendChild(span);
    timeBar.appendChild(hourDiv);
    var img = ctDocument.createElement("IMG");
    img.src = pathToImages + "down_time.gif";
    hourDiv.appendChild(img);
    hourDiv.className = "selectBoxTime";
    if (Opera) {
        hourDiv.style.width = "30px";
        img.style.cssText = "float:right";
        img.style.position = "relative";
        img.style.styleFloat = "right";
    }
    var hourPicker = createHourDiv();
    hourPicker.style.left = "130px";
    hourPicker.style.width = "35px";
    hourPicker.id = ifr + "hourDropDown";
    calendarDiv.appendChild(hourPicker);
    var minuteDiv = ctDocument.createElement("DIV");
    minuteDiv.onmouseover = highlightSelect;
    minuteDiv.onmouseout = highlightSelect;
    minuteDiv.onclick = showMinuteDropDown;
    minuteDiv.style.width = "30px";
    var span = ctDocument.createElement("SPAN");
    span.innerHTML = currentMinute;
    span.id = ifr + "calendar_minute_txt";
    minuteDiv.appendChild(span);
    timeBar.appendChild(minuteDiv);
    var img = ctDocument.createElement("IMG");
    img.src = pathToImages + "down_time.gif";
    minuteDiv.appendChild(img);
    minuteDiv.className = "selectBoxTime";
    if (Opera) {
        minuteDiv.style.width = "30px";
        img.style.cssText = "float:right";
        img.style.position = "relative";
        img.style.styleFloat = "right";
    }
    var minutePicker = createMinuteDiv();
    minutePicker.style.left = "167px";
    minutePicker.style.width = "35px";
    minutePicker.id = ifr + "minuteDropDown";
    calendarDiv.appendChild(minutePicker);
    var secondDiv = ctDocument.createElement("DIV");
    secondDiv.onmouseover = highlightSelect;
    secondDiv.onmouseout = highlightSelect;
    secondDiv.onclick = showSecondDropDown;
    secondDiv.style.width = "30px";
    var span = ctDocument.createElement("SPAN");
    span.innerHTML = currentSecond;
    span.id = ifr + "calendar_second_txt";
    secondDiv.appendChild(span);
    timeBar.appendChild(secondDiv);
    var img = ctDocument.createElement("IMG");
    img.src = pathToImages + "down_time.gif";
    secondDiv.appendChild(img);
    secondDiv.className = "selectBoxTime";
    if (Opera) {
        secondDiv.style.width = "30px";
        img.style.cssText = "float:right";
        img.style.position = "relative";
        img.style.styleFloat = "right";
    }
    var secondPicker = createSecondDiv();
    secondPicker.style.left = "167px";
    secondPicker.style.width = "35px";
    secondPicker.id = ifr + "secondDropDown";
    calendarDiv.appendChild(secondPicker);
    return timeBar;
}

function writeBottomBar() {
    var ifr = getIframeId();
    var cldr = Calendar.objs.get(), calendarDiv = null;
    if (cldr) calendarDiv = cldr.calendarDiv;
    var d = new Date();
    var bottomBar = ctDocument.createElement("DIV");
    bottomBar.id = ifr + "bottomBar";
    bottomBar.style.cursor = "pointer";
    bottomBar.className = "todaysDate";
    var subDiv = ctDocument.createElement("DIV");
    subDiv.onclick = pickTodaysDate;
    subDiv.id = ifr + "todaysDateString";
    subDiv.style.width = calendarDiv.offsetWidth - 95 + "px";
    var day = d.getDay();
    if (!weekStartsOnSunday) {
        if (day == 0) day = 7;
        day--;
    }
    var bottomString = todayStringFormat;
    bottomString = bottomString.replace("[monthString]", monthArrayShort[d.getMonth()]);
    bottomString = bottomString.replace("[day]", d.getDate());
    bottomString = bottomString.replace("[year]", d.getFullYear());
    bottomString = bottomString.replace("[dayString]", dayArray[day].toLowerCase());
    bottomString = bottomString.replace("[UCFdayString]", dayArray[day]);
    bottomString = bottomString.replace("[todayString]", todayString);
    subDiv.innerHTML = todayString + ": " + d.getDate() + ". " + monthArrayShort[d.getMonth()] + ", " + d.getFullYear();
    subDiv.innerHTML = bottomString;
    bottomBar.appendChild(subDiv);
    var timeDiv = writeTimeBar();
    bottomBar.appendChild(timeDiv);
    calendarDiv.appendChild(bottomBar);
}

function getTopPos(inputObj) {
    startWidthHeightCalendar();
    var returnValue = inputObj.offsetTop + inputObj.offsetHeight;
    while ((inputObj = inputObj.offsetParent) != null) returnValue += inputObj.offsetTop;
    return returnValue + calendar_offsetTop;
}

function getleftPos(inputObj) {
    startWidthHeightCalendar();
    var returnValue = inputObj.offsetLeft;
    while ((inputObj = inputObj.offsetParent) != null) returnValue += inputObj.offsetLeft;
    var _WIDTH_ = getWidthWindowCalendar() - 197;
    return returnValue + calendar_offsetLeft + 197 >= _WIDTH_ ? returnValue + calendar_offsetLeft - 197 : returnValue + calendar_offsetLeft;
}

function positionCalendar(inputObj) {
    var cldr = Calendar.objs.get(), calendarDiv = null;
    if (cldr) calendarDiv = cldr.calendarDiv;
    var _t_ = $(inputObj.id.split("#")[0] + ".container"), left = 0, top = 0, dT = 0, dL = 0, lst = calendarDiv.style;
    if (_t_) {
        var hasHScroll = _t_ && _t_.scrollHeight > _t_.clientHeight ? true : false, hasWScroll = _t_ && _t_.scrollWidth > _t_.clientWidth ? true : false;
        left = hasWScroll ? _t_.scrollLeft : 0;
        top = hasHScroll ? _t_.scrollTop : 0;
    }
    if (left != null && left != null) {
        lst.top = findPosY(inputObj) + inputObj.offsetHeight - top + "px";
        lst.left = findPosX(inputObj) - left + "px";
    } else {
        lst.top = findPosY(inputObj) + inputObj.offsetHeight + "px";
        lst.left = findPosX(inputObj) + "px";
    }
    var dn = inputObj.id.split("#")[0], _dlg = $(dn);
    if ($getIframeByObject(inputObj) == null && _dlg) {
        dT = parseInt(_dlg.style.top, 10);
        dL = parseInt(_dlg.style.left, 10);
    }
    if (!isNaN(dT) && dT > 0) {
        lst.top = parseInt(lst.top, 10) + dT + "px";
    }
    if (!isNaN(dL) && dL > 0) {
        lst.left = parseInt(lst.left, 10) + dL - 50 + "px";
    }
    Calendar.objs.position(inputObj, calendarDiv);
    if (iframeObj) {
        iframeObj.style.left = calendarDiv.style.left;
        iframeObj.style.top = calendarDiv.style.top;
        iframeObj2.style.left = calendarDiv.style.left;
        iframeObj2.style.top = calendarDiv.style.top;
    }
}

function initCalendar() {
    var ifr = getIframeId();
    var calendarDiv = null;
    if (MSIE) {
        iframeObj = ctDocument.createElement("IFRAME");
        iframeObj.style.filter = "alpha(opacity=0)";
        iframeObj.style.position = "absolute";
        iframeObj.border = "0px";
        iframeObj.style.border = "0px";
        iframeObj.style.backgroundColor = "#FF0000";
        iframeObj2 = ctDocument.createElement("IFRAME");
        iframeObj2.style.position = "absolute";
        iframeObj2.border = "0px";
        iframeObj2.style.border = "0px";
        iframeObj2.style.height = "1px";
        iframeObj2.style.width = "1px";
        iframeObj2.src = "blank.html";
        iframeObj.src = "blank.html";
        ctDocument.body.appendChild(iframeObj2);
        ctDocument.body.appendChild(iframeObj);
    }
    calendarDiv = ctDocument.createElement("DIV");
    calendarDiv.id = ifr + "calendarDiv";
    calendarDiv.className = "clndr";
    calendarDiv.style.zIndex = 1e3;
    Calendar.objs.add({
        calendarDiv: calendarDiv
    });
    slideCalendarSelectBox();
    ctDocument.body.appendChild(calendarDiv);
    writeBottomBar();
    writeTopBar();
    if (!currentYear) {
        var d = new Date();
        currentMonth = d.getMonth();
        currentYear = d.getFullYear();
    }
    writeCalendarContent();
}

function setTimeProperties() {
    var ifr = getIframeId();
    var cldr = Calendar.objs.get(), calendarDiv = null, calendarContentDiv = null;
    if (cldr) {
        calendarDiv = cldr.calendarDiv;
        calendarContentDiv = cldr.calendarContentDiv;
    }
    if (!calendarDisplayTime) {
        $(ifr + "timeBar").style.display = "none";
        $(ifr + "timeBar").style.visibility = "hidden";
        $(ifr + "todaysDateString").style.width = "100%";
    } else {
        $(ifr + "timeBar").style.display = "block";
        $(ifr + "timeBar").style.visibility = "visible";
        $(ifr + "hourDropDown").style.top = $(ifr + "calendar_minute_txt").parentNode.offsetHeight + calendarContentDiv.offsetHeight + $(ifr + "topBar").offsetHeight + "px";
        $(ifr + "minuteDropDown").style.top = $(ifr + "calendar_minute_txt").parentNode.offsetHeight + calendarContentDiv.offsetHeight + $(ifr + "topBar").offsetHeight + "px";
        $(ifr + "minuteDropDown").style.right = "50px";
        $(ifr + "secondDropDown").style.top = $(ifr + "calendar_second_txt").parentNode.offsetHeight + calendarContentDiv.offsetHeight + $(ifr + "topBar").offsetHeight + "px";
        $(ifr + "secondDropDown").style.right = "50px";
        $(ifr + "hourDropDown").style.right = "50px";
        $(ifr + "todaysDateString").style.width = "115px";
    }
}

function calendarSortItems(a, b) {
    return a / 1 - b / 1;
}

function displayCalendar(inputField, format, buttonObj, displayTime, timeInput) {
    try {
        ctDocument = getDocumentByObject(inputField);
        var cldr = Calendar.objs.get(), calendarDiv = null;
        if (cldr) calendarDiv = cldr.calendarDiv;
        if (displayTime) calendarDisplayTime = true; else calendarDisplayTime = false;
        if (inputField.value.length > 6) {
            if (!inputField.value.match(/^[0-9]*?$/gi)) {
                var items = inputField.value.split(/[^0-9]/gi);
                var positionArray = new Object();
                positionArray.M = format.indexOf("MM");
                if (positionArray.M == -1) positionArray.M = format.indexOf("M");
                positionArray.d = format.indexOf("dd");
                if (positionArray.d == -1) positionArray.d = format.indexOf("d");
                positionArray.y = format.indexOf("yyyy");
                positionArray.H = format.indexOf("HH");
                positionArray.m = format.indexOf("mm");
                positionArray.s = format.indexOf("ss");
                this.initialHour = "00";
                this.initialMinute = "00";
                this.initialSecond = "00";
                var elements = [ "y", "M", "d", "H", "m", "s" ];
                var properties = [ "currentYear", "currentMonth", "inputDay", "currentHour", "currentMinute", "currentSecond" ];
                var propertyLength = [ 4, 2, 2, 2, 2, 2 ];
                for (var i = 0; i < elements.length; i++) {
                    if (positionArray[elements[i]] >= 0) {
                        window[properties[i]] = inputField.value.substr(positionArray[elements[i]], propertyLength[i]) / 1;
                    }
                }
                currentMonth--;
            } else {
                var monthPos = format.indexOf("MM");
                currentMonth = inputField.value.substr(monthPos, 2) / 1 - 1;
                var yearPos = format.indexOf("yyyy");
                currentYear = inputField.value.substr(yearPos, 4);
                var dayPos = format.indexOf("dd");
                var tmpDay = inputField.value.substr(dayPos, 2);
                var hourPos = format.indexOf("HH");
                if (hourPos >= 0) {
                    var tmpHour = inputField.value.substr(hourPos, 2);
                    currentHour = tmpHour;
                    if (currentHour.length == 1) currentHour = "0";
                } else {
                    currentHour = "00";
                }
                var minutePos = format.indexOf("mm");
                if (minutePos >= 0) {
                    var tmpMinute = inputField.value.substr(minutePos, 2);
                    currentMinute = tmpMinute;
                } else {
                    currentMinute = "00";
                }
                var secondPos = format.indexOf("ss");
                if (secondPos >= 0) {
                    var tmpSecond = inputField.value.substr(secondPos, 2);
                    currentSecond = tmpSecond;
                } else {
                    currentSecond = "00";
                }
            }
        } else {
            var d = new Date();
            currentMonth = d.getMonth();
            currentYear = d.getFullYear();
            currentHour = "08";
            currentMinute = "00";
            currentSecond = "00";
            inputDay = d.getDate() / 1;
        }
        inputYear = currentYear;
        inputMonth = currentMonth;
        if (hasCalendarDivByCtIframe(inputField)) {
            calendarDiv = null;
            Calendar.objs.add({
                calendarDiv: calendarDiv
            });
        }
        if (calendarDiv) {
            var hasDiv = $(calendarDiv.id);
            if (!hasDiv) {
                calendarDiv = null;
                Calendar.objs.add({
                    calendarDiv: calendarDiv,
                    calendarContentDiv: null
                });
            }
        }
        if (!calendarDiv) {
            initCalendar();
            var cldr = Calendar.objs.get(), calendarDiv = null;
            if (cldr) calendarDiv = cldr.calendarDiv;
        } else {
            if (calendarDiv.style.display == "block") {
                closeCalendar();
                return false;
            }
            writeCalendarContent();
        }
        returnFormat = format;
        returnDateTo = inputField;
        positionCalendar(buttonObj);
        calendarDiv.style.visibility = "visible";
        calendarDiv.style.display = "block";
        if (iframeObj) {
            iframeObj.style.display = "";
            iframeObj.style.height = "140px";
            iframeObj.style.width = "195px";
            iframeObj2.style.display = "";
            iframeObj2.style.height = "140px";
            iframeObj2.style.width = "195px";
        }
        setTimeProperties();
        updateYearDiv();
        updateMonthDiv();
        updateMinuteDiv();
        updateSecondDiv();
        updateHourDiv();
    } catch (oErr) {
        outPrint(oErr, "displayCalendar", Calendar);
    }
}

function displayCalendarSelectBox(yearInput, monthInput, dayInput, hourInput, minuteInput, secondInput, buttonObj) {
    try {
        ctDocument = getDocumentByObject(buttonObj);
        var cldr = Calendar.objs.get(), calendarDiv = null;
        if (cldr) calendarDiv = cldr.calendarDiv;
        if (!hourInput) calendarDisplayTime = false; else calendarDisplayTime = true;
        currentMonth = monthInput.options[monthInput.selectedIndex].value / 1 - 1;
        currentYear = yearInput.options[yearInput.selectedIndex].value;
        if (hourInput) {
            currentHour = hourInput.options[hourInput.selectedIndex].value;
            inputHour = currentHour / 1;
        }
        if (minuteInput) {
            currentMinute = minuteInput.options[minuteInput.selectedIndex].value;
            inputMinute = currentMinute / 1;
        }
        if (secondInput) {
            currentSecond = secondInput.options[secondInput.selectedIndex].value;
            inputSecond = currentSecond / 1;
        }
        inputYear = yearInput.options[yearInput.selectedIndex].value;
        inputMonth = monthInput.options[monthInput.selectedIndex].value / 1 - 1;
        inputDay = dayInput.options[dayInput.selectedIndex].value / 1;
        if (hasCalendarDivByCtIframe(inputField)) {
            calendarDiv = null;
            Calendar.objs.add(calendarDiv);
        }
        if (!calendarDiv) {
            initCalendar();
            var cldr = Calendar.objs.get(), calendarDiv = null;
            if (cldr) calendarDiv = cldr.calendarDiv;
        } else {
            writeCalendarContent();
        }
        returnDateToYear = yearInput;
        returnDateToMonth = monthInput;
        returnDateToDay = dayInput;
        returnDateToHour = hourInput;
        returnDateToMinute = minuteInput;
        returnDateToSecond = secondInput;
        returnFormat = false;
        returnDateTo = false;
        positionCalendar(buttonObj);
        calendarDiv.style.visibility = "visible";
        calendarDiv.style.display = "block";
        if (iframeObj) {
            iframeObj.style.display = "";
            iframeObj.style.height = calendarDiv.offsetHeight + "px";
            iframeObj.style.width = calendarDiv.offsetWidth + "px";
            iframeObj2.style.display = "";
            iframeObj2.style.height = calendarDiv.offsetHeight + "px";
            iframeObj2.style.width = calendarDiv.offsetWidth + "px";
        }
        setTimeProperties();
        updateYearDiv();
        updateMonthDiv();
        updateHourDiv();
        updateMinuteDiv();
        updateSecondDiv();
    } catch (oErr) {
        outPrint(oErr, "displayCalendarSelectBox", Calendar);
    }
}

function getDocumentByObject(obj) {
    try {
        ctIframeDoc = $getIframeByObject(obj);
        if (ctIframeDoc) {
            return getIframeDocument(ctIframeDoc);
        } else {
            return window.document;
        }
    } catch (oErr) {
        outPrint(oErr, "getDocumentByObject", Calendar);
    }
    return null;
}

function getIdCtIframeDoc() {
    return ctIframeDoc ? ctIframeDoc.id : null;
}

function hasCalendarDivByCtIframe(obj) {
    if (obj) {
        var iframeIdSelect = $getIframeByObject(obj);
        if (iframeIdSelect) {
            var iframeId = getIdCtIframeDoc();
            if (iframeId != iframeIdSelect.id) {
                return true;
            }
        }
    }
    return false;
}

if (typeof JRetail != "object") {
    JRetail = {};
}

(function($R) {
    "use strict";
    var windowWidth = 0, windowHeight = 0, page_offsetLeft = 0, page_offsetTop = 0, delay = 100;
    $R.define("JRetail.ToolTip", {});
    JRetail.ToolTip = {
        _FILE: "016jretail.toolTip.js",
        version: JRetail.rsis.VersionJS,
        SELETOR_NAME: "ttp",
        SELETOR_NAME_HELP: "ttHlp",
        OBJECT_SELECTED: null,
        help: null,
        selectActive: null,
        config: {
            opacity: 100,
            widthHelp: 200,
            width: 450
        },
        remove: function(obj) {
            if (!obj) return;
            deleteSeletor(obj, this.SELETOR_NAME);
            deleteSeletor(obj, this.SELETOR_NAME_HELP);
        },
        show: function(obj, evt, description, width) {
            if (typeof obj === "string") {
                obj = $(obj);
            }
            if (!obj) {
                return;
            }
            evt = $R.events.getEvent(evt);
            var iframe = $getIframeByObject(obj), width = toInt(width);
            var seletor = createSeletor(iframe, this.SELETOR_NAME);
            if (seletor) {
                this.OBJECT_SELECTED = obj.id;
                this.selectActive = this.SELETOR_NAME;
                this.options.getPosition();
                this.options.hint(obj, seletor, evt, description, width, iframe);
                window.onresize = function() {
                    if (evt) ToolTipPosition.positiontooltip(seletor, evt, iframe);
                };
                if (evt) ToolTipPosition.positiontooltip(seletor, evt, iframe);
            }
        },
        showHelp: function(obj, evt, description, width) {
            if (typeof obj === "string") {
                obj = $(obj);
            }
            if (!obj) {
                return;
            }
            evt = Rsis.events.getEvent(evt);
            var iframe = $getIframeByObject(obj), width = toInt(width);
            var seletor = createSeletor(iframe, this.SELETOR_NAME_HELP);
            if (seletor) {
                this.OBJECT_SELECTED = obj.id;
                this.options.getPosition();
                this.options.help(obj, seletor, description, width, iframe);
                window.onresize = function() {
                    if (evt) ToolTipPosition.positiontooltip(seletor, evt, iframe);
                };
                if (evt) ToolTipPosition.positiontooltip(seletor, evt, iframe);
            }
        },
        helpKey: function(obj, evt, description, width) {
            if (typeof obj === "string") {
                obj = $(obj);
            }
            if (!obj) {
                return;
            }
            evt = $R.events.getEvent(evt);
            var iframe = $getIframeByObject(obj);
            var seletor = createSeletor(iframe, this.SELETOR_NAME_HELP);
            if (seletor) {
                this.OBJECT_SELECTED = obj.id;
                this.options.getPosition();
                this.options.helpKey(obj, seletor, toInt(width), iframe);
                window.onresize = function() {
                    if (evt) ToolTipPosition.positiontooltip(seletor, evt, iframe);
                };
                if (evt) ToolTipPosition.positiontooltip(seletor, evt, iframe);
            }
        },
        showHelpKeys: function(obj, evt, description, width) {
            this.helpKey(obj, evt, description, width);
        },
        hidden: function(obj) {
            $R.$(getSeletor(obj, this.SELETOR_NAME)).hide();
        },
        hiddenHelp: function(obj) {
            $R.$(getSeletor(obj, this.SELETOR_NAME_HELP)).hide();
        },
        hiddenHelpKeys: function(obj) {
            $R.$(getSeletor(obj, this.SELETOR_NAME_HELP)).hide();
        }
    };
    var clss = "hint-small hint-middle hint-large".split(" ");
    JRetail.ToolTip.options = {
        _super: JRetail.ToolTip,
        hint: function(obj, seletor, evt, description, width, ifrm) {
            var _super = this._super;
            if (seletor) {
                var component = obj.getAttribute("component"), isButtonComp = obj.tagName.toLowerCase() === "div" && obj.getAttribute("data-type") === "button", isButton = false;
                if (isButtonComp || isNoEmpty(component) && (component == "toolBarButton" || component == "button" || component == "scrollButton")) {
                    isButton = true;
                }
                var dataBase = this.getDataBaseDescriptions(obj);
                var template = isButton ? this.templateHintButton() : this.template(), hintText = isButton && isNoEmpty(dataBase.longText) ? dataBase.longText : description;
                $R.$(seletor).hide().html(Message.parser(template, hintText, dataBase.text, dataBase.longText));
                if (isEmpty(description) && isEmpty(dataBase.text) && isEmpty(dataBase.longText)) return false;
                this.width(obj, seletor, hintText, dataBase);
                if (isButton) {
                    this.configHintButton(obj, seletor, hintText, dataBase.size, width);
                } else {
                    this.configHint(obj, seletor, dataBase, width);
                }
                $R.$(seletor).show();
            }
        },
        help: function(obj, seletor, description, width, ifrm) {
            var _super = this._super;
            if (seletor) {
                var ssty = seletor.style;
                description = description.replaceAll("&lt;", "<").replaceAll("&gt;", ">");
                var t = findPosition(obj), altura = windowHeight - t.offsetY + obj.offsetHeight, pos = altura - (windowHeight - t.offsetY);
                var offsetX = t.offsetX, widthNow = width + t.offsetX + 10;
                if (widthNow >= windowWidth) {
                    offsetX = t.offsetX - (widthNow - windowWidth);
                }
                offsetX = offsetX >= 0 ? offsetX : 15;
                var xy = findXY(obj);
                if (xy) {
                    ssty.left = xy[0] + "px";
                    ssty.top = xy[1] + "px";
                } else {
                    ssty.left = offsetX + "px";
                    ssty.top = t.offsetY + 15 + "px";
                }
                var heightSeletor = toInt(ssty.height) + "px";
                var widthSeletor = isNaN(width) ? _super.config.widthHelp : width < _super.config.widthHelp ? _super.config.widthHelp : width;
                if (!isNaN(heightSeletor) && widthSeletor > windowWidth) {
                    heightSeletor = heightSeletor + 15 * Math.round((widthSeletor - windowWidth) / 50) + "px";
                    ssty.height = heightSeletor + "px";
                }
                var component = obj.getAttribute("component"), isButtonComp = obj.tagName.toLowerCase() === "div" && obj.getAttribute("data-type") === "button", isButton = false;
                if (isButtonComp || isNoEmpty(component) && (component == "toolBarButton" || component == "button" || component == "scrollButton")) {
                    isButton = true;
                }
                var dataBase = this.getDataBaseDescriptions(obj);
                var template = isButton ? this.templateHintButton() : this.template(), hintText = isButton && isNoEmpty(dataBase.longText) ? dataBase.longText : description;
                $R.$(seletor).hide().html(Message.parser(template, hintText, dataBase.text, dataBase.longText));
                if (isEmpty(Trim(description)) && isEmpty(dataBase.text) && isEmpty(dataBase.longText)) return false;
                this.width(obj, seletor, hintText, dataBase);
                if (isButton) {
                    this.configHintButton(obj, seletor, hintText, dataBase.size, widthSeletor);
                } else {
                    this.configHint(obj, seletor, dataBase, widthSeletor);
                }
                $R.$(seletor).show();
            }
        },
        helpKey: function(obj, seletor, evt, width) {
            var _super = this._super;
            if (seletor) {
                var helpIds = this.sequences(obj);
                $R.$(seletor).hide().html(Message.parser(this.templateHintHelpKey(), helpIds.helpApp, helpIds.helpKey));
                var message = Trim(isNoEmpty(helpIds.helpKey) ? helpIds.helpKey : helpIds.helpApp);
                this.width(obj, seletor, message, null);
                this.configHintButton(obj, seletor, message, null, width);
                $R.$(seletor).show();
            }
        },
        width: function(obj, seletor, message, dataBase) {
            if (seletor && (isNoEmpty(message) || dataBase && dataBase.size > 0)) {
                var size = isNoEmpty(message) ? toInt(message.length) : 0, doc = getDocumentByObject(obj);
                if (dataBase && dataBase.size > 0) {
                    size = toInt(Math.max(message.length, dataBase.size));
                }
                $R.$("#" + seletor.id + " li:first-child", doc).removeClass("hint-large").addClass(size <= 25 ? clss[0] : clss[2]);
                $R.$("#" + seletor.id + " li[role=text]", doc).removeClass("hint-large").addClass(size <= 25 ? clss[0] : clss[2]);
                $R.$("#" + seletor.id + " li[role=longText], #" + seletor.id + " li[role=separator]", doc).removeClass("hint-large").addClass(size <= 25 ? clss[0] : clss[2]);
            }
        },
        configHintButton: function(obj, seletor, message, size, width) {
            if (obj && seletor && isNoEmpty(message)) {
                if (!size) size = toInt(message.length);
                var liLongText = $R.$("#" + seletor.id + " li[role=longText], #" + seletor.id + " li[role=separator]", getDocumentByObject(obj));
                if (liLongText) {
                    if (isNoEmpty(Trim(message))) {
                        liLongText.show();
                    } else {
                        liLongText.hide();
                    }
                }
            }
        },
        configHint: function(obj, seletor, dataBase, width) {
            if (obj && seletor && dataBase) {
                var doc = getDocumentByObject(obj), firstChild = $R.$("#" + seletor.id + " li:first-child", doc), longText = dataBase.longText;
                firstChild.hide();
                if (dataBase.size == 0) {
                    firstChild.show();
                }
                var liText = $R.$("#" + seletor.id + " li[role=text]", doc);
                if (liText) {
                    if (isNoEmpty(Trim(dataBase.text))) {
                        liText.show();
                    } else {
                        liText.hide();
                    }
                }
                var liLongText = $R.$("#" + seletor.id + " li[role=longText], #" + seletor.id + " li[role=separator]", doc);
                if (liLongText) {
                    if (isNoEmpty(Trim(longText))) {
                        liLongText.show();
                    } else {
                        liLongText.hide();
                    }
                }
            }
        },
        getPosition: function() {
            var _super = this._super, doc = getDocumentByObject($(_super.OBJECT_SELECTED)), ie = Rsis.browser.msie, ieBox = ie && (doc.compatMode == null || doc.compatMode == "BackCompat"), canvasEl = ieBox ? doc.body : doc.documentElement;
            windowWidth = window.innerWidth || canvasEl.clientWidth;
            windowHeight = window.innerHeight || canvasEl.clientHeight;
        },
        template: function() {
            return '\t<ul class="dropdown-menu-hint">' + "\t\t<li><blockquote><span>{0}</span></blockquote></li>" + '\t\t<li role="text" style="display:none"><blockquote><span><b>{1}</b>&nbsp;{0}</span></blockquote></li>' + '\t\t<li role="separator" class="divider-hint" style="display:none"></li>' + '\t\t<li role="longText" style="display:none"><blockquote><span>{2}</span></blockquote></li>' + "\t</ul>";
        },
        templateHintButton: function() {
            return '\t<ul class="dropdown-menu-hint">' + '\t\t<li role="longText" style="display:none"><blockquote><span>{0}</span></blockquote></li>' + "\t</ul>";
        },
        templateHintHelpKey: function() {
            return '\t<ul class="dropdown-menu-hint">' + '\t\t<li role="longText" style="display:none">' + "\t\t\t<blockquote><span>" + "\t\t\t<p><b>SeqHelpApp:</b>{0}</p>" + '\t\t\t<p class="divider-hint"></p>' + "\t\t\t<p><b>HelpKey:</b>{1}</p>" + "\t\t\t</span></blockquote>" + "\t\t</li>" + "\t</ul>";
        },
        getParentNode: function(obj) {
            if (isNoEmpty(obj.nodeName) && (obj.nodeName.toLowerCase() == "th" || obj.nodeName.toLowerCase() == "td" || obj.nodeName.toLowerCase() == "tr")) {
                return this.getParentNode(obj.parentNode);
            }
            return obj;
        },
        getDataBaseDescriptions: function(obj) {
            var helpIds = this.sequences(obj), parent = this.getParentNode(obj), descBreve = "", descLonga = "", size = 0, helpStored = $R.helpStored;
            if (helpIds != null && helpStored && helpStored.getEnableHelp()) {
                var element = helpStored.element(helpIds.helpApp, helpIds.helpKey);
                if (element) {
                    var UIForm = $R.getUIForm(parent), model = UIForm.get(element, [ "descBreve", "descLonga" ]);
                    if (model) {
                        descBreve = isEmpty(model.descBreve) ? "" : Trim(model.descBreve);
                        descLonga = isEmpty(model.descLonga) ? "" : Trim(model.descLonga);
                        size = Math.max(descBreve.length, descLonga.length);
                        size = size > 0 ? size : 0;
                    }
                }
            }
            return {
                text: descBreve,
                longText: descLonga,
                size: size
            };
        },
        sequences: function(obj) {
            return $R.helpStored.constraints(obj);
        }
    };
    JRetail.toolTip = JRetail.ToolTip;
    function findXY(o) {
        if (o) {
            var x = findPosX(o), y = findPosY(o), x1 = 0, y1 = 0, x2 = 0, y2 = 0;
            var bd = $(o.id.split(".")[0] + ".bd");
            if (bd) {
                x1 = bd.clientWidth;
                y1 = bd.clientHeight;
                if (bd.scrollLeft > -1) {
                    x2 = Math.abs(bd.scrollLeft - x);
                    y2 = Math.abs(y) + o.clientHeight + 2;
                } else {
                    x2 = Math.abs(Math.abs(x - window.screen.availWidth) - x1);
                    y2 = Math.abs(y) + o.clientHeight + 2;
                }
                return [ x2, y2 ];
            }
        }
        return null;
    }
    function createSeletor(iframe, seletorName) {
        var doc = window.document, list = null;
        if (iframe != null) {
            doc = getIframeDocument(iframe);
            list = $frame(iframe.id, seletorName);
        } else {
            list = $(seletorName);
        }
        if (!list) {
            list = doc.createElement("DIV");
            list.id = seletorName;
            list.className = "dropdown";
            doc.body.appendChild(list);
        }
        return list;
    }
    function getSeletor(obj, seletorName) {
        if ($getIframeByObject(obj) != null) {
            deleteSeletor(null, seletorName);
            return $frame($getIframeByObject(obj).id, seletorName);
        } else {
            return $(seletorName);
        }
        return null;
    }
    function deleteSeletor(obj, seletorName) {
        var iframe = $getIframeByObject(obj);
        if (iframe) {
            var seletor = $frame($getIframeByObject(obj).id, seletorName);
            var doc = getIframeDocument(iframe);
            if (doc && seletor) {
                doc.body.removeChild(seletor);
                return true;
            }
        } else {
            var seletor = $(seletorName);
            if (seletor) {
                document.body.removeChild(seletor);
                return true;
            }
        }
        return false;
    }
    function redirectSeletor() {
        if (JRetail.ToolTip.OBJECT_SELECTED != null) {
            var targetObject = $(JRetail.ToolTip.OBJECT_SELECTED);
            if (targetObject) {
                var seletor = getSeletor(targetObject);
                if (seletor) {
                    seletor.style.top = getTopPos(targetObject, seletor) + "px";
                    seletor.style.left = getLeftPos(targetObject, seletor) + "px";
                }
            }
        }
    }
    function getDocumentByObject(obj) {
        var ctIframeDoc = $getIframeByObject(obj);
        if (ctIframeDoc) {
            return getIframeDocument(ctIframeDoc);
        } else {
            return window.document;
        }
        return null;
    }
    function getWindowWidth() {
        return windowWidth;
    }
    function getWindowHeight() {
        return windowHeight;
    }
    function findPosition(obj) {
        var left = 0;
        var top = 0;
        if (obj.offsetParent) {
            left = obj.offsetLeft;
            top = obj.offsetTop;
            while (obj = obj.offsetParent) {
                left += obj.offsetLeft;
                top += obj.offsetTop;
            }
        }
        return {
            offsetX: left,
            offsetY: top
        };
    }
    function getTopPos(_obj, _seletor) {
        var returnValue = _obj.offsetTop + _obj.offsetHeight;
        while ((_obj = _obj.offsetParent) != null) returnValue += _obj.offsetTop;
        return returnValue + page_offsetTop;
    }
    function getLeftPos(_obj, _seletor) {
        var returnValue = _obj.offsetLeft;
        var wdts = isNaN(parseInt(_seletor.style.width, 10)) ? _seletor.offsetWidth : parseInt(_seletor.style.width, 10);
        while ((_obj = _obj.offsetParent) != null) {
            returnValue += _obj.offsetLeft;
        }
        var _WIDTH_ = getWindowWidth() - wdts;
        return returnValue + page_offsetLeft + wdts >= _WIDTH_ ? returnValue + page_offsetLeft - wdts : returnValue + page_offsetLeft;
    }
    var ToolTipPosition = {
        toolTipOffsets: [ -2, 7 ],
        getWinWidth: function(doc) {
            this.width = 0, doc = !doc ? document : doc;
            if (window.innerWidth) this.width = window.innerWidth - 18; else if (doc.documentElement && doc.documentElement.clientWidth) this.width = doc.documentElement.clientWidth; else if (doc.body && doc.body.clientWidth) this.width = doc.body.clientWidth;
            return this.width;
        },
        getWinHeight: function(doc) {
            this.height = 0, doc = !doc ? document : doc;
            if (window.innerHeight) this.height = window.innerHeight - 18; else if (doc.documentElement && doc.documentElement.clientHeight) this.height = doc.documentElement.clientHeight; else if (doc.body && doc.body.clientHeight) this.height = doc.body.clientHeight;
            return this.height;
        },
        getScrollX: function(doc) {
            this.scrollX = 0, doc = !doc ? document : doc;
            if (typeof window.pageXOffset == "number") this.scrollX = window.pageXOffset; else if (doc.documentElement && doc.documentElement.scrollLeft) this.scrollX = doc.documentElement.scrollLeft; else if (doc.body && doc.body.scrollLeft) this.scrollX = doc.body.scrollLeft; else if (window.scrollX) this.scrollX = window.scrollX;
            return this.scrollX;
        },
        getScrollY: function(doc) {
            this.scrollY = 0, doc = !doc ? document : doc;
            if (typeof window.pageYOffset == "number") this.scrollY = window.pageYOffset; else if (doc.documentElement && doc.documentElement.scrollTop) this.scrollY = doc.documentElement.scrollTop; else if (doc.body && doc.body.scrollTop) this.scrollY = doc.body.scrollTop; else if (window.scrollY) this.scrollY = window.scrollY;
            return this.scrollY;
        },
        getAll: function(doc) {
            return {
                width: this.getWinWidth(doc),
                height: this.getWinHeight(doc),
                scrollX: this.getScrollX(doc),
                scrollY: this.getScrollY(doc)
            };
        },
        pos: function($tooltip, config) {
            if ($tooltip && config) {
                $tooltip.style.left = config.left + "px";
                $tooltip.style.top = config.top + "px";
            }
        },
        positiontooltip: function($tooltip, e, iframe) {
            if (!e) var e = window.event;
            var doc = window.document;
            if (iframe && getIframeDocument(iframe)) {
                doc = getIframeDocument(iframe);
            }
            var posMouse = this.getPosXY(e, doc);
            var pageX = posMouse.posx, pageY = posMouse.posy;
            var x = pageX + this.toolTipOffsets[0], y = pageY + this.toolTipOffsets[1];
            var tipw = $tooltip.width || $tooltip.clientWidth || $R.$("#" + $tooltip.id + " ul", doc).outerWidth() - 2, tiph = $tooltip.height || $tooltip.clientHeight || $R.$("#" + $tooltip.id + " ul", doc).outerHeight() - 2;
            x = x + tipw > this.getScrollX(doc) + this.getWinWidth(doc) ? x - tipw - this.toolTipOffsets[0] * 2 : x;
            y = y + tiph > this.getScrollY(doc) + this.getWinHeight(doc) ? this.getScrollY(doc) + this.getWinHeight(doc) - tiph - 10 : y;
            if (x + tipw > this.getScrollX(doc) + this.getWinWidth(doc) && pageX + this.toolTipOffsets[0] > tipw) {
                x = pageX + this.toolTipOffsets[0] - tipw;
            }
            if (pageY + this.toolTipOffsets[1] + tiph >= pageY + this.toolTipOffsets[1] && pageY + this.toolTipOffsets[1] > tiph) {
                y = pageY + this.toolTipOffsets[1] - tiph;
            }
            this.pos($tooltip, {
                left: x,
                top: y
            });
        },
        getPosXY: function(e, doc) {
            var posx = 0, posy = 0;
            if (!e) var e = window.event;
            if (e.pageX || e.pageY) {
                posx = e.pageX;
                posy = e.pageY;
            } else if (e.clientX || e.clientY) {
                posx = e.clientX + doc.body.scrollLeft + doc.documentElement.scrollLeft;
                posy = e.clientY + doc.body.scrollTop + doc.documentElement.scrollTop;
            }
            return {
                posx: posx,
                posy: posy
            };
        }
    };
    if (typeof Rsis == "undefined") {
        Rsis = {};
    }
    Rsis.Tip = JRetail.ToolTip;
})(Rsis);

if (typeof JRetail != "object") {
    JRetail = {};
}

(function() {
    var windowWidth = 0, windowHeight = 0, page_offsetLeft = 0, page_offsetTop = 0;
    JRetail.floatPanel = JRetail.FloatPanel = {
        _FILE: "017jretail.floatPanel.js",
        version: JRetail.rsis.VersionJS,
        SELETOR_NAME: "dFps",
        IFRAME_NAME: "",
        objectSelected: null,
        config: {
            title: "",
            opacity: 100,
            width: 200,
            height: 25,
            onclickConfirm: "",
            buttonConfirm: false,
            refObject: null,
            createInObject: false,
            isAddValue: false,
            isClear: false
        },
        show: function(obj, contentDisplay, displaySettings) {
            try {
                this.visible(obj, contentDisplay, displaySettings);
            } catch (oErr) {
                outPrint(oErr, "show()", this);
            }
        },
        clear: function(obj) {
            try {
                var seletor = getSeletor(obj);
                if (seletor) {
                    seletor.innerHTML = "";
                }
            } catch (oErr) {
                outPrint(oErr, "clear()", this);
            }
        },
        visible: function(obj, description, displaySettings) {
            var thiz = this;
            try {
                if (typeof obj === "string") {
                    obj = $(obj);
                }
                if (!obj) {
                    return;
                }
                var iframe = $getIframeByObject(obj);
                thiz.IFRAME_NAME = iframe ? iframe.id + "__" : "";
                var seletor = null;
                if (displaySettings.createInObject == true) {
                    seletor = createSeletorInObject(iframe, obj);
                } else {
                    seletor = createSeletor(iframe);
                }
                if (seletor) {
                    thiz.objectSelected = displaySettings.refObject != null ? displaySettings.refObject.id : obj.id;
                    thiz.options.getPosition();
                    thiz.options.display(obj, seletor, description, displaySettings, iframe);
                }
            } catch (oErr) {
                outPrint(oErr, "visible()", this);
            }
        },
        hidden: function(obj) {
            try {
                overWrtFloatPanelHiddenPointTop(obj);
                var seletor = getSeletor(obj);
                if (seletor) {
                    var sl = seletor.style;
                    sl.display = "none";
                    sl.cursor = "default";
                }
                overWrtFloatPanelHiddenPointDown(obj);
            } catch (oErr) {
                outPrint(oErr, "JRetail.floatPanel.hidden()", this);
            }
        }
    };
    JRetail.floatPanel.options = {
        display: function(obj, seletor, description, displaySettings, ifrm) {
            try {
                if (seletor) {
                    var $win = UtilRsis.getParentWindow(obj), JF = JRetail.floatPanel, bwr = Rsis.browser, updatePositionArrow = false;
                    displaySettings = Rsis.extend(JF.config, displaySettings);
                    var objRef = bwr.msie && displaySettings.refObject != null ? displaySettings.refObject : obj;
                    var t = findPosition(objRef), altura = windowHeight - t.offsetY + objRef.offsetHeight, pos = altura - (windowHeight - t.offsetY);
                    seletor.className = "dFps";
                    var selSty = seletor.style;
                    selSty.background = "transparent";
                    selSty.position = "absolute";
                    selSty.display = "block";
                    selSty.padding = "0";
                    selSty.border = "none";
                    selSty.width = displaySettings.width + "px";
                    selSty.opacity = displaySettings.opacity / 100;
                    var offsetX = t.offsetX, widthNow = displaySettings.width + t.offsetX + 10;
                    if (widthNow >= windowWidth) {
                        offsetX = t.offsetX - (widthNow - windowWidth);
                        updatePositionArrow = true;
                    }
                    offsetX = offsetX >= 0 ? offsetX : 15;
                    if (bwr.msie && displaySettings.createInObject == true) {
                        selSty.left = offsetX + "px";
                        selSty.top = pos + 45 + "px";
                    } else {
                        selSty.left = offsetX + "px";
                        selSty.top = t.offsetY + 15 + "px";
                    }
                    if (displaySettings.isClear == true) {
                        seletor.innerHTML = "";
                    }
                    var titleSeletor = $(JF.IFRAME_NAME + "title-seletor"), displayContent = $(JF.IFRAME_NAME + "display-content");
                    if (titleSeletor) {
                        titleSeletor.innerHTML = "";
                    }
                    if (displayContent && displaySettings.isAddValue == true) {
                        description = displayContent.innerHTML + description;
                    }
                    seletor.innerHTML = JF.options.getPanel(description, displaySettings, $win);
                    var seletorDisplay = null;
                    if (JF.IFRAME_NAME) {
                        seletorDisplay = $frame(JF.IFRAME_NAME, "seletor-display");
                    } else seletorDisplay = $("seletor-display");
                    if (seletorDisplay != null) {
                        seletorDisplay.style.border = "1px solid #3895AE";
                    }
                    if (updatePositionArrow) {
                        var arrowPanel = $(JF.IFRAME_NAME + "arrowPanel");
                        if (arrowPanel) {
                            arrowPanel.style.left = t.offsetX - offsetX + 15 + "px";
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "JRetail.floatPanel.options.display", JF);
            }
        },
        getPosition: function() {
            var doc = getDocumentByObject($(JRetail.floatPanel.objectSelected));
            var ie = Rsis.browser.msie;
            var ieBox = ie && (doc.compatMode == null || doc.compatMode == "BackCompat");
            var canvasEl = ieBox ? doc.body : doc.documentElement;
            windowWidth = window.innerWidth || canvasEl.clientWidth;
            windowHeight = window.innerHeight || canvasEl.clientHeight;
        },
        getPanel: function(content, displaySettings, $win) {
            var _title = "", _height = displaySettings.height, frameName = JRetail.floatPanel.IFRAME_NAME;
            if (displaySettings.title != "") {
                _title = displaySettings.title;
            }
            return '<div class="arHt" id="' + frameName + 'arrowPanel" style="z-index:105;top:1px;"></div>' + '<div id="selDpy" class="selDpyCte" style="width:' + displaySettings.width + 'px;">' + '\t<div class="tleSel"><h1 id="' + frameName + 'title-seletor">' + _title + "</h1></div>" + '\t<div class="cfmSel" onclick="return ' + displaySettings.onclickConfirm + '" id="' + frameName + 'floatPanelSeletor.confim" style="display:' + (displaySettings.buttonConfirm ? "block" : "none") + ';"><a></a></div>' + '\t<div class="clsSel" onclick="return ' + $win + "JRetail.floatPanel.hidden(" + $win + "$('" + frameName + "floatPanelSeletor'));\"><a></a></div>" + '\t<div class="dlyCte" id="' + frameName + 'display-content" style="height:' + _height + '">' + content + "</div>" + "</div>";
        }
    };
    function createSeletor(iframe) {
        try {
            var doc = window.document, JF = JRetail.floatPanel, list = null;
            if (iframe != null) {
                var doc = getIframeDocument(iframe);
                list = $frame(iframe.id, JF.IFRAME_NAME + JF.SELETOR_NAME);
            } else {
                list = $(JF.SELETOR_NAME);
            }
            if (!list) {
                var list = doc.createElement("DIV");
                list.id = JF.IFRAME_NAME + JF.SELETOR_NAME;
                doc.body.appendChild(list);
            }
        } catch (oErr) {
            outPrint(oErr, "createSeletor", JF);
        }
        return list;
    }
    function createSeletorInObject(iframe, object) {
        try {
            if (object) {
                var doc = window.document, JF = JRetail.floatPanel;
                if (iframe != null) {
                    doc = getIframeDocument(iframe);
                }
                var floatPanel = getSeletor(iframe);
                if (!floatPanel) {
                    var floatPanel = doc.createElement("DIV");
                    floatPanel.id = JF.IFRAME_NAME + JF.SELETOR_NAME;
                    object.appendChild(floatPanel);
                }
            }
        } catch (oErr) {
            outPrint(oErr, "createSeletorInObject", JF);
        }
        return floatPanel;
    }
    function getSeletor(obj) {
        try {
            var JF = JRetail.floatPanel;
            if ($getIframeByObject(obj) != null) {
                deleteSeletor(null);
                return $frame($getIframeByObject(obj).id, JF.IFRAME_NAME + JF.SELETOR_NAME);
            } else {
                return $(JF.IFRAME_NAME + JF.SELETOR_NAME);
            }
        } catch (oErr) {
            outPrint(oErr, "getSeletor", JF);
        }
        return null;
    }
    function deleteSeletor(obj) {
        try {
            var JF = JRetail.floatPanel, iframe = $getIframeByObject(obj), doc = window.document;
            if (iframe) {
                var seletor = $frame($getIframeByObject(obj).id, JF.IFRAME_NAME + JF.SELETOR_NAME);
                doc = getIframeDocument(iframe);
                if (doc && seletor) {
                    doc.body.removeChild(seletor);
                    return true;
                }
            } else {
                var seletor = $(JF.IFRAME_NAME + JF.SELETOR_NAME);
                if (seletor) {
                    iframe = $getIframeByObject(seletor);
                    if (iframe) {
                        doc = getIframeDocument(iframe);
                    }
                    if (doc) {
                        doc.body.removeChild(seletor);
                    }
                    return true;
                }
            }
        } catch (oErr) {
            outPrint(oErr, "deleteSeletor()", JF);
        }
        return false;
    }
    function redirectSeletor() {
        try {
            var JF = JRetail.floatPanel;
            if (JF.objectSelected != null) {
                var targetObject = $(JF.objectSelected);
                if (targetObject) {
                    var seletor = getSeletor(targetObject);
                    if (seletor) {
                        seletor.style.top = getTopPos(targetObject, seletor) + "px";
                        seletor.style.left = getLeftPos(targetObject, seletor) + "px";
                    }
                }
            }
        } catch (oErr) {
            outPrint(oErr, "redirectSeletor", JF);
        }
    }
    function getDocumentByObject(obj) {
        try {
            var ctIframeDoc = $getIframeByObject(obj);
            if (ctIframeDoc) {
                return getIframeDocument(ctIframeDoc);
            } else {
                return window.document;
            }
        } catch (oErr) {
            outPrint(oErr, "getDocumentByObject", JRetail.floatPanel);
        }
        return null;
    }
    function getWindowWidth() {
        return windowWidth;
    }
    function getWindowHeight() {
        return windowHeight;
    }
    function findPosition(obj) {
        var left = 0;
        var top = 0;
        if (obj.offsetParent) {
            left = obj.offsetLeft;
            top = obj.offsetTop;
            while (obj = obj.offsetParent) {
                left += obj.offsetLeft;
                top += obj.offsetTop;
            }
        }
        return {
            offsetX: left,
            offsetY: top
        };
    }
    function getTopPos(_obj, _seletor) {
        try {
            var brw = Rsis.browser;
            if (brw.msie && JRetail.floatPanel.config.createInObject == true) {
                return parseInt(_obj.offsetHeight) + 15;
            } else {
                var returnValue = _obj.offsetTop + _obj.offsetHeight;
                while ((_obj = _obj.offsetParent) != null) {
                    returnValue += _obj.offsetTop;
                }
                var positonTop = returnValue + page_offsetTop;
                if (brw.msie) positonTop = positonTop - 41;
                return positonTop;
            }
        } catch (oErr) {
            outPrint(oErr, "getTopPos", JRetail.floatPanel);
        }
    }
    function getLeftPos(_obj, _seletor) {
        try {
            var returnValue = _obj.offsetLeft, wdts = isNaN(parseInt(_seletor.style.width, 10)) ? _seletor.offsetWidth : parseInt(_seletor.style.width, 10);
            while ((_obj = _obj.offsetParent) != null) {
                returnValue += _obj.offsetLeft;
            }
            var _WIDTH_ = getWindowWidth() - wdts, totalWidth = returnValue + page_offsetLeft + wdts, totalPageLeft = returnValue + page_offsetLeft - wdts, positonLeft = totalWidth >= _WIDTH_ ? totalPageLeft < 0 ? returnValue + page_offsetLeft : totalPageLeft : returnValue + page_offsetLeft;
        } catch (oErr) {
            outPrint(oErr, "getLeftPos", JRetail.floatPanel);
        }
        return positonLeft;
    }
})();

function overWrtFloatPanelHiddenPointTop(thiz) {}

function overWrtFloatPanelHiddenPointDown(thiz) {}

function Shortcut() {}

Shortcut._FILE = "018shortcut.js";

shortcut = {
    all_shortcuts: {},
    dialogs: new Array(),
    hasKeyHelp: false,
    getDialogId: function() {
        if (this.dialogs.length > 0) return this.dialogs[this.dialogs.length - 1];
        return null;
    },
    setDialogId: function(ui) {
        if (ui != null && ui !== "") this.dialogs.push(ui);
    },
    removeUi: function() {
        if (this.dialogs && this.dialogs.length > 0) this.dialogs.pop(); else this.hasKeyHelp = false;
    },
    add: function(shortcut_combination, callback, opt, ui) {
        var default_options = {
            type: "keydown",
            propagate: false,
            disable_in_input: false,
            target: document,
            keycode: false
        };
        if (typeof ui !== "undefined") {
            var dataUi = this.getDialogId();
            if (dataUi != null && ui === dataUi) {
                return false;
            }
            this.setDialogId(ui);
        }
        if ("alt+h" === shortcut_combination && this.hasKeyHelp) return false;
        if (!opt) opt = default_options; else {
            for (var dfo in default_options) {
                if (typeof opt[dfo] == "undefined") opt[dfo] = default_options[dfo];
            }
        }
        var ele = opt.target;
        if (typeof opt.target == "string") ele = document.getElementById(opt.target);
        var ths = this;
        shortcut_combination = shortcut_combination.toLowerCase();
        if ("alt+h" === shortcut_combination) {
            this.hasKeyHelp = true;
        }
        var func = function(e) {
            e = e || window.event;
            if (opt["disable_in_input"]) {
                var element;
                if (e.target) element = e.target; else if (e.srcElement) element = e.srcElement;
                if (element.nodeType == 3) element = element.parentNode;
                if (element.tagName == "INPUT" || element.tagName == "TEXTAREA") return;
            }
            if (e.keyCode) code = e.keyCode; else if (e.which) code = e.which;
            var character = String.fromCharCode(code).toLowerCase();
            if (code == 188) character = ",";
            if (code == 190) character = ".";
            var keys = shortcut_combination.split("+");
            var kp = 0;
            var shift_nums = {
                "`": "~",
                "1": "!",
                "2": "@",
                "3": "#",
                "4": "$",
                "5": "%",
                "6": "^",
                "7": "&",
                "8": "*",
                "9": "(",
                "0": ")",
                "-": "_",
                "=": "+",
                ";": ":",
                "'": '"',
                ",": "<",
                ".": ">",
                "/": "?",
                "\\": "|"
            };
            var special_keys = {
                esc: 27,
                escape: 27,
                tab: 9,
                space: 32,
                return: 13,
                enter: 13,
                backspace: 8,
                scrolllock: 145,
                scroll_lock: 145,
                scroll: 145,
                capslock: 20,
                caps_lock: 20,
                caps: 20,
                numlock: 144,
                num_lock: 144,
                num: 144,
                pause: 19,
                break: 19,
                insert: 45,
                home: 36,
                delete: 46,
                end: 35,
                pageup: 33,
                page_up: 33,
                pu: 33,
                pagedown: 34,
                page_down: 34,
                pd: 34,
                left: 37,
                up: 38,
                right: 39,
                down: 40,
                f1: 112,
                f2: 113,
                f3: 114,
                f4: 115,
                f5: 116,
                f6: 117,
                f7: 118,
                f8: 119,
                f9: 120,
                f10: 121,
                f11: 122,
                f12: 123
            };
            var modifiers = {
                shift: {
                    wanted: false,
                    pressed: false
                },
                ctrl: {
                    wanted: false,
                    pressed: false
                },
                alt: {
                    wanted: false,
                    pressed: false
                },
                meta: {
                    wanted: false,
                    pressed: false
                }
            };
            if (e.ctrlKey) modifiers.ctrl.pressed = true;
            if (e.shiftKey) modifiers.shift.pressed = true;
            if (e.altKey) modifiers.alt.pressed = true;
            if (e.metaKey) modifiers.meta.pressed = true;
            for (var i = 0; k = keys[i], i < keys.length; i++) {
                if (k == "ctrl" || k == "control") {
                    kp++;
                    modifiers.ctrl.wanted = true;
                } else if (k == "shift") {
                    kp++;
                    modifiers.shift.wanted = true;
                } else if (k == "alt") {
                    kp++;
                    modifiers.alt.wanted = true;
                } else if (k == "meta") {
                    kp++;
                    modifiers.meta.wanted = true;
                } else if (k.length > 1) {
                    if (special_keys[k] == code) kp++;
                } else if (opt["keycode"]) {
                    if (opt["keycode"] == code) kp++;
                } else {
                    if (character == k) kp++; else {
                        if (shift_nums[character] && e.shiftKey) {
                            character = shift_nums[character];
                            if (character == k) kp++;
                        }
                    }
                }
            }
            if (kp == keys.length && modifiers.ctrl.pressed == modifiers.ctrl.wanted && modifiers.shift.pressed == modifiers.shift.wanted && modifiers.alt.pressed == modifiers.alt.wanted && modifiers.meta.pressed == modifiers.meta.wanted) {
                callback(e);
                if (!opt["propagate"]) {
                    e.cancelBubble = true;
                    e.returnValue = false;
                    if (e.stopPropagation) {
                        e.stopPropagation();
                        e.preventDefault();
                    }
                    return false;
                }
            }
        };
        this.all_shortcuts[shortcut_combination] = {
            callback: func,
            target: ele,
            event: opt["type"]
        };
        if (ele.addEventListener) ele.addEventListener(opt["type"], func, false); else if (ele.attachEvent) ele.attachEvent("on" + opt["type"], func); else ele["on" + opt["type"]] = func;
    },
    remove: function(shortcut_combination) {
        shortcut_combination = shortcut_combination.toLowerCase();
        var binding = this.all_shortcuts[shortcut_combination];
        delete this.all_shortcuts[shortcut_combination];
        if (!binding) return;
        var ele = binding["target"], type = binding["event"], callback = binding["callback"];
        if (this.dialogs && this.dialogs.length > 0) this.dialogs.pop();
        if (ele.detachEvent) ele.detachEvent("on" + type, callback); else if (ele.removeEventListener) ele.removeEventListener(type, callback, false); else ele["on" + type] = false;
    }
};

shortcut.add("alt+q", function() {
    if (window.confirm("Essa acao vai limpar o cache do html. Deseja continuar?")) {
        if (window.localStorage && typeof window.localStorage.clear !== "undefined") {
            window.localStorage.clear();
        }
    }
}, {
    type: "keydown",
    propagate: true
});

(function($R) {
    CrudRsis = {
        _FILE: "019crudRsis.js",
        version: JRetail.rsis.VersionJS
    };
    Crud = {
        UIForm: null,
        sendUpload: false,
        BUTTONS: [],
        SALVE: true,
        HELP_KEY_PRESS: false,
        HELP_KEY_IDS_PRESS: false,
        PO_INSERT: 1,
        PO_UPDATE: 2,
        PO_SEARCH: 3,
        countRowsTable: null,
        undo: function(button) {
            _undo(button);
        },
        search: function(button) {
            _search(button);
        },
        select: function(button, evt) {
            Rsis.closeListHolder(evt);
            _select(button);
        },
        create: function(button) {
            _createCrud(button);
        },
        edit: function(button) {
            edit(button);
            return true;
        },
        confirm: function(button, args) {
            _confirmAction(button, args);
        },
        exclude: function(button) {
            _exclude(button);
        },
        activate: function(button) {
            _activate(button);
        },
        inactivate: function(button) {
            _inactivate(button);
        },
        doubleClick: function(tableId, row, evt) {
            return doubleClick(tableId, row, evt);
        },
        close: function(button, evt) {
            overWrtWindowClose(button, evt);
        },
        searchPage: function(button) {
            return _searchPage(button);
        },
        insert: function(button, UIForm) {
            var thiz = this;
            try {
                if (button && UIForm) {
                    var UIContext = Rsis.UIContext.get(UIForm);
                    var form = UIForm.getForm();
                    var SupressMethods = thiz.ToolBar.getCrudMethods(button);
                    targetMethod = SupressMethods.insert;
                    param = "";
                    UIForm.domainXML = cloneObjXML(XML.broke(UIForm.domainXML, UIForm.getXPath()));
                    if (!formToXML(UIForm)) return false;
                    var xmlDomain = UIForm.domainXML, targetAction = form.getAttribute("targetAction"), callback = "Crud.callBackInsert";
                    if (!UIContext.fileUpload && !thiz.sendUpload) {
                        UIContext.fileUpload = new FileUpload();
                    }
                    if (UIContext.fileUpload && UIContext.fileUpload.isSendWithForm(form) && !thiz.sendUpload) {
                        UIContext.fileUpload.setButton(button);
                        thiz.upload(form, targetAction, targetMethod, param);
                    } else {
                        var callComponent = button.id;
                        var parameters = "xmlDomain=" + escapeParam(xmlDomain != null ? xmlDomain.xml : "", true);
                        parameters += param;
                        if (UIContext.fileUpload != null && UIContext.fileUpload.responseText != null) {
                            parameters += "&keyFileUpload=" + escapeParam(UIContext.fileUpload.responseText, false);
                        }
                        if (UIContext.fileUpload != null && UIContext.fileUpload.queryString != null) {
                            parameters += UIContext.fileUpload.queryString;
                        }
                        AjaxRsis.callAction(form.id, URL, targetAction, targetMethod, callback, callComponent, parameters);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".insert", CrudRsis);
            }
        },
        callBackInsert: function(f, callComponent) {
            var thiz = this;
            try {
                var Transfer = AjaxRsis.process(f);
                if (Transfer && Transfer.objXML && Transfer.UIForm) {
                    var objXML = Transfer.objXML, UIForm = Transfer.UIForm, form = UIForm.getForm(), COMPONENTS = UIForm.getAllUIComponents(), OB = thiz.ToolBar;
                    var UIContext = Rsis.UIContext.get(UIForm);
                    if (COMPONENTS) {
                        Message.render(UIForm, objXML);
                        if (UIForm.hasError == false) {
                            if (callComponent == undefined || callComponent == null || callComponent === "") {
                                throw new MiddlewareViewException("O Atributo CallComponent deve ser informado na chamada Ajax!");
                            }
                            var button = null;
                            if (callComponent != "") {
                                button = $(callComponent);
                            }
                            var toolBars = COMPONENTS["toolBar"];
                            OB.callbackInjectionAfterRender(UIForm, objXML);
                            thiz.nodeIsSaved(UIForm);
                            var table = thiz.getTableElement(button);
                            if (table) {
                                var OBNC = Rsis.Cache, isNodesChecked = OBNC.isCache(button);
                                if (isNodesChecked) {
                                    OBNC.setStateDisplay(table, false);
                                }
                                var checkAll = $(table.id + ".checkAll");
                                if (checkAll && checkAll.checked == true) {
                                    checkAll.checked = false;
                                }
                            }
                            UIForm.state = UIRsis.VISUALIZING;
                            UIForm.setDomainXML(objXML);
                            renderUIForm(UIForm);
                            UIContext.setUIForms(f, UIForm);
                            var toolBarButton = OB.getToolBar(button);
                            OB.callbackInjection(UIForm, objXML);
                            var isStartSearching = OB.isStartSearching(toolBarButton, UIForm.state);
                            if (isStartSearching) {
                                OB.startSearch(UIForm, toolBarButton, table, true);
                            }
                        } else {
                            renderFileUploadsForm(COMPONENTS, UIForm.state);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".callBackInsert", CrudRsis);
            } finally {
                UIContext.fileUpload = null;
                thiz.sendUpload = false;
            }
        },
        update: function(button, UIForm) {
            try {
                var thiz = this;
                if (button && UIForm) {
                    var UIContext = Rsis.UIContext.get(UIForm);
                    var form = UIForm.getForm();
                    SupressMethods = thiz.ToolBar.getCrudMethods(button);
                    targetMethod = SupressMethods.update;
                    param = "";
                    if (!formToXML(UIForm)) return false;
                    var xmlDomain = UIForm.domainXML, targetAction = form.getAttribute("targetAction"), callback = "Crud.callBackUpdate";
                    if (typeof FileUpload != "undefined" && !thiz.sendUpload) {
                        UIContext.fileUpload = new FileUpload();
                    }
                    if (UIContext.fileUpload && UIContext.fileUpload.isSendWithForm(form) && !thiz.sendUpload) {
                        UIContext.fileUpload.setButton(button);
                        thiz.upload(form, targetAction, targetMethod, param);
                    } else {
                        var callComponent = button.id;
                        var parameters = "xmlDomain=" + escapeParam(xmlDomain != null ? xmlDomain.xml : "", true);
                        parameters += param;
                        if (UIContext.fileUpload != null && UIContext.fileUpload.responseText != null) {
                            parameters += "&keyFileUpload=" + escapeParam(UIContext.fileUpload.responseText, false);
                        }
                        if (UIContext.fileUpload != null && UIContext.fileUpload.queryString != null) {
                            parameters += UIContext.fileUpload.queryString;
                        }
                        AjaxRsis.callAction(form.id, URL, targetAction, targetMethod, callback, callComponent, parameters);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".update", CrudRsis);
            }
        },
        callBackUpdate: function(f, callComponent) {
            try {
                var thiz = this, Transfer = AjaxRsis.process(f);
                if (Transfer && Transfer.objXML && Transfer.UIForm) {
                    var objXML = Transfer.objXML, UIForm = Transfer.UIForm, nodeDomain = UIForm.getXPath(), COMPONENTS = UIForm.getAllUIComponents();
                    var UIContext = Rsis.UIContext.get(UIForm);
                    if (COMPONENTS) {
                        Message.render(UIForm, objXML);
                        if (UIForm.hasError == false) {
                            if (callComponent == undefined || callComponent == null || callComponent === "") {
                                throw new MiddlewareViewException("O Atributo CallComponent deve ser informado na chamada Ajax!");
                            }
                            var button = null;
                            if (callComponent != "") {
                                button = $(callComponent);
                            }
                            var UIContext = Rsis.UIContext.get(button);
                            var toolBars = COMPONENTS["toolBar"], OB = thiz.ToolBar;
                            thiz.ToolBar.callbackInjectionAfterRender(UIForm, objXML);
                            thiz.nodeIsSaved(UIForm);
                            var returnDomainXML = XML.broke(objXML, "/xmlDomain" + nodeDomain);
                            if (returnDomainXML != null) {
                                UIForm.domainXML = returnDomainXML;
                                UIForm.state = UIRsis.VISUALIZING;
                            }
                            var OBNC = Rsis.Cache, isNodesChecked = OBNC.isCache(button), table = thiz.getTableElement(button);
                            if (table) {
                                if (isNodesChecked) {
                                    OBNC.setStateDisplay(table, false);
                                }
                                var checkAll = $(table.id + ".checkAll");
                                if (checkAll && checkAll.checked == true) {
                                    checkAll.checked = false;
                                }
                                UIForm.updateNodeTableXML(table);
                            }
                            UIContext.setUIForms(f, UIForm);
                            renderUIForm(UIForm);
                            var toolBarButton = OB.getToolBar(button);
                            OB.callbackInjection(UIForm, objXML);
                            var isStartSearching = OB.isStartSearching(toolBarButton, UIForm.state);
                            if (isStartSearching) {
                                OB.startSearch(UIForm, toolBarButton, table, true);
                            }
                        } else {
                            renderFileUploadsForm(COMPONENTS, UIForm.state);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".callBackUpdate", CrudRsis);
            } finally {
                thiz.sendUpload = false;
            }
        },
        uploadFiles: function(obj) {
            try {
                this.callUpload({
                    object: obj,
                    callback: "Crud.callBackUpdate"
                });
            } catch (oErr) {
                outPrint(oErr, ".uploadFiles", CrudRsis);
            }
        },
        callUpload: function() {
            try {
                var config = arguments[0];
                if (!(arguments && arguments.length > 0)) alert("Parametros nao definidos!");
                var button = config.object || null;
                if (button) {
                    var UIContext = $R.UIContext.get(button), UIForm = UIContext.getUIForm(button), thiz = this;
                    var opts = $R.extend({
                        method: "upload",
                        action: UIForm.getTargetAction(),
                        callback: null,
                        object: null,
                        parameters: null,
                        loading: false
                    }, config);
                    Message.close(UIForm);
                    var form = UIForm.getForm();
                    SupressMethods = thiz.ToolBar.getCrudMethods(button);
                    targetMethod = opts.method || SupressMethods.upload;
                    param = opts.parameters || "";
                    if (!formToXML(UIForm)) return false;
                    var xmlDomain = UIForm.domainXML, targetAction = opts.action, callback = opts.callback;
                    if (!UIContext.fileUpload && !thiz.sendUpload) {
                        UIContext.fileUpload = new FileUpload();
                    }
                    if (UIContext.fileUpload && UIContext.fileUpload.isSendWithForm(form) && !thiz.sendUpload) {
                        UIContext.fileUpload.setButton(button);
                        thiz.upload(form, targetAction, targetMethod, param, function(vfileUpload) {
                            try {
                                var button = vfileUpload.getButton();
                                if (button) {
                                    var UIContext = $R.UIContext.get(button), param = UIContext.DialogParams();
                                    UIContext.fileUpload = vfileUpload;
                                    if (param) {
                                        UIContext.fileUpload.queryString = param["stringParams"];
                                    }
                                    var UIForm = UIContext.getUIForm(button);
                                    if (UIForm) {
                                        Crud.callUpload(opts);
                                    }
                                }
                            } catch (oErr) {
                                outPrint(oErr, "_callbackUpload()", CrudRsis);
                            }
                        });
                    } else {
                        if (typeof Loading !== "undefined") {
                            Loading.stop();
                        }
                        var callComponent = button.id, parameters = "";
                        if (!/xmlDomain\=/.test(param)) {
                            parameters += "xmlDomain=" + escapeParam(xmlDomain != null ? xmlDomain.xml : "", true);
                        }
                        parameters += param;
                        if (UIContext.fileUpload != null && UIContext.fileUpload.responseText != null) {
                            parameters += "&keyFileUpload=" + escapeParam(UIContext.fileUpload.responseText, false);
                        }
                        if (UIContext.fileUpload != null && UIContext.fileUpload.queryString != null) {
                            parameters += UIContext.fileUpload.queryString;
                        }
                        AjaxRsis.call({
                            loading: opts.loading,
                            loadSettings: {
                                title: "Upload Arquivo:",
                                message: "Enviando..."
                            },
                            formName: form.id,
                            object: callComponent,
                            callBack: callback,
                            success: opts.success,
                            error: opts.error,
                            render: opts.render,
                            parameters: "targetAction=" + targetAction + "&" + "targetMethod=" + targetMethod + "&" + parameters
                        });
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".uploadFiles", this);
            }
        },
        searching: function(button, UIForm, updateDomain) {
            try {
                var thiz = this;
                if (button && UIForm) {
                    var form = UIForm.getForm(), buttonId = button.id, nodeDomain = UIForm.getXPath(), stringArgsToolBar = buttonId.split("."), targetMethod = "", object = $(stringArgsToolBar[0]), OB = thiz.ToolBar, xmlDomain = null;
                    var table = thiz.getTableElement(button);
                    if (table) {
                        var checkAll = $(table.id + ".checkAll");
                        if (checkAll && checkAll.checked == true) {
                            checkAll.checked = false;
                        }
                    }
                    var UIContext = Rsis.UIContext.get(table);
                    var dataScrollerTransfer = thiz.getDataScrollerElement(button), OBNC = Rsis.Cache, OBMC = thiz.ManagerCache;
                    var dataScroller = null, initPage = null, maxRowsTable = null, isNodesChecked = OBNC.isCache(button), isManagerCache = OBMC.isCache(button);
                    if (dataScrollerTransfer) {
                        dataScroller = dataScrollerTransfer["dataScroller"];
                        initPage = dataScrollerTransfer["initPage"];
                        maxRowsTable = dataScrollerTransfer["maxRowsTable"];
                    }
                    if (isNodesChecked) {
                        OBNC.setStateDisplay(table, false);
                    }
                    if (isManagerCache) {
                        var _ManagerCache = OBMC.getInstance();
                        var myTransfer = {
                            button: button,
                            UIForm: UIForm,
                            managerCache: _ManagerCache,
                            table: table,
                            dataScroller: dataScroller,
                            initPage: initPage
                        };
                        UIForm = OBMC.process(myTransfer);
                    } else {
                        var _ManagerCache = null;
                        var SupressMethods = OB.getCrudMethods(button), strParamModal = "", paramModal = UIContext.DialogParams(), component = object.getAttribute("component");
                        if (paramModal && paramModal["stringParams"]) {
                            strParamModal = paramModal["stringParams"];
                        }
                        if (component === "toolBar") {
                            var searchParameter = getAttFuncDeveloper(button, "searchParameter");
                            if (!UIForm.domainXML || UIForm.domainXML && UIForm.domainXML == null) {
                                UIForm.domainXML = cloneObjXML(XML.broke(UIForm.domainXMLTemplate, nodeDomain));
                            }
                            if (updateDomain) {
                                if (!formToXML(UIForm)) return false;
                                if (table) {
                                    UIForm.setPageFilterXML(table.id, cloneObjXML(UIForm.domainXML));
                                }
                            }
                            xmlDomain = UIForm.domainXML;
                        } else if (component === "dataScroller") {
                            SupressMethods = OB.getCrudMethods(dataScroller);
                            xmlDomain = cloneObjXML(UIForm.getPageFilterXML(table.id));
                            searchParameter = getAtt(dataScroller, "searchParameter");
                        }
                        var queryString = "";
                        if (searchParameter != null && searchParameter !== "") {
                            var QueryString = {
                                add: ""
                            };
                            compressEvalRsisAll(searchParameter, UIForm, QueryString);
                            queryString = QueryString.add;
                        }
                        var targetAction = form.getAttribute("targetAction"), targetMethod = SupressMethods.search, callback = "Crud.callBackSearching";
                        var callComponent = button.id;
                        var parameters = "xmlDomain=" + escapeParam(xmlDomain != null ? xmlDomain.xml : "", true);
                        parameters += "&pageNumber=" + escapeParam(initPage, false);
                        parameters += "&pageSize=" + escapeParam(maxRowsTable, false) + strParamModal + queryString;
                        if (updateDomain) {
                            AjaxRsis.callAction(form.id, URL, targetAction, targetMethod, callback, callComponent, parameters);
                        } else {
                            AjaxRsis.callActionSync(form.id, URL, targetAction, targetMethod, callback, callComponent, parameters);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".searching", CrudRsis);
            }
        },
        nodeIsSaved: function(UIForm) {
            if (UIForm && UIForm.domainXML) {
                var node = getNodes(UIForm.domainXML, UIForm.getXPath());
                if (node && node.length > 0) {
                    node[0].setAttribute("nodeIsSaved", "true");
                }
            }
        },
        savedNode: function(UIForm) {
            if (UIForm && UIForm.domainXML) {
                if (UIForm.state === UIRsis.INCLUDING || UIForm.state === UIRsis.UPDATING) {
                    var node = getNodes(UIForm.domainXML, UIForm.getXPath());
                    if (node && node.length > 0) {
                        node[0].setAttribute("nodeIsSaved", "false");
                    }
                }
            }
        },
        getNodeIsSaved: function(UIForm, objXML) {
            function _hasNodeNotSaved(nodes) {
                var isSalve = true;
                var nodeChildren = nodes ? nodes.childNodes : null;
                if (nodeChildren && nodeChildren.length > 0) {
                    if (nodes.nodeType !== 3) {
                        var nodeIsSaved = nodes.getAttribute("nodeIsSaved");
                        if (nodeIsSaved === "false") return false;
                    }
                    for (var cidx = 0; cidx < nodeChildren.length; cidx++) {
                        var child = nodeChildren[cidx];
                        if (child.nodeType !== 3) {
                            var nodeIsSaved = child.getAttribute("nodeIsSaved");
                            if (nodeIsSaved === "false") {
                                return false;
                            }
                            if (child.hasChildNodes()) {
                                return _hasNodeNotSaved(child);
                            }
                        }
                    }
                } else if (nodes && nodes.nodeType !== 3) {
                    var nodeIsSaved = nodes.getAttribute("nodeIsSaved");
                    if (nodeIsSaved === "false") {
                        return false;
                    }
                }
                return isSalve;
            }
            var UI = UIRsis;
            if (UIForm && (UIForm.domainXML || objXML) && (UIForm.state === UI.INCLUDING || UIForm.state === UI.UPDATING)) {
                var domainXML = objXML ? objXML : UIForm.domainXML, nodes = getNodes(domainXML, UIForm.getXPath());
                if (nodes && nodes.length > 0) {
                    return _hasNodeNotSaved(nodes[0]);
                }
            }
            return true;
        },
        callBackSearching: function(f, callComponent) {
            try {
                var thiz = this, Transfer = AjaxRsis.process(f);
                if (Transfer && Transfer.objXML && Transfer.UIForm) {
                    var objXML = Transfer.objXML, UIForm = Transfer.UIForm, COMPONENTS = UIForm.getAllUIComponents();
                    if (COMPONENTS) {
                        Message.render(UIForm, objXML);
                        if (UIForm.hasError == false) {
                            if (callComponent == undefined || callComponent == null || callComponent == "") {
                                throw new MiddlewareViewException("O Atributo CallComponent deve ser informado na chamada Ajax!");
                            }
                            var button = null, OB = thiz.ToolBar;
                            if (callComponent !== "") {
                                button = $(callComponent);
                            }
                            OB.callbackInjectionAfterRender(UIForm, objXML);
                            var table = thiz.getTableElement(button);
                            if (table) {
                                var UIContext = Rsis.UIContext.get(table);
                                var checkAll = $(table.id + ".checkAll");
                                if (checkAll && checkAll.checked == true) {
                                    checkAll.checked = false;
                                }
                                var objXMLTable = XML.broke(objXML, "/xmlTable/page"), xmlTable = cloneObjXML(objXMLTable);
                                var _ManagerCache = UIContext.cache.get(table.id);
                                if (typeof _ManagerCache != "undefined" && _ManagerCache != null) {
                                    var dataScrollerTransfer = Crud.getDataScrollerElement(button), dataScroller = null, initPage = 0;
                                    if (dataScrollerTransfer) {
                                        dataScroller = dataScrollerTransfer["dataScroller"];
                                        initPage = dataScrollerTransfer["initPage"];
                                    }
                                    _ManagerCache.object = dataScroller;
                                    _ManagerCache.initPage = initPage;
                                    _ManagerCache.UIForm = UIForm;
                                    if (xmlTable != null) {
                                        _ManagerCache.node = getNodes(xmlTable, table.getAttribute("node"));
                                        _ManagerCache.objXML = xmlTable;
                                    }
                                    _ManagerCache.path = table.getAttribute("node");
                                    ManagerCacheProcess(_ManagerCache, _ManagerCache.PO_SEARCH);
                                } else {
                                    UIForm.setTableXML(table.id, xmlTable);
                                }
                                UIForm.state = UIRsis.SEARCHING;
                                var OBNC = Rsis.Cache;
                                if (OBNC.isCache(table)) {
                                    var xpathTable = table.getAttribute("node"), arrayPath = xpathTable.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1];
                                    OBNC.setCheckedTableXML({
                                        table: table,
                                        UIForm: UIForm,
                                        xpath: xpathNode
                                    });
                                }
                                renderDataScrollerPage(COMPONENTS, UIForm.state);
                                renderTable(COMPONENTS, UIForm.state);
                                renderEdit(COMPONENTS, UIForm.state);
                                renderListNode(COMPONENTS, UIForm.state);
                                renderSlidePhoto(COMPONENTS, UIForm.state);
                                if (UIForm.getStateCache() != null) {
                                    UIForm.state = UIForm.getStateCache();
                                    renderUIForm(UIForm);
                                    UIForm.setStateCache(null);
                                }
                                UIContext.setUIForms(f, UIForm);
                            }
                            OB.callbackInjection(UIForm, objXML);
                        } else {
                            renderFileUploadsForm(COMPONENTS, UIForm.state);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".callBackSearching", CrudRsis);
            }
        },
        pageNodesChecked: function(config) {
            try {
                if (config) {
                    var OBNC = Rsis.Cache, UIForm = config.UIForm, table = config.table;
                    var xpathTable = table.getAttribute("node"), arrayPath = xpathTable.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1];
                    config.xpath = xpathNode;
                    OBNC.XML.createTableXML(config);
                    var UIContext = Rsis.UIContext.get(table);
                    UIContext.setUIForms(UIForm.getForm().id, UIForm);
                    if (table) {
                        OBNC.setStateDisplay(table, true);
                        var UIForm = UIForm || OBNC.getUIForm(table), COMPONENTS = UIForm.getAllUIComponents();
                        UIForm.state = UIRsis.SEARCHING;
                        renderDataScrollerPage(COMPONENTS, UIForm.state);
                        renderTable(COMPONENTS, UIForm.state);
                        renderEdit(COMPONENTS, UIForm.state);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".pageNodesChecked", CrudRsis);
            }
        },
        refreshPage: function(formId, objectId, sync) {
            try {
                var CONTROL_OBJECT = $object(formId, objectId), button = $object(formId, objectId + ".btnConfirm");
                if (button == null) {
                    button = $object(formId, objectId + ".nextButton");
                }
                if (button) {
                    var tableName = getAtt(CONTROL_OBJECT, "dataTable");
                    if (tableName == null || tableName === "") {
                        tableName = getAtt(CONTROL_OBJECT, "editTable");
                    }
                    var UIContext = Rsis.UIContext.get(button), UIForm = UIContext.getUIForm(formId);
                    UIForm.state = UIRsis.SEARCHING;
                    UIForm.domainXML = cloneObjXML(UIForm.getPageFilterXML(tableName));
                    updateForm(UIForm);
                    renderForm(UIForm.getAllUIComponents(), UIForm.state);
                    UIContext.setUIForms(formId, UIForm);
                    this.confirm(button, sync);
                }
            } catch (oErr) {
                outPrint(oErr, ".refreshPage", CrudRsis);
            }
        },
        getKeyUpload: function() {
            var dtKey = new Date();
            return dtKey.getFullYear() + "" + (dtKey.getMonth() + 1) + "" + dtKey.getDate() + "" + dtKey.getHours() + "" + dtKey.getSeconds() + "" + dtKey.getMilliseconds();
        },
        upload: function(form, targetAction, targetMethod, parameters, fnCallbackDev) {
            try {
                var UIContext = Rsis.UIContext.get(form);
                var fileUpload = UIContext.fileUpload;
                if (fileUpload) {
                    if (typeof Loading !== "undefined") {
                        Loading.start();
                    }
                    if (typeof fnCallbackDev === "undefined") {
                        fnCallbackDev = _callbackUpload;
                    }
                    var _keyFileUpload = "keyFileUpload=" + this.getKeyUpload(), _targetAction = "targetAction=" + targetAction, _targetMethod = "targetMethod=" + targetMethod;
                    var paramsSend = "do=fileUpload&" + _targetAction + "&" + _targetMethod + "&" + _keyFileUpload + "&" + parameters;
                    fileUpload.open(form, URL, false);
                    fileUpload.send(form, paramsSend, "", function(fileUpload) {
                        fnCallbackDev(fileUpload);
                    });
                    this.sendUpload = true;
                }
            } catch (oErr) {
                outPrint(oErr, ".upload", CrudRsis);
            }
        },
        help: function(object) {
            var helpStored = $R.helpStored;
            if (helpStored) {
                helpStored.enableHelp();
            }
            ToolBarRsis.renderButtonHelp(object);
        },
        openUrlHelp: function(obj, evt) {
            try {
                var helpStored = $R.helpStored, helpIds = helpStored.constraints(obj), UIForm = $R.getUIForm(obj);
                if (helpStored && helpStored.getEnableHelp() && helpIds) {
                    var element = helpStored.fatherNode(helpIds.helpApp);
                    if (element && UIForm) {
                        var model = UIForm.get(element, [ "destinoHelp" ]);
                        if (model) {
                            if (isEmpty(model.destinoHelp)) {
                                alert("Url de destino do Help nao foi cadastrada na base de dados!");
                                return false;
                            }
                            crossDialog.open(isEmpty(model.destinoHelp) ? "" : model.destinoHelp, "_blank", "", "", true);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".openUrlHelp", CrudRsis);
            }
        },
        stopHelp: function(objId) {
            try {
                var ui = UIRsis, UIContext = $R.UIContext.get(objId), forms = UIContext.FORM_ACCESSED != null ? UIContext.FORM_ACCESSED : UIContext.formsStart;
                if (forms && forms.length > 0) {
                    for (var k = 0; k < forms.length; k++) {
                        var UIForm = UIContext.getUIForm(forms[k].id);
                        var COMPONENTS = UIForm.getAllUIComponents();
                        var toolBars = COMPONENTS["toolBar"];
                        if (toolBars != undefined && (toolBars && toolBars.length > 0)) {
                            for (var t = 0, max_tb = toolBars.length; t < max_tb; t++) {
                                renderButtonHelpStop(toolBars[t], UIForm, false);
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".stopHelp", CrudRsis);
            }
        },
        getHTMLObject: function(object) {
            if (isNoEmpty(object.nodeName) && (object.nodeName.toLowerCase() == "th" || object.nodeName.toLowerCase() == "td" || object.nodeName.toLowerCase() == "tr")) {
                return this.getHTMLObject(object.parentNode);
            }
            var htmlTag = $Tag("body", object);
            if (htmlTag && htmlTag.length > 0) {
                objHtml = htmlTag[0];
            }
            if (objHtml == null) {
                alert("Object [html] not found !");
            }
            return objHtml;
        },
        startHelpKeys: function(evt, objId) {
            try {
                var ui = UIRsis, UIContext = $R.UIContext.get(objId), forms = UIContext.FORM_ACCESSED != null ? UIContext.FORM_ACCESSED : UIContext.formsStart;
                if (forms && forms.length > 0) {
                    var thiz = this, k = 0, mxl = forms.length;
                    for (;k < mxl; k++) {
                        thiz.stopHelp(objId);
                        var UIForm = UIContext.getUIForm(forms[k].id);
                        if (!thiz.HELP_KEY_IDS_PRESS) {
                            thiz.HELP_KEY_IDS_PRESS = true;
                            if (UIForm && UIForm.getAllUIComponents()) {
                                enableHelpKeys(UIForm.getAllUIComponents(), UIForm, true);
                            }
                        } else {
                            thiz.HELP_KEY_IDS_PRESS = false;
                            if (UIForm && UIForm.getAllUIComponents()) {
                                enableHelpKeys(UIForm.getAllUIComponents(), UIForm, false);
                            }
                            Rsis.Tip.hiddenHelpKeys(forms[k]);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".startHelpKeys", CrudRsis);
            }
        },
        stopHelpKeys: function(objId) {
            try {
                var UIContext = Rsis.UIContext.get(objId);
                var forms = UIContext.FORM_ACCESSED != null ? UIContext.FORM_ACCESSED : UIContext.formsStart;
                if (forms && forms.length > 0) {
                    var thiz = this, k = 0, mxl = forms.length;
                    for (;k < mxl; k++) {
                        thiz.HELP_KEY_IDS_PRESS = false;
                        var UIForm = UIContext.getUIForm(forms[k].id);
                        if (UIForm && UIForm.getAllUIComponents()) {
                            enableHelpKeys(UIForm.getAllUIComponents(), UIForm, false);
                        }
                        Rsis.Tip.hiddenHelpKeys(forms[k]);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".startHelpKeys", CrudRsis);
            }
        },
        getUIForm: function(button) {
            if (button) {
                return Rsis.getUIForm(button);
            }
            return null;
        },
        getNameCountRowsTable: function(table) {
            if (table) {
                if (table.getAttribute("component") === "dataTable") {
                    return "countRowsDataTable";
                } else if (table.getAttribute("component") === "editTable") {
                    return "countRowsTable";
                }
            }
            return null;
        },
        getCountCache: function(UIForm, table) {
            if (UIForm && table && this.countRowsTable != null) {
                var pathNode = ROOT_NODE + table.getAttribute("node"), nameCountRowsTable = this.getNameCountRowsTable(table), objNode = getNodes(UIForm.getTableXML(table.id), pathNode + "[@" + nameCountRowsTable + "='" + parseInt(Crud.countRowsTable, 10) + "']");
                if (objNode && objNode.length > 0) {
                    return objNode[0].getAttribute("countCache");
                }
            }
            return null;
        },
        isManagerCache: function(button) {
            if (button) {
                var stringArgsToolBar = button.id.split(".");
                var object = $(stringArgsToolBar[0]);
                var component = object.getAttribute("component");
                if (component === "dataScroller") {
                    var dataScrollerId = button.id.split(".")[0];
                    var object = $(dataScrollerId);
                }
                return object.getAttribute("managerCache") != null && object.getAttribute("managerCache") === "true" || button.getAttribute("managerCache") != null && button.getAttribute("managerCache") === "true";
            }
        },
        ManagerCache: {
            getInstance: function() {
                return new ManagerCacheXML();
            },
            isCache: function(obj) {
                if (obj) {
                    var object = null;
                    if (obj.getAttribute("component") == "toolBar") {
                        object = $(obj.getAttribute("dataScroller"));
                    } else {
                        var stringArgsObj = obj.id.split(".");
                        object = $(stringArgsObj[0]);
                    }
                    if (object) {
                        var component = object.getAttribute("component");
                        if (component === "dataScroller") {
                            var dataScrollerId = obj.id.split(".")[0];
                        } else if (object.getAttribute("component") == "toolBar") {
                            object = $(object.getAttribute("dataScroller"));
                        }
                    }
                    var mc = object ? object.getAttribute("managerCache") : null, mcb = obj.getAttribute("managerCache");
                    return mc != null && mc === "true" || mcb != null && mcb === "true";
                }
            },
            getOrigem: function(button, myMC) {
                if (button) {
                    if (myMC == null) {
                        myMC = this.getInstance();
                    }
                    var origem = myMC.PO_SEARCH, stringArgsToolBar = button.id.split("."), object = $(stringArgsToolBar[0]), component = object.getAttribute("component");
                    if (component === "dataScroller") {
                        var dataScrollerId = button.id.split(".")[0];
                        object = $(dataScrollerId);
                    }
                    var mc = object ? object.getAttribute("managerCache") : null, mcb = button.getAttribute("managerCache");
                    var isMC = mc != null && mc === "true" || mcb != null && mcb === "true";
                    if (isMC) {
                        if (button.id.split(".")[1] === "prevButton") {
                            origem = myMC.PO_SEARCH_CACHE;
                        }
                    }
                }
                return origem;
            },
            process: function(myTransfer) {
                try {
                    var button = myTransfer["button"], UIForm = myTransfer["UIForm"], myCache = myTransfer["managerCache"], table = myTransfer["table"], dataScroller = myTransfer["dataScroller"], initPage = myTransfer["initPage"];
                    if (myTransfer["button"] == null || myTransfer["table"] == null || myTransfer["UIForm"] == null) {
                        throw new MiddlewareViewException(getMessageBundle("ERROR_PARAM_MSG"));
                    }
                    var UIContext = Rsis.UIContext.get(table);
                    var thiz = this;
                    if (myCache == null) {
                        myCache = UIContext.cache.getInstance(table.id);
                    }
                    if (dataScroller == null || initPage == null) {
                        var dataScrollerTransfer = Crud.getDataScrollerElement(button);
                        if (dataScrollerTransfer) {
                            dataScroller = dataScrollerTransfer["dataScroller"];
                            initPage = dataScrollerTransfer["initPage"];
                        }
                    }
                    var nodePath = table != null ? getAttMandatory(table, "node") : "";
                    myCache.object = dataScroller;
                    myCache.initPage = initPage;
                    myCache.UIForm = UIForm;
                    myCache.path = nodePath;
                    myCache.objXML = null;
                    myCache.node = null;
                    ManagerCacheProcess(myCache, thiz.getOrigem(button, myCache));
                    if (myCache.UIForm != null) {
                        UIForm = myCache.UIForm;
                        UIContext.setUIForms(UIForm.getForm().id, UIForm);
                        if (Rsis.Cache.isCache(dataScroller)) {
                            Rsis.Cache.setCheckedTableXML({
                                table: table,
                                UIForm: UIForm
                            });
                        }
                        var formComponents = UIForm.getAllUIComponents();
                        renderDataScrollerPage(formComponents, UIForm.state);
                        renderTable(formComponents, UIForm.state);
                        renderEdit(formComponents, UIForm.state);
                        var tableXML = cloneObjXML(UIForm.getTableXML(table.id));
                        Crud.ToolBar.callbackInjection(UIForm, tableXML);
                    }
                    compressEvalRsisAll(getAtt(dataScroller, "onChangePage"), dataScroller, table, UIForm, myCache);
                    return UIForm;
                } catch (oErr) {
                    outPrint(oErr, ".process", CrudRsis);
                }
                return null;
            }
        },
        Modal: {
            getParams: function(myTransfer) {
                try {
                    if (myTransfer["table"] == null || myTransfer["UIForm"] == null) {
                        throw new MiddlewareViewException(getMessageBundle("ERROR_PARAM_MSG"));
                    }
                    var table = myTransfer["table"], UIForm = myTransfer["UIForm"], domainXML = myTransfer["domainXML"], execReturn = myTransfer["execReturn"], dialogParams = "", nodePathDomain = "", param = [];
                    var fnSetParamsModal = table.getAttribute("setParamsModal");
                    if (fnSetParamsModal !== null && fnSetParamsModal !== "") {
                        compressEvalRsisAll(fnSetParamsModal, param, UIForm, table, execReturn);
                    } else if (typeof SetParamsModal === "function") {
                        if (execReturn == undefined || execReturn == null) execReturn = true;
                        SetParamsModal(param, UIForm, table, execReturn);
                    }
                    var tableId = table.getAttribute("id");
                    if (tableId != null && tableId !== "") {
                        var nodePathDomain = UIForm.getXPath(), modal = table.getAttribute("modal");
                        if (modal != null && modal !== "" && modal == "true") {
                            var modalUrl = table.getAttribute("modalUrl"), modalWidth = table.getAttribute("modalWidth"), modalHeight = table.getAttribute("modalHeight");
                            if (modalWidth != null && modalWidth != "" || modalHeight != null && modalHeight != "") dialogParams = [ modalWidth, modalHeight ];
                        }
                    }
                    param["modalFormField"] = UIForm.getForm().id;
                    param["inputSearchValue"] = "";
                    param["searchNode"] = nodePathDomain;
                    param["domainXML"] = domainXML != null ? domainXML.xml : null;
                    param["state"] = UIForm.state;
                    param["modalUrl"] = modalUrl;
                    param["modalWidth"] = modalWidth;
                    param["modalHeight"] = modalHeight;
                    param["dialogParams"] = dialogParams;
                    return param;
                } catch (oErr) {
                    outPrint(oErr, ".getParams", CrudRsis);
                }
                return null;
            },
            isOpen: function(table) {
                var openModal = false;
                if (table) {
                    var modal = table.getAttribute("modal");
                    if (modal != null && modal !== "" && modal == "true") {
                        openModal = true;
                    }
                }
                return openModal;
            }
        },
        getTableElement: function(button) {
            if (button) {
                var stringArgsToolBar = button.id.split("."), object = $(stringArgsToolBar[0]), component = button.getAttribute("component");
                if (component === "dataScroller") {
                    var dataScrollerId = button.id.split(".")[0];
                    object = $(dataScrollerId);
                }
                var dataTableId = object.getAttribute("dataTable");
                if (dataTableId != null && dataTableId !== "") {
                    return $(dataTableId);
                }
                var editTableId = object.getAttribute("editTable");
                if (editTableId != null && editTableId !== "") {
                    return $(editTableId);
                }
            }
            return null;
        },
        getDataScrollerElement: function(button) {
            if (button) {
                var stringArgsToolBar = button.id.split("."), object = $(stringArgsToolBar[0]), initPage = 0, maxRowsTable = 0, dataScroller = null;
                component = object.getAttribute("component");
                if (component === "dataScroller") {
                    var dataScrollerId = button.id.split(".")[0];
                    dataScroller = $(dataScrollerId);
                    initPage = parseInt(button.page);
                } else {
                    var dataScrollerId = object.getAttribute("dataScroller");
                    if (dataScrollerId !== "") {
                        dataScroller = $(dataScrollerId);
                    }
                }
                if (dataScroller) {
                    maxRowsTable = dataScroller.getAttribute("maxRowsTable");
                }
                var Transfer = [];
                Transfer["dataScroller"] = dataScroller;
                Transfer["initPage"] = initPage == null || isNaN(initPage) || initPage === "" ? 0 : initPage;
                Transfer["maxRowsTable"] = maxRowsTable == null || maxRowsTable === "" ? 1 : maxRowsTable;
                return Transfer;
            }
            return null;
        },
        getCurrentPageNumber: function(table) {
            var objDataScroller = getDataScrollerByTable(table.id), pageNumber = 0, buttonPage = $(objDataScroller.id + ".btnPage");
            if (buttonPage != null) {
                var pageNumberScrol = parseInt(buttonPage.value), pageNumberScrol = pageNumberScrol - 1;
                if (pageNumberScrol > 0) {
                    pageNumber = pageNumberScrol;
                }
            }
            return pageNumber;
        },
        processReturnModal: function(UIForm, table, retValue) {
            return overWrtProcessReturnModal(UIForm, table, retValue);
        },
        openModalDialogForManagerCache: function(UIForm, table, execReturn) {
            return overWrtOpenModalDialogForManagerCache(UIForm, table, execReturn);
        },
        processReturnModalWithManagerCache: function(UIForm, table, retValue) {
            return overWrtProcessReturnModalWithManagerCache(UIForm, table, retValue);
        },
        load: function(object, UIForm, xmlDomain) {
            if (UIForm) {
                var form = UIForm.getForm(), toolBar = this.ToolBar.getToolBarByTable(object, UIForm), suppressMethods = this.ToolBar.getCrudMethods(toolBar), targetAction = form.getAttribute("targetAction"), targetMethod = suppressMethods.load, callComponent = object.id, parameters = "xmlDomain=" + escapeParam(xmlDomain != null ? xmlDomain.xml : "", true);
                AjaxRsis.callActionSync(form.id, URL, targetAction, targetMethod, "", "", parameters);
                var req = Properties.getProperty(form.id);
                if (AjaxRsis.statusValidate(req) == false) return;
                var objXML = createObjXML(req.responseText), domainXML = XML.broke(objXML, "/xmlDomain" + UIForm.getXPath());
                if (domainXML) {
                    return domainXML;
                } else {
                    var nodeTableDomain = object.getAttribute("node");
                    if (nodeTableDomain != null) {
                        var nodeTableSplit = nodeTableDomain.split("/");
                        return XML.broke(objXML, "/xmlDomain/" + nodeTableSplit[nodeTableSplit.length - 1]);
                    }
                }
            }
            return null;
        },
        xmlLoadProcess: function(UIForm, table) {
            var thiz = this;
            if (UIForm && table) {
                var nodeTableDomain = table.getAttribute("node"), OB = thiz.ToolBar, toolBar = OB.getToolBarByTable(table, UIForm), countCache = thiz.getCountCache(UIForm, table), domainXML = null;
                var UIContext = Rsis.UIContext.get(table);
                var check = hasSelectedRadioRows(table);
                if (countCache == null && check) {
                    thiz.countRowsTable = parseInt(check.value, 10);
                } else {
                    thiz.countRowsTable = countCache;
                }
                var isPageUpdate = OB.isPageUpdate(toolBar, UIForm.state);
                if (isPageUpdate == false && UIForm.state == UIRsis.UPDATING) {
                    var domainXMLLineTable = UIForm.getDomainTableXML(table.id);
                    if (domainXMLLineTable == null) {
                        domainXMLLineTable = UIForm.domainXML;
                    }
                    domainXML = thiz.load(table, UIForm, domainXMLLineTable);
                }
                if (domainXML != null) {
                    var childNode = getNodes(domainXML, ROOT_NODE + UIForm.getXPath());
                    if (!(childNode && childNode.length > 0)) {
                        var nodeTableSplit = nodeTableDomain.split("/");
                        childNode = getNodes(domainXML, ROOT_NODE + "/" + nodeTableSplit[nodeTableSplit.length - 1]);
                    }
                    if (childNode && childNode.length > 0) {
                        childNode[0].setAttribute("changed", "true");
                        childNode[0].setAttribute("indSelecionado", "1");
                        var isManagerCache = thiz.ManagerCache.isCache(toolBar);
                        if (isManagerCache) {
                            var myCache = UIContext.cache.getInstance(table.id);
                            myCache.object = table;
                            myCache.UIForm = UIForm;
                            myCache.path = nodeTableDomain;
                            var argsNodeTable = nodeTableDomain.split("/");
                            var oldChildNode = getNodes(UIForm.getDataScrollerXMLCache(table.id), ROOT_NODE + "/managerCache/" + argsNodeTable[argsNodeTable.length - 1] + "[@countCache='" + countCache + "']");
                            if (oldChildNode && oldChildNode.length > 0) {
                                childNode[0].setAttribute("countCache", countCache);
                                myCache.node = childNode[0];
                                ManagerCacheProcess(myCache, myCache.PO_UPDATE_ELEMENT, true);
                            } else {
                                myCache.node = childNode;
                                myCache.node[0].setAttribute("isTransient", "true");
                                ManagerCacheProcess(myCache, myCache.PO_INSERT);
                            }
                            if (myCache.UIForm != null) {
                                UIForm = myCache.UIForm;
                            }
                        } else {
                            var tableXML = cloneObjXML(UIForm.getTableXML(table.id)), xpathFatherNode = createPathFatherNode(nodeTableDomain), fatherNode = XML.getSingleNode(tableXML, ROOT_NODE + xpathFatherNode);
                            if (fatherNode) {
                                var pathNode = ROOT_NODE + table.getAttribute("node"), nameCountRowsTable = thiz.getNameCountRowsTable(table), oldChildNode = getNodes(tableXML, pathNode + "[@" + nameCountRowsTable + "='" + parseInt(thiz.countRowsTable) + "']");
                                if (oldChildNode && oldChildNode.length > 0) {
                                    Sarissa.replaceChildNode(fatherNode, childNode[0], oldChildNode[0]);
                                } else {
                                    Sarissa.appendChildNode(fatherNode, childNode[0]);
                                }
                            }
                            UIForm.setTableXML(table.id, tableXML);
                        }
                    }
                    UIForm.state = UIRsis.VISUALIZING;
                    UIForm.domainXML = domainXML;
                    UIContext.setUIForms(UIForm.getForm().id, UIForm);
                }
            }
            return UIForm;
        },
        isRadioButton: function(table) {
            if (table) {
                return table.getAttribute("selectionType") == "radio";
            }
            return false;
        },
        openModalDialog: function(UIForm, table, toolBar, execReturn) {
            return overWrtOpenModalDialog(UIForm, table, toolBar, execReturn);
        },
        renderToolTip: function(obj) {
            if (obj) {
                var tip = Rsis.Tip;
                tip.hiddenHelp(obj);
                tip.hiddenHelpKeys(obj);
            }
        },
        Date: {
            dateNow: function() {
                var now = new Date(), year = now.getFullYear(), month = now.getMonth() + 1 < 10 ? "0" + (now.getMonth() + 1) : now.getMonth() + 1, day = now.getDate() < 10 ? "0" + now.getDate() : now.getDate();
                return year + "/" + month + "/" + day;
            },
            setPeriodDomain: function(UIForm) {
                if (UIForm && UIForm.domainXML) {
                    var nodes = getNodes(UIForm.domainXML, ROOT_NODE + UIForm.getXPath());
                    if (nodes && nodes.length > 0) {
                        nodes[0].setAttribute("dtInitializePeriod", this.dateNow() + " 00:00:00");
                        nodes[0].setAttribute("dtFinalizePeriod", "9999/12/31 23:59:59");
                    }
                }
            }
        }
    };
    Crud.ToolBar = {
        getToolBar: function(button) {
            if (button) return $(button.id.split(".")[0]);
            return null;
        },
        isStartSearching: function(toolBar, state) {
            if (toolBar && state) return state != UIRsis.SEARCHING && (getAtt(toolBar, "getPageInsert") === "true" || getAtt(toolBar, "getPageExclude") === "true"); else return false;
        },
        isPageUpdate: function(toolBar, state) {
            if (toolBar && state) return state != UIRsis.SEARCHING && getAtt(toolBar, "getPageUpdate") === "true"; else return false;
        },
        getBtnConfirmToolBar: function(object) {
            return $(object.id + ".btnConfirm");
        },
        getToolBarByTable: function(table, UIForm) {
            if (table && UIForm) {
                var COMPONENTS = UIForm.getAllUIComponents(), toolBars = COMPONENTS["toolBar"];
                if (toolBars != undefined && toolBars.length > 0) {
                    for (var tb = 0; tb < toolBars.length; tb++) {
                        var toolBar = toolBars[tb];
                        if (toolBar && (toolBar.getAttribute("dataTable") == table.id || toolBar.getAttribute("editTable") == table.id)) {
                            return toolBar;
                        }
                    }
                }
            }
            return null;
        },
        getCrudMethods: function(object) {
            if (object) {
                var methods = {
                    insert: "insert",
                    update: "update",
                    search: "search",
                    exclude: "exclude",
                    activate: "activate",
                    inactivate: "inactivate",
                    load: "load",
                    upload: "upload"
                };
                var suppressMethods = getAtt(object, "suppressMethods");
                if (isNoEmpty(suppressMethods)) {
                    var stringArgsMethods = suppressMethods.split(",");
                    if (stringArgsMethods && stringArgsMethods.length > 0) {
                        $R.each(stringArgsMethods, function(k, methodName) {
                            var strMetodos = methodName.split("::");
                            if (isNoEmpty(strMetodos[0]) && methods.hasOwnProperty(strMetodos[0])) {
                                methods[strMetodos[0]] = strMetodos[1];
                            }
                        });
                    }
                }
                return methods;
            }
            return null;
        },
        callbackInjectionAfterRender: function(UIForm, objXML) {
            if (UIForm && objXML) {
                var COMPONENTS = UIForm.getAllUIComponents();
                if (COMPONENTS && COMPONENTS["toolBar"]) {
                    var toolBars = COMPONENTS["toolBar"];
                    if (toolBars != undefined && toolBars.length > 0) {
                        for (var tb = 0, max_tb = toolBars.length; tb < max_tb; tb++) {
                            var callbackInjectionAfterRender = getAtt(toolBars[tb], "callbackInjectionAfterRender");
                            if (isNoEmpty(callbackInjectionAfterRender)) {
                                compressEvalRsisAll(callbackInjectionAfterRender, UIForm, objXML);
                            }
                        }
                    }
                }
            }
        },
        callbackInjection: function(UIForm, objXML) {
            if (UIForm && objXML) {
                var COMPONENTS = UIForm.getAllUIComponents();
                if (COMPONENTS && COMPONENTS["toolBar"]) {
                    var toolBars = COMPONENTS["toolBar"];
                    if (toolBars != undefined && toolBars.length > 0) {
                        for (var tb = 0; tb < toolBars.length; tb++) {
                            var callbackInjection = getAttFuncDeveloper(toolBars[tb], "callbackInjection");
                            if (callbackInjection != null && callbackInjection !== "") {
                                compressEvalRsisAll(callbackInjection, UIForm, objXML);
                            }
                        }
                    }
                }
            }
        },
        startSearch: function(UIForm, toolBar, table, updateDomain) {
            try {
                if (UIForm && toolBar && table) {
                    var button = this.getBtnConfirmToolBar(toolBar);
                    if (table && button) {
                        var UIContext = Rsis.UIContext.get(table);
                        UIForm.state = UIRsis.SEARCHING;
                        UIForm.domainXML = cloneObjXML(UIForm.getPageFilterXML(table.id));
                        updateForm(UIForm);
                        renderForm(UIForm.getAllUIComponents(), UIForm.state);
                        renderToolBars(UIForm.getAllUIComponents(), UIForm.state);
                        UIContext.setUIForms(UIForm.getForm().id, UIForm);
                        Crud.renderToolTip(button);
                        Crud.searching(button, UIForm, updateDomain);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".startSearch", CrudRsis);
            }
        }
    };
})(Rsis);

function undo(button) {
    _undo(button);
}

function search(button) {
    _search(button);
}

function select(button) {
    _select(button);
}

function create(button) {
    _createCrud(button);
}

function edit(button) {
    return _edit(button);
}

function confirmAction(button, args) {
    return _confirmAction(button, args);
}

function exclude(button) {
    _exclude(button);
}

function doubleClick(tableId, row, evt) {
    _doubleClick(tableId, row, evt);
}

function _undo(button) {
    try {
        if (button) {
            Crud.renderToolTip(button);
            var UIContext = Rsis.UIContext.get(button), UIForm = UIContext.getUIForm(button);
            if (UIForm) {
                Message.close(UIForm);
                Crud.nodeIsSaved(UIForm);
                var buttonId = button.getAttribute("id"), stringArgsToolBar = buttonId.split("."), toolBar = $(stringArgsToolBar[0]), dataTableId = toolBar.getAttribute("dataTable"), sts = UIForm.state;
                if (dataTableId != null && dataTableId !== "") {
                    var dataTable = $(dataTableId);
                    if (dataTable) {
                        var tHead = null;
                        try {
                            tHead = $R(dataTable).getTHead();
                        } catch (ex) {
                            dataTable.wasExtended = false;
                            tHead = $R(dataTable).getTHead();
                        }
                        var OBNC = Rsis.Cache, isNodesChecked = OBNC.isCache(button);
                        if (isNodesChecked) {
                            OBNC.setStateDisplay(dataTable, false);
                        }
                        var listTHeadCells = tHead.rows[tHead.rows.length - 1].cells, strAttribute = listTHeadCells[0].getAttribute("value"), strAttribute = typeof strAttribute !== "undefined" && strAttribute !== null ? strAttribute : "", stringNode = $R(dataTable).getPathNode(), stringArgs = (stringNode + strAttribute).split("@"), pathNode = stringArgs[0], attributeNode = typeof stringArgs[1] === "undefined" ? "" : stringArgs[1];
                        if (sts === UIRsis.INCLUDING || sts === UIRsis.UPDATING || sts === UIRsis.SEARCHING) {
                            var radioButton = $R(dataTable).getRadioSelected();
                            if (radioButton == null && (sts === UIRsis.INCLUDING || sts === UIRsis.SEARCHING)) {
                                UIForm.state = UIRsis.INITIAL;
                                clearForm(UIForm);
                                UIForm.domainXML = cloneObjXML(UIForm.domainXMLTemplate);
                                UIContext.setUIForms(UIForm.getForm().id, UIForm);
                            }
                            if (radioButton != null && typeof selectRowDataTable === "function") {
                                var attributeNode = radioButton.getAttribute("value"), xpath = ROOT_NODE + stringArgs[0];
                                if (typeof attributeNode !== "undefined" && attributeNode !== "") {
                                    xpath = ROOT_NODE + stringNode + strAttribute;
                                }
                                selectRowDataTable(radioButton, xpath);
                                UIForm.state = UIRsis.VISUALIZING;
                            }
                        }
                        renderForm(UIForm.getAllUIComponents(), UIForm.state);
                        renderToolBars(UIForm.getAllUIComponents(), UIForm.state);
                        tHead = null;
                    }
                } else {
                    if (sts === UIRsis.INCLUDING || sts === UIRsis.SEARCHING) {
                        UIForm.state = UIRsis.INITIAL;
                        clearForm(UIForm);
                        UIForm.domainXML = cloneObjXML(UIForm.domainXMLTemplate);
                        UIContext.setUIForms(UIForm.getForm().id, UIForm);
                    }
                    if (sts === UIRsis.UPDATING) {
                        UIForm.state = UIRsis.VISUALIZING;
                    }
                    renderForm(UIForm.getAllUIComponents(), UIForm.state);
                    renderToolBars(UIForm.getAllUIComponents(), UIForm.state);
                }
            } else {
                alert(getMessageBundle("ERROR_FORM_MSG"));
            }
        }
    } catch (oErr) {
        outPrint(oErr, "_undo()", CrudRsis);
    }
}

function _search(button) {
    try {
        if (button) {
            Crud.renderToolTip(button);
            var UIContext = Rsis.UIContext.get(button), UIForm = UIContext.getUIForm(button);
            if (UIForm) {
                Message.close(UIForm);
                UIForm.state = UIRsis.SEARCHING;
                UIForm.domainXML = cloneObjXML(UIForm.domainXMLTemplate);
                renderForm(UIForm.getAllUIComponents(), UIForm.state);
                updateForm(UIForm);
                renderToolBars(UIForm.getAllUIComponents(), UIForm.state);
                UIContext.setUIForms(UIForm.getForm().id, UIForm);
            } else {
                alert(getMessageBundle("ERROR_FORM_MSG"));
            }
        }
    } catch (oErr) {
        outPrint(oErr, "_search()", CrudRsis);
    }
}

function _select(button) {
    try {
        var UIContext = Rsis.UIContext.get(button), dialogName = UIContext.getId();
        if (button) {
            Crud.renderToolTip(button);
            var UIForm = UIContext.getUIForm(button), domainXML = null;
            if (UIForm && UIForm.domainXML != null) {
                domainXML = UIForm.domainXML.xml;
            }
            crossDialog.setReturnValue(dialogName, domainXML);
        }
        crossDialog.close(dialogName);
    } catch (oErr) {
        outPrint(oErr, "_select()", CrudRsis);
    }
}

function _createCrud(button) {
    try {
        if (button) {
            Crud.renderToolTip(button);
            var UIContext = Rsis.UIContext.get(button);
            var buttonId = button.getAttribute("id"), stringArgs = buttonId.split(":"), UIForm = UIContext.getUIForm(stringArgs[0]);
            if (UIForm) {
                Message.close(UIForm);
                Crud.SALVE = false;
                Crud.countRowsTable = null;
                var object = $(buttonId.split(".")[0]), table = null, tableId = object.getAttribute("dataTable") != null ? object.getAttribute("dataTable") : object.getAttribute("editTable");
                if (tableId !== "") {
                    table = $(tableId);
                }
                var isManagerCache = Crud.ManagerCache.isCache(button);
                if (isManagerCache) {
                    var radioButton = $R(table).getRadioSelected(table);
                    if (radioButton) {
                        radioButton.checked = false;
                        var nodeTableDomain = getAttMandatory(table, "node");
                        $R(table).unSelectedNode(ROOT_NODE + nodeTableDomain, UIForm.getTableXML(table.id));
                    }
                    UIForm.state = UIRsis.INCLUDING;
                    if (Crud.Modal.isOpen(table)) {
                        UIForm.domainXML = cloneObjXML(UIForm.domainXMLTemplate);
                        UIForm.setDomainTableXML(table.id, null);
                        Crud.Date.setPeriodDomain(UIForm);
                        Crud.openModalDialogForManagerCache(UIForm, table);
                        renderTable(UIForm.getAllUIComponents(), UIForm.state);
                    }
                    UIContext.setUIForms(stringArgs[0], UIForm);
                } else {
                    UIForm.state = UIRsis.INCLUDING;
                    if (Crud.Modal.isOpen(table)) {
                        UIForm.domainXML = cloneObjXML(UIForm.domainXMLTemplate);
                        UIForm.setDomainTableXML(table.id, null);
                        Crud.Date.setPeriodDomain(UIForm);
                        Crud.openModalDialog(UIForm, table, object);
                        renderTable(UIForm.getAllUIComponents(), UIForm.state);
                    } else {
                        clearForm(UIForm);
                        UIForm.domainXML = cloneObjXML(UIForm.domainXMLTemplate);
                        Crud.Date.setPeriodDomain(UIForm);
                    }
                    UIContext.setUIForms(stringArgs[0], UIForm);
                    renderForm(UIForm.getAllUIComponents(), UIForm.state);
                    updateForm(UIForm);
                    renderToolBars(UIForm.getAllUIComponents(), UIForm.state);
                }
            } else {
                alert(getMessageBundle("ERROR_FORM_MSG"));
            }
        }
    } catch (oErr) {
        outPrint(oErr, "_createCrud()", CrudRsis);
    }
}

function _edit(button) {
    try {
        if (button) {
            Crud.renderToolTip(button);
            var UIContext = Rsis.UIContext.get(button);
            var buttonId = button.getAttribute("id");
            var UIForm = UIContext.getUIForm(button);
            if (UIForm) {
                Message.close(UIForm);
                Crud.SALVE = false;
                UIForm.state = UIRsis.UPDATING;
                var stringArgsToolBar = buttonId.split("."), object = $(stringArgsToolBar[0]);
                var table = null, tableId = object.getAttribute("dataTable") != null ? object.getAttribute("dataTable") : object.getAttribute("editTable");
                if (tableId !== "") {
                    table = $(tableId);
                    if (Crud.isRadioButton(table)) {
                        var radioSelected = $R(table).getRadioSelected();
                        if (radioSelected) Crud.countRowsTable = parseInt(radioSelected.value, 10); else return false;
                    } else {
                        var check = $R(table).getRadioSelected();
                        if (check) {
                            Crud.countRowsTable = parseInt(check.value, 10);
                            var nameCountRowsTable = Crud.getNameCountRowsTable(table), pathNode = table.getAttribute("node"), stringPathNode = ROOT_NODE + pathNode + "[@" + nameCountRowsTable + "='" + Crud.countRowsTable + "']", objNode = getNodes(UIForm.getTableXML(table.id), stringPathNode);
                            if (objNode && objNode.length > 0) {
                                objNode[0].setAttribute("indSelecionado", "1");
                            }
                            var domainXML = brokeImplementObjXML(cloneObjXML(UIForm.getTableXML(table.id)), stringPathNode.replace(ROOT_NODE, ""));
                            UIForm.setDomainTableXML(table.id, domainXML);
                            UIForm.domainXML = domainXML;
                            UIContext.setUIForms(UIForm.getForm().id, UIForm);
                        }
                    }
                }
                var isManagerCache = Crud.ManagerCache.isCache(button);
                if (isManagerCache) {
                    if (Crud.Modal.isOpen(table)) {
                        UIForm = Crud.openModalDialogForManagerCache(UIForm, table);
                        UIContext.setUIForms(UIForm.getForm().id, UIForm);
                        renderTable(UIForm.getAllUIComponents(), UIForm.state);
                    }
                } else {
                    if (Crud.Modal.isOpen(table)) {
                        UIForm = Crud.openModalDialog(UIForm, table, object);
                        UIContext.setUIForms(UIForm.getForm().id, UIForm);
                    } else {
                        renderForm(UIForm.getAllUIComponents(), UIForm.state);
                        renderToolBars(UIForm.getAllUIComponents(), UIForm.state);
                    }
                }
            } else {
                alert(getMessageBundle("ERROR_FORM_MSG"));
            }
        }
    } catch (oErr) {
        outPrint(oErr, "_edit()", CrudRsis);
    }
}

function _doubleClick(tableId, row, evt) {
    try {
        var table = $(tableId);
        var UIContext = Rsis.UIContext.get(table);
        var formId = tableId.split(":")[0], UIForm = UIContext.getUIForm(formId), object = row && row.cells[0] && row.cells[0].childNodes[0] ? row.cells[0].childNodes[0] : null;
        if (object) {
            Crud.countRowsTable = parseInt(object.value);
        }
        var toolbar = Crud.ToolBar.getToolBarByTable(table, UIForm);
        if (toolbar != null && UIForm && row && evt) {
            Message.close(UIForm);
            var source = Rsis.events.getTarget(evt, true);
            if (object && (source.type !== "checkbox" && object.getAttribute("checkClickLine") === "true")) {
                var stringNode = ROOT_NODE + $R(table).getPathNode();
                var tHead = $R(table).getTHead(), stringFunArgs = "", thCell = tHead && tHead.rows[0] && tHead.rows[0].cells[0] ? tHead.rows[0].cells[0] : null;
                if (thCell) {
                    stringFunArgs = stringNode + getAttMandatory(thCell, "value");
                }
                var stringArgs = stringFunArgs.split("@"), pathNode = stringArgs[0], attributeNode = typeof stringArgs[1] === "undefined" ? "" : stringArgs[1], isManagerCache = Crud.ManagerCache.isCache(toolbar);
                var domainXML = getDomainXMLLine(UIForm, table, object, pathNode, attributeNode);
                if (domainXML) {
                    Crud.countRowsTable = parseInt(object.value, 10);
                    UIForm.setDomainTableXML(tableId, domainXML);
                    UIContext.setUIForms(formId, UIForm);
                }
                UIForm.setDomainTableXML(tableId, domainXML);
                Crud.nodeIsSaved(UIForm);
                UIContext.setUIForms(formId, UIForm);
                var CM = Crud.Modal;
                if (isManagerCache) {
                    if (CM.isOpen(table) == true) {
                        var param = CM.getParams({
                            table: table,
                            UIForm: UIForm,
                            domainXML: domainXML
                        });
                        var modalUrl = param["modalUrl"], modalWidth = param["modalWidth"], modalHeight = param["modalHeight"], dialogParams = param["dialogParams"];
                        crossDialog.show(modalUrl, param, dialogParams, function(retValue, args) {
                            try {
                                var UIForm = args[0], table = args[1];
                                var UIContext = Rsis.UIContext.get(table);
                                UIForm = Crud.processReturnModalWithManagerCache(UIForm, table, retValue);
                                UIContext.setUIForms(UIForm.getForm().id, UIForm);
                            } catch (oErr) {
                                outPrint(oErr, "crossDialog.anonima()", CrudRsis);
                            }
                        }, [ UIForm, table ]);
                    }
                } else {
                    UIForm.state = UIRsis.UPDATING;
                    if (CM.isOpen(table) == true) {
                        var param = CM.getParams({
                            table: table,
                            UIForm: UIForm,
                            domainXML: domainXML
                        });
                        var modalUrl = param["modalUrl"], modalWidth = param["modalWidth"], modalHeight = param["modalHeight"], dialogParams = param["dialogParams"];
                        crossDialog.show(modalUrl, param, dialogParams, function(retValue, args) {
                            try {
                                var UIForm = args[0], table = args[1];
                                var UIContext = Rsis.UIContext.get(table);
                                UIForm = Crud.processReturnModal(UIForm, table, retValue);
                                UIContext.setUIForms(UIForm.getForm().id, UIForm);
                            } catch (oErr) {
                                outPrint(oErr, "crossDialog.anonima()", CrudRsis);
                            }
                        }, [ UIForm, table ]);
                    } else {
                        renderForm(UIForm.getAllUIComponents(), UIForm.state);
                        renderToolBars(UIForm.getAllUIComponents(), UIForm.state);
                    }
                }
            } else {
                _edit($(toolbar.id + ".btnEdit"));
            }
            source = row = null;
        }
        table = object = null;
    } catch (oErr) {
        outPrint(oErr, "_doubleClick()", CrudRsis);
    }
}

function _confirmAction(button) {
    try {
        if (button) {
            Crud.renderToolTip(button);
            var UIForm = Crud.getUIForm(button);
            Message.close(UIForm);
            var updateDomain = typeof arguments[1] === "undefined" ? true : !arguments[1];
            switch (UIForm.state) {
              case UIRsis.INCLUDING:
                return Crud.insert(button, UIForm);

              case UIRsis.UPDATING:
                return Crud.update(button, UIForm);

              case UIRsis.SEARCHING:
                return Crud.searching(button, UIForm, updateDomain);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "_confirmAction", CrudRsis);
    }
}

function _searchPage(button) {
    try {
        if (button) {
            Crud.renderToolTip(button);
            var UIContext = Rsis.UIContext.get(button);
            var UIForm = Crud.getUIForm(button);
            Message.close(UIForm);
            var table = Crud.getTableElement(button);
            if (table) {
                var checkAll = $(table.id + ".checkAll");
                if (checkAll && checkAll.checked == true) {
                    checkAll.checked = false;
                }
            }
            var OBMC = Crud.ManagerCache, OBNC = Rsis.Cache, dataScroller = null, initPage = null, maxRowsTable = null, isNodesChecked = OBNC.isCache(button), isManagerCache = OBMC.isCache(button);
            var dataScrollerTransfer = Crud.getDataScrollerElement(button);
            if (dataScrollerTransfer) {
                dataScroller = dataScrollerTransfer["dataScroller"];
                initPage = dataScrollerTransfer["initPage"];
                maxRowsTable = dataScrollerTransfer["maxRowsTable"];
            }
            if (isNodesChecked && OBNC.isVisibledState(table)) {
                Crud.pageNodesChecked({
                    UIForm: UIForm,
                    table: table,
                    initPage: initPage
                });
            } else {
                if (isManagerCache) {
                    var _ManagerCache = UIContext.cache.getInstance(table.id);
                    var myTransfer = {
                        button: button,
                        UIForm: UIForm,
                        managerCache: _ManagerCache,
                        table: table,
                        dataScroller: dataScroller,
                        initPage: initPage
                    };
                    UIForm = OBMC.process(myTransfer);
                } else {
                    var form = UIForm.getForm(), SupressMethods = Crud.ToolBar.getCrudMethods(dataScroller), strParamModal = "", paramModal = UIContext.DialogParams();
                    if (paramModal && paramModal["stringParams"]) {
                        strParamModal = paramModal["stringParams"];
                    }
                    var xmlDomain = cloneObjXML(UIForm.getPageFilterXML(table.id)), queryString = "";
                    var searchParameter = getAtt(dataScroller, "searchParameter");
                    if (searchParameter != null && searchParameter !== "") {
                        var QueryString = {
                            add: ""
                        };
                        compressEvalRsisAll(searchParameter, UIForm, QueryString);
                        queryString = QueryString.add;
                    }
                    var targetAction = form.getAttribute("targetAction"), targetMethod = SupressMethods.search, callback = "Crud.callBackSearching", callComponent = button.id;
                    var parameters = "xmlDomain=" + escapeParam(xmlDomain != null ? xmlDomain.xml : "", true);
                    parameters += "&pageNumber=" + escapeParam(initPage, false);
                    parameters += "&pageSize=" + escapeParam(maxRowsTable, false) + strParamModal + queryString;
                    AjaxRsis.callAction(form.id, URL, targetAction, targetMethod, callback, callComponent, parameters);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "_searchPage", CrudRsis);
    }
}

function _exclude(button) {
    try {
        if (button) {
            Crud.renderToolTip(button);
            var UIContext = Rsis.UIContext.get(button), UIForm = UIContext.getUIForm(button);
            if (UIForm) {
                Message.close(UIForm);
                var table = Crud.getTableElement(button), radioSelected = $R(table).getRadioSelected();
                if (!radioSelected) {
                    alert("E obrigatorio selecionar um registro na Table para executar a operacao!");
                    return false;
                }
                var pathNodeForm = UIForm.getXPath(), ignoreForTransient = getAtt(button, "ignoreForTransient");
                var nodeTransient = getNodes(UIForm.domainXML, pathNodeForm + "[@isTransient='true']");
                if (nodeTransient && nodeTransient.length > 0 && !(ignoreForTransient == "true")) {
                    excludeNodeDataTable(UIForm);
                } else {
                    var crudToolbar = Crud.ToolBar;
                    var toolBar = crudToolbar.getToolBar(button), suppressMethods = crudToolbar.getCrudMethods(button), targetMethod = suppressMethods.exclude;
                    if (window.confirm(getMessageBundle("ADV_SIS_CONFIRM_EXCLUSAO"))) {
                        if (UIForm.domainXML == null) {
                            alert("Erro ao recuperar o objeto domainXML.");
                            return false;
                        } else {
                            UIForm.http({
                                method: targetMethod,
                                object: button,
                                success: function(UIForm, objXML, button) {
                                    Message.setOverride(false);
                                    var isStartSearching = Crud.ToolBar.isStartSearching(toolBar, UIForm.state), MC = UIContext.cache.getInstance(table.id);
                                    excludeNodeDataTable(UIForm, MC.PO_DELETE);
                                    if (isStartSearching) {
                                        crudToolbar.startSearch(UIForm, toolBar, table, true);
                                    }
                                }
                            });
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "_exclude", CrudRsis);
    }
}

function excludeNodeDataTable(UIForm) {
    try {
        if (UIForm) {
            var form = UIForm.getForm(), COMPONENTS = UIForm.getAllUIComponents(), UIContext = Rsis.UIContext.get(form);
            if (COMPONENTS) {
                var dataTables = COMPONENTS["dataTable"];
                if (dataTables != undefined && dataTables.length > 0) {
                    for (var n = 0; n < dataTables.length; n++) {
                        var nodeName = ROOT_NODE + dataTables[n].getAttribute("node"), pathFatherNode = createPathFatherNode(nodeName);
                        clearForm(UIForm);
                        UIForm.state = UIRsis.INITIAL;
                        var countCache = -1, tableXML = UIForm.getTableXML(dataTables[n].id);
                        if (tableXML != null) {
                            var fatherNode = XML.getSingleNode(tableXML, pathFatherNode), oldNode = getNodes(tableXML, nodeName + "[@indSelecionado='1']");
                            if (oldNode && oldNode.length > 0) {
                                var countCache = parseInt(oldNode[0].getAttribute("countCache"));
                                fatherNode.removeChild(oldNode[0]);
                            }
                            UIContext.setUIForms(form.id, UIForm);
                        }
                        if (UIForm.getDataScrollerXMLCache(dataTables[n].id) != null) {
                            var _ManagerCache = UIContext.cache.getInstance(dataTables[n].id);
                            var args = nodeName.split("/"), pOrigem = typeof arguments[1] == "undefined" ? _ManagerCache.PO_DELETE_CACHE : arguments[1];
                            _ManagerCache.UIForm = UIForm;
                            _ManagerCache.object = dataTables[n];
                            _ManagerCache.path = dataTables[n].getAttribute("node");
                            _ManagerCache.countCache = countCache;
                            _ManagerCache.pathDelete = ROOT_NODE + "/managerCache/" + args[args.length - 1] + "[@countCache='" + countCache + "']";
                            ManagerCacheProcess(_ManagerCache, pOrigem);
                        }
                        var sts = UIForm.state;
                        renderForm(COMPONENTS, sts);
                        renderDataScrollerPage(COMPONENTS, sts);
                        renderTable(COMPONENTS, sts);
                        renderToolBars(COMPONENTS, sts);
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "excludeNodeDataTable()", CrudRsis);
    }
}

function _activate(button) {
    "use strict";
    if (button) {
        Crud.renderToolTip(button);
        var UIForm = Rsis.getUIForm(button);
        if (UIForm) {
            Message.close(UIForm);
            var radioSelected = $R(Crud.getTableElement(button)).getRadioSelected();
            if (!radioSelected) {
                alert("E obrigatorio selecionar um registro na Table para executar a operacao!");
                return false;
            }
            var ignoreForTransient = getAtt(button, "ignoreForTransient");
            var nodeTransient = getNodes(UIForm.domainXML, UIForm.getXPath() + "[@isTransient='true']");
            if (!(nodeTransient && nodeTransient.length > 0) && ignoreForTransient !== "true") {
                var crudToolbar = Crud.ToolBar;
                var object = $(button.id.split(".")[0]), model = UIForm.get([ "available" ]), toolBar = crudToolbar.getToolBar(button), suppressMethods = crudToolbar.getCrudMethods(button), method = model.available === "1" ? suppressMethods.inactivate : suppressMethods.activate, thiz = this;
                var msg = Message.parser("Tem certeza que deseja [{0}] o registro selecionado?", model.available === "1" ? "Inativar" : "Ativar");
                if (!window.confirm(msg)) return false;
                if (UIForm.domainXML == null) {
                    alert("Erro ao recuperar o objeto domainXML. [ DomainXML is Null ]!");
                    return false;
                } else {
                    UIForm.http({
                        method: method,
                        object: button,
                        success: function(UIForm, objXML, button) {
                            Message.setOverride(false);
                            var UIContext = Rsis.UIContext.get(button);
                            Crud.ToolBar.callbackInjectionAfterRender(UIForm, objXML);
                            Crud.nodeIsSaved(UIForm);
                            var returnDomainXML = XML.broke(objXML, "/xmlDomain" + UIForm.getXPath());
                            if (returnDomainXML != null) {
                                UIForm.domainXML = returnDomainXML;
                                UIForm.state = UIRsis.VISUALIZING;
                            }
                            var OBNC = Rsis.Cache, isNodesChecked = OBNC.isCache(button), table = Crud.getTableElement(button);
                            if (table) {
                                if (isNodesChecked) {
                                    OBNC.setStateDisplay(table, false);
                                }
                                UIForm.updateNodeTableXML(table);
                            }
                            UIContext.setUIForms(UIForm);
                            renderUIForm(UIForm);
                        }
                    });
                }
            }
        }
    }
}

function overWrtWindowClose(button, evt) {
    try {
        if (button) {
            var UIContext = Rsis.UIContext.get(button), UIForm = UIContext.getUIForm(button), dialogName = UIForm.getDialogId();
            Rsis.closeListHolder(evt);
            if (!Rsis.isNodeSaved(button)) {
                var hasDomainXML = false;
                if (UIForm && UIForm.domainXML != null) {
                    hasDomainXML = true;
                }
                var messageExcludeAction = getMessageBundle("ADV_SIS_CONFIRM_CLOSE_WINDOW");
                if (hasDomainXML && window.confirm(messageExcludeAction)) {
                    crossDialog.close(dialogName);
                }
            } else {
                crossDialog.close(dialogName);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "overWrtWindowClose", CrudRsis);
    }
}

function createTables(UIForm, objXML, object, COMPONENTS, nodeDomain) {
    try {
        var form = UIForm.getForm(), UIContext = Rsis.UIContext.get(form), f = getAttMandatory(form, "id"), nodeName = ROOT_NODE + object.getAttribute("node");
        switch (UIForm.state) {
          case UIRsis.INCLUDING:
            {
                UIForm.state = UIRsis.VISUALIZING;
                UIForm.domainXML = XML.broke(objXML, "/xmlDomain" + nodeDomain);
                renderUIForm(UIForm);
                break;
            }

          case UIRsis.UPDATING:
            {
                var returnDomainXML = XML.broke(objXML, "/xmlDomain" + nodeDomain);
                if (returnDomainXML != null) {
                    UIForm.domainXML = returnDomainXML;
                    UIForm.state = UIRsis.VISUALIZING;
                    var pathFatherNode = createPathFatherNode(nodeName), tableXML = UIForm.getTableXML(object.id);
                    if (tableXML != null) {
                        var fatherNode = XML.getSingleNode(tableXML, pathFatherNode), newDomainNode = getNodes(returnDomainXML, ROOT_NODE + nodeDomain), replacedNode = getNodes(tableXML, nodeName + "[@indSelecionado='1']");
                        if (replacedNode && replacedNode.length > 0) {
                            newDomainNode[0].setAttribute("indSelecionado", "1");
                            Sarissa.replaceChildNode(fatherNode, newDomainNode.item(0), replacedNode.item(0));
                        }
                        UIContext.setUIForms(f, UIForm);
                    }
                    renderUIForm(UIForm);
                }
                break;
            }

          case UIRsis.SEARCHING:
            {
                var objXMLTable = XML.broke(objXML, "/xmlTable/page"), xmlTable = cloneObjXML(objXMLTable);
                var myCache = UIContext.cache.get(object.id);
                if (typeof myCache !== "undefined" && myCache != null) {
                    if (xmlTable != null) {
                        myCache.node = getNodes(xmlTable, object.getAttribute("node"));
                        myCache.objXML = xmlTable;
                    }
                    myCache.path = object.getAttribute("node");
                    ManagerCacheProcess(myCache, myCache.PO_SEARCH);
                } else {
                    UIForm.setTableXML(object.id, xmlTable);
                }
                UIForm.state = UIRsis.SEARCHING;
                var sts = UIForm.state;
                renderDataScrollerPage(COMPONENTS, sts);
                renderTable(COMPONENTS, sts);
                renderEdit(COMPONENTS, sts);
                renderListNode(COMPONENTS, sts);
                renderSlidePhoto(COMPONENTS, sts);
                if (UIForm.getStateCache() != null) {
                    UIForm.state = UIForm.getStateCache();
                    renderUIForm(UIForm);
                    UIForm.setStateCache(null);
                }
                break;
            }

          default:
            break;
        }
        UIContext.setUIForms(f, UIForm);
    } catch (oErr) {
        outPrint(oErr, "createTables", CrudRsis);
    }
}

function _callbackUpload(vfileUpload) {
    try {
        var button = vfileUpload.getButton();
        if (button) {
            var UIContext = Rsis.UIContext.get(button), param = UIContext.DialogParams();
            UIContext.fileUpload = vfileUpload;
            if (param) {
                UIContext.fileUpload.queryString = param["stringParams"];
            }
            var UIForm = UIContext.getUIForm(button);
            if (UIForm) {
                Crud.confirm(button);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "_callbackUpload", CrudRsis);
    }
}

function SetParamsModal(param, UIForm, table, execReturn) {}

function StoreReturnModal(UIForm, table, retValue) {}

function overWrtOpenModalDialog(UIForm, table, toolBar, execReturn) {
    try {
        if (execReturn == undefined || execReturn == null) execReturn = true;
        var domainXML = UIForm.domainXML;
        var myTransfer = [];
        myTransfer["table"] = table;
        myTransfer["UIForm"] = UIForm;
        myTransfer["domainXML"] = domainXML;
        myTransfer["execReturn"] = execReturn;
        var param = Crud.Modal.getParams(myTransfer);
        var modalUrl = param["modalUrl"], modalWidth = param["modalWidth"], modalHeight = param["modalHeight"], dialogParams = param["dialogParams"];
        crossDialog.show(modalUrl, param, dialogParams, function(retValue, args) {
            try {
                var UIForm = args[0], table = args[1], toolBar = args[2], execReturn = args[3];
                var UIContext = Rsis.UIContext.get(table);
                UIForm = Crud.processReturnModal(UIForm, table, retValue);
                var isStartSearching = Crud.ToolBar.isStartSearching(toolBar, UIForm.state), isPageUpdate = Crud.ToolBar.isPageUpdate(toolBar, UIForm.state);
                if (isStartSearching && UIForm.state != UIRsis.UPDATING || isPageUpdate && UIForm.state == UIRsis.UPDATING) {
                    Crud.ToolBar.startSearch(UIForm, toolBar, table, false);
                } else {
                    UIForm.state = UIRsis.INITIAL;
                    UIContext.setUIForms(UIForm.getForm().id, UIForm);
                    renderUIForm(UIForm);
                }
                if (!execReturn) {
                    undo(table);
                }
            } catch (oErr) {
                outPrint(oErr, ".anonima", CrudRsis);
            }
        }, [ UIForm, table, toolBar, execReturn ]);
    } catch (oErr) {
        outPrint(oErr, "overWrtOpenModalDialog", CrudRsis);
    }
    return UIForm;
}

function overWrtProcessReturnModal(UIForm, table, retValue) {
    try {
        return Crud.xmlLoadProcess(UIForm, table);
    } catch (oErr) {
        outPrint(oErr, "overWrtProcessReturnModal", CrudRsis);
    }
}

function getDomainXMLSelected(UIForm, table) {
    if (UIForm && table) {
        var showForm = table.getAttribute("showForm");
        return isEmpty(showForm) || showForm === "true" ? UIForm.domainXML : UIForm.objXMLTemp;
    } else return null;
}

function overWrtOpenModalDialogForManagerCache(UIForm, table, execReturn) {
    try {
        if (execReturn == undefined || execReturn == null) {
            execReturn = true;
        }
        var domainXML = UIForm.domainXML;
        var myTransfer = [];
        myTransfer["table"] = table;
        myTransfer["UIForm"] = UIForm;
        myTransfer["domainXML"] = domainXML;
        var param = Crud.Modal.getParams(myTransfer);
        var modalUrl = param["modalUrl"], modalWidth = param["modalWidth"], modalHeight = param["modalHeight"], dialogParams = param["dialogParams"];
        crossDialog.show(modalUrl, param, dialogParams, function(retValue, args) {
            try {
                var UIForm = args[0], table = args[1];
                if (execReturn) {
                    return Crud.processReturnModalWithManagerCache(UIForm, table, retValue);
                }
                var UIContext = Rsis.UIContext.get(table);
                UIContext.setUIForms(UIForm.getForm().id, UIForm);
            } catch (oErr) {
                outPrint(oErr, ".anonima", CrudRsis);
            }
        }, [ UIForm, table ]);
    } catch (oErr) {
        outPrint(oErr, "overWrtOpenModalDialogForManagerCache", CrudRsis);
    }
    return UIForm;
}

function overWrtProcessReturnModalWithManagerCache(UIForm, table, retValue) {
    try {
        var form = UIForm.getForm(), nodePathDomain = UIForm.getXPath(), nodeTableDomain = table.getAttribute("node"), countCache = Crud.getCountCache(UIForm, table);
        var UIContext = Rsis.UIContext.get(table);
        var updateByXmlReturn = table.getAttribute("updateByXmlReturn");
        if (updateByXmlReturn == "true") {
            if (retValue && retValue != null) {
                var stringXMLRetorno = "";
                if (retValue && Rsis.isArray(retValue) && retValue[0]) {
                    stringXMLRetorno = retValue[0];
                } else {
                    stringXMLRetorno = retValue;
                }
                var returnDomainXML = createObjXML(stringXMLRetorno), childNode = getNodes(returnDomainXML, nodePathDomain);
                if (childNode && childNode.length > 0) {
                    childNode[0].setAttribute("changed", "true");
                    var _ManagerCache = UIContext.cache.getInstance(table.id);
                    _ManagerCache.object = table;
                    _ManagerCache.UIForm = UIForm;
                    _ManagerCache.path = nodeTableDomain;
                    _ManagerCache.node = childNode;
                    var xpath = ROOT_NODE + nodeTableDomain + "[@countCache='" + countCache + "']";
                    var oldChildNode = getNodes(UIForm.getDataScrollerXMLCache(table.id), xpath);
                    if (!(oldChildNode && oldChildNode.length > 0)) {
                        oldChildNode = getNodes(UIForm.getTableXML(table.id), xpath);
                    }
                    var pOrigem = _ManagerCache.PO_INSERT;
                    if (oldChildNode && oldChildNode.length > 0) {
                        pOrigem = _ManagerCache.PO_UPDATE;
                    } else {
                        _ManagerCache.node[0].setAttribute("isTransient", "true");
                    }
                    ManagerCacheProcess(_ManagerCache, pOrigem);
                    if (_ManagerCache != null && _ManagerCache.UIForm != null) {
                        UIForm = _ManagerCache.UIForm;
                        UIContext.setUIForms(form.id, UIForm);
                    }
                }
            }
        } else {
            UIForm = Crud.xmlLoadProcess(UIForm, table);
        }
        var fnStoreReturnModal = table.getAttribute("setStoreReturnModal");
        if (fnStoreReturnModal !== null && fnStoreReturnModal !== "") {
            compressEvalRsisAll(fnStoreReturnModal, UIForm, table, retValue);
        } else if (typeof StoreReturnModal === "function") {
            StoreReturnModal(UIForm, table, retValue);
        }
        var COMPONENTS = UIForm.getAllUIComponents();
        if (COMPONENTS) {
            UIForm.state = UIRsis.SEARCHING;
            UIContext.setUIForms(form.id, UIForm);
            var sts = UIForm.state;
            renderDataScrollerPage(COMPONENTS, sts);
            renderTable(COMPONENTS, sts);
            renderEdit(COMPONENTS, sts);
            renderToolBars(COMPONENTS, sts);
            UIContext.setUIForms(form.id, UIForm);
            __ManagerCache = null;
        }
    } catch (oErr) {
        outPrint(oErr, "overWrtProcessReturnModalWithManagerCache", CrudRsis);
    }
    return UIForm;
}

(function($R) {
    TableRsis = {
        _FILE: "020tableRsis.js",
        version: JRetail.rsis.VersionJS,
        clazz: "TableRsis.",
        renderCheckAll: function(UIForm, table, tableContent, stringNodeRoot) {
            var checkAll = $(table.id + ".checkAll");
            if (checkAll) {
                var stringPathNode = stringNodeRoot.split("/"), tableXML = UIForm.getTableXML(table.id);
                var nodeIndSelecionado = getNodes(tableXML, stringNodeRoot + "[@indSelecionado='1']"), nodeAll = getNodes(tableXML, stringNodeRoot);
                if (nodeIndSelecionado && nodeIndSelecionado.length > 0 && (nodeAll && nodeAll.length > 0)) {
                    checkAll.checked = nodeIndSelecionado.length == nodeAll.length ? true : false;
                    var nodesPage = getNodes(tableXML, ROOT_NODE + "/" + stringPathNode[2]);
                    if (nodesPage && nodesPage.length > 0) {
                        nodesPage[0].setAttribute("checkAll", nodeIndSelecionado.length == nodeAll.length ? "true" : "false");
                    }
                } else checkAll.checked = false;
                checkAll = null;
            }
        },
        checkAllValidate: function(table, UIForm, oElem, pathNode, stringNode) {
            if (table && UIForm) {
                var checkAll = $(table.id + ".checkAll");
                if (checkAll) {
                    setDataUICpt(table, checkAll);
                    var xmlTable = UIForm.getTableXML(table.id);
                    var nodeIndSelecionado = getNodes(xmlTable, pathNode + "[@indSelecionado='1']"), nodeAll = getNodes(xmlTable, pathNode);
                    if (nodeIndSelecionado && nodeIndSelecionado.length > 0 && nodeAll && nodeAll.length > 0) {
                        var valueChkAll = false;
                        if (nodeIndSelecionado.length === nodeAll.length) {
                            valueChkAll = true;
                        }
                        checkAll.checked = valueChkAll;
                        var stringPathNode = stringNode.split("/"), nodesPage = getNodes(xmlTable, ROOT_NODE + "/" + stringPathNode[2]);
                        if (nodesPage && nodesPage.length > 0) {
                            nodesPage[0].setAttribute("checkAll", valueChkAll ? "true" : "false");
                        }
                    } else {
                        if (oElem.checked == false && checkAll.checked == true) {
                            checkAll.checked = false;
                        }
                    }
                    checkAll = null;
                }
            }
        },
        checkAll: function(object, evt) {
            if (object) {
                var tableId = getAttMandatory(object, "editTable"), table = $(tableId);
                if (table) {
                    var UIContext = $R.UIContext.get(table);
                    var stringNode = ROOT_NODE + $R(table).getPathNode(), componentType = table.getAttribute("component"), tHead = $R(table).getTHead(), tBody = $R(table).getTBody();
                    var UIForm = UIContext.getUIForm(object);
                    if (UIForm && UIForm.getTableXML(tableId)) {
                        var check = object.checked, stringPathNode = stringNode.split("/"), nodesPage = getNodes(UIForm.getTableXML(tableId), "/" + stringPathNode[2]), formId = UIForm.getForm();
                        if (nodesPage && nodesPage.length > 0) {
                            nodesPage[0].setAttribute("checkAll", check ? "true" : "false");
                        }
                        var objectInput = $$(tableId + ".dtRadio");
                        for (var i = 0; i < objectInput.length; i++) {
                            var component = tHead.rows[0].cells[0];
                            if (componentType === "editTable") {
                                component = tHead.rows[0].cells[0].getElementsByTagName("component")[0];
                            }
                            var stringFunArgs = stringNode + getAttMandatory(component, "value"), xpathIdent = getAttMandatory(component, "pathNodeIdent"), stringArgs = stringFunArgs.split("@"), pathNode = stringArgs[0], attributeNode = typeof stringArgs[1] === "undefined" ? "" : stringArgs[1];
                            var domainXML = getDomainXMLLine(UIForm, table, objectInput[i], pathNode, attributeNode);
                            if (domainXML) {
                                var nameCountRowsTable = Crud.getNameCountRowsTable(table);
                                var nodeSelected = getNodes(UIForm.getTableXML(tableId), pathNode + "[@" + nameCountRowsTable + "='" + objectInput[i].value + "']");
                                if (nodeSelected && nodeSelected.length > 0 && typeof objectInput[i] !== "undefined" && objectInput[i].disabled == false && objectInput[i].readOnly == false) {
                                    objectInput[i].checked = check;
                                    nodeSelected[0].setAttribute("indSelecionado", check ? "1" : "0");
                                }
                            }
                        }
                        UIContext.setUIForms(formId, UIForm);
                        var renderDeveloperCheckAll = getAttFuncDeveloper(object, "renderDeveloperCheckAll");
                        if (renderDeveloperCheckAll != null && renderDeveloperCheckAll !== "") {
                            var nodesAll = getNodes(UIForm.getTableXML(tableId), stringNode);
                            compressEvalRsisAll(renderDeveloperCheckAll, table, UIForm, nodesAll, object);
                        }
                        if (nodesAll && nodesAll.length > 0) {
                            var nodesAll = getNodes(UIForm.getTableXML(tableId), stringNode);
                            Rsis.Cache.checkObjects(UIForm, nodesAll, table, true);
                        }
                        var dataScroller = getDataScrollerByTable(table.id);
                        if (typeof DataScrollRsis !== "undefined" && dataScroller) {
                            DataScrollRsis.configItensSelected(dataScroller, UIForm, table.id);
                        }
                        $R(tBody.rows).each(function(i, row) {
                            var checkBox = row && row.cells[0] ? row.cells[0].firstChild : null;
                            if (!(checkBox.disabled && checkBox.readOnly)) {
                                checkBox.checked ? $R(row).addClass("selected") : $R(row).removeClass("selected");
                            }
                        });
                        UIContext.setUIForms(UIForm);
                    }
                    table = null;
                }
                object = null;
            }
        },
        addRow: function(object) {
            if (!object) return;
            var table = $(object.id.split(".")[0]);
            if (table) {
                var UIContext = $R.UIContext.get(table), UIForm = UIContext.getUIForm(table);
                $R(table).evalDev("addItemFunction", [ table, UIForm ]);
                table = null;
            }
        },
        deleteRow: function(object) {
            if (!object) return;
            var table = $(object.id.split(".")[0]);
            if (table) {
                var UIContext = $R.UIContext.get(table), UIForm = UIContext.getUIForm(table), radioSelected = $R(table).getRadioSelected();
                if (radioSelected) {
                    $R(table).evalDev("deleteItemFunction", [ table, UIForm, radioSelected ]);
                }
                table = radioSelected = null;
            }
        }
    };
})(Rsis);

(function(window, $R) {
    var document = window.document;
    Table = {
        DATA_TABLE: "dataTable",
        EDIT_TABLE: "editTable",
        getType: function() {
            return this[0].getAttribute("component");
        },
        getDivTHead: function() {
            return $(this[0].id + ".hdr");
        },
        getDivTFoot: function() {
            return $(this[0].id + ".ftr");
        },
        getDivTBody: function() {
            return $(this[0].id + ".bd");
        },
        getDivTBodySr: function() {
            return $(this[0].id + ".bdSr");
        },
        getTHead: function() {
            return $(this[0].id + ".tHd");
        },
        getTBody: function() {
            return $(this[0].id + ".tBdy");
        },
        getTBodySr: function() {
            return $(this[0].id + ".tBdySr");
        },
        getTFoot: function() {
            return $(this[0].id + ".tft");
        },
        getCheckAll: function() {
            return $(this[0].id + ".checkAll");
        },
        drawBody: function() {
            var thiz = this;
            var tBd = this.getDivTBody();
            if (tBd) {
                switch (this.getType()) {
                  case thiz.DATA_TABLE:
                    this.removeRows().createLines(tBd);
                    break;

                  case thiz.EDIT_TABLE:
                    this.clearTable(arguments[0]).createLinesEdt(tBd);
                    break;
                }
                this.updateHdrWidth(tBd);
            }
            tBd = null;
            return this;
        },
        updateHdrWidth: function(tBd) {
            var hasHScroll = this.hasHgtScroll(tBd), hasWScroll = this.hasWdtScroll(tBd), tHd = this.getDivTHead(), wsc = $R.browser.msie ? 17 : 16, wdt = "100%";
            if (hasHScroll) {
                if (tHd && !tHd.originalWidth && tHd.clientWidth) {
                    var dTb = tHd.parentNode;
                    if (dTb && dTb.scrollWidth) {
                        tHd.style.width = "calc(100% - 16px)";
                        var tFt = this.getDivTFoot();
                        if (tFt && !tFt.originalWidth && tFt.clientWidth) {
                            tFt.style.width = "calc(100% - 16px)";
                        }
                        var tSr = this.getDivTBodySr();
                        if (tSr && tSr.parentNode) {
                            var dSr = tSr.parentNode;
                            if (dSr && !dSr.originalWidth && dSr.clientWidth) {
                                tSr.style.width = "calc(100% - 16px)";
                            }
                        }
                    }
                }
            } else {
                tHd.style.width = wdt;
                if (tBd && hasWScroll) {
                    tBd.style.width = wdt;
                } else {
                    tBd.style.width = "";
                }
                var tFt = this.getDivTFoot();
                if (tFt) {
                    tFt.style.width = wdt;
                }
                var tSr = this.getDivTBodySr();
                if (tSr) {
                    tSr.style.width = wdt;
                }
            }
            var bd = this.getDivTBody(), ctBdr = $(this[0].id + ".ctBdr"), ctHdr = $(this[0].id + ".ctHdr"), ctSr = $(this[0].id + ".ctSr");
            if (hasHScroll && ctHdr != null && bd.offsetWidth < parseInt(ctHdr.scrollWidth, 10) + 16 || ctBdr != null && bd != null && hasWScroll && bd.offsetWidth <= parseInt(ctHdr.scrollWidth, 10) + 16) {
                var wdtCt = parseInt(ctBdr.scrollWidth, 10) - wsc, vleWidth = ctBdr.getAttribute("vleWidth");
                if (vleWidth != null && vleWidth !== "") {
                    wdtCt = vleWidth;
                } else {
                    ctBdr.setAttribute("vleWidth", wdtCt);
                }
                ctBdr.style.width = wdtCt + "px";
                if (ctHdr && ctHdr.style) {
                    ctHdr.style.marginRight = "20px";
                    ctHdr.style.paddingRight = "20px";
                }
                ctHdr.style.width = wdtCt + "px";
                if (ctSr) {
                    ctSr.style.width = wdtCt + "px";
                }
            }
            return this;
        },
        hasHgtScroll: function(bd) {
            return bd && bd.scrollHeight > bd.clientHeight ? true : false;
        },
        hasWdtScroll: function(bd) {
            return bd && bd.scrollWidth > bd.clientWidth ? true : false;
        },
        createLines: function(tBd) {
            var thiz = this;
            var UIContext = $R.UIContext.get(thiz[0]), UIForm = UIContext.getUIForm(thiz[0]);
            if (UIForm && tBd) {
                var tHd = this.getTHead();
                var xmlTable = UIForm.getTableXML(thiz[0].id), $win = UtilRsis.getParentWindow(thiz[0]), sEvent = getStringEvent(thiz[0]);
                if (xmlTable && tHd) {
                    var xpath = ROOT_NODE + this.getPathNode();
                    if (xpath != null && xpath !== "") {
                        var rows = tHd.rows, cols = rows[rows.length - 1].cells;
                        var nodes = getNodes(xmlTable, xpath), p = 0, maxLin = nodes.length;
                        var countRow = -1;
                        for (;p < maxLin; p++) {
                            nodes[p].setAttribute("countRowsDataTable", p);
                            if (nodes[p] && nodes[p].getAttribute("countCache")) {
                                countRow = toInt(nodes[p].getAttribute("countCache"));
                            }
                            this.createCols(UIForm, tBd, cols, xmlTable, nodes, xpath, p, countRow, sEvent, $win);
                        }
                        var tbody = this.getTBody();
                        if (tbody && tbody.rows) {
                            var i = 0, maxRows = tbody.rows.length;
                            for (;i < maxRows; i++) {
                                var cpts = getComponents(tbody.rows[i]), buttons = cpts != null ? cpts["button"] : null;
                                if (isValidParameters(buttons, typeof renderButton === "function") && buttons[0]) {
                                    renderButton(buttons[0], UIForm.state);
                                }
                            }
                        }
                        tbody = null;
                        this.renderCheckAll(UIForm, xpath);
                    }
                }
                tHd = null;
            }
            return this;
        },
        createCols: function(UIForm, tBd, cols, objXML, nodes, path, idx, countRow, sEvent, $win) {
            var thiz = this;
            if (UIForm && nodes && tBd) {
                var tableId = thiz[0].id;
                var selType = thiz[0].getAttribute("selectionType"), renderCheckBoxDeveloper = thiz[0].getAttribute("renderCheckBoxDeveloper"), fnRadio = thiz[0].getAttribute("onclickDataTable");
                var tBody = this.createTBody(tBd), row = null, tableEvts = DataTableRsis.EVENTS;
                if (tBody) row = tBody.insertRow(idx);
                if (row) {
                    setDataUICpt(thiz[0], row);
                    row.id = tableId + ".line::" + idx;
                    row.className = idx & 1 ? "even" : "odd";
                    var max_len = cols.length, j = 0;
                    for (;j < max_len; j++) {
                        $R(cols[j]).setHint();
                        var cell = row.insertCell(j);
                        if (cell) {
                            cell.id = tableId + ".line::" + idx + "_" + j;
                            setDataUICpt(thiz[0], cell);
                            var optionText = getAtt(cols[j], "optionText"), listPathNodes = "";
                            var columnValue = cols[j].getAttribute("value");
                            if (columnValue != null && columnValue !== "") {
                                listPathNodes = columnValue.split(",");
                            } else {
                                listPathNodes = optionText.split(",");
                            }
                            var visibleValueCell = isVisRest(cols[j], status), contentCell = "";
                            if (j === 0) {
                                contentCell = DataTableRsis.createRadioOrCheckBox(thiz[0], UIForm, path, row, cell, cols[j], selType, nodes, idx, countRow, renderCheckBoxDeveloper, fnRadio);
                                if (selType === "hidden") {
                                    cell.className = "hidden";
                                } else {
                                    cell.className = "radio";
                                }
                            } else {
                                var tfr = {
                                    cell: cell,
                                    cteCell: contentCell,
                                    path: path,
                                    cols: cols[j],
                                    index: idx,
                                    ctRow: countRow,
                                    colValue: columnValue,
                                    optionText: optionText,
                                    listPathNodes: listPathNodes,
                                    visible: visibleValueCell
                                };
                                tfr = this.getColumnText(tfr, UIForm, objXML, true);
                                contentCell = tfr.cteCell;
                                countRow = tfr.ctRow;
                                setDOMEvent(cell, "onclick", "return " + $win + "checkRowDataTable(this.parentNode, " + sEvent + ");");
                                var _dbClk = cols[j].getAttribute("dblclickcell");
                                _dbClk = _dbClk ? _dbClk : "Crud.doubleClick";
                                if ($R.isMobileDevice) {
                                    setDOMEvent(cell, "ondblclick", $win + _dbClk);
                                    $R.fw(cell).doubletap(function(event) {
                                        var _dbClk = this.getAttribute("ondblclick");
                                        _dbClk = _dbClk ? _dbClk.replaceAll(/\([^?]+\);/g, "") : "";
                                        _dbClk = _dbClk ? _dbClk.replace("return ", "") : "";
                                        var fn = $R.call(_dbClk);
                                        if (typeof fn === "function") {
                                            fn(tableId, this.parentElement, event);
                                        }
                                    });
                                } else {
                                    setDOMEvent(cell, "ondblclick", "return " + $win + _dbClk + "('" + tableId + "'," + $win + "$('" + row.id + "'), " + sEvent + ");");
                                }
                            }
                            cell.innerHTML = contentCell;
                            if (tableEvts.length > 0) {
                                for (var ite = 0, mxLn = tableEvts.length; ite < mxLn; ite++) {
                                    var tableEvt = tableEvts[ite], onEvents = new String(getAtt(cols[j], tableEvt + "cell"));
                                    if (onEvents != null && onEvents !== "" && onEvents.length > 0) {
                                        setDOMEvent(cell, "on" + tableEvt, "return " + $win + "" + onEvents);
                                    }
                                }
                            }
                            compressEvalRsisAll.apply(null, [ getAttFuncDeveloper(cols[j], "execute"), UIForm, nodes[idx], thiz[0], row, cell, cols[j], j ]);
                        }
                        cell = null;
                    }
                }
                row = null;
            }
            return countRow;
        },
        createLinesEdt: function(tBd) {
            var thiz = this;
            try {
                var UIContext = $R.UIContext.get(thiz[0]), UIForm = UIContext.getUIForm(thiz[0]);
                if (UIForm && tBd) {
                    var tHd = thiz.getTHead(), ETR = EditTableRsis, $win = UtilRsis.getParentWindow(thiz[0]), sEvent = getStringEvent(thiz[0]), xpath = ROOT_NODE + thiz.getPathNode();
                    if (xpath != null && xpath !== "") {
                        var rows = tHd.rows, tBody = this.createTBody(tBd), cols = rows[rows.length - 1].cells, tSets = thiz.tSets(UIForm, tBody, xpath);
                        if (tSets != null) {
                            var tableXML = tSets.tableXML, nodes = tSets.nodes, pageSize = tSets.pageSize, createdLines = tSets.createLine, numberLines = tSets.lines, rowsNumber = tSets.rowNum;
                            var enableFirstLine = thiz[0].getAttribute("enableFirstLine"), maxRowsTable = thiz[0].getAttribute("maxRowsTable"), useAsList = thiz[0].getAttribute("useAsList");
                            if (maxRowsTable > 0) {
                                this.removeRows();
                                createdLines = 0;
                                thiz[0].getAttribute("createdLines", createdLines);
                            }
                            if (rowsNumber > 0 && createdLines < pageSize && !(nodes && nodes.length > 0) || maxRowsTable > 0 && createdLines < pageSize) {
                                ETR.createLines(UIForm, thiz[0], tBody, nodes, rowsNumber, createdLines);
                            } else if (nodes && nodes.length > 0 && useAsList === "true") {
                                rowsNumber = toInt(nodes.length);
                                if (rowsNumber > createdLines) {
                                    ETR.createLines(UIForm, thiz[0], tBody, nodes, rowsNumber > createdLines ? rowsNumber - createdLines : rowsNumber, createdLines);
                                }
                            }
                            var rows = tBody.rows;
                            ETR.setCountLines(rows && rows.length > 0 ? toInt(rows.length) : 0);
                            ETR.renderLineByXML(UIForm, thiz[0], tBody, nodes, rowsNumber, pageSize, createdLines);
                            var hasNodesLine = getNodes(tableXML, xpath);
                            if (hasNodesLine && hasNodesLine.length > 0) {
                                UIForm.setTableXML(thiz[0].id, tableXML);
                            }
                            UIContext.setUIForms(UIForm.getForm().id, UIForm);
                            if (isEmpty(enableFirstLine) || enableFirstLine === "true") {
                                var firstLine = nodes && nodes.length > 0 ? parseInt(nodes.length) : 0;
                                ETR.renderLineAsIncluding(getComponents(rows[firstLine]));
                            }
                            thiz.renderCheckAll(UIForm, xpath);
                        }
                        tBody = rows = cols = null;
                    }
                    tHd = null;
                }
            } catch (oErr) {
                $R(tBd).visible(true);
                outPrint(oErr, "createLinesEdt", thiz);
            }
            return this;
        },
        createColgroupHead: function(dThd) {
            if (Rsis.isUndefined(dThd)) dThd = this.getDivTHead();
            if (dThd) {
                var table = dThd.getElementsByTagName("table")[0];
                this.createColgroup(table, true, this.getTHead());
            }
            return this;
        },
        updateWidth: function() {
            var ctHdr = $(this[0].id + ".ctHdr"), bd = $(this[0].id + ".bd"), hdr = $(this[0].id + ".hdr"), ctBdr = $(this[0].id + ".ctBdr"), ctSr = $(this[0].id + ".ctSr");
            var wWidth = screen.availWidth, ctHdrWidth = 0;
            if (ctHdr.style && ctHdr.style.width) {
                ctHdrWidth = parseInt(ctHdr.style.width.replace("px", ""), 10);
            }
            var bdrWidth = 0;
            if (ctBdr.style && ctBdr.style.width) {
                bdrWidth = parseInt(ctBdr.style.width.replace("px", ""), 10);
            }
            var wd = 0;
            if (wWidth < ctHdrWidth) {
                wd = Math.max(wWidth, ctHdrWidth) + 38;
                ctHdr.style.width = wd + "px";
                ctBdr.style.width = wd + "px";
                if (ctSr && ctSr.style) {
                    ctSr.style.width = wd + "px";
                }
            } else if (ctHdrWidth == bdrWidth) {
                var hW = ctHdr.style.width;
                if (hW.search("%") !== -1) {
                    var pxWidth = Math.max(ctHdr.clientWidth, ctHdr.scrollWidth);
                    if (pxWidth == 0) {
                        pxWidth = wWidth - 50;
                    }
                    if (ctBdr.style && ctBdr.style.width) {
                        ctBdr.style.width = pxWidth - 1 + "px";
                    }
                    if (ctHdr.style && ctHdr.style.width) {
                        ctHdr.style.width = pxWidth + "px";
                    }
                    if (ctSr && ctSr.style && ctSr.style.width) {
                        ctSr.style.width = pxWidth + "px";
                    }
                }
            }
            return this;
        },
        createTBody: function(tBd) {
            var tBody = null;
            if (tBd) {
                var table = tBd.getElementsByTagName("table")[0];
                if (!table) {
                    var hdr = $(this[0].id + ".hdr"), cteWidth = hdr.getAttribute("cteWidth"), div = this.create("div", tBd);
                    div.style.width = "100%";
                    table = this.create("table", div);
                    table.className = "content";
                    table.id = this[0].id + ".ctBdr";
                    table.style.width = cteWidth ? cteWidth : "100%";
                }
                this.createColgroup(table);
                var tBody = table.getElementsByTagName("tbody")[0];
                if (!tBody) {
                    tBody = this.create("tbody", table);
                    tBody.id = this[0].id + ".tBdy";
                }
                this.updateWidth();
            }
            return tBody;
        },
        renderTFoot: function() {
            if (this[0].getAttribute("totalBar") === "true") {
                renderFoot(this[0]);
            }
            return this;
        },
        createColgroupFoot: function(dTft) {
            if (Rsis.isUndefined(dTft)) dTft = this.getDivTFoot();
            if (dTft) {
                var table = dTft.getElementsByTagName("table")[0];
                this.createColgroup(table, true, this.getTFoot());
            }
            return this;
        },
        renderTBodySr: function() {
            if (this[0].getAttribute("searchBar") === "true") {
                renderSearchBar(this[0]);
            }
            return this;
        },
        createColgroupSearch: function(dSrh) {
            if (Rsis.isUndefined(dSrh)) dSrh = this.getDivTBodySr();
            if (dSrh) {
                var table = dSrh.getElementsByTagName("table")[0];
                this.createColgroup(table, true, this.getTBodySr());
            }
            return this;
        },
        createColgroup: function(table) {
            if (table) {
                var ctHdr = $(this[0].id + ".ctHdr"), tableHdr = ctHdr.getElementsByTagName("table")[0], selType = tableHdr.getAttribute("selectionType"), colgroup = table.getElementsByTagName("colgroup")[0];
                if (!colgroup) {
                    var ag2 = arguments[2];
                    colgroup = this.create("colgroup", table, arguments[1], ag2);
                    var obj = this.getTHead();
                    if (obj) {
                        var rows = obj.rows, cols = rows[rows.length - 1].cells, n = 0, maxN = cols.length;
                        for (;n < maxN; n++) {
                            var col = this.create("col", colgroup), wdt = "";
                            if (selType !== "hidden") {
                                wdt = n == 0 ? "24px" : cols[n].getAttribute("wcol");
                            } else {
                                wdt = n == 0 ? Rsis.browser.msie ? "" : "0px" : cols[n].getAttribute("wcol");
                            }
                            col.width = wdt;
                            cols[n].style.width = wdt;
                        }
                    }
                }
            }
            return this;
        },
        create: function(tag) {
            var iframe = $getIframeByObject(this[0]);
            var doc = document, obj = null;
            if (iframe != null) {
                doc = getIframeDocument(iframe);
            }
            if (!obj) {
                obj = doc.createElement(tag);
                if (typeof arguments[1] !== "undefined") {
                    if (arguments[2]) {
                        arguments[1].insertBefore(obj, arguments[3]);
                    } else {
                        arguments[1].appendChild(obj);
                    }
                } else {
                    doc.body.appendChild(obj);
                }
            }
            return obj;
        },
        getColumnText: function(tfr, UIForm, objXML, isBody) {
            var thiz = this;
            if (tfr) {
                var cell = tfr.cell, path = tfr.path, contentCell = tfr.cteCell, listPathNodes = tfr.listPathNodes, optionText = tfr.optionText, cols = tfr.cols, idx = tfr.index, countRow = tfr.ctRow, columnValue = tfr.colValue, visibleValueCell = tfr.visible;
                var cellAlign = cols.getAttribute("colalign"), patternMask = cols.getAttribute("mask");
                cell.className = cellAlign != null && cellAlign !== "" ? cellAlign : "left";
                for (var k = 0, maxlist = listPathNodes.length; k < maxlist; k++) {
                    var str = Trim(listPathNodes[k]);
                    if (str.substring(0, 1) === "'") {
                        contentCell = contentCell + str.replace(/'/g, "");
                    } else {
                        var optionValue = "", optionValueRef = "";
                        if (columnValue == null || columnValue === "") {
                            optionValue = getAttMandatory(cols, "optionValue");
                            optionValueRef = getAttMandatory(cols, "optionValueRef");
                        }
                        var stringArgs = "";
                        if (optionText == null || optionText === "") {
                            if (isBody) {
                                stringArgs = (path + "[$$countRowsDataTable='" + idx + "']" + str).split("@");
                            } else {
                                stringArgs = (path + str).split("@");
                            }
                        } else {
                            stringArgs = str.split("@");
                        }
                        var pathNode = stringArgs[0].replace("$$", "@"), attributeNode = $R.isUndefined(stringArgs[1]) ? "" : stringArgs[1], node = getNodes(objXML, pathNode);
                        if (isBody && getNodeValue(node, "indSelecionado") === "1") {
                            countRow = idx;
                        }
                        var att = "";
                        if (columnValue == null || columnValue === "") {
                            att = getValueXMLParms(UIForm, cols, idx, thiz[0]);
                        } else {
                            if (patternMask != null && patternMask !== "") {
                                att = dataTableMask(getNodeValue(node, attributeNode), patternMask);
                            } else {
                                att = getNodeValue(node, attributeNode);
                            }
                        }
                        if (visibleValueCell) {
                            contentCell = contentCell + (att === null ? "" : att);
                        } else {
                            contentCell = contentCell + "";
                        }
                    }
                }
                tfr.cteCell = contentCell;
                tfr.ctRow = countRow;
            }
            return tfr;
        },
        getRadioSelected: function() {
            var radios = $$(this[0].id + ".dtRadio");
            for (var i = 0; i < radios.length; i++) {
                if (!Rsis.isUndefined(radios[i]) && radios[i].checked == true) {
                    return radios[i];
                }
            }
            return null;
        },
        unSelectedNode: function(path, objXML) {
            var thiz = this;
            var UIContext = $R.UIContext.get(thiz[0]), UIForm = UIContext.getUIForm(thiz[0]);
            if (UIForm) {
                objXML = Rsis.isUndefined(objXML) ? UIForm.getTableXML(thiz[0].id) : objXML;
                var attNode = Rsis.isUndefined(arguments[2]) ? "indSelecionado" : arguments[2], objNode = getNodes(objXML, path);
                if (objNode && objNode.length > 0) {
                    for (var i = 0, maxL = objNode.length; i < maxL; i++) {
                        objNode[i].setAttribute(attNode, "0");
                    }
                }
            }
            return this;
        },
        getLineNumber: function(object) {
            var number = -1;
            if (object) {
                var arrid = object.id.split("::");
                if (arrid && arrid.length > 0) {
                    var countColumnHeader = toInt(arrid[1].split("_")[0]);
                    if (countColumnHeader != null && !isNaN(countColumnHeader)) {
                        number = countColumnHeader;
                    }
                }
            }
            return number;
        },
        scroll: function() {
            var tbd = $(this[0].id + ".bd");
            if (tbd) {
                tbd.onscroll = function(event) {
                    UtilRsis.CloseCombo(this, event);
                    var parentId = this.id.split(".")[0], hdr = $(parentId + ".hdr"), bdSr = $(parentId + ".bdSr"), ftr = $(parentId + ".ftr");
                    if (hdr) {
                        hdr.scrollLeft = tbd.scrollLeft;
                    }
                    if (ftr) {
                        ftr.scrollLeft = tbd.scrollLeft;
                    }
                    if (bdSr) {
                        bdSr.scrollLeft = tbd.scrollLeft;
                    }
                };
            }
            return this;
        },
        renderCheckAll: function(UIForm, stringNodeRoot) {
            var thiz = this;
            var checkAll = thiz.getCheckAll();
            if (checkAll) {
                var stringPathNode = stringNodeRoot.split("/"), tableXML = UIForm.getTableXML(thiz[0].id);
                var nodeIndSelecionado = getNodes(tableXML, stringNodeRoot + "[@indSelecionado='1']"), nodeAll = getNodes(tableXML, stringNodeRoot);
                if (nodeIndSelecionado && nodeIndSelecionado.length > 0 && (nodeAll && nodeAll.length > 0)) {
                    checkAll.checked = nodeIndSelecionado.length === nodeAll.length ? true : false;
                    var nodesPage = getNodes(tableXML, "/" + stringPathNode[2]);
                    if (nodesPage && nodesPage.length > 0) {
                        nodesPage[0].setAttribute("checkAll", nodeIndSelecionado.length === nodeAll.length ? "true" : "false");
                    }
                } else {
                    checkAll.checked = false;
                }
            }
            return this;
        },
        clearTable: function(isRender) {
            var tBody = this.getTBody();
            if (tBody && tBody.rows.length > 0) {
                var state = UIRsis.INITIAL, rws = tBody.rows, m = 0, maxRws = rws.length;
                for (;m < maxRws; m++) {
                    var row = rws[m];
                    var checkLineCheckBox = row && row.cells[0] && row.cells[0].childNodes[0] && row.cells[0].childNodes[0].type === "checkbox";
                    if (checkLineCheckBox) {
                        row.cells[0].childNodes[0].checked = false;
                    }
                }
                var cps = getComponents(tBody);
                if (isRender) {
                    renderForm(cps, state);
                }
                clearComponentsEditTable(cps, state);
            }
            return this;
        },
        getDSPage: function() {
            var ds = getDataScrollerByTable(this[0].id);
            if (ds) {
                return {
                    dataScroller: ds,
                    pNumber: parseInt(ds.getAttribute("initPage")),
                    pSize: parseInt(ds.getAttribute("maxRowsTable"))
                };
            }
            return null;
        },
        tSets: function(UIForm, tBody, xpath) {
            var thiz = this;
            if (UIForm && tBody && xpath) {
                var pageSize = 1, dsp = thiz.getDSPage();
                if (dsp != null) {
                    pageSize = isNaN(dsp.pSize) ? 1 : dsp.pSize;
                } else {
                    if (thiz[0].getAttribute("maxRowsTable")) {
                        pageSize = parseInt(thiz[0].getAttribute("maxRowsTable"), 10);
                    }
                }
                var createdLines = parseInt(thiz[0].getAttribute("createdLines"), 10), numberLines = parseInt(tBody.rows.length, 10), nodes = null, tableXML = UIForm.getTableXML(thiz[0].id), rowsNumber = thiz[0].getAttribute("rowsNumber");
                if (tableXML != null) {
                    nodes = getNodes(tableXML, xpath);
                    numberLines = !(nodes && nodes.length > 0) ? createdLines : parseInt(nodes.length);
                } else {
                    numberLines = numberLines === 0 ? rowsNumber : numberLines;
                }
                return {
                    tableXML: tableXML,
                    nodes: nodes,
                    pageSize: pageSize,
                    createLine: createdLines,
                    lines: numberLines,
                    rowNum: rowsNumber
                };
            }
            return this;
        },
        configHelp: function() {
            var obj = this[0];
            var component = obj.getAttribute("component");
            if (isNoEmpty(component) && (component === "dataTable" || component === "editTable")) {
                if (component === "dataTable") {
                    DataTableRsis.helpConfig(obj);
                } else if (component === "editTable") {
                    EditTableRsis.helpConfig(obj);
                }
            }
        }
    };
    $R.extend($R.fn, Table);
})(window, Rsis);

(function() {
    MaskRsis = {
        _FILE: "021maskRsis.js",
        version: JRetail.rsis.VersionJS,
        FONE: "fone",
        DATE: "date",
        MESANO: "mesano",
        DECIMAL: "decimal",
        INTEGER: "integer",
        REGEXP: "regexp",
        CPF_CNPJ: "cpfcnpj",
        CPF: "cpf",
        CNPJ: "cnpj",
        NAME: "name",
        RAZAO_SOCIAL: "corporateName",
        MaskFone: "000000-0000",
        HOR: "HH",
        MMSS: "mmss",
        HHMI: "HHmi",
        isDate: function(pattern) {
            if (isNoEmpty(pattern)) {
                var stringArgs = pattern.split("::"), stringPatter = stringArgs[0];
                return stringPatter && stringPatter === this.DATE ? true : false;
            }
            return false;
        },
        isMesAno: function(pattern) {
            if (isNoEmpty(pattern)) {
                var stringArgs = pattern.split("::"), stringPatter = stringArgs[0];
                return stringPatter && stringPatter === this.MESANO ? true : false;
            }
            return false;
        }
    };
})();

function formatField(_input, pattern) {
    try {
        if (_input && pattern) {
            var stringMask = "";
            if (_input.value === "") return true;
            if (!(_input.value && _input.value.length > 0)) return true;
            if (isFullText(pattern)) {
                return true;
            }
            if (!getMapPattern(pattern)) {
                var vr = unformatField(_input.value, pattern);
                if (_input.value != vr) {
                    _input.value = vr;
                }
            }
            if (getMapPattern(pattern) != null && _input.value.length > 0) {
                for (var i = 0; i < _input.value.length; i++) {
                    if (isTipo(getMapPattern(pattern), _input.value.charAt(i))) {
                        stringMask += _input.value.charAt(i);
                    }
                }
                _input.value = stringMask;
            } else {
                var stringArgs = pattern.split("::"), stringPatter = stringArgs[0];
                switch (stringPatter) {
                  case MaskRsis.FONE:
                    _input.value = fmtFone(_input.value);
                    break;

                  case MaskRsis.NAME:
                    _input.value = fmtMaskName(_input.value);
                    break;

                  case MaskRsis.RAZAO_SOCIAL:
                    _input.value = removeMaskRazaoSocial(_input.value);
                    break;

                  case MaskRsis.DATE:
                    _input.value = maskDate(_input, stringArgs[1]);
                    break;

                  case MaskRsis.MESANO:
                    _input.value = maskDate(_input, "MM/yyyy");
                    break;

                  case MaskRsis.INTEGER:
                    _input.value = fmtToInteger(_input.value, "0");
                    break;

                  case MaskRsis.DECIMAL:
                    _input.value = fmtMoney(_input.value, stringArgs[1]);
                    break;

                  case MaskRsis.REGEXP:
                    break;

                  case MaskRsis.CPF:
                    _input.value = formatCpfCnpj(_input.value, true);
                    break;

                  case MaskRsis.CNPJ:
                    _input.value = formatCpfCnpj(_input.value, false);
                    break;

                  case MaskRsis.CPF_CNPJ:
                    _input.value = formatCpfCnpj(_input.value);
                    break;

                  case MaskRsis.HOR:
                  case MaskRsis.MMSS:
                    _input.value = formatFieldHHmmss(_input.value);
                    break;

                  case MaskRsis.HHMI:
                    _input.value = fmtDefaultMask(_input.value, "00:00");
                    break;

                  default:
                    _input.value = fmtDefaultMask(_input.value, stringArgs[0]);
                    break;
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "formatField", MaskRsis);
    }
    return true;
}

function validateMask(evt, pattern) {
    try {
        if (pattern) {
            evt = Rsis.events.getEvent(evt);
            var rEvts = Rsis.events, object = rEvts.getTarget(evt), charValue = rEvts.getCode(evt);
            if (!evt.shiftKey && (charValue < rEvts.KEY_CAPSLOCK || charValue == rEvts.KEY_SPACE || charValue == rEvts.KEY_END || charValue == rEvts.KEY_HOME || charValue == rEvts.KEY_LEFT || charValue == rEvts.KEY_RIGHT || charValue == rEvts.KEY_DELETE)) {
                return true;
            }
            if (isFullText(pattern)) {
                return true;
            }
            if (getMapPattern(pattern) != null) {
                if (isTipo(getMapPattern(pattern), String.fromCharCode(charValue))) {
                    return true;
                } else {
                    return false;
                }
            } else {
                var lengthPattern = 0, stringArgs = pattern.split("::");
                if (stringArgs[0] == MaskRsis.DATE || stringArgs[0] == MaskRsis.DECIMAL || stringArgs[0] == MaskRsis.REGEXP || stringArgs[0] == MaskRsis.FONE) {
                    if (stringArgs[0] == MaskRsis.FONE) lengthPattern = getLengthMask(MaskRsis.MaskFone); else lengthPattern = getLengthMask(stringArgs[1]);
                } else {
                    if (stringArgs[0] == MaskRsis.NAME || stringArgs[0] == MaskRsis.RAZAO_SOCIAL) {
                        lengthPattern = getAtt(object, "maxLength");
                    } else {
                        lengthPattern = getLengthMask(stringArgs[0]);
                    }
                }
                if (object && object.value) {
                    if (stringArgs[0] === MaskRsis.CPF_CNPJ || stringArgs[0] === MaskRsis.CPF || stringArgs[0] === MaskRsis.CNPJ) {
                        lengthPattern = getLengthMaskCpfCnpj(object.value, stringArgs[0]);
                    }
                    var lengthField = getNOMaskMaxLength(object.value), isUpdateMaxLen = false;
                    if (isDecimal(pattern)) {
                        if (!hasDecimalSeparator(object.value, pattern)) {
                            object.setAttribute("isUpdateMaxLen", "false");
                            var scale = getScaleMask(pattern), maxlength = getAtt(object, "maxLength");
                            lengthPattern = maxlength - scale;
                        } else {
                            lengthPattern = getAtt(object, "maxLength");
                        }
                        decimalMaxLengthValidate(object, pattern);
                    }
                    if (isFone(pattern)) {
                        if (!hasFoneSeparator(object.value)) {
                            object.setAttribute("isUpdateMaxLen", "false");
                            var maxlength = getAtt(object, "maxLength");
                            lengthPattern = maxlength < 10 ? 10 : maxlength;
                            var foneMaxLength = getAtt(object, "foneMaxLength");
                            if (foneMaxLength != null && foneMaxLength !== "") {
                                lengthPattern = foneMaxLength < 9 ? 9 : foneMaxLength;
                            }
                        } else {
                            lengthPattern = getAtt(object, "maxLength");
                            lengthPattern = lengthPattern < 10 ? 10 : lengthPattern;
                            var foneMaxLength = getAtt(object, "foneMaxLength");
                            if (foneMaxLength != null && foneMaxLength !== "") {
                                lengthPattern = foneMaxLength < 9 ? 9 : foneMaxLength;
                            }
                        }
                        foneMaxLengthUpdate(object);
                    }
                    if (lengthField >= lengthPattern && !isDecimalSeparator(charValue) && !isFoneSeparator(charValue)) {
                        return false;
                    }
                }
                var rex = RegExpRsis.strArgsPatterns;
                switch (stringArgs[0]) {
                  case MaskRsis.FONE:
                    return isTipo(rex["FONE"], String.fromCharCode(charValue));

                  case MaskRsis.NAME:
                    return isMaskName(charValue);

                  case MaskRsis.RAZAO_SOCIAL:
                    return isMaskRazaoSocial(charValue);

                  case MaskRsis.DATE:
                    return isTipo(rex["NUMBER"], String.fromCharCode(charValue));

                  case MaskRsis.HOR:
                  case MaskRsis.MMSS:
                  case MaskRsis.HHMI:
                    return isTipo(rex["NUMBER"], String.fromCharCode(charValue));

                  case MaskRsis.MESANO:
                    return isTipo(rex["MMYYYY"], String.fromCharCode(charValue));

                  case MaskRsis.DECIMAL:
                    return isTipo(rex["MONEY"], String.fromCharCode(charValue));

                  case MaskRsis.INTEGER:
                    return isTipo(rex["0"], String.fromCharCode(charValue));

                  case MaskRsis.REGEXP:
                    return isTipo(stringArgs[1], String.fromCharCode(charValue));

                  case MaskRsis.CPF:
                  case MaskRsis.CNPJ:
                  case MaskRsis.CPF_CNPJ:
                    return isTipo(rex["0"], String.fromCharCode(charValue));

                  default:
                    var _p_ = MaskRsis.getPatternByLength(object, pattern);
                    return isTipo(rex[_p_ != null ? _p_ : "*"], String.fromCharCode(charValue));
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "validateMask()", MaskRsis);
    }
    return false;
}

function isMaskRazaoSocial(charValue) {
    return isMaskValidChar(charValue, true);
}

function isMaskName(charValue) {
    return isMaskValidChar(charValue, false);
}

function isMaskValidChar(charValue, validateException) {
    if (isNoEmpty(charValue)) {
        var isValid = false;
        if (validateException) {
            isValid = charValue > 44 && charValue < 58 || charValue == 38;
        }
        if (!isValid && charValue < 65 && charValue != 32 || charValue > 122 || charValue > 90 && charValue < 97) {
            return false;
        }
    }
    return true;
}

function removeMaskRazaoSocial(value) {
    return removeMaskValidChar(value, true);
}

function removeMaskName(value) {
    return removeMaskValidChar(value, false);
}

function removeMaskValidChar(value, validateException) {
    try {
        if (value == null || value === "") return "";
        var vr = Trim(value);
        var newValue = vr.replaceAll(" ", "");
        if (newValue.length == 1) return "";
        var isOk = true;
        var isValid = false;
        var ret = "", charValue = 0, s = String(vr);
        for (var i = 0; i < s.length; i++) {
            var isValidChar = true;
            charValue = s.charCodeAt(i);
            if (validateException) {
                isValid = charValue > 44 && charValue < 58 || charValue == 38;
            }
            if (!isValid && charValue < 65 && charValue != 32 || charValue > 122 || charValue > 90 && charValue < 97) {
                isValidChar = false;
            }
            if (isValidChar) {
                ret += s.charAt(i);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "removeMaskValidChar", MaskRsis);
    }
    return ret;
}

function fmtMaskName(value) {
    return removeMaskName(value);
}

MaskRsis.getPatternByLength = function(object, pattern) {
    try {
        if (object) {
            var position = object.value.length;
            var noMaskPattern = pattern.replaceAll(RegExpRsis.strArgsPatterns["NOMASK"], "");
            if (noMaskPattern != null && noMaskPattern !== "") {
                return noMaskPattern.charAt(position).toString();
            }
        }
    } catch (oErr) {
        outPrint(oErr, ".getPatternByLength", MaskRsis);
    }
    return null;
};

function _isRE(re) {
    return typeof re === "object" && typeof re.test === "function";
}

function justNumbersStr(s) {
    return String(s).replace(RegExpRsis.strArgsPatterns["JUSTNUMBER"], "");
}

function removeCaracs(_input, pattern) {
    try {
        if (_input) {
            if (_isRE(pattern)) {
                return;
            }
            if (isFullText(pattern)) {
                return true;
            }
            if (!getMapPattern(pattern)) {
                var vr = unformatField(_input.value, pattern);
                if (_input.value != vr) {
                    _input.value = vr;
                }
            }
            if (JRetail.browser.msie && _input.select) {
                _input.select();
            }
        }
    } catch (oErr) {
        outPrint(oErr, "removeCaracs", MaskRsis);
    }
}

function unformatField(valor, pattern) {
    try {
        if (!valor || valor.length == 0 || !pattern || pattern.length == 0) {
            return "";
        }
        var arrayType = pattern.split("::"), maskType = arrayType[0], maskValue = arrayType[1];
        switch (maskType) {
          case MaskRsis.FONE:
            return justFone(valor, maskType);

          case MaskRsis.NAME:
            return removeMaskName(valor);

          case MaskRsis.RAZAO_SOCIAL:
            return removeMaskRazaoSocial(valor);

          case MaskRsis.DATE:
            return justNumbersStr(valor);

          case MaskRsis.HOR:
            return removeMaskFieldHhmmss(valor);

          case MaskRsis.MMSS:
            return removeMaskFieldHhmmss(valor);

          case MaskRsis.HHMI:
            return removeMask(valor, "00:00");

          case MaskRsis.MESANO:
            return removeMask(valor, "00/0000");

          case MaskRsis.DECIMAL:
            return justDecimal(valor, maskValue);

          case MaskRsis.REGEXP:
            return removeSpcChars(valor, "text");

          case MaskRsis.CPF:
            return removeMaskCpfCnpj(valor, true);

          case MaskRsis.CNPJ:
            return removeMaskCpfCnpj(valor, false);

          case MaskRsis.CPF_CNPJ:
            return removeMaskCpfCnpj(valor);

          default:
            return removeMask(valor, maskType);
        }
    } catch (oErr) {
        outPrint(oErr, "unformatField", MaskRsis);
    }
}

function removeMask(value, pattern) {
    try {
        var string = "";
        if (pattern != null && pattern != "" && (value != null && value != "")) {
            for (var it = 0; it < pattern.length; it++) {
                var ch = pattern.charAt(it);
                if (value.charAt(it) === "a" || value.charAt(it) === "0" || value.charAt(it) !== ch) string += value.charAt(it) + "";
            }
        }
    } catch (oErr) {
        outPrint(oErr, "removeMask", MaskRsis);
    }
    return string;
}

function removeMaskCpfCnpj(value, isCpf) {
    if (isNoEmpty(value)) {
        if (typeof isCpf == "undefined") isCpf = true;
        var pattern = "000.000.000-00";
        if (!isCpf || getNOMaskMaxLength(value) > 11) {
            pattern = "00.000.000/0000-00";
        }
        return removeMask(value, pattern);
    }
}

function removeMaskFieldHhmmss(value) {
    if (isNoEmpty(value)) return removeMask(value, "00");
}

function removeSpcChars(vr, type) {
    var ret = "", re = RegExpRsis.strArgsPatterns["SPECIALCHAR"], c = 0, s = String(vr);
    for (var i = 0; i < s.length; i++) {
        var c = s.charCodeAt(i);
        if (c > 31 && c < 253 && (c < 127 || c > 191) && !re.test(c) || type === "textarea" && (c == 9 || c == 13 || c == 10)) ret += s.charAt(i);
    }
    return ret;
}

function justDecimal(valor, pattern) {
    if (isNoEmpty(valor)) {
        if (!valor || pattern === "") {
            return "";
        }
        var formatBR = false, SeparadorMilesimo = "", SeparadorMilesimo = "", rex = RegExpRsis.strArgsPatterns;
        if (new RegExp(rex["DOT"]).test(pattern)) {
            SeparadorMilesimo = ",";
            SeparadorDecimal = ".";
        } else if (new RegExp(rex["COMMA"]).test(pattern)) {
            SeparadorMilesimo = ".";
            SeparadorDecimal = ",";
            formatBR = true;
        }
        var pDec = valor.indexOf(SeparadorDecimal);
        var att = "";
        for (var i = 0; i < valor.length; i++) {
            att += (valor.charAt(i) + "").replace(SeparadorMilesimo, "");
        }
        if (att == NaN || att == undefined) return "";
        if (formatBR) {
            att = att.replace(",", ".");
            att = String(parseFloat(att));
            att = att.replace(".", ",");
        } else {
            att = parseFloat(att);
        }
        var args = pattern.split(SeparadorDecimal);
        if (pDec <= 0) {
            att = att + SeparadorDecimal + args[1];
        } else {
            var milhar = att.split(SeparadorDecimal)[0];
            var decimal = att.split(SeparadorDecimal)[1];
            att = milhar + SeparadorDecimal + String((decimal ? decimal : "") + args[1]).substring(0, args[1].length);
        }
        return att;
    }
    return "";
}

function formatDecimal(value, pattern) {
    if (isNoEmpty(value)) {
        value = value.replaceAll(",", "");
        value = value.replaceAll(".", ",");
    }
    return fmtMoney(value, pattern);
}

function fmtMoney(valor, pattern) {
    try {
        if (!valor || pattern == "") {
            return "";
        }
        valor = justDecimal(valor, pattern) + "";
        var SeparadorMilesimo = "", SeparadorDecimal = "", rex = RegExpRsis.strArgsPatterns;
        if (new RegExp(rex["DOT"]).test(pattern)) {
            SeparadorMilesimo = ",";
            SeparadorDecimal = ".";
        } else if (new RegExp(rex["COMMA"]).test(pattern)) {
            SeparadorMilesimo = ".";
            SeparadorDecimal = ",";
        }
        var neg = valor.indexOf("-") == 0, vraux = "", p = "", pDec = valor.indexOf(SeparadorDecimal), vrDec = valor.slice(pDec + 1);
        for (var i = pDec; i > (neg ? 1 : 0); i--) {
            p = i - pDec;
            if (i != pDec && p % 3 == 0) {
                vraux += SeparadorMilesimo;
            }
            vraux += valor.charAt(i - 1);
        }
        return (neg ? "-" : "") + invertStr(vraux) + SeparadorDecimal + vrDec;
    } catch (oErr) {
        outPrint(oErr, "fmtMoney", MaskRsis);
    }
}

function justFone(valor) {
    if (isNoEmpty(valor)) {
        if (!valor) {
            return "";
        }
        if (valor.search(/\-/) > -1) {
            valor = valor.replaceAll("-", "");
        }
        return valor;
    }
    return "";
}

function formatFone(value) {
    return fmtFone(value, MaskRsis.MaskFone);
}

function fmtFone(valor, pattern) {
    try {
        if (!valor) {
            return "";
        }
        if (typeof pattern == "undefined") {
            pattern = MaskRsis.MaskFone;
        }
        if (valor.search(/\-/) > -1) {
            valor = valor.replaceAll("-", "");
        }
        var vraux = "";
        if (valor.length > 4) {
            vraux = valor.substring(0, valor.length - 4) + "-" + valor.substring(valor.length - 4, valor.length);
        } else {
            vraux = valor;
        }
    } catch (oErr) {
        outPrint(oErr, "fmtFone", MaskRsis);
    }
    return vraux;
}

function formatInteger(value) {
    return isNoEmpty(value) ? toInt(Math.floor(converteNumero(value))) : "";
}

function fmtToInteger(valor) {
    var stringMask = "";
    if (!valor) {
        return "";
    }
    if (getMapPattern("0") != null) {
        for (var i = 0; i < valor.length; i++) {
            if (isTipo(getMapPattern("0"), valor.charAt(i))) {
                stringMask += valor.charAt(i);
            }
        }
    }
    stringMask = Math.floor(converteNumero(stringMask));
    return stringMask;
}

function maskDate(input, pattern) {
    try {
        var stringDate = "";
        if (input.value !== "") {
            var inputTextDate = input.value;
            var count = 0;
            var arry = new Array();
            for (var k = 0; k < pattern.length; k++) {
                if (inputTextDate.charAt(k) && !isTipo(RegExpRsis.strArgsPatterns["NUMBER"], inputTextDate.charAt(k))) {
                    return "";
                }
                if (count < inputTextDate.length) {
                    if (RegExpRsis.strArgsPatterns["/:space"].test(pattern.charAt(k))) {
                        arry.push(pattern.charAt(k));
                    } else {
                        arry.push(inputTextDate.charAt(count));
                        count++;
                    }
                }
            }
            if (arry.length > 0) {
                var arry = arry.reverse();
                while (arry.length > 0) {
                    stringDate += arry.pop();
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "maskDate", MaskRsis);
    }
    return stringDate;
}

function formatCpfCnpj(value, isCpf) {
    if (isNoEmpty(value)) {
        var cpf_pattern = "000.000.000-00", cnpj_pattern = "00.000.000/0000-00", pattern = "";
        if (isBoolean(isCpf)) {
            pattern = isCpf ? cpf_pattern : cnpj_pattern;
        } else {
            pattern = cpf_pattern;
            var length = getNOMaskMaxLength(value);
            if (length > 11 && length < 15) {
                pattern = cnpj_pattern;
            }
        }
        return fmtDefaultMask(value, pattern);
    }
}

function formatFieldHHmmss(value) {
    if (isNoEmpty(value)) return fmtDefaultMask(value, "00");
}

function formatDefaultMask(value, pattern) {
    return fmtDefaultMask(value, pattern);
}

function fmtDefaultMask(value, pattern) {
    try {
        var stringMask = "";
        if (isEmpty(value)) return "";
        if (isNoEmpty(value) && isEmpty(pattern)) return value;
        var stringPattern = removeMask(pattern, pattern);
        if (stringPattern != "") {
            var add = false;
            for (var itp = 0; itp < pattern.length; itp++) {
                var ipatternp = getMapPattern(pattern.charAt(itp));
                if (ipatternp != null && isTipo(ipatternp, stringPattern.charAt(itp))) {
                    add = true;
                }
            }
            if (add) {
                value = (stringPattern + value).substr(value.length, stringPattern.length);
            }
        }
        var count = 0;
        for (var i = 0; i < pattern.length; i++) {
            var charValue = value.charAt(count), charPattern = pattern.charAt(i), ipattern = getMapPattern(pattern.charAt(i));
            if (ipattern == undefined || ipattern == null) {
                var init = pattern.indexOf(charPattern);
                var end = pattern.lastIndexOf(charPattern);
                if (value.length < pattern.length) {
                    if (init != -1 && end != -1) {
                        stringMask += charPattern;
                        count--;
                    }
                }
            } else {
                if (ipattern != null && isTipo(ipattern, charValue)) {
                    stringMask += charValue;
                }
            }
            count++;
        }
    } catch (oErr) {
        outPrint(oErr, "fmtDefaultMask", MaskRsis);
    }
    return stringMask;
}

function invertStr(s) {
    var t = "";
    for (var i = 0; i < s.length; i++) t = s.charAt(i) + t;
    return t;
}

function removeStr(src, arg) {
    var v = typeof arg === "string" ? [ arg ] : arg;
    var r = "";
    for (var i = 0; i < v.length; i++) r = changeStr(src, v[i], "");
    return r;
}

function changeStr(src, from, to) {
    var i;
    var src = String(src), li = 0, lFrom = from.length, dst = "";
    while ((i = src.indexOf(from, li)) != -1) {
        dst += src.substring(li, i) + to;
        li = i + lFrom;
    }
    dst += src.substring(li);
    return dst;
}

function repeatStr(src, str, size, orient) {
    var r = String(src);
    if (!orient) orient = "left";
    while (r.length < size) {
        r = orient.toLowerCase() == "right" ? r + str : str + r;
    }
    return r;
}

function getMapPattern(pattern) {
    if (pattern != "") return RegExpRsis.strArgsPatterns[pattern];
    return null;
}

function isFullText(pattern) {
    if (pattern && pattern != "") return isTipo(RegExpRsis.strArgsPatterns["TEXT"], pattern);
    return false;
}

function isTipo(pattern, stringValue) {
    try {
        var regExp = new RegExp(pattern);
        return regExp.test(stringValue);
    } catch (e) {
        outPrint(oErr, "isTipo()", MaskRsis);
        return false;
    }
}

function dataTableMask(value, pattern) {
    try {
        var stringMask = "";
        if (value === "") return stringMask;
        if (!(value && value.length > 0)) return stringMask;
        if (getMapPattern(pattern) != null) {
            for (var i = 0; i < value.length; i++) {
                if (isTipo(getMapPattern(pattern), String.fromCharCode(value[i]))) {
                    stringMask = stringMask + value[i];
                }
            }
        } else {
            var stringArgs = pattern.split("::"), stringPattern = stringArgs[0];
            switch (stringPattern) {
              case MaskRsis.DATE:
                return formatDateFormPattern(value, stringArgs[1]);

              case MaskRsis.MESANO:
                return formatDateFormPattern(value, "MM/yyyy");

              case MaskRsis.FONE:
                return formatFone(value);

              case MaskRsis.CPF:
                return formatCpfCnpj(value, true);

              case MaskRsis.DECIMAL:
                return formatDecimal(value, stringArgs[1], "");

              case MaskRsis.INTEGER:
                return formatInteger(value);

              case MaskRsis.NAME:
                return removeMaskName(value);

              case MaskRsis.RAZAO_SOCIAL:
                return removeMaskRazaoSocial(value);

              case MaskRsis.CNPJ:
                return formatCpfCnpj(value, false);

              case MaskRsis.CPF_CNPJ:
                return formatCpfCnpj(value);

              default:
                return formatDefaultMask(value, stringArgs[0]);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "dataTableMask", MaskRsis);
    }
    return stringMask;
}

function formatDateFormPattern(value, pattern) {
    if (value != null) {
        value = value.split(" ");
        var year = "", month = "", day = "", hour = "", minute = "", second = "";
        if (value[0]) {
            var date = value[0].split("/");
            var year = date[0];
            var month = date[1];
            var day = date[2];
            pattern = pattern.replace("yyyy", year);
            pattern = pattern.replace("MM", month);
            pattern = pattern.replace("dd", day);
        }
        if (value[1]) {
            var time = value[1].split(":");
            var hour = time[0];
            var minute = time[1];
            var second = time[2];
            pattern = pattern.replace("HH", hour);
            pattern = pattern.replace("mm", minute);
            pattern = pattern.replace("ss", second);
        }
    }
    return pattern;
}

function formatDateServerPattern(value, pattern) {
    if (isEmpty(value)) return "";
    if (pattern == "yyyy/MM/dd HH:mm:ss") {
        return value;
    }
    var pos = pattern.indexOf("yyyy"), year = value.substring(pos, pos + 4), pos = pattern.indexOf("MM"), month = value.substring(pos, pos + 2), pos = pattern.indexOf("dd"), day = value.substring(pos, pos + 2), pos = pattern.indexOf("HH"), hour = pos == -1 ? 0 : value.substring(pos, pos + 2), pos = pattern.indexOf("mm"), minute = pos == -1 ? 0 : value.substring(pos, pos + 2), pos = pattern.indexOf("ss"), second = pos == -1 ? 0 : value.substring(pos, pos + 2);
    return year + "/" + month + "/" + day + " " + formatHHmmss(hour, minute, second);
}

function formatHHmmss(HOUR, MINUTES, SECONDS) {
    var strHOUR = "", strMINUTES = "", strSECONDS = "";
    if (parseInt(HOUR) < 10 && HOUR.toString().length < 2) strHOUR = "0" + HOUR; else strHOUR = HOUR;
    if (parseInt(MINUTES) < 10 && MINUTES.toString().length < 2) strMINUTES = "0" + MINUTES; else strMINUTES = MINUTES;
    if (parseInt(SECONDS) < 10 && SECONDS.toString().length < 2) strSECONDS = "0" + SECONDS; else strSECONDS = SECONDS;
    return strHOUR + ":" + strMINUTES + ":" + strSECONDS;
}

function getNOMaskMaxLength(value) {
    value = value.replaceAll(RegExpRsis.strArgsPatterns["NOMASK"], "");
    return value.length;
}

function getLengthMask(value) {
    value = value.replaceAll(RegExpRsis.strArgsPatterns["/:-space,.()"], "");
    return value.length;
}

function getLengthMaskCpfCnpj(value, pattern) {
    if (isNoEmpty(value)) {
        if (pattern === MaskRsis.CPF_CNPJ) {
            var length = getNOMaskMaxLength(value), pattern = "000.000.000-00";
            if (length >= 11 && length < 15) {
                pattern = "00.000.000/0000-00";
            }
            return getNOMaskMaxLength(pattern);
        } else {
            return pattern === MaskRsis.CPF ? 11 : 14;
        }
    }
    return 0;
}

function getScaleMask(pattern) {
    if (isNoEmpty(pattern)) {
        var SeparadorDecimal = "", rex = RegExpRsis.strArgsPatterns;
        if (new RegExp(rex["DOT"]).test(pattern)) {
            SeparadorDecimal = ".";
        } else if (new RegExp(rex["COMMA"]).test(pattern)) {
            SeparadorDecimal = ",";
        }
        var decimalString = pattern.split(SeparadorDecimal)[1];
        return decimalString.length;
    }
    return 0;
}

function hasDecimalSeparator(value, pattern) {
    if (isNoEmpty(pattern)) {
        var SeparadorDecimal = "", rex = RegExpRsis.strArgsPatterns;
        if (new RegExp(rex["DOT"]).test(pattern)) {
            return new RegExp(rex["DOT"]).test(value);
        } else if (new RegExp(rex["COMMA"]).test(pattern)) {
            return new RegExp(rex["COMMA"]).test(value);
        }
    }
    return false;
}

function isDecimalSeparator(charValue) {
    if (isNoEmpty(charValue)) {
        var rex = RegExpRsis.strArgsPatterns;
        return new RegExp(rex["DOT"]).test(String.fromCharCode(charValue)) ? true : new RegExp(rex["COMMA"]).test(String.fromCharCode(charValue)) ? true : false;
    }
    return false;
}

function isDecimal(pattern) {
    if (isNoEmpty(pattern)) return RegExpRsis.strArgsPatterns["DECIMAL"].test(pattern.split("::")[0]);
    return false;
}

function hasFoneSeparator(value) {
    var SeparadorFone = "", rex = RegExpRsis.strArgsPatterns, pattern = MaskRsis.MaskFone;
    if (new RegExp(/\-/).test(pattern)) {
        return new RegExp(/\-/).test(value);
    }
    return false;
}

function isFoneSeparator(charValue) {
    if (charValue != null && charValue !== "") {
        return new RegExp(/\-/).test(String.fromCharCode(charValue)) ? true : false;
    }
    return false;
}

function isFone(pattern) {
    if (pattern != null && pattern !== "") {
        var regExp = new RegExp(/^fone$/);
        return regExp.test(pattern.split("::")[0]);
    }
    return false;
}

function isInteger(pattern) {
    if (pattern != null && pattern !== "") return RegExpRsis.strArgsPatterns["INTEGER"].test(pattern.split("::")[0]);
    return false;
}

function updateLengthMaskDefault(value, pattern) {
    var stringMask = "";
    if (value == null || value === "") {
        return "";
    }
    if ((value == null || value === "") && (pattern == null || pattern === "")) {
        return "";
    } else if (value != null && value !== "" && (pattern == null || pattern === "")) {
        return value;
    }
    var stringArgs = pattern.split("::");
    var stringPatter = stringArgs[0];
    if (getMapPattern(pattern) == null && stringPatter !== MaskRsis.DATE && stringPatter !== MaskRsis.MESANO && stringPatter !== MaskRsis.INTEGER && stringPatter !== MaskRsis.DECIMAL && stringPatter !== MaskRsis.FONE) {
        var stringPattern = removeMask(pattern, pattern);
        if (stringPattern !== "") {
            var add = false;
            for (var itp = 0; itp < pattern.length; itp++) {
                var ipatternp = getMapPattern(pattern.charAt(itp));
                if (ipatternp != null && isTipo(ipatternp, stringPattern.charAt(itp))) {
                    add = true;
                }
            }
            if (add) {
                value = (stringPattern + value).substr(value.length, stringPattern.length);
            }
        }
    }
    return value;
}

function decimalMaxLengthValidate(object, pattern) {
    if (object && object.value != "" && pattern != "") {
        var lengthField = object.value.length;
        var lengthPattern = getAtt(object, "maxlength");
        var isUpdateMaxLen = object.getAttribute("isUpdateMaxLen") === "true" ? false : true;
        var isMaxLength = isUpdateMaxLen && lengthField == lengthPattern;
        if (isMaxLength && isUpdateMaxLen) {
            var mxl = !isNaN(parseInt(object.getAttribute("maxlength"))) ? parseInt(object.getAttribute("maxlength")) + 1 : null;
            if (mxl != null) {
                var maxlen = object.getAttribute("maxlen");
                if (maxlen == null || maxlen === "") {
                    object.setAttribute("maxlen", object.getAttribute("maxlength"));
                }
                object.setAttribute("maxlength", mxl);
                object.setAttribute("maxLength", mxl);
                object.setAttribute("isUpdateMaxLen", "true");
            }
        } else {
            var maxlen = object.getAttribute("maxlen");
            if (!isMaxLength && lengthField != maxlen && maxlen != null && maxlen != "") {
                object.setAttribute("maxlength", maxlen);
                object.setAttribute("maxLength", maxlen);
                object.setAttribute("isUpdateMaxLen", "false");
            }
        }
    }
}

function foneMaxLengthUpdate(object) {
    if (object) {
        var lengthPattern = getAtt(object, "maxlength");
        if (lengthPattern != null && lengthPattern !== "") lengthPattern = lengthPattern < 10 ? 10 : lengthPattern;
        var foneMaxLength = getAtt(object, "foneMaxLength");
        if (foneMaxLength != null && foneMaxLength !== "") {
            lengthPattern = foneMaxLength < 9 ? 9 : foneMaxLength;
        }
        if (lengthPattern) {
            object.setAttribute("maxlength", lengthPattern);
        }
    }
}

(function($R) {
    LabelRsis = {
        _FILE: "022labelRsis.js",
        version: JRetail.rsis.VersionJS,
        render: function() {
            return renderLabel.apply(this, arguments);
        }
    };
})(Rsis);

function renderLabel(label, status) {
    try {
        if (label) {
            var _rsLabel = $R(label);
            var nodes = null, $win = UtilRsis.getParentWindow(label), sEvent = getStringEvent(label);
            if (_rsLabel.isRenderAll()) {
                nodes = xmlToLabel(label);
                _rsLabel.visRestricted(status);
            }
            var value = Rsis.browser.ie ? label.getAttribute("value") : label.getAttribute("value") == null ? label.value : label.getAttribute("value");
            if (value != undefined && value != null && value !== "") {
                label.innerHTML = value;
            }
            Rsis.events.add(label, "onblur", "return " + $win + "SelectBox.close(this, " + sEvent + ");");
            _rsLabel.txtAlign().cssHelp().widthCol().renderDev(nodes, arguments[2]);
            label = null;
        }
    } catch (oErr) {
        outPrint(oErr, "renderLabel", LabelRsis);
    }
}

function clearLabelEditTable(label, status) {
    try {
        if (label) {
            var _rsLabel = $R(label);
            xmlToLabel(label);
            _rsLabel.visRestricted(status).widthCol();
            label.innerHTML = "";
        }
    } catch (oErr) {
        outPrint(oErr, "clearLabelEditTable", LabelRsis);
    }
}

function clearLabel(label) {
    try {
        if (label) {
            label.innerHTML = "";
        }
    } catch (oErr) {
        outPrint(oErr, "clearLabel", LabelRsis);
    }
}

function xmlToLabel(label) {
    try {
        var nodes = null;
        if (label) {
            var _rsLabel = $R(label), UIContext = Rsis.UIContext.get(label), UIForm = UIContext.getUIForm(label), domainXML = getDomainXML(label, UIForm);
            if (domainXML) {
                var pathNode = _rsLabel.getPathNode();
                if (pathNode != null && pathNode !== "") {
                    var attributeNode = _rsLabel.getAttNode(), mask = _rsLabel.getMask(), valueAtt = "";
                    nodes = getNodes(domainXML, ROOT_NODE + pathNode);
                    if (mask != null && mask !== "") {
                        if (attributeNode != undefined && attributeNode !== "") {
                            valueAtt = _rsLabel.toField(getNodeValue(nodes, attributeNode));
                        } else {
                            valueAtt = _rsLabel.toField(getNodeText(nodes[0]));
                        }
                    } else {
                        valueAtt = attributeNode != undefined && attributeNode !== "" ? getNodeValue(nodes, attributeNode) : getNodeText(nodes[0]);
                    }
                    label.innerHTML = valueAtt;
                    UtilRsis.setHint(label);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "xmlToLabel()", LabelRsis);
    }
    return nodes;
}

function configLabel(label, configXML) {
    try {
        if (label && configXML != null) {
            var labelId = getAttMandatory(label, "id");
            if (labelId != null && labelId !== "") {
                var _id_ = labelId.split(":")[1], configNodes = getNodes(configXML, ROOT_NODE + "/configComponents/labels/label[@id='" + _id_ + "']");
                if (configNodes && configNodes.length > 0) {
                    label.node = configNodes[0].getAttribute("node");
                    label.setAttribute("node", configNodes[0].getAttribute("node"));
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "configLabel()", LabelRsis);
    }
}

function renderHelpLabel(object, UIForm, enableHelp) {
    try {
        renderHelp(object, UIForm, enableHelp);
    } catch (oErr) {
        outPrint(oErr, "renderHelpLabel()", LabelRsis);
    }
}

function renderHelpKeysLabel(object, UIForm, enableHelp) {
    try {
        renderHelpKeys(object, UIForm, enableHelp);
    } catch (oErr) {
        outPrint(oErr, "renderHelpKeysLabel()", LabelRsis);
    }
}

var _NO_RENDER_INPUT = false;

(function($R) {
    InputRsis = {
        _FILE: "023inputRsis.js",
        version: JRetail.rsis.VersionJS,
        vClass: [ "iptReq", "ipt", "iptRdy" ],
        render: function() {
            return renderInput.apply(this, arguments);
        },
        setCalendarInput: function(input) {
            formatIptToXml(input);
        },
        getPwdBox: function(iframe) {
            try {
                var doc = document;
                var list = null;
                if (iframe != null) {
                    doc = getIframeDocument(iframe);
                    list = $frame(iframe.id, "pwdBox");
                } else {
                    list = $("pwdBox");
                }
            } catch (oErr) {
                outPrint(oErr, "getPwdBox", this);
            }
            return list;
        }
    };
})(Rsis);

function renderInput(input, status) {
    if (input) {
        var nodes = null, $win = UtilRsis.getParentWindow(input), sEvent = getStringEvent(input), events = Rsis.events, wdtIpt = $(input.id + ".wdtIpt"), nObjWdtBtns = $(input.id + ".wdtBtns"), wdtBtns = 0;
        if ($R(input).isRenderAll()) {
            var objectCalendar = null, pattern = $R(input).getMask(), strPattern = pattern.split("::");
            if (strPattern && strPattern.length > 0 && strPattern[0] == MaskRsis.DATE) {
                objectCalendar = $(input.id + ".calendar");
            }
            var _PwdBox = InputRsis.getPwdBox($R(input).getIframe());
            if (_PwdBox) {
                _PwdBox.style.display = "none";
            }
            if ($R(input).isEditable(status)) {
                $R(input).rdOnly(false);
                if (objectCalendar != null) {
                    objectCalendar.onclick = new Function("return " + getAtt(objectCalendar, "click"));
                    $R(objectCalendar).rdOnly(false).visible(true);
                    $R(input).visRestricted(status, objectCalendar);
                    wdtBtns = "20px";
                    setDataUICpt(input, objectCalendar);
                }
                $R(input).setMandatory(status, InputRsis.vClass);
                _NO_RENDER_INPUT = $R(input).isColHeader();
                var on_focus = $win + "removeCaracs(this,'" + pattern + "');";
                if (input.getAttribute("on-focus") != null) {
                    on_focus = on_focus + " return " + $win + input.getAttribute("on-focus");
                } else {
                    on_focus = " return " + on_focus;
                }
                var on_blur = $win + "blurInputToXML(this, " + sEvent + ");";
                if (input.getAttribute("on-blur") != null) {
                    on_blur = on_blur + " return " + $win + input.getAttribute("on-blur");
                } else {
                    on_blur = "return " + on_blur;
                }
                events.add(input, "onblur", $win + "SelectBox.close(this," + sEvent + "); " + on_blur).add("onkeypress", "return " + $win + "validateMask(" + sEvent + ", '" + pattern + "');").add("onfocus", on_focus);
                if (input.getAttribute("on-change") != null) {
                    var change = " return " + $win + input.getAttribute("on-change");
                    events.add("onchange", $win + "blurInputToXML(this, " + sEvent + "); " + change);
                }
                var validatePwdStrength = getAtt(input, "validatePwdStrength");
                if (input.type.toLowerCase() === "password" && validatePwdStrength === "true") {
                    events.add(input, "onkeyup", "return " + $win + "JRetail.Pwd.check(this);");
                }
                if (input.getAttribute("keyup") != null) {
                    events.add(input, "onkeyup", "return " + $win + input.getAttribute("keyup"));
                }
                if (input.getAttribute("keydown") != null) {
                    events.add(input, "onkeydown", "return " + $win + input.getAttribute("keydown"));
                }
                if (input.getAttribute("blurr") != null && input.getAttribute("blurr") !== "") {
                    events.add(input, "onblur", input.getAttribute("blurr"));
                }
                $R(input).setFocus();
            } else {
                $R(input).rdOnly(true, InputRsis.vClass);
                events.add(input, "onblur", "return " + $win + "SelectBox.close(this, " + sEvent + ");").add("onfocus", "").add("onchange", "");
                if (input.getAttribute("keydown") != null) input.setAttribute("onkeydown", "");
                if (input.getAttribute("keyup") != null) input.setAttribute("onkeyup", "");
                if (objectCalendar != null) {
                    objectCalendar.onclick = "void(0);";
                    $R(objectCalendar).rdOnly(true).visible(false);
                    wdtBtns = "0px";
                }
            }
            events.add(input, "onclick", $win + "SelectBox.close(this, " + sEvent + ");");
            if (objectCalendar) {
                renderCSSButton(objectCalendar, "btnCalDsd");
            }
            if (objectCalendar && wdtIpt) {
                wdtIpt.style.marginRight = wdtBtns;
            }
            if (objectCalendar && nObjWdtBtns) {
                nObjWdtBtns.style.width = wdtBtns;
            }
            $R(input).txtAlign();
            nodes = xmlToInput(input);
            $R(input).execDev().visRestricted(status);
        }
        $R(input).setTabIdx(status).cssHelp().widthCol().renderDev(nodes, arguments[2]);
        input = null;
    }
}

function clearInputEditTable(input, status) {
    if (input) {
        var sEvent = getStringEvent(input), $win = UtilRsis.getParentWindow(input), objectCalendar = null, events = Rsis.events, wdtIpt = $(input.id + ".wdtIpt"), nObjWdtBtns = $(input.id + ".wdtBtns"), wdtBtns = 0;
        var pattern = $R(input).getMask(), strPattern = pattern.split("::");
        if (strPattern && strPattern.length > 0 && strPattern[0] == MaskRsis.DATE) {
            objectCalendar = $(input.id + ".calendar");
        }
        if ($R(input).isEditable(status)) {
            $R(input).rdOnly(false).setMandatory(status, InputRsis.vClass);
            input.tabIndex = 0;
            _NO_RENDER_INPUT = $R(input).isColHeader();
            events.add(input, "onblur", "return " + $win + "blurInputToXML(this, " + sEvent + ");").add("onfocus", "return " + $win + "removeCaracs(this,'" + pattern + "');").add("onkeypress", "return " + $win + "validateMask(" + sEvent + ", '" + pattern + "');");
            if (input.getAttribute("on-change") != null) {
                events.add("onchange", "return " + $win + "blurInputToXML(this, " + sEvent + ");");
            }
            if (input.getAttribute("keyup") != null) {
                events.add(input, "onkeyup", "return " + $win + input.getAttribute("keyup"));
            }
            if (input.getAttribute("keydown") != null) {
                events.add(input, "onkeyup", "return " + $win + input.getAttribute("keydown"));
            }
        } else {
            $R(input).rdOnly(true, InputRsis.vClass);
            events.add(input, "onkeyup", "return " + $win + "SelectBox.close(this, " + sEvent + ");");
            input.tabIndex = -1;
            if (input.getAttribute("keydown") != null) input.setAttribute("onkeydown", "");
            if (input.getAttribute("keyup") != null) input.setAttribute("onkeyup", "");
            if (objectCalendar != null) {
                objectCalendar.onclick = "void(0);";
                $R(objectCalendar).rdOnly(true).visible(false);
                wdtBtns = "0px";
            }
            if (objectCalendar && wdtIpt) {
                wdtIpt.style.marginRight = wdtBtns;
            }
            if (objectCalendar && nObjWdtBtns) {
                nObjWdtBtns.style.width = wdtBtns;
            }
        }
        input.value = "";
        input = null;
    }
}

function clearInput(input) {
    if (input) {
        input.value = "";
    }
}

function isEnterInputKey(obj, evt, pattern) {
    evt = Rsis.events.getEvent(evt);
    if (isEnterKeyDown(evt)) blurInputToXML(obj, evt);
    return true;
}

function blurInputToXML(input, evt) {
    try {
        evt = Rsis.events.getEvent(evt);
        if (input && evt && !_NO_RENDER_INPUT) {
            formatIptToXml(input);
        }
        return true;
    } catch (oErr) {
        outPrint(oErr, "blurInputToXML", InputRsis);
        return false;
    }
}

function formatIptToXml(input) {
    if (input) {
        $R(input).upper();
        formatField(input, $R(input).getMask());
        inputToXML(input);
    }
}

function inputToXML(input) {
    if (input) {
        var UIContext = Rsis.UIContext.get(input), minlength = getAtt(input, "minlength"), attribute = "node";
        if (minlength != null && minlength !== "") {
            var component = getAtt(input, "component");
            if (component === "input" && !validadeInputLength(input, parseInt(minlength), 10)) {
                return false;
            }
        }
        var mask = $R(input).getMask(), UIForm = UIContext.getUIForm(input), domainXML = getDomainXML(input, UIForm);
        if (domainXML != null) {
            var pathNode = $R(input).getPathNode();
            if (pathNode == null || pathNode === "") {
                pathNode = UIForm.getXPath();
            }
            if (pathNode != null && pathNode !== "") {
                var attributeNode = $R(input).getAttNode(), nodes = getNodes(domainXML, pathNode), numberToString = getAtt(input, "numberToString"), mask = $R(input).getMask();
                var valueAtt = $R(input).toXML(input.value), valueAttString = valueAtt;
                if (typeof attributeNode != "undefined" && attributeNode !== "") {
                    if (nodes && nodes.length > 0) {
                        var valueAttNode = nodes[0].getAttribute(attributeNode);
                        if (mask !== "a" && mask !== "*" && mask !== "0-Z" && mask !== "text" && mask !== MaskRsis.NAME && mask !== MaskRsis.RAZAO_SOCIAL && !MaskRsis.isDate(mask) && !MaskRsis.isMesAno(mask)) {
                            var valueAttFloat = parseFloat(valueAtt), valueAttNodeFloat = parseFloat(valueAttNode);
                            valueAtt = Rsis.isNumeric(valueAttFloat) ? valueAttFloat : valueAtt;
                            valueAttNode = Rsis.isNumeric(valueAttNodeFloat) ? valueAttNodeFloat : valueAttNode;
                        }
                        if (valueAttNode !== valueAtt && (valueAttNode != null || valueAttNode == null && valueAtt !== "")) {
                            nodes[0].setAttribute("changedNode", "yes");
                            Crud.savedNode(UIForm);
                        }
                    }
                    if (numberToString === "true") {
                        valueAtt = valueAttString;
                    }
                    setAttributeNode(nodes, attributeNode, valueAtt);
                } else {
                    setTextNode(nodes[0], valueAtt);
                }
                setDomainXML(input, UIForm, domainXML, getAttMandatory(input, attribute));
                UIContext.setUIForms(UIForm);
            }
        }
    }
    return true;
}

function xmlToInput(input) {
    var nodes = null;
    if (input) {
        var UIContext = Rsis.UIContext.get(input);
        if (input.type && input.type.toLowerCase() === "password") {
            input.value = "";
        } else {
            var UIForm = UIContext.getUIForm(input), domainXML = getDomainXML(input, UIForm);
            if (domainXML != null) {
                var component = getAtt(input, "component");
                if (component !== "comboBox" && component !== "searchField") {
                    var pathNode = $R(input).getPathNode();
                    if (pathNode == null || pathNode === "") {
                        pathNode = UIForm.getXPath();
                    }
                    if (pathNode != null && pathNode !== "") {
                        var attributeNode = $R(input).getAttNode(), mask = $R(input).getMask(), valueAtt = "";
                        nodes = getNodes(domainXML, pathNode);
                        if (mask != null && mask !== "") {
                            if (attributeNode != undefined && attributeNode !== "") {
                                valueAtt = $R(input).toField(getNodeValue(nodes, attributeNode));
                            } else {
                                valueAtt = $R(input).toField(getNodeText(nodes[0]));
                            }
                        } else {
                            valueAtt = attributeNode != undefined && attributeNode !== "" ? getNodeValue(nodes, attributeNode) : getNodeText(nodes[0]);
                        }
                        input.value = valueAtt;
                    }
                }
            }
            $R(input).setHint();
        }
    }
    return nodes;
}

function pressKey(obj, evt, toolBarId) {
    return obj && evt && toolBarId ? UtilRsis.pressKey(evt, obj.id, obj.id + ":" + toolBarId) : false;
}

function validadeInputLength(input, num) {
    if (input.value.length < num) {
        var stMsg = getMessageBundle("ERROR_STRING_LENGTH");
        alert(stMsg.replace("[XXX]", num));
        return false;
    }
    return true;
}

function renderHelpInput(object, UIForm, enableHelp) {
    if (object) {
        renderHelp(object, UIForm, enableHelp);
        object = null;
    }
}

function renderHelpKeysInput(object, UIForm, enableHelp) {
    if (object) {
        renderHelpKeys(object, UIForm, enableHelp);
        object = null;
    }
}

function configInput(input, configXML) {
    if (input && configXML != null) {
        var inputId = getAttMandatory(input, "id");
        if (inputId != null && inputId !== "") {
            var _id_ = inputId.split(":")[1], configNodes = getNodes(configXML, ROOT_NODE + "/configComponents/inputTexts/inputText[@id='" + _id_ + "']");
            if (configNodes && configNodes.length > 0) {
                input.node = configNodes[0].getAttribute("node");
                input.setAttribute("node", configNodes[0].getAttribute("node"));
            }
        }
    }
}

(function($R) {
    EditTableRsis = {
        _FILE: "024editTableRsis.js",
        version: JRetail.rsis.VersionJS,
        clazz: "EditTableRsis.",
        WIDTH: 0,
        COUNT_LINES: 0,
        isFirstCell: 0,
        render: function() {
            return renderEditTable.apply(this, arguments);
        },
        setCountLines: function(p) {
            this.COUNT_LINES = p;
        },
        createLines: function(UIForm, editTable, tBody, nodes, rowsNumber, createdLines) {
            try {
                var ETR = EditTableRsis, hasNodes = nodes && nodes.length > 0 ? true : false;
                for (var m = 0; m < rowsNumber; m++) {
                    createdLines++;
                    ETR.setCountLines(createdLines);
                    createRowEditTable(UIForm, editTable, tBody, m, ETR.COUNT_LINES, null);
                    editTable.setAttribute("createdLines", createdLines);
                    if (hasNodes == false) {
                        var cps = getComponents(tBody.rows[m]);
                        if (cps != null) {
                            var sts = UIRsis.INITIAL;
                            if (m == 0) {
                                sts = UIRsis.INCLUDING;
                                if (ETR.isRadioButton(tBody, m) == true) {
                                    tBody.rows[m].cells[0].childNodes[0].click();
                                }
                            }
                            renderForm(cps, sts);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".createLines", this);
            }
        },
        renderLineByXML: function(UIForm, editTable, tBody, nodes, rowsNumber, maxRowsTable, createdLines) {
            try {
                if (nodes && nodes.length > 0) {
                    var UIContext = Rsis.UIContext.get(editTable);
                    var maxNodes = nodes.length, p = 0, k = 0, ETR = this;
                    for (;p < nodes.length; p++) {
                        nodes[p].setAttribute("countRowsTable", p);
                        if (createdLines > maxNodes && createdLines < maxRowsTable) {
                            createRowEditTable(UIForm, editTable, tBody, p, ETR.COUNT_LINES, nodes);
                            editTable.setAttribute("createdLines", createdLines);
                        } else {
                            updateIdRowEditTable(UIForm, editTable, tBody, p, ETR.COUNT_LINES, nodes);
                        }
                    }
                    UIContext.setUIForms(UIForm.getForm().id, UIForm);
                    var sts = UIForm.state;
                    while (k < maxNodes) {
                        var cps = getComponents(tBody.rows[k++]);
                        if (cps != null) {
                            renderForm(cps, sts);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".renderLineByXML", this);
            }
        },
        renderLineAsIncluding: function(cps) {
            try {
                if (cps != null) {
                    renderForm(cps, UIRsis.INCLUDING);
                }
            } catch (oErr) {
                outPrint(oErr, ".renderLineAsIncluding", this);
            }
        },
        isRadioButton: function(tBody, m) {
            try {
                return tBody.rows[m] && tBody.rows[m].cells[0] && tBody.rows[m].cells[0].childNodes[0] && tBody.rows[m].cells[0].childNodes[0].type === "radio";
            } catch (oErr) {
                outPrint(oErr, ".isRadioButton", this);
            }
        },
        keypressAddRow: function(object, evt) {
            if (isEnterKeyPress(evt)) {
                TableRsis.addRow(object);
            }
        },
        addRow: function(object) {
            TableRsis.addRow(object);
        },
        keypressDelRow: function(object, evt) {
            if (isEnterKeyPress(evt)) {
                TableRsis.deleteRow(object);
            }
        },
        deleteRow: function(object) {
            TableRsis.deleteRow(object);
        },
        ID_OBJECT: null,
        callJavaAction: function(formAction, callBackFuntion, params, METHOD_NAME, async, tableId, callbackDeveloper) {
            try {
                if (formAction && (METHOD_NAME != undefined && METHOD_NAME != null && METHOD_NAME !== "")) {
                    if (tableId != null && typeof tableId !== "undefined" && tableId !== "") {
                        this.ID_OBJECT = editTableId;
                    }
                    if (!Rsis.isUndefined(Loading)) {
                        Loading.start();
                    }
                    var fnc = async ? AjaxRsis.callActionDeveloper : AjaxRsis.callActionSyncDeveloper;
                    fnc.apply(AjaxRsis, [ formAction.id, URL, getAttMandatory(formAction, "targetAction"), METHOD_NAME, callBackFuntion, params, callbackDeveloper ]);
                }
            } catch (oErr) {
                outPrint(oErr, ".callJavaAction", this);
            }
        },
        callBackJavaAction: function(f, funCallBackDeveloper) {
            processCallBack(f, funCallBackDeveloper, UIRsis.VALIDATE_ERROR);
        },
        execute: function(formAction, callBackFuntion, params, METHOD_NAME, tableId) {
            this.callJavaAction(formAction, callBackFuntion, params, METHOD_NAME, true, tableId, "EditTableRsis.callBackJavaAction");
        },
        getParamsByIdObject: function(UIForm, idObject) {
            try {
                var Transfer = {
                    pageNumber: 0,
                    editTable: null,
                    dataScroller: null
                };
                if (idObject != null) {
                    Transfer.dataScroller = getDataScrollerByTable(idObject);
                    Transfer.editTable = $(idObject);
                } else {
                    Transfer.dataScroller = UIForm.getUIComponent("dataScroller")[0];
                }
                if (Transfer.dataScroller) {
                    var buttonPage = $(Transfer.dataScroller.id + ".btnPage");
                    if (buttonPage) {
                        Transfer.pageNumber = parseInt(buttonPage.value, 10);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".getParamsByIdObject", this);
                return null;
            }
            return Transfer;
        },
        focus: function(o) {
            if (o != null) o.click();
        },
        helpConfig: function(object) {
            try {
                if (object) {
                    var tHead = $R(object).getTHead();
                    if (tHead) {
                        var listTableCells = tHead.rows[tHead.rows.length - 1].cells;
                        for (var j = 0, maxLength = listTableCells.length; j < maxLength; j++) {
                            setCssHelp(listTableCells[j], getAtt(listTableCells[j], "help"));
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".helpConfig", this);
            }
        },
        helpKeysConfig: function(object) {
            try {
                if (object) {
                    var tHead = $R(object).getTHead();
                    if (tHead) {
                        var listTableCells = tHead.rows[tHead.rows.length - 1].cells;
                        for (var j = 0, maxLength = listTableCells.length; j < maxLength; j++) {
                            setCssHelpKeys(listTableCells[j], getAtt(listTableCells[j], "helpKeys"));
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".helpConfig", this);
            }
        }
    };
})(Rsis);

function renderEditTable(obj, status) {
    try {
        if (obj) {
            var _rsObj = $R(obj);
            _rsObj.createColgroupHead();
            var isRender = arguments && !Rsis.isUndefined(arguments[3]) ? arguments[3] : false;
            _rsObj.drawBody(isRender);
            _rsObj.scroll();
            _rsObj.renderTFoot();
            _rsObj.renderTBodySr();
            EditTableRsis.helpConfig(obj);
            EditTableRsis.helpKeysConfig(obj);
        }
    } catch (oErr) {
        outPrint(oErr, "renderEditTable()", EditTableRsis);
    } finally {
        _NO_RENDER_INPUT = false;
    }
}

function createRowEditTable(UIForm, table, tBody, line, countObjects, nodes) {
    try {
        var countRow = -1;
        if (table && tBody) {
            var sEvent = getStringEvent(table), $win = UtilRsis.getParentWindow(table), tableId = getAttMandatory(table, "id");
            var tHd = $R(table).getTHead(), ths = tHd.rows[tHd.rows.length - 1].cells;
            var countCache = 0;
            if (nodes && nodes.length > 0) {
                countCache = parseInt(nodes[line].getAttribute("countCache"), 10);
            }
            var row = tBody.insertRow(line);
            row.className = line & 1 ? "even" : "odd";
            for (var j = 0, maxLength = ths.length; j < maxLength; j++) {
                var countComponents = 0, th = ths[j], cell = row.insertCell(j), visualizeColumn = th.getAttribute("visualizeColumn"), cellAlign = th.getAttribute("colalign");
                if (cellAlign) {
                    cell.style.textAlign = cellAlign;
                }
                cell.style.width = th.getAttribute("wcol");
                var contentCell = "";
                var components = th.getElementsByTagName("component");
                if (components && components.length > 0) {
                    for (var it = 0; it < components.length; it++) {
                        var obj = components[it];
                        if (obj) {
                            var objectType = obj.getAttribute("objectType");
                            if (j == EditTableRsis.isFirstCell && visualizeColumn != "false") {
                                if (objectType === "radio") {
                                    contentCell += createRadio(obj, table, line, j, countComponents, countCache, cellAlign);
                                } else if (objectType === "checkbox") {
                                    contentCell += createCheckBox(UIForm, obj, table, row, cell, line, j, countComponents, countCache, nodes, cellAlign);
                                }
                            } else {
                                var fnc = null, params = [ obj, table, line, j, countComponents, countCache, cellAlign ];
                                switch (objectType) {
                                  case "checkbox":
                                    fnc = createCheckBox;
                                    params = [ obj, table, row, cell, line, j, countComponents, countCache, nodes, cellAlign ];
                                    break;

                                  case "label":
                                    fnc = createLabel;
                                    break;

                                  case "text":
                                    fnc = createInputText;
                                    break;

                                  case "autoComplete":
                                    fnc = createAutoComplete;
                                    break;

                                  case "suggestBox":
                                    fnc = createSuggestBox;
                                    break;

                                  case "button":
                                    fnc = createButton;
                                    break;

                                  case "combo":
                                    fnc = createCombo;
                                    break;

                                  case "searchField":
                                    fnc = createSearchField;
                                    break;
                                }
                                if (typeof fnc === "function" && fnc != null) {
                                    contentCell += fnc.apply(this, params);
                                }
                                countComponents++;
                                countObjects++;
                            }
                        }
                    }
                }
                setDataUICpt(table, row);
                setDataUICpt(table, cell);
                if (j > EditTableRsis.isFirstCell) {
                    setDOMEvent(row, "ondblclick", "return " + $win + "Crud.doubleClick('" + table.id + "', this, " + sEvent + ");");
                    setDOMEvent(cell, "onclick", "return " + $win + "checkRow(this.parentNode, " + sEvent + ");");
                }
                cell.innerHTML = contentCell;
                cell.tabIndex = -1;
                EditTableRsis.setCountLines(countObjects);
                compressEvalRsisAll(getAttFuncDeveloper(ths[j], "execute"), UIForm, nodes && nodes.length > 0 ? nodes[line] : null, table, row, cell, ths[j], j);
                cell = null;
            }
            row = null;
            var selectionType = table.getAttribute("selectionType");
            if (selectionType.toLowerCase() === "radio" && countRow != -1) {
                var obj = tBody.rows[line].cells[0].childNodes[0];
                if (obj.getAttribute("objectType") === "radio") obj.click();
                obj = null;
            }
        }
    } catch (oErr) {
        outPrint(oErr, "createRowEditTable()", EditTableRsis);
    }
}

function updateIdRowEditTable(UIForm, table, tBody, line, countObjects, nodes) {
    try {
        var countRow = -1;
        if (table && tBody) {
            var $win = UtilRsis.getParentWindow(table), tHead = $R(table).getTHead(), ths = tHead.rows[tHead.rows.length - 1].cells, countCache = 0;
            if (nodes && nodes.length > 0) {
                countCache = parseInt(nodes[line].getAttribute("countCache"), 10);
            }
            var row = tBody.rows[line];
            if (row) {
                for (var j = 0, maxLength = ths.length; j < maxLength; j++) {
                    var countComponents = 0, tableHeadElement = ths[j], cell = row.cells[j];
                    if (cell) {
                        var visualizeColumn = tableHeadElement.getAttribute("visualizeColumn"), cellAlign = tableHeadElement.getAttribute("colalign");
                        if (cellAlign) {
                            cell.style.textAlign = cellAlign;
                        }
                        var components = tableHeadElement.getElementsByTagName("component");
                        if (components && components.length > 0) {
                            for (var it = 0; it < components.length; it++) {
                                var obj = components[it];
                                if (obj) {
                                    var objectType = obj.getAttribute("objectType");
                                    if (j == EditTableRsis.isFirstCell && visualizeColumn != "false") {
                                        if (objectType === "radio") {
                                            cell.innerHTML = createRadio(obj, table, line, j, countComponents, countCache, cellAlign);
                                        } else if (objectType === "checkbox") {
                                            cell.innerHTML = createCheckBox(UIForm, obj, table, row, cell, line, j, countComponents, countCache, nodes, cellAlign);
                                        }
                                    } else {
                                        var objectCell = null;
                                        if (cell.childNodes[it] && cell.childNodes[it].hasChildNodes()) {
                                            objectCell = cell.childNodes[it].firstChild;
                                        }
                                        if (objectCell != null) {
                                            if (objectType === "button" || objectType === "radio" || objectType === "checkbox") {
                                                updateInputObjects(obj, objectCell, table, line, j, countComponents, countCache, cellAlign);
                                            } else {
                                                if (objectType === "text") {
                                                    updateInputObjects(obj, objectCell.firstChild, table, line, j, countComponents, countCache, cellAlign);
                                                }
                                                if (objectType === "label") {
                                                    updateInputObjects(obj, objectCell, table, line, j, countComponents, countCache, cellAlign);
                                                }
                                                if (objectType === "autoComplete") {
                                                    updateAutoComplete(objectCell.firstChild, table, line, j, countComponents, countCache, cellAlign);
                                                }
                                                if (objectType === "suggestBox") {
                                                    updateSuggestBox(objectCell.firstChild, table, line, j, countComponents, countCache, cellAlign);
                                                }
                                                if (objectType === "combo") {
                                                    updateComboNSearchField(objectCell.firstChild, table, line, j, countComponents, countCache, objectType);
                                                }
                                            }
                                        }
                                        countComponents++;
                                        countObjects++;
                                    }
                                }
                            }
                        }
                        EditTableRsis.setCountLines(countObjects);
                        compressEvalRsisAll(getAttFuncDeveloper(ths[j], "execute"), UIForm, nodes && nodes.length > 0 ? nodes[line] : null, table, row, cell, ths[j], j);
                    }
                }
            }
            var selectionType = table.getAttribute("selectionType");
            if (selectionType.toLowerCase() === "radio" && countRow != -1) {
                var obj = tBody.rows[line].cells[0].childNodes[0];
                if (obj.getAttribute("objectType") === "radio") obj.click();
            }
        }
    } catch (oErr) {
        outPrint(oErr, "updateIdRowEditTable()", EditTableRsis);
    }
}

function updateInputObjects(theader, obj, table, line, column, countComponents, countCache, cellAlign) {
    try {
        if (obj) {
            var objectType = theader.getAttribute("objectType"), node = theader.getAttribute("node");
            obj.countColumnHeader = line;
            if (getAtt(obj, "size") == null && widthCell != null && widthCell !== "") {
                obj.style.width = element.width;
            }
            obj.countCache = countCache;
            obj.setAttribute("countCache", countCache);
            obj.setAttribute("countColumnHeader", line);
            if (objectType === "label" && node == null && theader.getAttribute("value") != null) {
                obj.setAttribute("value", theader.getAttribute("value"));
            }
            obj.id = table.id + "::" + line + "_" + column + (countComponents > 0 ? "|" + countComponents : "");
        }
    } catch (oErr) {
        outPrint(oErr, "updateInputObjects()", EditTableRsis);
    }
}

function updateSuggestBox(obj, table, line, column, countComponents, countCache, cellAlign) {
    try {
        updateAutoComplete(obj, table, line, column, countComponents, countCache, cellAlign);
    } catch (oErr) {
        outPrint(oErr, "updateAutoComplete()", EditTableRsis);
    }
}

function updateAutoComplete(obj, table, line, column, countComponents, countCache, cellAlign) {
    try {
        if (obj) {
            var inp = obj;
            if (inp) {
                var oldID = inp.id, newID = table.id + "::" + line + "_" + column + (countComponents > 0 ? "|" + countComponents : "");
                if (getAtt(inp, "size") == null && widthCell != null) {
                    inp.style.width = widthCell;
                }
                inp.countCache = line;
                inp.id = newID;
                inp.countCache = countCache;
                inp.countColumnHeader = line;
                inp.setAttribute("countCache", countCache);
                inp.setAttribute("countColumnHeader", line);
                var btns = ".btnSearch", btnc = ".clrBtn", btna = ".addButton", hdn = ".hidden";
                var btnSearch = $(oldID + btns);
                if (btnSearch) {
                    btnSearch.id = newID + btns;
                }
                var clearButton = $(oldID + btnc);
                if (clearButton) {
                    clearButton.id = newID + btnc;
                }
                var addButton = $(oldID + btna);
                if (addButton) {
                    addButton.id = newID + btna;
                }
                var hidden = $(oldID + hdn);
                if (hidden) {
                    hidden.id = newID + hdn;
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "updateAutoComplete()", EditTableRsis);
    }
}

function updateComboNSearchField(obj, table, line, column, countComponents, countCache, objectType) {
    try {
        var objectTable = null;
        if (obj && obj.type && obj.type === "text") {
            objectTable = obj;
        } else {
            objectTable = obj.getElementsByTagName("input")[0];
            if (objectType === "combo") {
                objectTable = obj;
            }
        }
        if (objectTable) {
            var oldID = objectTable.id, newID = table.id + "::" + line + "_" + column + (countComponents > 0 ? "|" + countComponents : "");
            objectTable.countCache = line;
            objectTable.id = newID;
            objectTable.countCache = countCache;
            objectTable.countColumnHeader = line;
            objectTable.setAttribute("countCache", countCache);
            objectTable.setAttribute("countColumnHeader", line);
            if (getAtt(obj, "size") == null) {
                objectTable.style.width = widthCell;
            }
            if (objectType === "combo") {
                var sltBtn = ".sltBtn", clrBtn = ".clrBtn", selectButton = $(oldID + sltBtn), clearButton = $(oldID + clrBtn);
                if (selectButton) {
                    selectButton.id = newID + sltBtn;
                }
                if (clearButton) {
                    clearButton.id = newID + clrBtn;
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "updateComboNSearchField()", EditTableRsis);
    }
}

function createRadio(obj, table, line, column, countComponents, countCache, cellAlign) {
    try {
        var strRadio = "";
        if (obj && column === 0 && countComponents === 0) {
            var $win = UtilRsis.getParentWindow(obj), stringNodeRoot = ROOT_NODE + $R(table).getPathNode();
            var stringFunArgs = stringNodeRoot + obj.getAttribute("value");
            var functionRadioButton = table.getAttribute("onclickEditTable");
            if (functionRadioButton == null || functionRadioButton === "") {
                functionRadioButton = "selectRowEditTable(this, '" + stringFunArgs + "');";
            } else {
                functionRadioButton += "(this, " + $win + "$('" + table.id + "'), '" + stringFunArgs + "');";
            }
            var dataUi = table.getAttribute("data-ui");
            strRadio = strRadio + '<input type="radio" data-ui="' + dataUi + '" countCache="' + countCache + '" ';
            strRadio = strRadio + 'onclick="return  ' + $win + functionRadioButton + '" ';
            strRadio = strRadio + 'value="' + line + '" name="' + table.id + '.dtRadio" class="radio_check"/>';
        }
    } catch (oErr) {
        outPrint(oErr, "createRadio()", EditTableRsis);
    }
    return strRadio;
}

function createCheckBox(UIForm, obj, table, row, cell, line, column, countComponents, countCache, nodesRetEditTable, cellAlign) {
    try {
        var strCheckBox = "";
        if (obj && row && cell) {
            var UIContext = Rsis.UIContext.get(table);
            var $win = UtilRsis.getParentWindow(table);
            if (countComponents === 0 && column === 0) {
                var checkRow = false, stringNodeRoot = ROOT_NODE + $R(table).getPathNode(), valueToCheck = obj.getAttribute("valueToCheck");
                if (valueToCheck != null && valueToCheck != "") {
                    if (nodesRetEditTable && nodesRetEditTable.length > 0 && (nodesRetEditTable[line].getAttribute(valueToCheck) == 1 || nodesRetEditTable[line].getAttribute(valueToCheck) == "true")) {
                        checkRow = true;
                    }
                }
                if (nodesRetEditTable && nodesRetEditTable.length > 0 && (nodesRetEditTable[line].getAttribute("indSelecionado") == null || nodesRetEditTable[line].getAttribute("indSelecionado") === "")) {
                    nodesRetEditTable[line].setAttribute("indSelecionado", 0);
                }
                var renderCheckBoxDeveloper = table.getAttribute("renderCheckBoxDeveloper");
                if (renderCheckBoxDeveloper != null && renderCheckBoxDeveloper !== "") {
                    var nodeLine = nodesRetEditTable && nodesRetEditTable.length > 0 ? nodesRetEditTable[line] : null;
                    checkRow = compressEvalRsisAll(renderCheckBoxDeveloper, table, UIForm, nodeLine, row, cell);
                }
                if (nodesRetEditTable && nodesRetEditTable.length > 0) {
                    nodesRetEditTable[line].setAttribute("indSelecionado", checkRow ? 1 : 0);
                    var tableXML = UIForm.getTableXML(table.id);
                    if (checkRow && tableXML) {
                        var countCache = nodesRetEditTable[line].getAttribute("countCache"), elementNode = getNodes(tableXML, stringNodeRoot + "[@countCache='" + countCache + "']");
                        if (elementNode && elementNode.length > 0) {
                            elementNode[0].setAttribute("indSelecionado", checkRow ? "1" : "0");
                            UIForm.setTableXML(table.id, tableXML);
                            UIContext.setUIForms(UIForm.getForm().id, UIForm);
                        }
                    }
                }
                var rsisRow = $R(row);
                checkRow ? rsisRow.addClass("selected") : rsisRow.removeClass("selected");
                var checkClickLine = ' checkClickLine="' + obj.getAttribute("checkClickLine") + '" ', checkInput = checkRow ? "CHECKED" : "", functionRadioButton = "";
                var dataUi = table.getAttribute("data-ui");
                var stringFunArgs = stringNodeRoot + obj.getAttribute("value");
                if (functionRadioButton == null || functionRadioButton == "") {
                    functionRadioButton = "selectRowEditTable(this, '" + stringFunArgs + "');";
                } else {
                    functionRadioButton += "(this, " + $win + "$('" + table.id + "'), '" + stringFunArgs + "');";
                }
                strCheckBox = strCheckBox + '<input type="checkbox" ' + checkInput + "" + checkClickLine + 'countCache="' + countCache + '" onclick="return  ' + $win + functionRadioButton + '" ';
                strCheckBox = strCheckBox + ' value="' + line + '" name="' + table.id + '.dtRadio" data-ui="' + dataUi + '" valueToCheck="' + valueToCheck + '" class="radio_check" />';
            } else {
                var componentName = getAttMandatory(obj, "id"), id = table.id + "::" + line + "_" + column + "|" + countComponents;
                strCheckBox = strCheckBox + '<div style="float:left; height:20px; max-width: 100%;"><div componentName="' + componentName + '" data-ui="' + dataUi + '" isColumnHeader="true" countCache="' + countCache + '" id="' + id + '" countColumnHeader="' + line + '" class="tChkbx" component="checkBox" ';
                strCheckBox = strCheckBox + ' help="' + getAtt(obj, "help") + '" helpKey="' + getAtt(obj, "helpKey") + '" editable="' + getAtt(obj, "editable") + '" isVisible="' + getAtt(obj, "isVisible") + '" mandatory="' + getAtt(obj, "mandatory") + '">';
                strCheckBox = strCheckBox + '<input id="' + id + '.inputCheckBox" data-ui="' + dataUi + '" type="checkbox" class="chkBx" onclick="' + $win + getAtt(obj, "click") + '" style="vertical-align:top;" />';
                strCheckBox = strCheckBox + "</div></div>";
            }
        }
    } catch (oErr) {
        outPrint(oErr, "createCheckBox()", EditTableRsis);
    }
    return strCheckBox;
}

function createLabel(obj, table, line, column, countComponents, countCache, cellAlign) {
    try {
        var strLabel = "";
        if (obj) {
            var componentName = getAttMandatory(obj, "id"), hintObject = getAttMandatory(obj, "hintObject"), value = getAtt(obj, "value"), sty = getAtt(obj, "style"), widthCol = getAtt(obj, "widthCol");
            widthCol = widthCol != null && widthCol != "" ? "min-width: " + widthCol : "";
            var id = table.id + "::" + line + "_" + column + (countComponents > 0 ? "|" + countComponents : "");
            strLabel = '<div class="dLbl" style="' + sty + '"><span childField="true" class="label" componentName="' + componentName + '" id="' + id + '" component="label" countCache="' + countCache + '"  countColumnHeader="' + line + '" xml="" node="' + getAtt(obj, "node") + '" hint="' + getAtt(obj, "hint") + '"  widthColumn="' + getAtt(obj, "width") + '" ';
            strLabel = strLabel + ' isColumnHeader="true" tabIndex="-1" isVisible="' + getAtt(obj, "isVisible") + '" mask="' + getAtt(obj, "mask") + '" onlyDeveloperFunction="' + getAtt(obj, "onlyDeveloperFunction") + '" ';
            strLabel = strLabel + ' renderDeveloper="' + getAtt(obj, "renderDeveloper") + '" style="float:' + cellAlign + "; min-width:10%; text-align:" + getAtt(obj, "align") + '"  help="' + getAtt(obj, "help") + '" helpKey="' + getAtt(obj, "helpKey") + '">' + value;
            strLabel = strLabel + "</span></div>";
        }
    } catch (oErr) {
        outPrint(oErr, "createLabel()", EditTableRsis);
    }
    return strLabel;
}

function createInputText(obj, table, line, column, countComponents, countCache, cellAlign) {
    try {
        var stringInput = "";
        if (obj) {
            var $win = UtilRsis.getParentWindow(obj), hintObject = getAttMandatory(obj, "hintObject"), componentName = getAttMandatory(obj, "id"), ku = obj.getAttribute("keyup"), kd = obj.getAttribute("keydown"), bl = obj.getAttribute("blurr"), txAlg = obj.getAttribute("textAlign"), widthCell = obj.getAttribute("widthInput") != null ? obj.getAttribute("widthInput") : "", sty = obj.getAttribute("style"), keyup = ku != null ? 'onkeyup="' + $win + ku + '" keyup="' + ku + '" ' : "", keydown = kd != null ? 'onkeydown="' + $win + kd + '" keydown="' + kd + '" ' : "", isVis = getAtt(obj, "isVisible"), edt = getAtt(obj, "editable"), mdy = getAtt(obj, "mandatory"), sze = getAtt(obj, "size"), mxLen = getAtt(obj, "maxlength"), foneMaxLength = getAtt(obj, "foneMaxLength"), exte = getAtt(obj, "execute"), rDevF = getAtt(obj, "onlyDeveloperFunction"), rDev = getAtt(obj, "renderDeveloper"), nod = getAtt(obj, "node"), stEvt = getAtt(obj, "startEvent"), hlp = getAtt(obj, "help"), hlpKey = getAtt(obj, "helpKey"), hnt = getAtt(obj, "hint"), fcs = getAtt(obj, "focus"), dIptStyle = getAtt(obj, "dIptStyle"), blurr = "", style = 'style="';
            if (bl != null) {
                blurr = 'onblur="' + bl + '" blurr="' + bl + '" ';
            } else if (obj.getAttribute("uppercase") === "true") {
                blurr = 'onblur="' + $win + 'toUpperCase(this);"';
            }
            if (typeof sty == "string" && sty != null && sty !== "") {
                style = style + "float:left; " + sty;
            } else if (typeof widthCell == "string" && widthCell != null && widthCell !== "") {
                style = style + "float:left; text-transform:uppercase; width:" + widthCell + ";";
            } else {
                style = style + "float:left; text-transform:uppercase;";
            }
            var patternMask = getAtt(obj, "mask"), strArgsMask = patternMask.split("::"), widthCol = getAtt(obj, "widthCol");
            if (typeof widthCell == "string" && (widthCell == null || widthCell === "")) {
                style = style + "width:90%";
            }
            style = style + ' "';
            var id = table.id + "::" + line + "_" + column + (countComponents > 0 ? "|" + countComponents : "");
            widthCol = widthCol != null && widthCol !== "" ? "min-width: " + widthCol : "";
            if (typeof dIptStyle == "string" && (dIptStyle == null || dIptStyle === "")) {
                dIptStyle = dIptStyle + "width:99%";
            }
            stringInput = '<div class="dIpt" style="' + dIptStyle + '">';
            stringInput = stringInput + '<div id="' + id + '.wdtIpt">';
            stringInput = stringInput + '<input childField="true" type="text" class="ipt" componentName="' + componentName + '" autocomplete="off" id="' + id + '" countColumnHeader="' + line + '" ';
            stringInput = stringInput + ' countCache="' + countCache + '" isColumnHeader="true" component="input" size="' + sze + '" maxlength="' + mxLen + '" foneMaxLength="' + foneMaxLength + '" ';
            stringInput = stringInput + ' mask="' + patternMask + '" xml="" node="' + nod + '" hint="' + hnt + '" focus="' + fcs + '" editable="' + edt + '" ';
            stringInput = stringInput + ' isVisible="' + isVis + '" mandatory="' + mdy + '"  widthColumn="' + widthCell + '" ';
            stringInput = stringInput + ' execute="' + exte + '" uppercase="true" ' + style + ' textAlign="' + txAlg + '" ';
            stringInput = stringInput + ' onlyDeveloperFunction="' + rDevF + '" renderDeveloper="' + rDev + '" ';
            stringInput = stringInput + ' startEvent="' + stEvt + '" ';
            stringInput = stringInput + ' onkeypress="return ' + $win + "validateMask(event,'" + patternMask + "');\" ";
            stringInput = stringInput + ' onfocus="return ' + $win + "removeCaracs(this,'" + patternMask + "');\" ";
            stringInput = stringInput + " " + keydown + " " + keyup + " " + blurr + '  help="' + hlp + '" helpKey="' + hlpKey + '" />';
            stringInput = stringInput + " </div>";
            if (strArgsMask != null && strArgsMask.length > 0 && MaskRsis.DATE == strArgsMask[0]) {
                stringInput = stringInput + '<div style="float:left" id="' + id + '.wdtBtns">';
                stringInput = stringInput + '<div class="imgCal btnCal" id="' + id + '.calendar" tabIndex="-1" ';
                stringInput = stringInput + ' click="' + $win + "displayCalendar(" + $win + "$('" + id + "'),'" + strArgsMask[1] + "',this)\" >";
                stringInput = stringInput + "</div>";
                stringInput = stringInput + "</div>";
            }
            stringInput = stringInput + " </div>";
        }
    } catch (oErr) {
        outPrint(oErr, "createInputText()", EditTableRsis);
    }
    return stringInput;
}

function createAutoComplete(obj, table, line, column, countComponents, countCache, cellAlign) {
    try {
        var strAc = "";
        if (obj) {
            var $win = UtilRsis.getParentWindow(obj), componentName = getAttMandatory(obj, "id"), xpath = getAtt(obj, "xpath"), optionSearch = getAtt(obj, "optionSearch"), optionValue = getAttMandatory(obj, "optionValue"), optionText = getAttMandatory(obj, "optionText"), optionValueRef = getAtt(obj, "optionValueRef"), optionTextRef = getAtt(obj, "optionTextRef"), targetAction = getAtt(obj, "targetAction"), targetMethod = getAtt(obj, "targetMethod"), onchange = getAtt(obj, "on_change"), mask = getAtt(obj, "mask"), buttonAdd = getAtt(obj, "buttonAdd"), widthCol = getAtt(obj, "widthCol");
            widthCol = widthCol != null && widthCol != "" ? "min-width: " + widthCol : "";
            var newID = table.id + "::" + line + "_" + column + (countComponents > 0 ? "|" + countComponents : "");
            strAc = "";
            strAc = strAc + '<div class="dACpt" style="width:99%">';
            strAc = strAc + '<div id="' + newID + '.wdtIpt">';
            strAc = strAc + '<input childField="true" componentName="' + componentName + '" id="' + newID + '" autocomplete="off" isColumnHeader="true" countColumnHeader="' + line + '" countCache="' + countCache + '" component="autoComplete" class="iACpt" ';
            strAc = strAc + '\tsize="' + getAtt(obj, "size") + '" type="text" maxlength="' + getAtt(obj, "maxlength") + '" minlength="' + getAtt(obj, "minlength") + '" params="' + getAtt(obj, "params") + '" ';
            strAc = strAc + '\txpath="' + xpath + '" optionSearch="' + optionSearch + '" optionValue="' + optionValue + '" optionValueRef="' + optionValueRef + '" optionText="' + optionText + '" optionTextRef="' + optionTextRef + '" ';
            strAc = strAc + '\tremoteSearch="' + getAtt(obj, "remoteSearch") + '" editable="' + getAtt(obj, "editable") + '" mandatory="' + getAtt(obj, "mandatory") + '" isVisible="' + getAtt(obj, "isVisible") + '" parserAttributes="' + getAtt(obj, "parserAttributes") + '" ';
            strAc = strAc + '\tparserNodes="' + getAtt(obj, "parserNodes") + '" url="' + getAtt(obj, "url") + '" modalWidth="' + getAtt(obj, "modalWidth") + '" modalHeight="' + getAtt(obj, "modalHeight") + '" searchValue="' + getAtt(obj, "searchValue") + '" modalFormField="' + getAtt(obj, "modalFormField") + '" onkeypress="return ' + $win + 'validateMask(event);" mask="' + mask + '" ';
            strAc = strAc + '\tstyle="text-transform: uppercase; vertical-align:top; width:94%; " uppercase="true" clearButtonVisible="' + getAtt(obj, "clearButtonVisible") + '" on_change="' + onchange + '" onlyDeveloperFunction="' + getAtt(obj, "onlyDeveloperFunction") + '" renderDeveloper="' + getAtt(obj, "renderDeveloper") + '" ';
            strAc = strAc + '   hint="' + getAtt(obj, "hint") + '" targetAction="' + targetAction + '"  targetMethod="' + targetMethod + '" autoCompleteElement="true" xmlSearchTemplate="' + getAtt(obj, "xmlSearchTemplate") + '" buttonAdd="' + getAtt(obj, "buttonAdd") + '" ';
            strAc = strAc + '\texecuteBeforeStartModalAdd="' + getAtt(obj, "executeBeforeStartModalAdd") + '" executeAfterClosingModal="' + getAtt(obj, "executeAfterClosingModal") + '" onlyDeveloperFunction="' + getAtt(obj, "onlyDeveloperFunction") + '" afterProcessParser="' + getAtt(obj, "afterProcessParser") + '" changeNodeName="' + getAtt(obj, "changeNodeName") + '" clearButtonExecute="' + getAtt(obj, "clearButtonExecute") + '" ';
            strAc = strAc + '\tchangeNodeNamePath="' + getAtt(obj, "changeNodeNamePath") + '" executeSearchBefore="' + getAtt(obj, "executeSearchBefore") + '" isFullySelectedXml="' + getAtt(obj, "isFullySelectedXml") + '" searchValue="' + getAtt(obj, "searchValue") + '" url="' + getAtt(obj, "url") + '" modalWidth="' + getAtt(obj, "modalWidth") + '" ';
            strAc = strAc + '\tsearchParameter="' + getAtt(obj, "searchParameter") + '" modalFormField="' + getAtt(obj, "modalFormField") + '" modalHeight="' + getAtt(obj, "modalHeight") + '" maxrows="' + getAtt(obj, "maxrows") + '" node="' + getAtt(obj, "node") + '" ';
            strAc = strAc + '   widthresults="' + getAtt(obj, "widthresults") + '" help="' + getAtt(obj, "help") + '" helpKey="' + getAtt(obj, "helpKey") + '" concatOptSearchOptText="' + getAtt(obj, "concatOptSearchOptText") + '"/>';
            strAc = strAc + "</div>";
            strAc = strAc + '<div style="float:left" id="' + newID + '.wdtBtns">';
            strAc = strAc + '<div childField="true" data-type="button" countColumnHeader="' + line + '" id="' + newID + '.btnSearch" class="slACpt" ';
            strAc = strAc + ' onclick="return ' + $win + "AutoComplete.viewOptions($('" + newID + '\'), event);" remoteSearch="' + getAtt(obj, "remoteSearch") + '" autoCompleteElement="true"></div>';
            strAc = strAc + '<div childField="true" data-type="button" countColumnHeader="' + line + '" id="' + newID + '.clrBtn" class="clrACpt" ';
            strAc = strAc + ' onclick="' + $win + "SelectBox.close(this,event); return " + $win + 'clearAutoComplete(this);" clearButtonExecute="' + getAtt(obj, "clearButtonExecute") + '" autoCompleteElement="true"></div>';
            if (buttonAdd == "true") {
                strAc = strAc + '<div childField="true" data-type="button" countColumnHeader="' + line + '" id="' + newID + '.addButton" class="addACpt" onclick="' + $win + "SelectBox.close(this,event); return " + $win + 'AutoComplete.openWindow(this);" autoCompleteElement="true" tabIndex="-1" ></div>';
            }
            strAc = strAc + "</div>";
            strAc = strAc + '\t<input countColumnHeader="' + line + '" id="' + newID + '.hidden" type="hidden" autoCompleteElement="true"/>';
            strAc = strAc + "</div>";
        }
    } catch (oErr) {
        outPrint(oErr, "createAutoComplete()", EditTableRsis);
    }
    return strAc;
}

function createSuggestBox(obj, table, line, column, countComponents, countCache, cellAlign) {
    try {
        var strAc = "";
        if (obj) {
            var $win = UtilRsis.getParentWindow(obj), componentName = getAttMandatory(obj, "id"), optionSearch = getAttMandatory(obj, "optionSearch"), optionValue = getAttMandatory(obj, "optionValue"), optionValueRef = getAttMandatory(obj, "optionValueRef"), optionText = getAttMandatory(obj, "optionText"), optionTextRef = getAtt(obj, "optionTextRef"), targetAction = getAtt(obj, "targetAction"), targetMethod = getAtt(obj, "targetMethod"), onchange = getAtt(obj, "on_change"), mask = getAtt(obj, "mask"), buttonAdd = getAtt(obj, "buttonAdd"), widthCol = getAtt(obj, "widthCol"), searchButtonVisible = getAtt(obj, "searchButtonVisible");
            widthCol = widthCol != null && widthCol != "" ? "min-width: " + widthCol : "";
            var newID = table.id + "::" + line + "_" + column + (countComponents > 0 ? "|" + countComponents : "");
            strAc = "";
            strAc = strAc + '<div class="dSBpt" style="width:99%">';
            strAc = strAc + '<div id="' + newID + '.wdtIpt">';
            strAc = strAc + '<input childField="true" componentName="' + componentName + '" id="' + newID + '" autocomplete="off" isColumnHeader="true" countColumnHeader="' + line + '" countCache="' + countCache + '" component="suggestBox" class="iSBpt" ';
            strAc = strAc + '\tsize="' + getAtt(obj, "size") + '" type="text" maxlength="' + getAtt(obj, "maxlength") + '" minlength="' + getAtt(obj, "minlength") + '" params="' + getAtt(obj, "params") + '" ';
            strAc = strAc + '\toptionSearch="' + optionSearch + '" optionValue="' + optionValue + '" optionValueRef="' + optionValueRef + '" optionText="' + optionText + '" optionTextRef="' + optionTextRef + '" ';
            strAc = strAc + '\tremoteSearch="' + getAtt(obj, "remoteSearch") + '" editable="' + getAtt(obj, "editable") + '" mandatory="' + getAtt(obj, "mandatory") + '" isVisible="' + getAtt(obj, "isVisible") + '" parserAttributes="' + getAtt(obj, "parserAttributes") + '" ';
            strAc = strAc + '\tparserNodes="' + getAtt(obj, "parserNodes") + '" url="' + getAtt(obj, "url") + '" modalWidth="' + getAtt(obj, "modalWidth") + '" modalHeight="' + getAtt(obj, "modalHeight") + '" searchValue="' + getAtt(obj, "searchValue") + '" modalFormField="' + getAtt(obj, "modalFormField") + '" onkeypress="return ' + $win + 'validateMask(event);" mask="' + mask + '" ';
            strAc = strAc + '\tstyle="text-transform: uppercase; vertical-align:top; width:98%; " uppercase="true" clearButtonVisible="' + getAtt(obj, "clearButtonVisible") + '" on_change="' + onchange + '" onlyDeveloperFunction="' + getAtt(obj, "onlyDeveloperFunction") + '" renderDeveloper="' + getAtt(obj, "renderDeveloper") + '" ';
            strAc = strAc + '   hint="' + getAtt(obj, "hint") + '" targetAction="' + targetAction + '"  targetMethod="' + targetMethod + '" suggestBoxElement="true" xmlSearchTemplate="' + getAtt(obj, "xmlSearchTemplate") + '" buttonAdd="' + getAtt(obj, "buttonAdd") + '" ';
            strAc = strAc + '\texecuteBeforeStartModalAdd="' + getAtt(obj, "executeBeforeStartModalAdd") + '" executeAfterClosingModal="' + getAtt(obj, "executeAfterClosingModal") + '" onlyDeveloperFunction="' + getAtt(obj, "onlyDeveloperFunction") + '" afterProcessParser="' + getAtt(obj, "afterProcessParser") + '" changeNodeName="' + getAtt(obj, "changeNodeName") + '" clearButtonExecute="' + getAtt(obj, "clearButtonExecute") + '" ';
            strAc = strAc + '\tchangeNodeNamePath="' + getAtt(obj, "changeNodeNamePath") + '" executeSearchBefore="' + getAtt(obj, "executeSearchBefore") + '" isFullySelectedXml="' + getAtt(obj, "isFullySelectedXml") + '" searchValue="' + getAtt(obj, "searchValue") + '" url="' + getAtt(obj, "url") + '" modalWidth="' + getAtt(obj, "modalWidth") + '" ';
            strAc = strAc + '\tsearchParameter="' + getAtt(obj, "searchParameter") + '" modalFormField="' + getAtt(obj, "modalFormField") + '" modalHeight="' + getAtt(obj, "modalHeight") + '" maxrows="' + getAtt(obj, "maxrows") + '" node="' + getAtt(obj, "node") + '" ';
            strAc = strAc + '   help="' + getAtt(obj, "help") + '" helpKey="' + getAtt(obj, "helpKey") + '" widthresults="' + getAtt(obj, "widthresults") + '"/>';
            strAc = strAc + "</div>";
            strAc = strAc + '<div style="float:left" id="' + newID + '.wdtBtns">';
            if (searchButtonVisible == "true") {
                strAc = strAc + '<div childField="true" data-type="button" countColumnHeader="' + line + '" id="' + newID + '.btnSearch" class="slSBpt" ';
                strAc = strAc + ' onclick="return ' + $win + "SuggestBox.viewOptions($('" + newID + '\'), event);" remoteSearch="' + getAtt(obj, "remoteSearch") + '" suggestBoxElement="true"></div>';
            }
            strAc = strAc + '<div childField="true" data-type="button" countColumnHeader="' + line + '" id="' + newID + '.clrBtn" class="clrSBpt" ';
            strAc = strAc + ' onclick="' + $win + "SelectBox.close(this,event); return " + $win + 'clearSuggestBox(this);" clearButtonExecute="' + getAtt(obj, "clearButtonExecute") + '" suggestBoxElement="true"></div>';
            if (buttonAdd == "true") {
                strAc = strAc + '<div childField="true" data-type="button" countColumnHeader="' + line + '" id="' + newID + '.addButton" class="addSBpt" onclick="' + $win + "SelectBox.close(this,event); return " + $win + 'SuggestBox.openWindow(this);" suggestBoxElement="true" tabIndex="-1" ></div>';
            }
            strAc = strAc + "</div>";
            strAc = strAc + '\t<input countColumnHeader="' + line + '" id="' + newID + '.hidden" type="hidden" suggestBoxElement="true"/>';
            strAc = strAc + "</div>";
        }
    } catch (oErr) {
        outPrint(oErr, "createSuggestBox()", EditTableRsis);
    }
    return strAc;
}

function createButton(obj, table, line, column, countComponents, countCache, cellAlign) {
    try {
        var strButton = "";
        if (obj) {
            var $win = UtilRsis.getParentWindow(obj), componentName = getAttMandatory(obj, "id"), value = getAtt(obj, "value"), buttonClass = obj.getAttribute("buttonClass"), hintObject = getAttMandatory(obj, "hintObject"), widthCell = getAtt(obj, "width") != null ? getAtt(obj, "width") : "";
            buttonClass = buttonClass != null ? buttonClass : "btn";
            var id = table.id + "::" + line + "_" + column + (countComponents > 0 ? "|" + countComponents : "");
            strButton = '<div class="dBtn"><input type="button" componentName="' + componentName + '" isColumnHeader="true" ';
            strButton = strButton + 'countColumnHeader="' + line + '" autocomplete="off" countCache="' + countCache + '" component="button"';
            strButton = strButton + ' id="' + id + '" class="' + buttonClass + '" ';
            strButton = strButton + ' value="' + value + '" style="width:' + widthCell + ';" widthColumn="' + widthCell;
            strButton = strButton + '" hint="' + getAtt(obj, "hint") + '" ';
            strButton = strButton + ' includeLib="false" onclick="' + $win + getAtt(obj, "click") + '" visibleButton="' + getAtt(obj, "visibleButton") + '" ';
            strButton = strButton + ' help="' + getAtt(obj, "help");
            strButton = strButton + '" helpKey="' + getAtt(obj, "helpKey");
            strButton = strButton + '" editable="' + getAtt(obj, "editable");
            strButton = strButton + '" isVisible="' + getAtt(obj, "isVisible");
            strButton = strButton + '" mandatory="' + getAtt(obj, "mandatory") + '" /></div>';
        }
    } catch (oErr) {
        outPrint(oErr, "createButton()", EditTableRsis);
    }
    return strButton;
}

function createCombo(obj, table, line, column, countComponents, countCache, cellAlign) {
    try {
        var html = "";
        if (obj) {
            var sEvent = getStringEvent($(table.id)), $win = UtilRsis.getParentWindow(obj), componentName = getAttMandatory(obj, "id"), optionValue = getAttMandatory(obj, "optionValue"), optionValueRef = getAttMandatory(obj, "optionValueRef"), optionText = getAttMandatory(obj, "optionText"), onchange = getAtt(obj, "onchange"), size = getAtt(obj, "size"), maxlength = getAtt(obj, "maxlength"), mask = getAtt(obj, "mask");
            var newID = table.id + "::" + line + "_" + column + (countComponents > 0 ? "|" + countComponents : "");
            html = '<div class="dCbo">';
            html = html + '<div id="' + newID + '.wdtIpt">';
            html = html + '<input childField="true" id="' + newID + '" componentName="' + componentName + '" class="iCboRdy" component="comboBox" ';
            html = html + ' editable="' + getAtt(obj, "editable") + '" autocomplete="off" isVisible="' + getAtt(obj, "isVisible") + '" mandatory="' + getAtt(obj, "mandatory") + '" params="' + getAtt(obj, "params") + '" optionValue="' + optionValue + '" optionValueRef="' + optionValueRef + '" ';
            html = html + ' optionText="' + optionText + '" clearButtonVisible="' + getAtt(obj, "clearButtonVisible") + '" parserNodes="' + getAtt(obj, "parserNodes") + '" parserAttributes="' + getAtt(obj, "parserAttributes") + '" isMount="false" isColumnHeader="true" ';
            html = html + ' comboElement="true" renderDeveloper="' + getAtt(obj, "renderDeveloper") + '" onlyDeveloperFunction="' + getAtt(obj, "onlyDeveloperFunction") + '" mask="' + mask + '" onchange="' + $win + onchange + '"  help="' + getAtt(obj, "help") + '" ';
            html = html + ' helpKey="' + getAtt(obj, "helpKey") + '" widthresults="' + getAtt(obj, "widthresults") + '" readonly="true" onclick="return ' + $win + 'optionshow(this, event);" size="' + size + '" maxlength="' + maxlength + '" disabled="" style="cursor: default; visibility: visible; width:98%;" countColumnHeader="' + line + '" countCache="' + countCache + '">';
            html = html + "</div>";
            html = html + '<div style="float:left" id="' + newID + '.wdtBtns">';
            html = html + '<div class="slCbo" data-type="button" comboElement="true" id="' + newID + '.sltBtn" style="cursor: default;"></div>';
            html = html + '<div class="clrCbo" data-type="button" comboElement="true" id="' + newID + '.clrBtn" style="cursor: default;"></div>';
            html = html + "</div>";
            html = html + "</div>";
        }
    } catch (oErr) {
        outPrint(oErr, "createCombo()", EditTableRsis);
    }
    return html;
}

function createSearchField(obj, table, line, column, countComponents, countCache, cellAlign) {
    var strSearchField = "";
    return strSearchField;
}

function checkRow(oElem, evt) {
    try {
        var source = Rsis.events.getTarget(evt, true);
        if (source && $R(source).isTagName(/(TR|TD|SPAN|P|DIV|INPUT)/)) {
            var object = oElem && oElem.cells[0] && oElem.cells[0].childNodes[0] ? oElem.cells[0].childNodes[0] : null;
            if (object && (object.type === "radio" || object.type === "checkbox" && object.getAttribute("checkClickLine") === "true")) {
                var justChecked = source.getAttribute("comboElement") === "true" || source.getAttribute("autoCompleteElement") === "true" || source.getAttribute("suggestBoxElement") === "true";
                if (justChecked) {
                    object.checked = true;
                } else {
                    object.click();
                }
            }
        }
        return true;
    } catch (oErr) {
        outPrint(oErr, "checkRow()", EditTableRsis);
    }
}

function selectRowEditTable(oElem, strPath) {
    try {
        if (oElem && strPath !== "") {
            var table = $(oElem.name.split(".")[0]), stringNode = ROOT_NODE + table.getAttribute("node"), formId = oElem.name.split(":")[0], UIContext = Rsis.UIContext.get(table), UIForm = UIContext.getUIForm(formId);
            if (UIForm && UIForm.getTableXML(table.id)) {
                var tableXML = UIForm.getTableXML(table.id), stringArgs = strPath.split("@"), pathNode = stringArgs[0];
                var xpathIdent = "", tHead = $R(table).getTHead(), tBody = $R(table).getTBody(), checkBox = tHead && tHead.rows[0] && tHead.rows[0].cells[0] ? tHead.rows[0].cells[0].getElementsByTagName("component")[0] : null;
                if (checkBox) {
                    xpathIdent = getAttMandatory(checkBox, "pathNodeIdent");
                }
                var domainXML = null, stringArgs = strPath.split("@"), pathNode = stringArgs[0], selectionType = table.getAttribute("selectionType");
                var attributeNode = Rsis.isUndefined(stringArgs[1]) ? "" : stringArgs[1], countRowsTable = Crud.getNameCountRowsTable(table), indSel = "indSelecionado";
                if (selectionType != null && selectionType === "radio") {
                    $R(table).unSelectedNode(pathNode);
                    $R(tBody.rows).each(function(i, row) {
                        $R(row).removeClass("selected");
                    });
                    $R(tBody.rows[oElem.value]).addClass("selected");
                    domainXML = getDomainXMLLine(UIForm, table, oElem, pathNode, attributeNode);
                } else {
                    var row = $R(tBody.rows[oElem.value]);
                    oElem.checked ? row.addClass("selected") : row.removeClass("selected");
                    var objNode = null;
                    domainXML = getDomainXMLLine(UIForm, table, oElem, pathNode, attributeNode);
                    if (domainXML) {
                        var firstNode = domainXML.documentElement.firstChild, isChk = oElem.checked;
                        if (firstNode) {
                            firstNode.setAttribute(indSel, isChk ? "1" : "0");
                        }
                        var stringPathNode = pathNode + "[@" + countRowsTable + "='" + parseInt(oElem.value) + "']", objNode = getNodes(UIForm.getTableXML(table.id), stringPathNode);
                        if (objNode && objNode.length > 0) {
                            objNode[0].setAttribute(indSel, isChk ? "1" : "0");
                        }
                    }
                    UIForm.setDomainTableXML(table.id, domainXML);
                    UIContext.setUIForms(UIForm.getForm().id, UIForm);
                    TableRsis.checkAllValidate(table, UIForm, oElem, pathNode, stringNode);
                    var checkInputDeveloper = getAttFuncDeveloper(table, "checkInputDeveloper"), cacheNodesChecked = getAtt(table, "cacheNodesChecked");
                    if (cacheNodesChecked == "true" || checkInputDeveloper != null && checkInputDeveloper !== "") {
                        var nodeLine = objNode && objNode.length > 0 ? cloneNodeElement(objNode[0]) : null;
                        if (checkInputDeveloper != null && checkInputDeveloper !== "") {
                            var tBody = $(table.id + ".tBdy"), rowSelected = tBody.rows[oElem.value];
                            compressEvalRsisAll(checkInputDeveloper, table, UIForm, nodeLine, oElem, rowSelected);
                        }
                        if (nodeLine) Rsis.Cache.checkObjects(UIForm, nodeLine, table, false);
                        TableRsis.checkAllValidate(table, UIForm, oElem, pathNode, stringNode);
                        var dataScroller = getDataScrollerByTable(table.id);
                        if (typeof DataScrollRsis !== "undefined" && dataScroller) {
                            DataScrollRsis.configItensSelected(dataScroller, UIForm, table.id);
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "selectRowEditTable", EditTableRsis);
    }
}

function getValueXMLEditTableParms(UIForm, columnHeader, count, table) {
    try {
        count = parseInt(count);
        if (UIForm && columnHeader != null && count != null) {
            var objXML = UIForm.getParams(getAttMandatory(columnHeader, "params"));
            if (objXML != null) {
                var optionValue = getAtt(columnHeader, "optionValue"), optionValueRef = getAtt(columnHeader, "optionValueRef"), optionText = getAtt(columnHeader, "optionText"), pathEditTable = getStringPathByLength(UIForm.getTableXML(table.id), optionValue, optionValueRef, "", count), nodeParamCombo = getNodes(objXML, ROOT_NODE + pathEditTable), xpRootNode = ROOT_NODE;
                if (nodeParamCombo && nodeParamCombo.length > 0) {
                    var listPathNodes = optionText.split(",");
                    var textValue = "";
                    for (var m = 0; m < nodeParamCombo.length; m++) {
                        var listPathNodes = optionText.split(",");
                        if (listPathNodes && listPathNodes.length > 0) {
                            var k = 0, max_k = listPathNodes.length;
                            for (var k = 0; k < max_k; k++) {
                                var str = Trim(listPathNodes[k]);
                                if (str !== "") {
                                    if (str.substring(0, 1) === "'") {
                                        textValue = textValue + str.replace(/'/g, "");
                                    } else {
                                        var stringPath = str.split("@")[0], stringAttribute = str.split("@")[1];
                                        if (stringPath && stringPath != "" && (stringAttribute && stringAttribute != "")) {
                                            var nodes = getNodes(objXML, xpRootNode + pathEditTable), attributeNode = typeof stringAttribute === "undefined" ? "" : stringAttribute;
                                            if (attributeNode != null && attributeNode !== "") {
                                                textValue = textValue + getNodeValueId(nodes, attributeNode, m);
                                            } else {
                                                textValue = textValue + getNodeText(nodes[0]);
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                    return textValue;
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "getValueXMLEditTableParms()", EditTableRsis);
    }
    return "";
}

function executeActionEditTable(formAction, callBackFuntion, params, METHOD_NAME, tableId) {
    try {
        if (formAction && typeof METHOD_NAME !== "undefined" && METHOD_NAME != null && METHOD_NAME !== "") {
            if (tableId != null && typeof tableId !== "undefined" && tableId !== "") {
                EditTableRsis.ID_OBJECT = tableId;
            }
            AjaxRsis.callActionSyncDeveloper(formAction.id, URL, getAttMandatory(formAction, "targetAction"), METHOD_NAME, callBackFuntion, params, "callBackExecuteActionEditTable");
        }
    } catch (oErr) {
        outPrint(oErr, "executeActionEditTable()", EditTableRsis);
    }
}

function callBackExecuteActionEditTable(f, funCallBackDeveloper) {
    try {
        var Transfer = AjaxRsis.process(f);
        if (Transfer && Transfer.objXML && Transfer.UIForm) {
            var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
            Message.render(UIForm, objXML);
            var UIContext = Rsis.UIContext.get(UIForm.getDialogId());
            var COMPONENTS = UIForm.getAllUIComponents();
            if (UIForm.hasError == false && COMPONENTS) {
                var dataScroller, form = UIForm.getForm(), nodeNameForm = UIForm.getPath(), pageNumber = 0, table = COMPONENTS["editTable"][0], myTransfer = EditTableRsis.getParamsByIdObject(UIForm, EditTableRsis.ID_OBJECT);
                var _ManagerCache = UIContext.cache.getInstance(table.id);
                if (myTransfer != null) {
                    table = myTransfer.editTable == null ? table : myTransfer.editTable;
                    dataScroller = myTransfer.dataScroller;
                    pageNumber = myTransfer.pageNumber;
                }
                if (!Rsis.isUndefined(table) && table != null) {
                    var _rsTable = $R(table);
                    var radioButton = _rsTable.getRadioSelected(), nodeTableDomain = _rsTable.getPathNode();
                    _ManagerCache.object = table;
                    _ManagerCache.initPage = pageNumber - 1 < 0 ? 0 : pageNumber - 1;
                    if (!Rsis.isUndefined(funCallBackDeveloper) && funCallBackDeveloper !== "") {
                        compressEvalRsisAll(funCallBackDeveloper, _ManagerCache, UIForm, objXML, radioButton);
                    }
                    _ManagerCache.UIForm = UIForm;
                    ManagerCacheProcess(_ManagerCache, _ManagerCache.origem);
                    _ManagerCache.origem = -1;
                    UIForm = _ManagerCache.UIForm;
                    UIContext.setUIForms(f, UIForm);
                    renderDataScroller(dataScroller, UIForm.state);
                    _rsTable.drawBody(isRender).evalDev("afterAddItem", [ table, UIForm, objXML ]);
                    _rsTable.evalDev("afterDeleteItem", [ table, UIForm, objXML ]);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "callBackExecuteActionEditTable()", EditTableRsis);
    } finally {
        _NO_RENDER_INPUT = false;
        EditTableRsis.ID_OBJECT = null;
    }
}

function ajaxRemoveAddItemDeveloper(formAction, callBackFuntion, params, METHOD_NAME, tableId) {
    try {
        EditTableRsis.callJavaAction(formAction, callBackFuntion, params, METHOD_NAME, false, tableId, "callBackRemoveAddItemDeveloper");
    } catch (oErr) {
        outPrint(oErr, "ajaxRemoveAddItemDeveloper()", EditTableRsis);
    }
}

function callBackRemoveAddItemDeveloper(f, funCallBackDeveloper) {
    processCallBack(f, funCallBackDeveloper, UIRsis.VALIDATE_ERROR);
}

function processCallBack(f, funCallBackDeveloper, validateHasError) {
    try {
        if (!Rsis.isUndefined(Loading)) {
            Loading.stop();
        }
        var Transfer = AjaxRsis.process(f);
        if (Transfer && Transfer.objXML && Transfer.UIForm) {
            var objXML = Transfer.objXML, UIForm = Transfer.UIForm, COMPONENTS = UIForm.getAllUIComponents();
            Message.render(UIForm, objXML);
            var UIContext = Rsis.UIContext.get(UIForm.getDialogId());
            if (UIForm.hasErrorValidate() && COMPONENTS) {
                var dataScroller, form = UIForm.getForm(), nodeNameForm = UIForm.getXPath(), pageNumber = 0, table = COMPONENTS["editTable"][0], myTransfer = EditTableRsis.getParamsByIdObject(UIForm, EditTableRsis.ID_OBJECT);
                var _ManagerCache = UIContext.cache.getInstance(table.id);
                if (myTransfer != null) {
                    table = myTransfer.editTable == null ? table : myTransfer.editTable;
                    dataScroller = myTransfer.dataScroller;
                    pageNumber = myTransfer.pageNumber;
                }
                if (!Rsis.isUndefined(table) && table != null) {
                    var _rsTable = $R(table);
                    var nodeAutDto = getNodes(objXML, ROOT_NODE + "/xmlAutenticaDto/autenticaDto");
                    if (!(nodeAutDto && nodeAutDto.length > 0)) {
                        _rsTable.clearTable(true);
                    }
                    var domainXML = XML.broke(objXML, "/xmlDomain" + nodeNameForm);
                    if (domainXML != null) {
                        UIForm.domainXML = domainXML;
                    }
                    var radioButton = _rsTable.getRadioSelected(), nodeTableDomain = _rsTable.getPathNode();
                    _ManagerCache.object = table;
                    _ManagerCache.initPage = pageNumber - 1 < 0 ? 0 : pageNumber - 1;
                    if (!Rsis.isUndefined(funCallBackDeveloper) && funCallBackDeveloper !== "") {
                        compressEvalCBETDev(_ManagerCache, UIForm, objXML, radioButton, funCallBackDeveloper);
                    }
                    _rsTable.evalDev("afterAddItem", [ table, UIForm, objXML ]);
                    _rsTable.evalDev("afterDeleteItem", [ table, UIForm, objXML ]);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "processCallBack()", EditTableRsis);
    } finally {
        _NO_RENDER_INPUT = false;
        EditTableRsis.ID_OBJECT = null;
        UIRsis.VALIDATE_ERROR = true;
        objXML = null;
    }
}

function clearComponentsEditTable(COMPONENTS, state) {
    try {
        var inputs = COMPONENTS["input"], fnUnd = "FUNCTION_UNDEFINED", gtM = getMessageBundle, erl = UIRsis.ERROR_LIB;
        if (inputs != undefined && (inputs && inputs.length > 0)) {
            if (InputRsis == undefined) throw new MiddlewareViewException("InputException : " + gtM(fnUnd, erl));
            for (var m = 0; m < inputs.length; m++) {
                clearInputEditTable(inputs[m], state);
            }
        }
        var labels = COMPONENTS["label"];
        if (labels != undefined && (labels && labels.length > 0)) {
            if (LabelRsis == undefined) throw new MiddlewareViewException("LabelException : " + gtM(fnUnd, erl));
            for (var n = 0; n < labels.length; n++) {
                clearLabelEditTable(labels[n], state);
            }
        }
        var combos = COMPONENTS["comboBox"];
        if (combos != undefined && (combos && combos.length > 0)) {
            if (ComboRsis == undefined) throw new MiddlewareViewException("ComboException : " + gtM(fnUnd, erl));
            for (var q = 0; q < combos.length; q++) {
                clearComboEditTable(combos[q], state);
            }
        }
        var searchFields = COMPONENTS["searchField"];
        if (searchFields != undefined && (searchFields && searchFields.length > 0)) {
            if (SearchFieldRsis == undefined) throw new MiddlewareViewException("SearchFieldException : " + gtM(fnUnd, erl));
            for (var f = 0; f < searchFields.length; f++) {
                clearSearchFieldEditTable(searchFields[f], state);
            }
        }
        var autoCompletes = COMPONENTS["autoComplete"];
        if (autoCompletes != undefined && (autoCompletes && autoCompletes.length > 0)) {
            if (AutoCompleteRsis == undefined) throw new MiddlewareViewException("AutoCompleteException : " + gtM(fnUnd, erl));
            for (var at = 0, max_at = autoCompletes.length; at < max_at; at++) {
                clearAutoCompleteEditTable(autoCompletes[at], state);
            }
        }
        var suggestBoxs = COMPONENTS["suggestBox"];
        if (suggestBoxs != undefined && (suggestBoxs && suggestBoxs.length > 0)) {
            if (SuggestBoxRsis == undefined) throw new MiddlewareViewException("SuggestBoxException : " + gtM(fnUnd, erl));
            for (var at = 0, max_at = suggestBoxs.length; at < max_at; at++) {
                clearSuggestBoxEditTable(suggestBoxs[at], state);
            }
        }
    } catch (oErr) {
        if (oErr instanceof MiddlewareViewException) {
            alert(oErr.message);
        } else {
            outPrint(oErr, "clearComponentsEditTable()", EditTableRsis);
        }
    }
}

function renderHelpEditTable(object, UIForm, enableHelpTable) {
    try {
        if (!object) return;
        var tbody = $(object.id + ".tBdy");
        var rows = tbody.rows;
        if (rows && rows.length > 0) {
            var cps = getComponents(rows[0]);
            if (cps) {
                enableHelpApp(cps, UIForm, enableHelpTable, false);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpEditTable()", EditTableRsis);
    }
}

function renderHelpKeysEditTable(object, UIForm, enableHelpTable) {
    try {
        if (!object) return;
        var tbody = $(object.id + ".tBdy");
        var rows = tbody.rows;
        if (rows && rows.length > 0) {
            var cps = getComponents(rows[0]);
            if (cps) {
                enableHelpKeys(cps, UIForm, enableHelpTable, false);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpKeysEditTable()", EditTableRsis);
    }
}

function renderSearchBar(obj) {
    try {
        if (obj) {
            var _rsTable = $R(obj);
            var UIContext = Rsis.UIContext.get(obj);
            var UIForm = UIContext.getUIForm(obj);
            if (UIForm) {
                var tSearch = _rsTable.getTBodySr();
                _rsTable.createColgroupSearch();
                var rows = tSearch.rows, cols = rows[rows.length - 1].cells;
                if (cols && cols.length > 0) {
                    var cps = getComponents(rows[0]);
                    if (cps) renderForm(cps, UIForm.state);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderSearchBar()", EditTableRsis);
    }
}

(function($R) {
    DataScrollRsis = {
        _FILE: "025dataScrollPageRsis.js",
        version: JRetail.rsis.VersionJS,
        render: function() {
            return renderDataScroller.apply(this, arguments);
        },
        configButton: function(obj, pageNumber, pageValidate, pageValue, sEvent, $win, css) {
            try {
                if (obj) {
                    if (pageNumber < 0 || pageValidate === "true") {
                        obj.className = "btnPgDsd " + css;
                        obj.page = "";
                        obj.disabled = true;
                        obj.style.cursor = "default";
                    } else {
                        obj.className = "btnPgBld " + css;
                        obj.disabled = false;
                        obj.style.cursor = "pointer";
                        setDOMEvent(obj, "onclick", $win + "searchPage(this," + pageValue + ")");
                        setDOMEvent(obj, "onkeypress", $win + "pressKeyButtonDataScroller(this, " + sEvent + "," + pageValue + ")");
                    }
                    obj.tabIndex = 0;
                    $R(obj).setHint();
                    setCssHelp(obj, getAtt(obj, "help"));
                    setCssHelpKeys(obj, getAtt(obj, "helpKeys"));
                }
            } catch (oErr) {
                outPrint(oErr, ".configButton", this);
            }
        },
        configButtonAddDel: function(dataScroller, obj, isEditable) {
            try {
                if (obj) {
                    var statusValidate = getAtt(dataScroller, "statusValidate");
                    if (statusValidate === "true") {
                        obj.disabled = !isEditable;
                        obj.readOnly = !isEditable;
                        obj.style.cursor = isEditable ? "pointer" : "default";
                    }
                    obj.tabIndex = 0;
                    setDataUICpt(dataScroller, obj);
                    renderCSSButton(obj, "btnPgDsd");
                    $R(obj).setHint();
                    setCssHelp(obj, getAtt(obj, "help"));
                    setCssHelpKeys(obj, getAtt(obj, "helpKeys"));
                }
            } catch (oErr) {
                outPrint(oErr, ".configButtonAddDel", this);
            }
        },
        configHelp: function(UIForm, object, button, enableHelp) {
            try {
                if (object) {
                    if (enableHelp) {
                        var helpKey = button.getAttribute("helpKey");
                        if (isNoEmpty(helpKey)) {
                            button.setAttribute("help", "true");
                            button.setAttribute("hintHelp", isNoEmpty(helpKey) ? helpKey : "");
                            button.className = button.className + " jretail-help-border";
                        }
                        UtilRsis.setHelp(button);
                    } else {
                        button.setAttribute("help", "false");
                        button.className = button.className.replace(" jretail-help-border", "");
                        setDOMEvent(button, "onmouseover", "");
                        setDOMEvent(button, "onmouseout", "");
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".configHelp", this);
            }
        },
        configHelpKeys: function(UIForm, object, button, enableHelp, seqHelpApp) {
            try {
                if (object) {
                    if (enableHelp) {
                        var helpKey = button.getAttribute("helpKey");
                        if (isNoEmpty(helpKey)) {
                            button.setAttribute("helpKeys", "true");
                            button.setAttribute("hintHelpKeys", helpKey);
                            button.className = button.className + " jretail-help-border";
                        }
                        UtilRsis.setHelpKeys(button);
                    } else {
                        button.setAttribute("helpKeys", "false");
                        button.className = button.className.replace(" jretail-help-border", "");
                        setDOMEvent(button, "onmouseover", "");
                        setDOMEvent(button, "onmouseout", "");
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".configHelpKeys", this);
            }
        },
        getQueryString: function(UIForm, dsName) {
            try {
                var pageNumber = 0, pageSize = 10;
                if (UIForm && dsName != null && dsName !== "") {
                    var obj = UIForm.getObject(dsName);
                    if (obj) {
                        var pageNumber = obj.getAttribute("initPage");
                        pageNumber = pageNumber == null || pageNumber === "" ? 0 : pageNumber;
                        var pageSize = obj.getAttribute("maxRowsTable");
                        pageSize = pageSize == null || pageSize === "" ? 10 : pageSize;
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".getQueryString", this);
            }
            return "&pageNumber=" + escapeParam(pageNumber, false) + "&pageSize=" + escapeParam(pageSize, false);
        },
        configItensSelected: function(obj, UIForm, tableId) {
            try {
                if (obj && UIForm && tableId) {
                    var table = $(tableId), xpathTable = table.getAttribute("node"), arrayPath = xpathTable.split("/"), xpathNode = "/" + arrayPath[arrayPath.length - 1], totalElementsSelected = 0, $win = UtilRsis.getParentWindow(obj), spanTotal = $(obj.id + ".totalSelected"), msgTotalSelected = $(obj.id + ".msgTotalSelected"), visSel = $(obj.id + ".visSel"), visSeldPane = $(obj.id + ".visSeldPane");
                    var elementsCheckedXML = UIForm.getElementsChecked(table.id);
                    if (elementsCheckedXML) {
                        var valueToCheck = "indSelecionado", nameCountRowsTable = Crud.getNameCountRowsTable(table), nodePath = "@ident";
                        var checkBox = Rsis.Cache.getCheckBox(table);
                        if (checkBox) {
                            if (checkBox.getAttribute("valueToCheck")) {
                                valueToCheck = checkBox.getAttribute("valueToCheck");
                            }
                            if (checkBox.getAttribute("value")) {
                                nodePath = checkBox.getAttribute("value");
                            }
                        }
                        var nodes = getNodes(elementsCheckedXML, Rsis.Cache.xpath + xpathNode);
                        if (nodes && nodes.length > 0) {
                            totalElementsSelected = nodes.length;
                        }
                    }
                    var vis = totalElementsSelected <= 0 ? false : true;
                    if (msgTotalSelected) {
                        $R(msgTotalSelected).visible(vis);
                        if (vis) {
                            msgTotalSelected.style.display = "inline";
                        }
                    }
                    if (visSeldPane) {
                        $R(visSeldPane).visible(vis);
                    }
                    if (visSel) {
                        setDOMEvent(visSel, "onclick", $win + "DataScrollRsis.selectedView(this);");
                        $R(visSel).visible(vis);
                        if (vis) {
                            visSel.style.display = "inline";
                        }
                    }
                    if (spanTotal) {
                        $R(spanTotal).visible(vis);
                        if (vis) {
                            spanTotal.style.display = "inline";
                        }
                        spanTotal.innerHTML = totalElementsSelected;
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".configItensSelected", this);
            }
        },
        selectedView: function(obj) {
            try {
                if (obj) {
                    var UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(obj);
                    if (UIForm) {
                        var buttonId = getAttMandatory(obj, "id"), stringDSArgs = buttonId.split("."), dataScroller = $(stringDSArgs[0]);
                        var editTableId = getAttMandatory(dataScroller, "editTable"), tableName = null;
                        if (editTableId != null && editTableId !== "") {
                            tableName = editTableId;
                        } else {
                            tableName = getAttMandatory(dataScroller, "dataTable");
                        }
                        if (tableName != null) {
                            Rsis.Cache.showElements(UIForm, $(tableName));
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".selectedView", this);
            }
        },
        createPageList: function(pageNumber, pageSize) {
            return XML.create('<page class="class rsis.middleware.dao.Page" firstPage="true" lastPage="true" pageNumber="' + pageNumber + '" pageSize="' + pageSize + '" totalAllElements="0" id="1">' + '<pageElements className="java.util.ArrayList"></pageElements>' + "</page>");
        }
    };
    DataScrollPageRsis = DataScrollRsis;
})(Rsis);

function renderDataScroller(dataScroller, status) {
    try {
        if (dataScroller) {
            var UIContext = Rsis.UIContext.get(dataScroller);
            var sEvent = getStringEvent(dataScroller), $win = UtilRsis.getParentWindow(dataScroller), dataScrollerId = getAttMandatory(dataScroller, "id"), stringArgs = dataScrollerId.split(":"), UIForm = UIContext.getUIForm(dataScroller);
            var editTableId = getAttMandatory(dataScroller, "editTable"), dataTableId = getAttMandatory(dataScroller, "dataTable");
            var objectId = isNoEmpty(editTableId) ? editTableId : dataTableId;
            if (isNoEmpty(dataScrollerId)) {
                this.display = function(object, isVisible) {
                    if (object) {
                        object.style.display = isVisible ? "block" : "none";
                    }
                };
                var spanButtons = $(dataScrollerId + ".spanButtons"), prevButton = $(dataScrollerId + ".prevButton"), nextButton = $(dataScrollerId + ".nextButton"), contentMsg = $(dataScrollerId + ".contentMsg"), visible = false;
                var isVisibleButtons = dataScroller.getAttribute("invisibleButtonSearch") !== "true" ? true : false;
                if (isVisibleButtons) {
                    var tableXML = UIForm.getTableXML(objectId), maxPages = toInt(getAttMandatory(dataScroller, "maxPages"));
                    if (!tableXML) {
                        tableXML = DataScrollPageRsis.createPageList(0, maxPages);
                    }
                    if (tableXML != null) {
                        var nodeTableXML = getNodes(tableXML, "/page");
                        if (nodeTableXML && nodeTableXML.length > 0) {
                            this.display(spanButtons, visible);
                            this.display(prevButton, visible);
                            this.display(nextButton, visible);
                            this.display(contentMsg, visible);
                            var pageNumber = toInt(getNodeValue(nodeTableXML, "pageNumber")), totalAllElements = toInt(getNodeValue(nodeTableXML, "totalAllElements")), pageSize = toInt(getNodeValue(nodeTableXML, "pageSize")), maxButton = maxPages;
                            if (maxPages == 1) maxButton = 0;
                            var NUMTOTALPAGES = 0;
                            if (totalAllElements % pageSize === 0) {
                                NUMTOTALPAGES = totalAllElements / pageSize;
                            } else {
                                NUMTOTALPAGES = parseInt(totalAllElements / pageSize, 10) + 1;
                            }
                            var previousPageNumber = toInt(getNodeValue(nodeTableXML, "previousPageNumber")), nextPageNumber = toInt(getNodeValue(nodeTableXML, "nextPageNumber")), stringButtons = "", pagesTotal = maxPages + pageNumber > NUMTOTALPAGES - 1 ? NUMTOTALPAGES : maxPages + pageNumber;
                            var countPages = 0;
                            if (pageNumber >= maxPages) {
                                countPages = pagesTotal - maxPages;
                            }
                            var previous = 0, next = 0;
                            for (var i = 0; i < maxPages; i++) {
                                if (i == 0) {
                                    previous = countPages - 1 < 0 ? 0 : countPages - 1;
                                }
                                next = countPages + 1 > totalAllElements - 1 ? totalAllElements - 1 : countPages + 1;
                                stringButtons = stringButtons + '<input type="button" component="scrollButton" id="' + dataScroller.id + '.btnPage" ';
                                if (maxPages > 1) {
                                    if (pageNumber < 0 || pageNumber == countPages) {
                                        stringButtons = stringButtons + ' class="btnPgSel" readOnly="true" page=""';
                                    } else {
                                        stringButtons = stringButtons + ' class="btPgStd" page="" onclick="';
                                        stringButtons = stringButtons + $win + "searchPage(this," + countPages + ');" onkeypress="';
                                        stringButtons = stringButtons + $win + "pressKeyButtonDataScroller(this, " + sEvent + "," + countPages + ');" ';
                                    }
                                } else {
                                    stringButtons = stringButtons + ' class="btnPgSel" readOnly="true" page=""';
                                }
                                stringButtons = stringButtons + 'value="' + (countPages + 1) + '" />';
                                countPages += 1;
                            }
                            spanButtons.innerHTML = "" + stringButtons;
                            var firstPage = Trim(getNodeValue(nodeTableXML, "firstPage"));
                            setDataUICpt(dataScroller, prevButton);
                            prevButton.setAttribute("hint", "Pagina Anterior");
                            DataScrollRsis.configButton(prevButton, pageNumber, firstPage, previous, sEvent, $win, "btleft");
                            var lastPage = Trim(getNodeValue(nodeTableXML, "lastPage"));
                            setDataUICpt(dataScroller, nextButton);
                            nextButton.setAttribute("hint", "Proxima Pagina");
                            DataScrollRsis.configButton(nextButton, pageNumber, lastPage, next, sEvent, $win, "btright");
                            var numReg = 0;
                            var DATATABLE = dataScroller.getAttribute("dataTable");
                            if (DATATABLE) {
                                var dataTable = $(DATATABLE);
                                var pathDataTable = dataTable.getAttribute("node");
                                if (pathDataTable !== "") {
                                    var dataTableNodes = getNodes(tableXML, pathDataTable);
                                    numReg = parseInt(dataTableNodes.length);
                                }
                            }
                            var CURRENT_PAGE = pageNumber + 1;
                            numberRegistrosIni = CURRENT_PAGE * pageSize + 1 - pageSize;
                            numberRegistrosFim = (CURRENT_PAGE + 1) * pageSize - pageSize;
                            if (numberRegistrosFim > totalAllElements) numberRegistrosFim = totalAllElements;
                            var _id_ = dataScroller.id;
                            $(_id_ + ".ofPage").innerHTML = numberRegistrosIni < 0 ? 0 : numberRegistrosFim == 0 ? 0 : numberRegistrosIni;
                            $(_id_ + ".evenPage").innerHTML = numberRegistrosFim;
                            $(_id_ + ".totalPages").innerHTML = totalAllElements;
                            DataScrollRsis.configItensSelected(dataScroller, UIForm, objectId);
                            visible = true;
                        }
                    }
                }
                this.display(spanButtons, visible);
                this.display(prevButton, visible);
                this.display(nextButton, visible);
                this.display(contentMsg, visible);
            }
            var isEditable = $R(dataScroller).isEditable(status);
            var btnadd = $(objectId + ".add");
            if (btnadd) {
                btnadd.setAttribute("hint", "Adicionar");
                btnadd.setAttribute("component", "scrollButton");
                setDataUICpt(dataScroller, btnadd);
                DataScrollRsis.configButtonAddDel(dataScroller, btnadd, isEditable);
            }
            var btndelete = $(objectId + ".delete");
            if (btndelete) {
                btndelete.setAttribute("hint", "Excluir");
                btndelete.setAttribute("component", "scrollButton");
                DataScrollRsis.configButtonAddDel(dataScroller, btndelete, isEditable);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderDataScroller", DataScrollRsis);
    }
}

function pressKeyButtonDataScroller(button, evt, p) {
    if (evt.keyCode == 13) {
        searchPage(button, p);
    }
}

function searchPage(button, p) {
    try {
        if (typeof Crud !== "undefined") {
            button.page = p;
            var UIContext = Rsis.UIContext.get(button);
            var buttonId = getAttMandatory(button, "id"), stringArgs = buttonId.split(":"), UIForm = UIContext.getUIForm(button);
            var stringDSArgs = buttonId.split("."), dataScroller = $(stringDSArgs[0]);
            var editTableId = getAtt(dataScroller, "editTable"), objectId = null;
            if (editTableId != null && editTableId !== "") objectId = editTableId; else objectId = getAtt(dataScroller, "dataTable");
            setDataUICpt(dataScroller, button);
            var statusPage = UIForm.state;
            UIForm.setStateCache(statusPage);
            UIForm.state = UIRsis.SEARCHING;
            if (buttonId !== "" && UIForm.getTableXML(objectId) != null) {
                UIContext.setUIForms(stringArgs[0], UIForm);
                Crud.searchPage(button);
            } else {
                UIForm.setStateCache(null);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "searchPage", DataScrollRsis);
    }
}

function renderHelpDataScroller(object, UIForm, enableHelp) {
    try {
        if (object) {
            var editTableId = getAttMandatory(object, "editTable"), tableId = null;
            if (editTableId != null && editTableId !== "") {
                tableId = editTableId;
            } else {
                tableId = getAttMandatory(object, "dataTable");
            }
            var prevButton = $(object.id + ".prevButton");
            if (prevButton) {
                DataScrollRsis.configHelp(UIForm, object, prevButton, enableHelp);
            }
            var nextButton = $(object.id + ".nextButton");
            if (nextButton) {
                DataScrollRsis.configHelp(UIForm, object, nextButton, enableHelp);
            }
            if (tableId != null) {
                var buttonAdd = $(tableId + ".add");
                if (buttonAdd) {
                    DataScrollRsis.configHelp(UIForm, object, buttonAdd, enableHelp);
                }
                var buttonDelete = $(tableId + ".delete");
                if (buttonDelete) {
                    DataScrollRsis.configHelp(UIForm, object, buttonDelete, enableHelp);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpDataScroller", DataScrollRsis);
    }
}

function renderHelpKeysDataScroller(object, UIForm, enableHelp) {
    try {
        if (object) {
            var stringArgs = object.id.split("__");
            if (stringArgs && stringArgs.length > 1) {
                body = getIframeDocument($(stringArgs[0])).getElementsByTagName("body")[0];
            } else {
                body = document.getElementsByTagName("body")[0];
            }
            var ctrpanel = $(object.id.split("#")[0] + ".ctrpanel");
            if (ctrpanel && !(stringArgs && stringArgs.length > 1)) {
                seqHelpApp = getAtt(ctrpanel, "seqHelpApp");
            } else {
                seqHelpApp = getAtt(body, "seqHelpApp");
            }
            var tableId = null;
            var editTableId = getAttMandatory(object, "editTable");
            if (editTableId != null && editTableId != "") {
                tableId = editTableId;
            } else {
                tableId = getAttMandatory(object, "dataTable");
            }
            var prevButton = $(object.id + ".prevButton");
            if (prevButton) {
                DataScrollRsis.configHelpKeys(UIForm, object, prevButton, enableHelp, seqHelpApp);
            }
            var nextButton = $(object.id + ".nextButton");
            if (nextButton) {
                DataScrollRsis.configHelpKeys(UIForm, object, nextButton, enableHelp, seqHelpApp);
            }
            if (tableId != null) {
                var buttonAdd = $(tableId + ".add");
                if (buttonAdd) {
                    DataScrollRsis.configHelpKeys(UIForm, object, buttonAdd, enableHelp, seqHelpApp);
                }
                var buttonDelete = $(tableId + ".delete");
                if (buttonDelete) {
                    DataScrollRsis.configHelpKeys(UIForm, object, buttonDelete, enableHelp, seqHelpApp);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpKeysDataScroller", DataScrollRsis);
    }
}

var ToolBarRsis = function($R) {
    "use strict";
    var ToolBarRsis = {
        _FILE: "026toolBarRsis.js"
    };
    function enableButton(obj, habilita) {
        if (obj) {
            obj.disabled = !habilita;
            obj.readOnly = !habilita;
            obj.cursor = habilita ? "pointer" : "default";
            renderCSSButton(obj, "tbBtDsd");
        }
    }
    function isDefaultButton(buttonElement, toolbarId) {
        var buttonElementId = buttonElement.id;
        return buttonElementId !== toolbarId + ".btnCreate" && buttonElementId !== toolbarId + ".btnSearch" && buttonElementId !== toolbarId + ".btnClose" && buttonElementId !== toolbarId + ".btnEdit" && buttonElementId !== toolbarId + ".btnExclude" && buttonElementId !== toolbarId + ".btnActivate" && buttonElementId !== toolbarId + ".btnSelect" && buttonElementId !== toolbarId + ".btnUndo" && buttonElementId !== toolbarId + ".btnConfirm" && buttonElementId !== toolbarId + ".btnHelp" && isNoEmpty(buttonElement.getAttribute("editable"));
    }
    function renderButtonInitState(buttonElement, toolbarId) {
        var buttonElementId = buttonElement.id;
        if (buttonElementId == toolbarId + ".btnCreate" || buttonElementId == toolbarId + ".btnSearch" || buttonElementId == toolbarId + ".btnClose") {
            buttonElement.disabled = false;
        }
        if (buttonElementId == toolbarId + ".btnEdit" || buttonElementId == toolbarId + ".btnExclude" || buttonElementId == toolbarId + ".btnActivate" || buttonElementId == toolbarId + ".btnSelect" || buttonElementId == toolbarId + ".btnUndo" || buttonElementId == toolbarId + ".btnConfirm") {
            buttonElement.disabled = true;
        }
    }
    function renderButtonIncludingState(buttonElement, toolbarId) {
        var buttonElementId = buttonElement.id;
        if (buttonElementId == toolbarId + ".btnCreate" || buttonElementId == toolbarId + ".btnEdit" || buttonElementId == toolbarId + ".btnSearch" || buttonElementId == toolbarId + ".btnExclude" || buttonElementId == toolbarId + ".btnActivate" || buttonElementId == toolbarId + ".btnSelect") {
            buttonElement.disabled = true;
        }
        if (buttonElementId == toolbarId + ".btnUndo" || buttonElementId == toolbarId + ".btnConfirm" || buttonElementId == toolbarId + ".btnClose") {
            buttonElement.disabled = false;
        }
    }
    function renderButtonUpdatingState(buttonElement, toolbarId) {
        var buttonElementId = buttonElement.id;
        if (buttonElementId == toolbarId + ".btnCreate" || buttonElementId == toolbarId + ".btnEdit" || buttonElementId == toolbarId + ".btnSearch" || buttonElementId == toolbarId + ".btnExclude" || buttonElementId == toolbarId + ".btnActivate" || buttonElementId == toolbarId + ".btnSelect") {
            buttonElement.disabled = true;
        }
        if (buttonElementId == toolbarId + ".btnUndo" || buttonElementId == toolbarId + ".btnConfirm" || buttonElementId == toolbarId + ".btnClose") {
            buttonElement.disabled = false;
        }
    }
    function renderButtonSearchingState(buttonElement, toolbarId) {
        var buttonElementId = buttonElement.id;
        if (buttonElementId == toolbarId + ".btnEdit" || buttonElementId == toolbarId + ".btnSearch" || buttonElementId == toolbarId + ".btnExclude" || buttonElementId == toolbarId + ".btnActivate" || buttonElementId == toolbarId + ".btnSelect") {
            buttonElement.disabled = true;
        }
        if (buttonElementId == toolbarId + ".btnCreate" || buttonElementId == toolbarId + ".btnUndo" || buttonElementId == toolbarId + ".btnConfirm" || buttonElementId == toolbarId + ".btnClose") {
            buttonElement.disabled = false;
        }
    }
    function renderButtonVisualizingState(buttonElement, toolbarId) {
        var buttonElementId = buttonElement.id;
        if (buttonElementId == toolbarId + ".btnCreate" || buttonElementId == toolbarId + ".btnEdit" || buttonElementId == toolbarId + ".btnSearch" || buttonElementId == toolbarId + ".btnExclude" || buttonElementId == toolbarId + ".btnActivate" || buttonElementId == toolbarId + ".btnSelect" || buttonElementId == toolbarId + ".btnClose") {
            buttonElement.disabled = false;
        }
        if (buttonElementId == toolbarId + ".btnUndo" || buttonElementId == toolbarId + ".btnConfirm") {
            buttonElement.disabled = true;
        }
    }
    function renderButtonDefaultState(buttonElement, toolbarId) {
        var buttonElementId = buttonElement.id;
        if (buttonElementId == toolbarId + ".btnCreate" || buttonElementId == toolbarId + ".btnEdit" || buttonElementId == toolbarId + ".btnSearch" || buttonElementId == toolbarId + ".btnExclude" || buttonElementId == toolbarId + ".btnActivate" || buttonElementId == toolbarId + ".btnSelect" || buttonElementId == toolbarId + ".btnUndo" || buttonElementId == toolbarId + ".btnConfirm") {
            buttonElement.disabled = true;
        }
        if (buttonElementId == toolbarId + ".btnClose") {
            buttonElement.disabled = false;
        }
    }
    function configClassButtonActivate(buttonElement, toolbarId, available) {
        if (buttonElement) {
            var buttonElementId = buttonElement.id;
            if (buttonElementId == toolbarId + ".btnActivate" && available != null) {
                var className = buttonElement.className;
                if (available) {
                    buttonElement.className = className.replace("tbBtInact", "tbBtAct");
                } else {
                    buttonElement.className = className.replace("tbBtAct", "tbBtInact");
                }
            }
        }
    }
    function configClassButtonHelp(buttonElement, toolbarId) {
        if (buttonElement) {
            var buttonElementId = buttonElement.id;
            if (buttonElementId == toolbarId + ".btnHelp") {
                if ($R.helpStored.getEnableHelp()) {
                    buttonElement.className = "tbBtStd tbBtHlp";
                } else {
                    buttonElement.className = "tbBtStd tbBtHlpPrs";
                }
            }
        }
    }
    function ButtonHelpUrl(object) {
        var countTimeout = 0;
        function getUrlDestinoHelp(toolBar) {
            if (toolBar) {
                var helpStored = $R.helpStored, enable = helpStored && helpStored.getEnableHelp() ? true : false;
                if (enable) {
                    var helpIds = helpStored.constraints(toolBar), UIForm = $R.getUIForm(toolBar);
                    if (helpIds && UIForm && helpIds.helpApp) {
                        var element = helpStored.fatherNode(helpIds.helpApp);
                        if (element) {
                            var model = UIForm.get(element, [ "destinoHelp" ]);
                            if (model && isNoEmpty(model.destinoHelp)) {
                                return model.destinoHelp;
                            }
                        }
                    }
                }
            }
            return null;
        }
        function createBtnHelp(toolBar) {
            try {
                var doc = window.document, obj = null, nm = toolBar.id + ".btnDestHelp", iframe = $getIframeByObject(toolBar);
                if (iframe != null) {
                    doc = getIframeDocument(iframe);
                    obj = $frame(iframe.id, nm);
                } else {
                    obj = $(nm);
                }
                if (!obj) {
                    var bts = $(toolBar.id + ".bts");
                    if (bts) {
                        obj = doc.createElement("button");
                        obj.id = nm;
                        obj.type = "button";
                        obj.className = "tbBtStd tbBtHlpDest";
                        obj.setAttribute("hint", "Conte&uacutedo da Ajuda");
                        obj.setAttribute("helpKeys", "true");
                        obj.setAttribute("component", "toolBarButton");
                        bts.appendChild(obj);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "createBtnHelp", this);
            }
            return obj;
        }
        function renderBtnDestHelp(toolBar, isCallObserver) {
            if (toolBar) {
                clearTimeout(countTimeout);
                var helpStored = $R.helpStored, obj = $(toolBar.id + ".btnDestHelp"), $win = UtilRsis.getParentWindow(toolBar), enable = helpStored && helpStored.getEnableHelp() ? true : false;
                var destinoHelp = getUrlDestinoHelp(toolBar), enableButtonHelp = isNoEmpty(destinoHelp) ? true : false;
                if (obj) {
                    $R(obj).visible(enableButtonHelp);
                } else {
                    var helpIds = helpStored.constraints(toolBar), UIForm = $R.getUIForm(toolBar), sEvent = getStringEvent(toolBar);
                    if (enable && UIForm && helpIds) {
                        var element = helpStored.fatherNode(helpIds.helpApp);
                        if (element) {
                            var model = UIForm.get(element, [ "destinoHelp" ]);
                            if (model && isNoEmpty(model.destinoHelp)) {
                                obj = createBtnHelp(toolBar);
                                $R(obj).visible(true);
                                $R.events.add(obj, "onclick", "return " + $win + "Crud.openUrlHelp(this, " + sEvent + ");");
                            }
                        } else if (!isCallObserver) {
                            var counter = 0, timeout = 10;
                            (function helpKeyObserver(time) {
                                countTimeout = setTimeout(function() {
                                    if (counter++ < time && !helpStored.fatherNode(helpIds.helpApp)) {
                                        helpKeyObserver(time);
                                    } else {
                                        renderBtnDestHelp(toolBar, true);
                                    }
                                }, 1e3);
                            })(timeout);
                        }
                    }
                }
            }
        }
        this.render = function() {
            renderBtnDestHelp(object);
        };
        return this;
    }
    function renderBtnDestHelp(toolBar) {
        new ButtonHelpUrl(toolBar).render();
    }
    function _renderToolBar(toolbar, status) {
        try {
            if (toolbar) {
                var UIContext = $R.UIContext.get(toolbar);
                var UIForm = UIContext.getUIForm(toolbar), toolbarId = toolbar.id, buttons = [], UI = UIRsis;
                var divBts = $(toolbar.id + ".bts"), elements = divBts.getElementsByTagName("button");
                if (elements && elements.length > 0) {
                    for (var j = 0; j < elements.length; j++) {
                        if (elements[j].type === "button" || elements[j].type === "submit") buttons.push(elements[j]);
                    }
                }
                var table = Crud.getTableElement(toolbar);
                var model = UIForm.get(UIForm.getNodeTable(table), [ "available" ]), available = null;
                if (model && isNoEmpty(model.available)) {
                    available = model.available === "1" ? true : false;
                }
                for (var i = 0; i < buttons.length; i++) {
                    var buttonElement = buttons[i], fnc = null;
                    switch (status) {
                      case UI.INITIAL:
                        fnc = renderButtonInitState;
                        break;

                      case UI.INCLUDING:
                        fnc = renderButtonIncludingState;
                        break;

                      case UI.UPDATING:
                        fnc = renderButtonUpdatingState;
                        break;

                      case UI.SEARCHING:
                        fnc = renderButtonSearchingState;
                        break;

                      case UI.VISUALIZING:
                        fnc = renderButtonVisualizingState;
                        break;

                      default:
                        fnc = renderButtonDefaultState;
                        break;
                    }
                    if (fnc != null) {
                        fnc.apply(null, [ buttonElement, toolbarId ]);
                    }
                    buttonElement.tabIndex = 0;
                    setDataUICpt(toolbar, buttonElement);
                    enabledButton(buttonElement, toolbarId);
                    renderCSSButton(buttonElement, "tbBtDsd");
                    configClassButtonActivate(buttonElement, toolbarId, available);
                    configClassButtonHelp(buttonElement, toolbarId);
                    isVisibled(buttonElement);
                    if (isDefaultButton(buttonElement, toolbarId)) {
                        renderButtomToolBar(buttonElement, $R(buttonElement).isEditable(status));
                    }
                }
                renderBtnDestHelp(toolbar);
                renderHelpToolBar(toolbar, UIForm, Crud.HELP_KEY_PRESS);
                renderHelpKeysToolBar(toolbar, UIForm, Crud.HELP_KEY_IDS_PRESS);
                $R(toolbar).evalDev("renderButtonDeveloper", [ toolbar, buttons, UIForm ]);
            }
        } catch (oErr) {
            outPrint(oErr, "_renderToolBar", ToolBarRsis);
        }
    }
    $R.extend(ToolBarRsis, {
        version: JRetail.rsis.VersionJS,
        render: function() {
            return _renderToolBar.apply(null, arguments);
        },
        renderButtonHelp: function(object) {
            try {
                if (object) {
                    if ($R.helpStored.getEnableHelp()) {
                        object.className = "tbBtStd tbBtHlp";
                    } else {
                        object.className = "tbBtStd tbBtHlpPrs";
                    }
                    renderBtnDestHelp($(object.id.split(".")[0]));
                }
            } catch (oErr) {
                outPrint(oErr, ".renderButtonHelp", this);
            }
        }
    });
    $R.fn.renderButtonsToolBar = function() {
        try {
            var len = arguments.length, habilita = false, obj = null;
            if (len == 1) {
                habilita = arguments[0];
                habilita = typeof habilita === "string" ? habilita != null && habilita !== "" && habilita !== UIRsis.VISUALIZING && habilita !== UIRsis.INITIAL : habilita;
            }
            if (len == 2) obj = arguments[1];
            if (!obj) obj = this;
            if (obj) {
                if ($R.isArray(obj) || typeof obj === "object") {
                    for (var i = 0; i < obj.length; i++) {
                        var o = obj[i];
                        if (o) {
                            enableButton(o, habilita);
                        }
                    }
                } else {
                    enableButton(obj, habilita);
                }
            }
        } catch (oErr) {
            outPrint(oErr, ".renderButtonsToolBar", $R);
        }
        return this;
    };
    return ToolBarRsis;
}(Rsis);

function renderButtomToolBar(obj, state) {
    $R(obj).renderButtonsToolBar(state);
}

function renderToolBar(obj, state) {
    ToolBarRsis.render(obj, state);
}

function enabledButton(button, toolbarId) {
    try {
        if (button) {
            var enabled = getAtt(button, "enableButton");
            if (enabled === "true" && button.id === toolbarId + ".btnSelect") {
                button.disabled = false;
            }
        }
    } catch (oErr) {
        outPrint(oErr, "enabledButton", ToolBarRsis);
    }
}

function renderHelpToolBar(toolbar, UIForm, enableHelp) {
    try {
        if (toolbar) {
            var UIContext = Rsis.UIContext.get(toolbar);
            var UIForm = UIContext.getUIForm(toolbar), toolbarId = toolbar.getAttribute("id"), buttons = [];
            var divBts = $(toolbar.id + ".bts"), elements = divBts.getElementsByTagName("input");
            if (elements && elements.length > 0) {
                for (var j = 0; j < elements.length; j++) {
                    if (elements[j].type === "button" || elements[j].type === "submit") buttons.push(elements[j]);
                }
            }
            for (var i = 0; i < buttons.length; i++) {
                var buttonElement = buttons[i];
                if (enableHelp && buttonElement.disabled == false) {
                    var seqHelpApp = buttonElement.getAttribute("help");
                    var helpKey = buttonElement.getAttribute("helpKey");
                    var node = UIRsis.getElementNodesHelp(UIForm, seqHelpApp, helpKey);
                    if (node != null) {
                        var titleHelp = node.getAttribute("descBreve") != null ? node.getAttribute("descBreve") : "";
                        var descriptionHelp = node.getAttribute("descLonga") != null ? node.getAttribute("descLonga") : "";
                        if (descriptionHelp != "") {
                            buttonElement.help = "true";
                            buttonElement.setAttribute("help", "true");
                            buttonElement.setAttribute("hintHelp", "&lt;h1&gt;" + titleHelp + "&lt;/h1&gt;&lt;p&gt;" + descriptionHelp + "&lt;/p&gt;");
                            buttonElement.className = buttonElement.className + " jretail-help-border";
                        } else {
                            buttonElement.help = "false";
                            buttonElement.setAttribute("help", "false");
                            buttonElement.className = buttonElement.className.replace(" jretail-help-border", "");
                        }
                    }
                    UtilRsis.setHelp(buttonElement);
                } else {
                    buttonElement.help = "false";
                    buttonElement.setAttribute("help", "false");
                    buttonElement.className = buttonElement.className.replace(" jretail-help-border", "");
                    setDOMEvent(buttonElement, "onmouseover", "");
                    setDOMEvent(buttonElement, "onmouseout", "");
                    UtilRsis.setHint(buttonElement);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpToolBar", ToolBarRsis);
    }
}

function renderHelpKeysToolBar(toolbar, UIForm, enableHelp) {
    try {
        if (toolbar) {
            var UIContext = Rsis.UIContext.get(toolbar);
            var UIForm = UIContext.getUIForm(toolbar), toolbarId = toolbar.id, buttons = [];
            var stringArgs = toolbar.id.split("__");
            if (stringArgs && stringArgs.length > 1) {
                body = getIframeDocument($(stringArgs[0])).getElementsByTagName("body")[0];
            } else {
                body = document.getElementsByTagName("body")[0];
            }
            var seqHelpApp = getAtt(body, "seqHelpApp");
            var divBts = $(toolbar.id + ".bts"), elements = divBts.getElementsByTagName("button");
            if (elements && elements.length > 0) {
                for (var j = 0; j < elements.length; j++) {
                    if (elements[j].type === "button" || elements[j].type === "submit") buttons.push(elements[j]);
                }
            }
            for (var i = 0; i < buttons.length; i++) {
                var buttonElement = buttons[i];
                var ctrpanel = $(buttonElement.id.split("#")[0] + ".ctrpanel");
                if (ctrpanel && !(stringArgs && stringArgs.length > 1)) {
                    seqHelpApp = getAtt(ctrpanel, "seqHelpApp");
                }
                if (enableHelp && buttonElement.disabled == false) {
                    var helpKey = buttonElement.getAttribute("helpKey");
                    if (helpKey != null) {
                        buttonElement.setAttribute("helpKeys", "true");
                        buttonElement.setAttribute("hintHelpKeys", "&lt;h1&gt; SeqHelpApp:" + seqHelpApp + "&lt;/h1&gt;&lt;p&gt; HelpKey:" + helpKey + "&lt;/p&gt;");
                        $R.$(buttonElement).addClass("jretail-help-border");
                    }
                    UtilRsis.setHelpKeys(buttonElement);
                } else {
                    buttonElement.setAttribute("helpKeys", "false");
                    $R.$(buttonElement).removeClass("jretail-help-border");
                    setDOMEvent(buttonElement, "onmouseover", "");
                    setDOMEvent(buttonElement, "onmouseout", "");
                    UtilRsis.setHint(buttonElement);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpKeysToolBar", ToolBarRsis);
    }
}

function renderButtonHelpStop(toolbar, UIForm, enableHelp) {
    try {
        if (toolbar && UIForm) {
            var toolbarId = toolbar.getAttribute("id"), buttons = [];
            var divBts = $(toolbar.id + ".bts"), elements = divBts.getElementsByTagName("button");
            if (elements && elements.length > 0) {
                for (var j = 0; j < elements.length; j++) {
                    if (elements[j].type === "button" || elements[j].type === "submit") buttons.push(elements[j]);
                }
            }
            for (var i = 0; i < buttons.length; i++) {
                var buttonElement = buttons[i], buttonElementId = buttonElement.id;
                if (buttonElementId === toolbarId + ".btnHelp") {
                    Crud.HELP_KEY_PRESS = true;
                    ToolBarRsis.renderButtonHelp(buttonElement);
                    Crud.HELP_KEY_PRESS = false;
                    enableHelpApp(UIForm.getAllUIComponents(), UIForm, false);
                    Rsis.Tip.hiddenHelp(buttonElement);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderButtonHelpStop", ToolBarRsis);
    }
}

function getToolBarByTable(table, UIForm) {
    try {
        if (table && UIForm) {
            var COMPONENTS = UIForm.getAllUIComponents(), toolBars = COMPONENTS["toolBar"];
            if (typeof toolBars !== "undefined" && toolBars.length > 0) {
                for (var tb = 0; tb < toolBars.length; tb++) {
                    var toolBar = toolBars[tb];
                    if (toolBar && (toolBar.getAttribute("dataTable") === table.id || toolBar.getAttribute("editTable") === table.id)) {
                        return toolBar;
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "getToolBarByTable", ToolBarRsis);
    }
    return null;
}

shortcut.add("alt+A", function(event) {
    crossDialog.show(contextPath + "/jretail/view/jsp/consultaAplicacao.jsf", {
        state: UIRsis.SEARCHING
    }, null, null);
}, {
    type: "keydown",
    propagate: true,
    target: document
});

(function($R) {
    DataTableRsis = {
        _FILE: "027dataTableRsis.js",
        version: JRetail.rsis.VersionJS,
        WIDTH: Rsis.browser.msie ? 0 : 100,
        HEIGHT: 50,
        clazz: "DataTableRsis.",
        EVENTS: "click keydown keypress keyup mousedown mouseout mousemove mouseover mouseup".split(" "),
        render: function() {
            return renderDataTable.apply(this, arguments);
        },
        createSelectButton: function(table, tableHeadElement, selectionType, line, col, functionRadioButton, stringNodeRoot, str) {
            try {
                if (table) {
                    var $win = UtilRsis.getParentWindow(table), tableId = getAttMandatory(table, "id");
                    if (functionRadioButton == null || functionRadioButton === "") {
                        functionRadioButton = "selectRowDataTable(this, '" + (stringNodeRoot + str) + "')";
                    } else {
                        functionRadioButton = functionRadioButton + "(this, " + $win + "$('" + tableId + "'), '" + (stringNodeRoot + str) + "');";
                    }
                    if (selectionType === "button") {
                        return this.createButton(tableHeadElement, table, tableId, line, col, functionRadioButton);
                    } else {
                        var dataUi = table.getAttribute("data-ui");
                        return '<input type="' + selectionType + '" onkeypress="if(event.keyCode==13){return ' + $win + functionRadioButton + '}" data-ui="' + dataUi + '"' + ' onclick="return ' + $win + functionRadioButton + '" value="' + line + '" name="' + tableId + '.dtRadio" class="radio_check"/>';
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".createSelectButton", this);
            }
            return "";
        },
        createRadioOrCheckBox: function(table, UIForm, stringNodeRoot, row, cell, tableHeadElement, selectionType, nodesRetTable, line, countCache, renderCheckBoxDeveloper, functionRadioButton) {
            try {
                var radioCreated = "";
                if (UIForm && row && cell && tableHeadElement) {
                    var $win = UtilRsis.getParentWindow(table), checkRow = false, valueToCheck = tableHeadElement.getAttribute("valueToCheck"), indSel = "indSelecionado";
                    var hasNodes = nodesRetTable && nodesRetTable.length > 0 ? true : false;
                    if (hasNodes) {
                        var nodeRetLine = nodesRetTable[line];
                        if (nodeRetLine) {
                            if (valueToCheck != null && valueToCheck !== "") {
                                var vtcheck = nodeRetLine.getAttribute(valueToCheck);
                                if (vtcheck == 1 || vtcheck === "true") {
                                    checkRow = true;
                                }
                            }
                            var valueIndSelecionado = nodeRetLine.getAttribute(indSel);
                            if (valueIndSelecionado == null || valueIndSelecionado === "") {
                                nodeRetLine.setAttribute(indSel, "0");
                            }
                        }
                    }
                    if (renderCheckBoxDeveloper != null && renderCheckBoxDeveloper !== "") {
                        var nodeLine = hasNodes ? nodesRetTable[line] : null;
                        checkRow = compressEvalRsisAll(renderCheckBoxDeveloper, table, UIForm, nodeLine, row, cell);
                    }
                    if (hasNodes) {
                        nodesRetTable[line].setAttribute(indSel, checkRow ? "1" : "0");
                    }
                    var stringFunArgs = stringNodeRoot + getAttMandatory(tableHeadElement, "value");
                    if (functionRadioButton == null || functionRadioButton === "") {
                        functionRadioButton = "selectRowDataTable(this, '" + stringFunArgs + "');";
                    } else {
                        functionRadioButton = functionRadioButton + "(this, " + $win + "$('" + table.id + "'), '" + stringFunArgs + "');";
                    }
                    if (selectionType === "button") {
                        return this.createButton(tableHeadElement, table, table.id, line, 0, functionRadioButton);
                    } else {
                        var checkClickLine = " ";
                        if (selectionType === "checkbox") {
                            checkClickLine = ' checkClickLine="' + tableHeadElement.getAttribute("checkClickLine") + '" ';
                            var rsisRow = $R(row);
                            checkRow ? rsisRow.addClass("selected") : rsisRow.removeClass("selected");
                        }
                        var checkInput = checkRow ? "CHECKED" : "";
                        var dataUi = table.getAttribute("data-ui");
                        radioCreated = radioCreated + '<input type="' + selectionType + '" ' + checkInput + " " + checkClickLine + ' data-ui="' + dataUi + '" countCache="' + countCache + '" value="' + line + '" name="' + table.id + '.dtRadio" ';
                        if (selectionType === "hidden") {
                            radioCreated = radioCreated + ' class="hiddenCol" />';
                        } else {
                            radioCreated = radioCreated + ' onkeypress="if(event.keyCode==13){return ' + $win + functionRadioButton + '}" ';
                            radioCreated = radioCreated + ' onclick="return ' + $win + functionRadioButton + '" ';
                            radioCreated = radioCreated + ' class="radio_check" />';
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "createRadioOrCheckBox", this);
            }
            return radioCreated;
        },
        createButton: function(cell, table, tableId, line, num, functionButton) {
            try {
                var html = "";
                if (cell && table) {
                    var object = cell.getElementsByTagName("component")[0];
                    if (object) {
                        var $win = UtilRsis.getParentWindow(table), id = getAttMandatory(object, "id"), attributeNode = getAtt(object, "value"), buttonClass = getAtt(object, "buttonClass"), caption = getAtt(object, "caption"), renderDeveloper = getAtt(object, "renderDeveloper"), hint = getAtt(object, "hint"), stringBundleHint = "";
                        if (hint !== "") {
                            var lengthHint = parseInt(hint.length) * 7;
                            stringBundleHint = 'onmouseover="return ' + $win + "Rsis.Tip.show(this,event,'" + hint + "'," + lengthHint + ');" onmouseout="' + $win + 'Rsis.Tip.hidden(this);"';
                        }
                        var widthCell = "";
                        if (buttonClass === "default") {
                            widthCell = getAtt(object, "width") != null ? "width:" + getAtt(object, "width") + ";" : "";
                        }
                        var dataUi = table.getAttribute("data-ui");
                        html = html + '<input type="button" dataui="' + dataUi + '" componentName="' + id + '" isColumnHeader="true" countColumnHeader="' + line + '" component="button" id="' + (tableId + "::" + line + "_" + num) + '" ';
                        html = html + '  value="' + caption + '" style="float:left; ' + widthCell + '" widthColumn="' + widthCell + '" ' + stringBundleHint;
                        html = html + '  visibleButton="' + getAtt(object, "visibleButton") + '" ';
                        html = html + '  editable="' + getAtt(object, "editable") + '" isVisible="true" ';
                        html = html + '  onclick="return ' + $win + functionButton + '" class="btStd ' + buttonClass + '" ';
                        html = html + '  attributeNode="' + attributeNode + '" ';
                        html = html + '  renderDeveloper="' + renderDeveloper + '" ';
                        html = html + '  name="' + tableId + '.button" ';
                        html = html + '  valueButton="' + line + '" ';
                        html = html + " />";
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "createButton", this);
            }
            return html;
        },
        selectRowDataTable: function(oElem, strPath) {
            try {
                if (oElem && strPath !== "") {
                    var table = $(oElem.name.split(".")[0]), stringNode = ROOT_NODE + table.getAttribute("node"), formId = oElem.name.split(":")[0], UIContext = Rsis.UIContext.get(table), UIForm = UIContext.getUIForm(formId), showForm = table.getAttribute("showForm");
                    if (UIForm && UIForm.getTableXML(table.id)) {
                        var tableXML = UIForm.getTableXML(table.id), stringArgs = strPath.split("@"), pathNode = stringArgs[0];
                        var xpathIdent = "", tHead = $R(table).getTHead(), tBody = $R(table).getTBody(), thCell = tHead && tHead.rows[0] && tHead.rows[0].cells[0] ? tHead.rows[0].cells[0] : null;
                        if (thCell) {
                            xpathIdent = getAttMandatory(thCell, "pathNodeIdent");
                        }
                        var attributeNode = Rsis.isUndefined(stringArgs[1]) ? "" : stringArgs[1], countRowsTable = Crud.getNameCountRowsTable(table), indSel = "indSelecionado";
                        var selectionType = table.getAttribute("selectionType");
                        if (selectionType === "radio") {
                            $R(tBody.rows).each(function(i, row) {
                                $R(row).removeClass("selected");
                            });
                            $R(tBody.rows[oElem.value]).addClass("selected");
                            $R(table).unSelectedNode(pathNode);
                            var domainXML = null;
                            if (isNoEmpty(attributeNode)) {
                                var stringPathNode = pathNode + "[@" + countRowsTable + "='" + oElem.value + "']";
                                if (selectionType === "button") {
                                    stringPathNode = pathNode + "[" + countRowsTable + "='" + oElem.getAttribute("valueButton") + "']";
                                }
                                var objNode = getNodes(UIForm.getTableXML(table.id), stringPathNode);
                                if (objNode && objNode.length > 0) {
                                    objNode[0].setAttribute(indSel, "1");
                                }
                                domainXML = XML.broke(cloneObjXML(UIForm.getTableXML(table.id)), stringPathNode.replace(ROOT_NODE, ""));
                            } else {
                                var nodeText = getNodes(UIForm.getTableXML(table.id), pathNode, oElem.value);
                                nodeText[0].setAttribute(indSel, "1");
                                domainXML = nodeText != null ? createObjXML(nodeText[0].xml) : null;
                            }
                            UIForm.domainXML = domainXML;
                        } else {
                            var row = $R(tBody.rows[oElem.value]);
                            oElem.checked ? row.addClass("selected") : row.removeClass("selected");
                            var objNode = null;
                            domainXML = getDomainXMLLine(UIForm, table, oElem, pathNode, attributeNode);
                            if (domainXML) {
                                var firstNode = domainXML.documentElement.firstChild;
                                if (firstNode) {
                                    firstNode.setAttribute(indSel, oElem.checked ? "1" : "0");
                                }
                                var objNode = getNodes(UIForm.getTableXML(table.id), pathNode + "[@" + countRowsTable + "='" + parseInt(oElem.value) + "']");
                                if (objNode && objNode.length > 0) {
                                    objNode[0].setAttribute(indSel, oElem.checked ? "1" : "0");
                                }
                            }
                            UIForm.setDomainTableXML(table.id, domainXML);
                            UIContext.setUIForms(formId, UIForm);
                            TableRsis.checkAllValidate(table, UIForm, oElem, pathNode, stringNode);
                            var checkInputDeveloper = getAttFuncDeveloper(table, "checkInputDeveloper"), cacheNodesChecked = getAtt(table, "cacheNodesChecked");
                            if (cacheNodesChecked == "true" || checkInputDeveloper != null && checkInputDeveloper !== "") {
                                var nodeLine = objNode && objNode.length > 0 ? cloneNodeElement(objNode[0]) : null;
                                if (checkInputDeveloper != null && checkInputDeveloper !== "") {
                                    var tBdy = $R(table).getTBody(), rowSelected = tBdy.rows[oElem.value];
                                    compressEvalRsisAll(checkInputDeveloper, table, UIForm, nodeLine, oElem, rowSelected);
                                }
                                if (nodeLine) {
                                    Rsis.Cache.checkObjects(UIForm, nodeLine, table, false);
                                }
                                TableRsis.checkAllValidate(table, UIForm, oElem, pathNode, stringNode);
                                var dataScroller = getDataScrollerByTable(table.id);
                                if (typeof DataScrollRsis !== "undefined" && dataScroller) {
                                    DataScrollRsis.configItensSelected(dataScroller, UIForm, table.id);
                                }
                            }
                            UIForm.setDomainTableXML(table.id, domainXML);
                        }
                        UIForm.state = UIRsis.VISUALIZING;
                        if (isEmpty(showForm) || showForm === "true") {
                            renderForm(UIForm.getAllUIComponents(), UIForm.state);
                            renderToolBars(UIForm.getAllUIComponents(), UIForm.state);
                        }
                        table = null;
                    }
                }
                oElem = null;
            } catch (oErr) {
                outPrint(oErr, "selectRowDataTable", this);
            }
        },
        keypressAddRow: function(object, evt) {
            if (isEnterKeyPress(evt)) {
                TableRsis.addRow(object);
            }
        },
        addRow: function(object) {
            TableRsis.addRow(object);
        },
        keypressDelRow: function(object, evt) {
            if (isEnterKeyPress(evt)) {
                TableRsis.deleteRow(object);
            }
        },
        deleteRow: function(object) {
            TableRsis.deleteRow(object);
        },
        checkRowById: function(id, evt) {
            try {
                var source = Rsis.events.getTarget(evt, true), oElem = $(id);
                if (source && $R(source).isTagName(/(TD|TR|SPAN|P|IMG)/)) {
                    oElem.cells[0].childNodes[0].click();
                }
            } catch (oErr) {
                outPrint(oErr, "checkRowById", this);
            }
            return true;
        },
        helpConfig: function(object) {
            try {
                if (object) {
                    var tHead = $(object.id + ".tHd");
                    if (tHead) {
                        var cells = tHead.rows[tHead.rows.length - 1].cells;
                        for (var j = 0, maxLgh = cells.length; j < maxLgh; j++) {
                            UtilRsis.setHint(cells[j]);
                            setCssHelp(cells[j], getAtt(cells[j], "help"));
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "helpConfig", this);
            }
        },
        helpKeysConfig: function(object) {
            try {
                if (object) {
                    var tHead = $(object.id + ".tHd");
                    if (tHead) {
                        var cells = tHead.rows[tHead.rows.length - 1].cells;
                        for (var j = 0, maxLength = cells.length; j < maxLength; j++) {
                            setCssHelpKeys(cells[j], getAtt(cells[j], "helpKeys"));
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "helpKeysConfig", this);
            }
        }
    };
})(Rsis);

function renderDataTable(obj, status) {
    try {
        if (obj) {
            var _rsObj = $R(obj);
            _rsObj.createColgroupHead();
            _rsObj.drawBody();
            _rsObj.scroll();
            _rsObj.renderTFoot();
            DataTableRsis.helpConfig(obj);
            DataTableRsis.helpKeysConfig(obj);
            obj = null;
        }
    } catch (oErr) {
        var tbd = $(obj.id + ".bd");
        if (tbd) $R(tbd).visible(true);
        outPrint(oErr, "renderDataTable", DataTableRsis);
    }
}

function renderFoot(obj) {
    try {
        if (obj) {
            var _rsObj = $R(obj);
            var UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(obj);
            if (UIForm) {
                var tFoot = _rsObj.getTFoot(), dTft = _rsObj.getDivTFoot(), table = dTft ? dTft.getElementsByTagName("table")[0] : null;
                if (table) {
                    var hdr = $(obj.id + ".hdr"), ftr = $(obj.id + ".ftr"), hdrWidth = hdr.style.width, cteWidth = hdr.getAttribute("cteWidth"), ctFtr = $(obj.id + ".ctFtr"), ctBdr = $(obj.id + ".ctBdr");
                    if (ctBdr) {
                        cteWidth = ctBdr.getAttribute("vleWidth");
                    }
                    dTft.style.width = "100%";
                    if (ctFtr) {
                        ctFtr.style.width = cteWidth ? cteWidth + "px" : "100%";
                        ctFtr.style.marginRight = "20px";
                        ctFtr.style.paddingRight = "20px";
                    }
                    if (ftr) {
                        if (hdrWidth.search("px") == -1) {
                            hdrWidth = hdrWidth + "px";
                        }
                        ftr.style.width = hdrWidth ? hdrWidth : "100%";
                    }
                    table.style.width = cteWidth ? cteWidth + "px" : "100%";
                }
                _rsObj.createColgroupFoot();
                var stringNodeRoot = obj.getAttribute("totalNode");
                if (isNoEmpty(stringNodeRoot)) {
                    var totalParams = obj.getAttribute("totalParams"), objXMLParams = null;
                    if (isNoEmpty(totalParams)) {
                        objXMLParams = UIForm.getParams(totalParams);
                        objXMLParams = !objXMLParams ? UIForm.domainXML : objXMLParams;
                    } else {
                        objXMLParams = UIForm.domainXML;
                    }
                    var rows = tFoot.rows, cols = rows[rows.length - 1].cells;
                    var nodes = getNodes(objXMLParams, stringNodeRoot);
                    if (nodes && nodes.length > 0) {
                        var j = 0, maxCols = cols.length;
                        for (;j < maxCols; j++) {
                            var cell = cols[j];
                            optionText = getAttMandatory(cell, "optionText"), visibleValueCell = isVisRest(cols[j], status), 
                            columnLabel = cell.getAttribute("label"), columnValue = cell.getAttribute("value");
                            if (optionText != null && optionText !== "" || columnValue != null && columnValue !== "") {
                                var listPathNodes = "";
                                if (columnValue != null && columnValue !== "") {
                                    listPathNodes = columnValue.split(",");
                                } else {
                                    listPathNodes = optionText.split(",");
                                }
                                var contentCell = "";
                                var tfr = {
                                    cell: cell,
                                    cteCell: contentCell,
                                    path: stringNodeRoot,
                                    cols: cols[j],
                                    index: j,
                                    ctRow: -1,
                                    colValue: columnValue,
                                    optionText: optionText,
                                    listPathNodes: listPathNodes,
                                    visible: visibleValueCell
                                };
                                tfr = _rsObj.getColumnText(tfr, UIForm, objXMLParams, false);
                                contentCell = tfr.cteCell;
                                countRow = tfr.ctRow;
                                cell.innerHTML = contentCell;
                            }
                            compressEvalRsisAll.apply(null, [ getAttFuncDeveloper(cols[j], "execute"), UIForm, nodes[0], table, rows[0], cell, cols[j], j ]);
                            cell = null;
                        }
                    }
                    rows = null;
                }
            }
            obj = null;
        }
    } catch (oErr) {
        outPrint(oErr, "renderFoot", DataTableRsis);
    }
}

var checkRowDataTable = function(oElem, evt) {
    try {
        var source = Rsis.events.getTarget(evt, true);
        if (source && $R(source).isTagName(/(TD|TR|SPAN|P|DIV|INPUT)/)) {
            var object = oElem && oElem.cells[0] && oElem.cells[0].childNodes[0] ? oElem.cells[0].childNodes[0] : null;
            if (object && (object.type === "radio" || object.type === "checkbox")) {
                object.click();
            }
            object = null;
        }
        return true;
    } catch (oErr) {
        outPrint(oErr, "checkRowDataTable", DataTableRsis);
    }
}, doubleClickDataTable = function(oElem, evt) {
    var source = Rsis.events.getTarget(evt, true);
    if (source && $R(source).isTagName(/(TD|TR|SPAN|P)/)) {
        oElem.cells[0].childNodes[0].click();
    }
    return true;
}, selectRowDataTable = function(oElem, strPath) {
    DataTableRsis.selectRowDataTable(oElem, strPath);
}, getValueXMLParms = function(UIForm, columnHeader, count, table) {
    try {
        var textValue = "";
        count = parseInt(count);
        if (UIForm && columnHeader && !isNaN(count)) {
            var objXML = UIForm.getParams(getAttMandatory(columnHeader, "params"));
            if (objXML) {
                var optionValue = getAtt(columnHeader, "optionValue"), optionValueRef = getAtt(columnHeader, "optionValueRef"), optionText = getAtt(columnHeader, "optionText");
                var path = ROOT_NODE + getStringPathByLength(UIForm.getTableXML(table.id), optionValue, optionValueRef, "", count), nodeParamCombo = getNodes(objXML, path);
                if (nodeParamCombo && nodeParamCombo.length > 0) {
                    var listPathNodes = optionText.split(",");
                    m = 0, maxLgt = nodeParamCombo.length;
                    for (;m < maxLgt; m++) {
                        var listPathNodes = optionText.split(",");
                        if (listPathNodes && listPathNodes.length > 0) {
                            var k = 0, maxK = listPathNodes.length;
                            for (;k < maxK; k++) {
                                var str = Trim(listPathNodes[k]);
                                if (str !== "") {
                                    if (str.substring(0, 1) === "'") {
                                        textValue += str.replace(/'/g, "");
                                    } else {
                                        var stringPath = str.split("@")[0], stringAttribute = str.split("@")[1];
                                        if (stringPath && stringPath !== "" && (stringAttribute && stringAttribute !== "")) {
                                            var nodes = getNodes(objXML, path);
                                            var attributeNode = Rsis.isUndefined(stringAttribute) ? "" : stringAttribute;
                                            if (attributeNode != null && attributeNode !== "") {
                                                textValue += getNodeValueId(nodes, attributeNode, m);
                                            } else {
                                                textValue += getNodeText(nodes[0]);
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "getValueXMLParms", DataTableRsis);
    }
    return textValue;
}, isVisRest = function(cols, status) {
    var visualizeRestricted = getAtt(cols, "visualizeRestricted");
    if (!searchStringArgs(visualizeRestricted, status, ";")) {
        if (getAttMandatory(cols, "isVisible") === "true") {
            return true;
        }
    }
    return false;
};

function setNodeUnIndSelected(objXML, path) {
    try {
        if (objXML) {
            var objNode = getNodes(objXML, path);
            if (objNode && objNode.length > 0) {
                for (var i = 0, maxL = objNode.length; i < maxL; i++) {
                    objNode[i].setAttribute("indSelecionado", "0");
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "setNodeUnIndSelected", DataTableRsis);
    }
}

function hasSelectedRadioButton(table) {
    try {
        if (table) {
            var tableId = getAttMandatory(table, "id");
            if (tableId == null || tableId === "") return null;
            var objectInput = $$(tableId + ".dtRadio");
            for (var i = 0; i < objectInput.length; i++) {
                if (typeof objectInput[i] !== "undefined" && objectInput[i].checked) {
                    return objectInput[i];
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "hasSelectedRadioButton", DataTableRsis);
    }
    return null;
}

var objectSelected = null;

if (Rsis.isMobileDevice) {
    $R.$(document.head.parentElement).css({
        "overflow-y": "auto"
    });
    $R.$(document.body).css({
        "overflow-y": "scroll"
    });
    $R.$(".confirm-container").css({
        position: "absolute"
    });
}

(function($R) {
    AutoCompleteRsis = {
        _FILE: "028autoCompleteRsis.js",
        version: JRetail.rsis.VersionJS,
        vClass: [ "iACptReq", "iACpt", "iACptRdy" ],
        xmlByChangeObject: "/xmlByChangeObject",
        xmlByChangeNodeName: "/xmlByChangeNodeName",
        clazz: "AutoCompleteRsis",
        sendTime: null,
        eventSelected: null,
        PO: {
            SEARCH: "SR",
            FULL: "SF"
        },
        COLLECTION: null,
        getCollection: function(obj) {
            return this.COLLECTION !== null ? this.COLLECTION[obj.id] : null;
        },
        setCollection: function(obj, list) {
            if (this.COLLECTION == null) {
                this.COLLECTION = [];
            }
            this.COLLECTION[obj.id] = list;
        },
        render: function() {
            return renderAutoComplete.apply(this, arguments);
        },
        renderInput: function(obj, state, isEditable, isMandatory, $win, sEvent) {
            try {
                var pattern = $R(obj).getMask(), events = Rsis.events;
                if (isEditable) {
                    var ac = "AutoCompleteRsis", rt = "return ";
                    obj.className = isEditable ? this.vClass[1] : this.vClass[2];
                    obj.disabled = !isEditable;
                    obj.readOnly = !isEditable;
                    $R(obj).setMandatory(state, AutoCompleteRsis.vClass);
                    var on_focus = $win + "removeCaracs(this,'" + pattern + "');";
                    if (obj.getAttribute("on-focus") !== null) {
                        on_focus = on_focus + rt + $win + obj.getAttribute("on-focus");
                    } else {
                        on_focus = rt + on_focus;
                    }
                    if (obj.getAttribute("on-blur") !== null) {
                        events.add(obj, "onblur", "return " + $win + obj.getAttribute("on-blur"));
                    }
                    events.add(obj, "onfocus", on_focus).add("onkeypress", rt + $win + ac + ".check(this," + sEvent + ", '" + pattern + "');").add("onkeyup", rt + $win + ac + ".start(this," + sEvent + ");").add("onkeydown", rt + $win + ac + ".checkDwn(this, " + sEvent + ");");
                    if ($R.isMobileDevice) {
                        var sfn = "return " + $win + "AutoComplete.";
                        if (obj.getAttribute("remoteSearch") === "true") {
                            sfn += "emulateWindow";
                        } else {
                            sfn += "viewOptions";
                        }
                        obj.readOnly = true;
                        events.add("onclick", sfn + "(this," + sEvent + ");");
                    }
                    if (obj.getAttribute("keyup") !== null) {
                        events.add(obj, "onkeyup", $win + ac + ".start(this," + sEvent + ") return " + obj.getAttribute("keyup"));
                    }
                    if (obj.getAttribute("keydown") !== null) {
                        events.add(obj, "onkeydown", $win + ac + ".checkDwn(" + sEvent + "); return " + $win + obj.getAttribute("keydown"));
                    }
                } else {
                    if (obj.getAttribute("keydown") !== null) {
                        obj.onkeydown = function() {};
                    }
                    if (obj.getAttribute("keyup") !== null) {
                        obj.onkeyup = function() {};
                    }
                    if (obj.getAttribute("on-blur") !== null) {
                        obj.onblur = function() {};
                    }
                    $R(obj).rdOnly(true, this.vClass);
                    events.add(obj, "onkeypress", "").add("onkeydown", "").add("onfocus", "").add(obj, "onblur", "");
                }
                $R(obj).setTabIdx(state).visRestricted(state);
            } catch (oErr) {
                outPrint(oErr, ".renderInput", this);
            }
        },
        renderButtons: function(obj, isEditable, isMandatory, $win, sEvent) {
            try {
                if (obj) {
                    var objId = obj.id, events = $R.events, aCptDsd = "aCptDsd", ac = "AutoComplete.", sltBtn = $(objId + ".btnSearch"), nObj = $(objId + ".clrBtn"), nObjAdd = $(objId + ".addButton"), selbx = $win + "SelectBox.close(this,event); return ", nObjWdtIpt = $(objId + ".wdtIpt"), nObjWdtBtns = $(objId + ".wdtBtns"), wdtBtns = 20;
                    if (sltBtn) {
                        $R(sltBtn).rdOnly(!isEditable).disable(!isEditable, aCptDsd);
                        var sfn = "return " + $win + ac;
                        if (obj.getAttribute("remoteSearch") === "true") {
                            if ($R.isMobileDevice) {
                                sfn += "clickEmulateWindow";
                            } else {
                                sfn += "searchOpen";
                            }
                        } else {
                            sfn += "viewOptions";
                        }
                        events.add(sltBtn, "onclick", isEditable ? sfn + "(this," + sEvent + ");" : "");
                        setDataUICpt(obj, sltBtn);
                    }
                    var UR = UtilRsis;
                    if (nObj) {
                        $R(nObj).rdOnly(!isEditable).disable(!isEditable, aCptDsd);
                        UR.visibleObject(nObj, isEditable);
                        if (isEditable) wdtBtns = 40;
                        if (isEditable && obj.style.display !== "none") {
                            $R(nObj).visible(getAtt(obj, "clearButtonVisible") !== "false" ? true : false);
                        }
                        events.add(nObj, "onclick", isEditable ? selbx + $win + "clearAutoComplete(this);" : "");
                        setDataUICpt(obj, nObj);
                    }
                    if (nObjAdd) {
                        $R(nObjAdd).rdOnly(!isEditable).disable(!isEditable, aCptDsd);
                        UR.visibleObject(nObjAdd, isEditable);
                        if (isEditable) wdtBtns = 60;
                        events.add(nObjAdd, "onclick", isEditable ? selbx + $win + ac + "openWindow(this);" : "");
                        setDataUICpt(obj, nObjAdd);
                    }
                    if (nObjWdtIpt) {
                        nObjWdtIpt.style.marginRight = wdtBtns + 5 + "px";
                    }
                    if (nObjWdtBtns) {
                        nObjWdtBtns.style.width = wdtBtns + "px";
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".renderButtons", this);
            }
        },
        check: function(obj, evt, pattern) {
            evt = Rsis.events.getEvent(evt);
            if (Rsis.browser.firefox) {
                this.validateChars(obj, evt);
                rejeitaTecla(evt);
                desabilitaLista(obj, evt);
                return validateMask(evt, pattern);
            } else {
                rejeitaTecla(evt);
                desabilitaLista(obj, evt);
                return validateMask(evt, pattern);
            }
        },
        checkkyPrs: function(objId, evt, value, texto) {
            evt = $R.events.getEvent(evt);
            if (isEnterKeyUp(evt)) {
                return AutoCompleteRsis.setOptionSel(objId, value, texto);
            }
            if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                var obj = $(objId);
                $R($R(obj).getListHolder()).hide();
                $R(obj).focus();
            }
            return;
        },
        checkDwn: function(obj, evt) {
            evt = Rsis.events.getEvent(evt);
            rejeitaTecla(evt);
            desabilitaLista(obj, evt);
            AutoComplete.checkDwn(obj, evt);
        },
        start: function(obj, evt) {
            evt = $R.events.getEvent(evt);
            if ($R.browser.msie) {
                this.validateChars(obj, evt);
            }
            return this.search(obj, evt);
        },
        validateChars: function(obj, evt) {
            try {
                if (obj) {
                    evt = $R.events.getEvent(evt);
                    var params = obj.getAttribute("params"), UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(obj), objXML = UIForm.getParams(params);
                    var validateChars = isOnClickEvent(evt) && !objXML || isRemoteSearch(obj) && (isEnterKeyUp(evt) || isEnterKeyPress(evt));
                    if (validateChars) {
                        var minlength = getAtt(obj, "minlength");
                        if (isNoEmpty(minlength)) {
                            if (obj.value == "" || obj.value.length < minlength) {
                                alert(getMessageBundle("ERROR_STRING_LENGTH").replace("XXX", minlength));
                                return false;
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".validateChars", this);
            }
            return true;
        },
        search: function(obj, evt) {
            try {
                if (obj) {
                    var UIContext = $R.UIContext.get(obj);
                    evt = $R.events.getEvent(evt);
                    this.eventSelected = evt;
                    var act = AutoComplete, keyCode = $R.events.getCode(evt), UIForm = UIContext.getUIForm(obj), thiz = this;
                    act.OnclickEvent = isOnClickEvent(evt);
                    var textCached = obj.getAttribute("textCached"), textoDigitado = obj.value;
                    if (thiz.isCloseOptions(obj, evt)) {
                        return false;
                    }
                    objectSelected = obj.id;
                    if (isRemoteSearch(obj) == true) {
                        thiz.remoteSearching(obj, UIForm, evt);
                    } else {
                        thiz.localSearching(obj, UIForm, evt);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".search", this);
            }
        },
        localSearching: function(obj, UIForm, evt) {
            try {
                if (obj && UIForm) {
                    var pathString = this.getPathNode(obj, UIForm), thiz = this, textoDigitado = obj.value, pattern = $R(obj).getMask(), targetMethod = obj.getAttribute("targetMethod"), events = $R.events, keyCode = events.getCode(evt), existXmlStored = this.hasXMLStored(obj, UIForm);
                    if (existXmlStored || targetMethod == null && !existXmlStored) {
                        if (isNoEmpty(pattern) && !getMapPattern(pattern)) {
                            textoDigitado = unformatField(textoDigitado, pattern);
                        }
                        obj.evtkey = keyCode;
                        obj.classOld = obj.className;
                        var searchFull = evt.type === "click" || textoDigitado === "" && (events.KEY_RETURN === keyCode || events.KEY_DOWN === keyCode);
                        var fun = $R.isMobileDevice ? AutoComplete._filter : AutoComplete._filterMenuItems;
                        fun.call(fun, UIForm, obj, pathString, textoDigitado, searchFull, undefined, AutoComplete, thiz);
                        $R(obj).setHint().cssHelp();
                    } else if (targetMethod !== null && targetMethod !== "") {
                        obj.evtkey = keyCode;
                        obj.classOld = obj.className;
                        thiz.callJavaAction(UIForm, obj, false);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".localSearching", this);
            }
        },
        remoteSearching: function(obj, UIForm, evt) {
            try {
                if (obj && UIForm) {
                    var pathString = this.getPathNode(obj, UIForm), act = AutoComplete, thiz = this, events = $R.events, keyCode = events.getCode(evt), existXmlStored = thiz.hasXMLStored(obj, UIForm);
                    var textCached = obj.getAttribute("textCached"), textoDigitado = obj.value, textKeypress = textoDigitado !== null ? textoDigitado.toLowerCase() : null;
                    textCached = textCached !== null ? textCached.toLowerCase() : null;
                    var isEqualsText = textCached == textKeypress ? true : false;
                    if (isOnClickEvent(evt) && act.OnclickButton) {
                        if (existXmlStored) {
                            obj.evtkey = keyCode;
                            obj.classOld = obj.className;
                            var fun = $R.isMobileDevice ? act._filter : act._filterMenuItems;
                            fun.call(fun, UIForm, obj, pathString, textoDigitado, true, evt, act, this);
                            $R(obj).setHint().cssHelp();
                        } else {
                            obj.evtkey = keyCode;
                            obj.classOld = obj.className;
                            thiz.callJavaAction(UIForm, obj, true);
                        }
                    } else {
                        if (!isEqualsText) {
                            obj.evtkey = keyCode;
                            obj.classOld = obj.className;
                            ProxyAc.makeRequest([ this, UIForm, obj, function($thiz, $UIForm, $object) {
                                $thiz.sendTime = this.sendTime;
                                $thiz.callJavaAction($UIForm, $object, false);
                            } ]);
                        } else {
                            var searchFull = evt.type == "click" || textoDigitado === "" && (events.KEY_RETURN == keyCode || events.KEY_DOWN == keyCode);
                            if (existXmlStored || searchFull) {
                                var pattern = $R(obj).getMask();
                                if (isNoEmpty(pattern) && !getMapPattern(pattern)) {
                                    textoDigitado = unformatField(textoDigitado, pattern);
                                }
                                obj.evtkey = keyCode;
                                obj.classOld = obj.className;
                                var fun = $R.isMobileDevice ? act._filter : act._filterMenuItems;
                                fun.call(fun, UIForm, obj, pathString, textoDigitado, searchFull, evt, act, this);
                                $R(obj).setHint().cssHelp();
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".remoteSearching", this);
            }
        },
        isEqualsInputText: function(obj) {
            if (obj) {
                var textCached = obj.getAttribute("textCached"), textoDigitado = obj.value, textKeypress = textoDigitado !== null ? textoDigitado.toLowerCase() : null;
                textCached = textCached !== null ? textCached.toLowerCase() : null;
                return textCached == textKeypress ? true : false;
            }
            return false;
        },
        hasXMLStored: function(obj, UIForm) {
            try {
                if (obj && UIForm) {
                    var objXML = UIForm.getParams(obj.getAttribute("params")), pathString = obj.getAttribute("node"), optionValue = getAttMandatory(obj, "optionValue");
                    if (isEmpty(pathString)) {
                        pathString = getStringPath(objXML, optionValue, "", "");
                    }
                    if (objXML) {
                        var collection = getNodes(objXML, pathString.replaceAll("###", "@"));
                        if (collection && collection.length > 0) {
                            return true;
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".hasXMLStored", this);
            }
            return false;
        },
        getPathNode: function(obj, UIForm) {
            try {
                if (obj && UIForm) {
                    var objXML = UIForm.getParams(obj.getAttribute("params")), pathString = obj.getAttribute("node");
                    if (isEmpty(pathString)) {
                        pathString = getStringPath(objXML, getAttMandatory(obj, "optionValue"), "", "");
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".getPathNode", this);
            }
            return pathString;
        },
        isCloseOptions: function(obj, evt) {
            if (obj) {
                var act = AutoComplete, keyCode = $R.events.getCode(evt), events = $R.events, listHolder = obj ? $R(obj).getListHolder() : null;
                if (listHolder) {
                    if (obj && obj.readOnly || !act.OnclickEvent && validaTeclaPressionada(evt) || !act.OnclickEvent && keyCode == events.KEY_BACKSPACE && (obj.value !== null && obj.value.length === 0)) {
                        if (listHolder) {
                            $R(listHolder).hide();
                        }
                        return true;
                    }
                }
            }
            return false;
        },
        isSearchFullAc: function(obj, UIForm, textoDigitado) {
            if (obj && UIForm) {
                var isLocalSearch = UIForm.getParams(params) == null && AutoComplete.OnclickButton ? true : false, params = obj.getAttribute("params");
                var searchFull = textoDigitado === "" && isRemoteSearch(obj) || textoDigitado === "" && !isRemoteSearch(obj) || textoDigitado !== "" && !isRemoteSearch(obj) && isLocalSearch == false ? true : false;
            }
            return searchFull;
        },
        callJavaAction: function(UIForm, obj, validateChars, ORIGEM) {
            try {
                this.ajax(UIForm, obj, validateChars, this.PO.SEARCH);
            } catch (oErr) {
                outPrint(oErr, ".callJavaAction", this);
            }
        },
        callJavaActionByFull: function(obj) {
            try {
                if (obj) {
                    var UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(obj), validateChars = false;
                    this.ajax(UIForm, obj, validateChars, this.PO.FULL);
                }
            } catch (oErr) {
                outPrint(oErr, ".callJavaActionByFull", this);
            }
        },
        ajax: function(UIForm, obj, validateChars, ORIGEM) {
            try {
                if (obj && UIForm) {
                    var textoDigitado = "";
                    if (ORIGEM === this.PO.SEARCH) {
                        $R(obj).upper();
                        textoDigitado = obj.value;
                        var pattern = $R(obj).getMask("mask");
                        if (validateChars) {
                            var minlength = getAtt(obj, "minlength");
                            if (isNoEmpty(minlength) && (obj.value === "" || obj.value.length < minlength)) {
                                return false;
                            }
                        }
                        formatField(obj, pattern);
                        if (pattern !== null && pattern !== "" && !getMapPattern(pattern)) {
                            textoDigitado = unformatField(obj.value, pattern);
                        }
                        var searchFull = this.isSearchFullAc(obj, UIForm, textoDigitado);
                        if (this.isEqualsInputText(obj) && searchFull === false) {
                            return false;
                        }
                        obj.setAttribute("textCached", textoDigitado);
                    }
                    $R.Load.start(obj);
                    Message.close(UIForm);
                    var maxrows = getAtt(obj, "maxrows");
                    maxrows = isNoEmpty(maxrows) ? maxrows : "10";
                    var xmlSearchTemplate = getAtt(obj, "xmlSearchTemplate"), useDomainXML = getAtt(obj, "useDomainXML"), paramSearch = $R(obj).getAttNode(obj.getAttribute("optionSearch"));
                    if (isEmpty(paramSearch)) {
                        paramSearch = $R(obj).getAttNode(obj.getAttribute("optionText"));
                    }
                    var objXMLSearchTemplate = null;
                    if (isNoEmpty(xmlSearchTemplate)) {
                        objXMLSearchTemplate = UIForm.getParams(xmlSearchTemplate);
                    } else if (useDomainXML === "true") {
                        objXMLSearchTemplate = UIForm.domainXML;
                        paramSearch = $R(obj).getAttNode(obj.getAttribute("optionTextRef")) || $R(obj).getAttNode(obj.getAttribute("optionSearch")) || $R(obj).getAttNode(obj.getAttribute("optionText"));
                    }
                    if (objXMLSearchTemplate !== null && isRemoteSearch(obj) == true) {
                        var pathSearch = UIForm.getXPath();
                        if (useDomainXML !== "true") {
                            pathSearch = $R(obj).getPathNode();
                            var args = pathSearch.split("/");
                            pathSearch = "/" + args[args.length - 1];
                        }
                        var nodeTemplate = getNodes(objXMLSearchTemplate, pathSearch.replaceAll("###", "@"));
                        if (nodeTemplate && nodeTemplate.length > 0) {
                            nodeTemplate[0].setAttribute(paramSearch, textoDigitado);
                        }
                    }
                    var ret = compressEvalRsisAll(getAttFuncDeveloper(obj, "executeSearchBefore"), obj, objXMLSearchTemplate, UIForm);
                    if (typeof ret !== "undefined") {
                        $R.Load.stop(obj);
                        return ret;
                    }
                    var queryString = "";
                    var searchParameter = getAttFuncDeveloper(obj, "searchParameter");
                    if (searchParameter !== null && searchParameter !== "") {
                        var QueryString = {
                            value: "",
                            add: ""
                        };
                        compressEvalRsisAll(searchParameter, UIForm, QueryString, obj);
                        queryString = typeof QueryString.value !== "undefined" ? QueryString.value : "";
                    }
                    var targetMethod = obj.getAttribute("targetMethod"), targetAction = obj.getAttribute("targetAction"), supressFunction = getAttFuncDeveloper(obj, "supressFunction"), strDomainXML = escapeParam(objXMLSearchTemplate !== null ? objXMLSearchTemplate.xml : "", true), form = UIForm.getForm();
                    if (isEmpty(targetAction)) {
                        targetAction = UIForm.getTargetAction();
                    }
                    var parameters = "xmlDomain=" + strDomainXML;
                    parameters = parameters + "&" + paramSearch + "=" + escapeParam(textoDigitado, false);
                    parameters = parameters + "&pageNumber=0&pageSize=" + escapeParam(maxrows, false);
                    parameters = parameters + "&maxrows=" + escapeParam(maxrows, false);
                    parameters = parameters + "&sendTime=" + escapeParam(this.sendTime ? this.sendTime : "", false);
                    parameters = parameters + queryString;
                    if (supressFunction !== null && supressFunction !== "") {
                        compressEvalRsisAll(supressFunction, obj, UIForm, objXMLSearchTemplate, parameters);
                    } else {
                        var callbackFunction = $R.isUndefined(arguments[4]) ? AutoCompleteRsis._returnPromises : arguments[4], callComponent = obj.id;
                        if (ORIGEM === this.PO.FULL) {
                            var optionValue = getAttMandatory(obj, "optionValue"), isParser = isNoEmpty(getAtt(obj, "parserNodes")) || isNoEmpty(getAtt(obj, "parserAttributes")) ? true : false, xpath = optionValue.split("@")[0], _xpath_ = isParser && isNoEmpty(xpath) ? xpath : getAtt(obj, "node");
                            if (AutoComplete.returnXML && (AutoCompleteRsis.permiteInclusaoDoNoh(_xpath_) || AutoCompleteRsis.hasFunctionChangeObjectByXmlModal(obj))) {
                                callbackFunction = AutoCompleteRsis._returnPromisesAfterModal;
                            }
                        }
                        var promise = AjaxRsis.setLoadPanel(false).promises.post(null, {
                            action: targetAction,
                            method: targetMethod,
                            uiform: UIForm,
                            parameters: parameters,
                            async: true
                        });
                        promise.then(function(response) {
                            callbackFunction.call(AutoCompleteRsis, response, obj);
                        });
                        promise["catch"](function(err) {
                            console.log("errors in response", err);
                            $R.Load.stop(obj);
                            outPrint(err, ".ajax", AutoCompleteRsis);
                        });
                    }
                }
            } catch (oErr) {
                $R.Load.stop(obj);
                outPrint(oErr, ".ajax", this);
            }
        },
        _returnPromises: function(Transfer, obj) {
            try {
                $R.Load.stop(obj);
                var enterPressLocal = obj.enterPressLocal, params = obj.getAttribute("params"), searchFull = false, textoDigitado = obj.value;
                ProxyAc.sendTimeValidate(Transfer, [ this, Transfer.UIForm, obj, function($thiz, $UIForm, $obj) {
                    $thiz.sendTime = this.sendTime;
                    $thiz.callJavaAction($UIForm, $obj, false);
                } ]);
                if (Transfer.objXML && Transfer.UIForm) {
                    var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
                    Message.render(UIForm, objXML);
                    if (UIForm.hasError == false) {
                        var isLocalSearch = UIForm.getParams(params) == null && enterPressLocal ? true : false;
                        UIForm.setParams(params, objXML, false);
                        this.setCollection(obj, null);
                        if (textoDigitado === "" && isRemoteSearch(obj) || textoDigitado === "" && !isRemoteSearch(obj)) {
                            searchFull = true;
                        } else if (textoDigitado !== "" && !isRemoteSearch(obj) && isLocalSearch == false) {
                            searchFull = true;
                            textoDigitado = "";
                        }
                        var pathString = obj.getAttribute("node");
                        if (pathString == null || pathString === "") {
                            pathString = $R(obj).getPathNode(obj.getAttribute("optionSearch"));
                            if (pathString == null || pathString === "") {
                                pathString = $R(obj).getPathNode(obj.getAttribute("optionText"));
                            }
                        }
                        var fun = $R.isMobileDevice ? AutoComplete._filter : AutoComplete._filterMenuItems;
                        fun.call(fun, UIForm, obj, pathString, textoDigitado, searchFull, undefined, AutoComplete, this);
                        $R(obj).setHint().cssHelp();
                    }
                }
            } catch (oErr) {
                $R.Load.stop(obj);
                outPrint(oErr, "._returnPromises", this);
            }
        },
        _returnPromisesAfterModal: function(Transfer, obj) {
            try {
                var thiz = this;
                if (obj && Transfer) {
                    $R.Load.stop(obj);
                    if (Transfer.objXML && Transfer.UIForm) {
                        var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
                        Message.render(UIForm, objXML);
                        if (UIForm.hasError == false) {
                            UIForm.setParams(obj.getAttribute("params"), objXML, false);
                            this.processXMLModal(obj, UIForm, AutoComplete.returnXML);
                        }
                    }
                }
            } catch (oErr) {
                $R.Load.stop(obj);
                outPrint(oErr, "._returnPromisesAfterModal", this);
            } finally {
                AutoComplete.error = false;
                AutoComplete.returnXML = null;
            }
        },
        createList: function(obj, objXML, pathString) {
            try {
                if (obj && objXML) {
                    var COLLECTIONS = this.getCollection(obj);
                    if (typeof COLLECTIONS == "undefined" || COLLECTIONS == null) {
                        var collection = getNodes(objXML, pathString.replaceAll("###", "@"));
                        if (collection && collection.length > 0) {
                            var attOptionValue = $R(obj).getAttNode(obj.getAttribute("optionValue")), isConcat = obj.getAttribute("concatOptSearchOptText"), remoteSearch = obj.getAttribute("remoteSearch"), pattern = $R(obj).getMask(), xpNode = obj.getAttribute("node"), optionValue = "", optionText = "", optionSearch = "", isStrConcat = false, z = 0, maxZ = collection.length;
                            if (isConcat === "true") {
                                isStrConcat = true;
                            }
                            if (remoteSearch === "true") {
                                optionText = xpNode + "@" + $R(obj).getAttNode(obj.getAttribute("optionText"));
                                optionValue = xpNode + "@" + $R(obj).getAttNode(obj.getAttribute("optionValue"));
                                var optSrh = obj.getAttribute("optionSearch");
                                if (optSrh !== null && optSrh !== "") {
                                    optionSearch = xpNode + "@" + $R(obj).getAttNode(optSrh);
                                }
                            } else {
                                optionText = obj.getAttribute("optionText");
                                optionValue = obj.getAttribute("optionValue");
                                optionSearch = obj.getAttribute("optionSearch");
                                if (isNoEmpty(optionValue)) {
                                    var strOptionValue = optionValue.split("@")[0];
                                    if (isEmpty(strOptionValue)) {
                                        optionValue = xpNode + optionValue;
                                        if (isNoEmpty(optionText)) {
                                            var strOptionText = optionText.split("@")[0];
                                            if (isEmpty(strOptionText) && !isRemoteSearch(obj)) {
                                                optionText = xpNode + optionText;
                                            }
                                        }
                                        if (isNoEmpty(optionSearch)) {
                                            var strOptionSearch = optionSearch.split("@")[0];
                                            if (isEmpty(strOptionSearch) && !isRemoteSearch(obj)) {
                                                optionSearch = xpNode + optionSearch;
                                            }
                                        }
                                    }
                                }
                            }
                            if (isNoEmpty(optionValue) && obj.getAttribute("compositeKey")) {
                                objXML = XML.createCompositeKey(obj, objXML, optionValue.split("@")[0]);
                                collection = getNodes(objXML, pathString.replaceAll("###", "@"));
                            }
                            var patternStr = pattern;
                            if (isNoEmpty(optionSearch) && optionSearch !== optionText) {
                                patternStr = "text";
                            }
                            COLLECTIONS = [];
                            for (;z < maxZ; z++) {
                                collection[z].setAttribute("selectedIndex", "");
                                var codigo = collection[z].getAttribute(attOptionValue), texto = getTextValueOption(obj, objXML, collection[z], z, optionValue, optionText, patternStr), txtSuggestion = "", texto1 = "";
                                if (isNoEmpty(optionSearch)) {
                                    texto1 = getTextValueOption(obj, objXML, collection[z], z, optionValue, optionSearch, pattern);
                                } else {
                                    texto1 = texto;
                                }
                                if (isStrConcat) {
                                    txtSuggestion = texto1 + " - " + texto;
                                } else {
                                    txtSuggestion = texto;
                                }
                                texto2 = retiraAcentos(texto1.toUpperCase());
                                COLLECTIONS[z] = [ codigo, txtSuggestion, texto2, texto1 ];
                            }
                            this.setCollection(obj, COLLECTIONS);
                        }
                    } else {
                        var collection = getNodes(objXML, pathString.replaceAll("###", "@"));
                        if (collection && collection.length > 0) {
                            for (var z = 0; z < collection.length; z++) {
                                collection[z].setAttribute("selectedIndex", "");
                            }
                        }
                    }
                    return COLLECTIONS;
                }
            } catch (oErr) {
                outPrint(oErr, ".createList", this);
            }
            return null;
        },
        clear: function(obj, clearStore) {
            try {
                if (obj) {
                    if (typeof clearStore === "undefined") {
                        clearStore = true;
                    }
                    var UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(obj);
                    if (UIForm) {
                        if (clearStore) {
                            this.setCollection(obj, null);
                            UIForm.setParams(getAttMandatory(obj, "params"), null, false);
                        }
                        var selector = $(obj.id + ".selector");
                        if (selector) {
                            while (selector.firstChild) {
                                selector.removeChild(selector.firstChild);
                            }
                        }
                        clearXMLAutoComplete(obj);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".clear", this);
            }
        },
        commonProcess: function(obj, params) {
            try {
                if (params) {
                    var objXML = params.objXML, optionValue = params.optionValue, optionValueRef = params.optionValueRef, domainXML = params.domainXML, UIForm = params.UIForm, path = params.path, value = params.value, texto = params.texto;
                    var UIContext = Rsis.UIContext.get(obj);
                    objXML = $R(obj).changeNdName(objXML);
                    compressEvalRsisAll(getAttFuncDeveloper(obj, "afterProcessParser"), obj, objXML, domainXML);
                    var attributeNode = $R(obj).getAttNode(optionValueRef), xpath = !$R(obj).getPathNode(optionValueRef) ? UIForm.getXPath() : $R(obj).getPathNode(optionValueRef), nodeDomain = getNodes(UIForm.domainXML, xpath);
                    if (nodeDomain && nodeDomain.length > 0) {
                        var valueAttNode = nodeDomain[0].getAttribute(attributeNode);
                        if (valueAttNode !== value && (valueAttNode !== null || valueAttNode == null && value !== "")) {
                            Crud.savedNode(UIForm);
                        }
                    }
                    $R(obj).parserNds(obj, objXML, domainXML, optionValueRef, function(obj, objXML, domainXML, optionValueRef) {
                        var optionValue = getAttMandatory(obj, "optionValue"), pathNodeDomain = getStringPath(domainXML, optionValue, "", ""), argsOptionValue = pathNodeDomain.split("/"), strOptionValueRef = getStringPath(domainXML, optionValueRef, "", "");
                        XML.deleteNodes(domainXML, strOptionValueRef + "/" + argsOptionValue[argsOptionValue.length - 1]);
                    });
                    $R(obj).parserAtts(objXML, domainXML);
                    setDomainXML(obj, UIForm, domainXML, optionValueRef);
                    UIContext.setUIForms(UIForm);
                    var inputHidden = $(obj.id + ".hidden"), oldValueHidden = inputHidden.value;
                    inputHidden.value = value;
                    var listHolder = $R.isMobileDevice ? $("dialog-search-term") : obj ? $R(obj).getListHolder() : null;
                    if (listHolder) {
                        $R(listHolder).hide();
                    }
                    $R(obj).setHint();
                    obj.value = texto;
                    $R(obj).execDev([ objXML, domainXML ]);
                    var on_change = getAttFuncDeveloper(obj, "on_change");
                    if (on_change !== null && on_change !== "") {
                        var valueKey = getNodeAttributes(objXML, optionValue), objNode = getNodes(objXML, path);
                        compressEvalRsisAll(on_change, obj, UIForm, value, oldValueHidden, objNode);
                    }
                    var renderElements = obj.getAttribute("renderElements");
                    if (renderElements !== null && renderElements !== "") {
                        renderDependents(obj, UIForm, getElements(UIForm, renderElements));
                    }
                    var bwr = $R.browser;
                    if (!bwr.msie && !$R.isMobileDevice) {
                        obj.focus();
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".comumProcess", this);
            }
        },
        processXMLModal: function(obj, UIForm, xmlReturnModal) {
            try {
                if (obj && UIForm) {
                    var params = obj.getAttribute("params");
                    xmlCollection = UIForm.getParams(obj.getAttribute("params"));
                    if (xmlCollection) {
                        var gtMty = getAttMandatory;
                        var xpath = getAtt(obj, "xpath"), node = gtMty(obj, "node"), optionValue = gtMty(obj, "optionValue"), optionValueRef = gtMty(obj, "optionValueRef"), optionText = gtMty(obj, "optionText");
                        var strOptionValueRef = optionValueRef.split("@")[0];
                        if (isEmpty(strOptionValueRef)) {
                            strOptionValueRef = isNoEmpty(xpath) ? xpath : UIForm.getXPath();
                            optionValueRef = (isNoEmpty(xpath) ? xpath : UIForm.getXPath()) + optionValueRef;
                        }
                        var strOptionValue = optionValue.split("@")[0];
                        if (isEmpty(strOptionValue)) {
                            optionValue = node + optionValue;
                            var strOptionText = optionText.split("@")[0];
                            if (isEmpty(strOptionText) && !isRemoteSearch(obj)) {
                                optionText = node + optionText;
                            }
                        }
                        var stringArgsOp = optionValue.split("@"), stringArgsOt = optionText.split("@"), pathValue = stringArgsOp[0], attValue = stringArgsOp[1], attText = stringArgsOt[1];
                        var argsXpathDomain = pathValue.split("/"), xpathDomain = "/" + argsXpathDomain[argsXpathDomain.length - 1].replaceAll("###", "@"), xmlByChangeNodeName = null;
                        var permiteInclusaoDoNoh = this.permiteInclusaoDoNoh(pathValue);
                        if (permiteInclusaoDoNoh == false) {
                            var changeByXml = getAtt(obj, "changeObjectByXmlModal");
                            if (changeByXml !== null && changeByXml !== "") {
                                var tfr = compressEvalRsisAll(changeByXml, obj, UIForm, xmlReturnModal);
                                if (tfr) {
                                    xmlReturnModal = tfr.xmlByChangeObject;
                                    xmlByChangeNodeName = tfr.xmlByChangeNodeName;
                                }
                            }
                        }
                        var value = "", texto = "";
                        if (optionValue !== null && optionValue !== "" && obj.getAttribute("compositeKey")) {
                            xmlReturnModal = XML.createCompositeKey(obj, xmlReturnModal, xpathDomain);
                        }
                        var nodeElementModal = getNodes(cloneObjXML(xmlReturnModal), xpathDomain);
                        if (nodeElementModal && nodeElementModal.length > 0) {
                            value = getNodeValue(nodeElementModal, attValue);
                            texto = getNodeValue(nodeElementModal, attText);
                            var xPathAtt = pathValue.replaceAll("###", "@") + "[@" + attValue + "='" + value + "']", nodeElement = getNodes(xmlCollection, xPathAtt);
                            if (!(nodeElement && nodeElement.length > 0)) {
                                var fatherNode = XML.getSingleNode(xmlCollection, createPathFatherNode(pathValue));
                                if (fatherNode) {
                                    Sarissa.appendChildNode(fatherNode, nodeElementModal[0]);
                                }
                            }
                            UIForm.setParams(obj.getAttribute("params"), xmlCollection, false);
                        }
                        var domainXML = getDomainXML(obj, UIForm), objXML = cloneObjXML(xmlCollection), path = getAtt(obj, "node");
                        if (path == null || path === "") {
                            path = getStringPath(objXML, optionValue, "", "");
                        }
                        path = path.replaceAll("###", "@");
                        var fatherNode = XML.getSingleNode(objXML, createPathFatherNode(path));
                        if (fatherNode) {
                            var nodeOption = getNodes(objXML, path);
                            if (xmlByChangeNodeName) {
                                for (var k = 0; k < nodeOption.length; k++) {
                                    fatherNode.removeChild(nodeOption[k]);
                                }
                                var xmlDocElem = xmlByChangeNodeName.documentElement;
                                if (xmlDocElem && xmlDocElem.firstChild) {
                                    var isFullySelectedXml = getAtt(obj, "isFullySelectedXml");
                                    if (isFullySelectedXml === "true") {
                                        var changeNodeNamePath = getAtt(obj, "changeNodeNamePath"), cloneXML = cloneObjXML(xmlReturnModal);
                                        var fatherNodeFull = XML.getSingleNode(cloneXML, xpathDomain);
                                        if (fatherNodeFull) {
                                            var childNodeOld = getNodes(cloneXML, xpathDomain + changeNodeNamePath);
                                            if (childNodeOld && childNodeOld.length > 0) {
                                                Sarissa.replaceChildNode(fatherNodeFull, xmlDocElem.firstChild, childNodeOld[0]);
                                            }
                                        }
                                        var childNodeChanged = getNodes(cloneXML, xpathDomain);
                                        if (childNodeChanged && childNodeChanged.length > 0) {
                                            Sarissa.appendChildNode(fatherNode, childNodeChanged[0]);
                                        }
                                    } else {
                                        Sarissa.appendChildNode(fatherNode, xmlDocElem.firstChild);
                                    }
                                }
                            } else {
                                for (var i = 0; i < nodeOption.length; i++) {
                                    if (parseInt(nodeOption[i].getAttribute(attValue)) != parseInt(value)) {
                                        fatherNode.removeChild(nodeOption[i]);
                                    }
                                }
                            }
                        }
                        this.commonProcess(obj, {
                            UIForm: UIForm,
                            objXML: objXML,
                            domainXML: domainXML,
                            path: path,
                            optionValue: optionValue,
                            optionValueRef: optionValueRef,
                            value: value,
                            texto: texto
                        });
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".processXMLModal", this);
            }
        },
        hasFunctionChangeObjectByXmlModal: function(obj) {
            var changeXml = getAtt(obj, "changeObjectByXmlModal");
            return changeXml !== null && changeXml !== "" ? true : false;
        },
        permiteInclusaoDoNoh: function(stringXpath) {
            try {
                if (stringXpath !== null && stringXpath !== "") {
                    var argsXpathDomain = stringXpath.split("/"), nameElementModal = "", nodeRoot = getNodes(AutoComplete.returnXML, ROOT_NODE);
                    if (nodeRoot && nodeRoot[0] && nodeRoot[0].firstChild) {
                        nameElementModal = nodeRoot[0].firstChild.nodeName;
                    }
                    if (nameElementModal !== null && nameElementModal !== "") {
                        return argsXpathDomain[argsXpathDomain.length - 1] === nameElementModal ? true : false;
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".permiteInclusaoDoNoh", this);
            }
            return false;
        },
        xmlToAutoComplete: function(obj, UIForm, domainXML, xmlList, captionValidated, isList) {
            try {
                var nodes = null;
                if (obj && UIForm && domainXML) {
                    var mask = $R(obj).getMask(), node = getAttMandatory(obj, "node"), xpath = getAtt(obj, "xpath"), optionValue = getAttMandatory(obj, "optionValue"), _optText = getAttMandatory(obj, "optionText"), optionValueRef = getAtt(obj, "optionValueRef"), caption = getAttMandatory(obj, "caption"), textValue = "";
                    var strOptionValueRef = optionValueRef.split("@")[0];
                    if (isEmpty(strOptionValueRef)) {
                        strOptionValueRef = isNoEmpty(xpath) ? xpath : UIForm.getXPath();
                        optionValueRef = (isNoEmpty(xpath) ? xpath : UIForm.getXPath()) + optionValueRef;
                    }
                    var strOptionValue = optionValue.split("@")[0];
                    if (isEmpty(strOptionValue)) {
                        optionValue = node + optionValue;
                        var strOptionText = _optText.split("@")[0];
                        if (isEmpty(strOptionText) && !isRemoteSearch(obj)) {
                            _optText = node + _optText;
                        }
                    }
                    nodes = getNodes(domainXML, strOptionValueRef.replaceAll("###", "@"));
                    var path = getStringPath(domainXML, optionValue, optionValueRef, "");
                    path = path.replaceAll("###", "@");
                    var elements = getNodes(xmlList, path);
                    if (Rsis.isUndefined(xmlList)) {
                        _optText = getAtt(obj, "optionTextRef");
                        var strOptionText = _optText.split("@")[0];
                        if (isEmpty(strOptionText)) {
                            var _xpath_ = isNoEmpty(xpath) ? xpath : UIForm.getXPath(), newOptionText = "";
                            $R.each(_optText.split(","), function(i, optionText) {
                                if (i > 0) newOptionText += ",";
                                newOptionText += _xpath_ + optionText;
                            });
                            _optText = newOptionText;
                        }
                        path = "";
                        xmlList = domainXML;
                        elements = nodes;
                    }
                    if (elements && elements.length > 0) {
                        var listPathNodes = _optText.split(","), maxLpt = listPathNodes.length, i = 0, maxEls = elements.length;
                        if (maxLpt > 0) {
                            for (;i < maxEls; i++) {
                                for (var k = 0; k < maxLpt; k++) {
                                    textValue += $R(obj).getDescription(xmlList, i, listPathNodes[k], path, mask);
                                }
                            }
                        }
                        obj.value = textValue === "" ? caption !== null && caption !== "" ? caption : "" : textValue;
                    } else {
                        obj.value = caption !== null && caption !== "" ? caption : "";
                    }
                    this.setValueHidden(obj, xmlList);
                }
            } catch (oErr) {
                outPrint(oErr, ".xmlToAutoComplete", this);
            }
            return nodes;
        },
        xmlToAutoCompleteByListParams: function(obj, UIForm, domainXML) {
            try {
                var nodes = null;
                if (obj && UIForm && domainXML) {
                    var caption = getAttMandatory(obj, "caption"), optionValueRef = getAttMandatory(obj, "optionValueRef"), mask = $R(obj).getMask(), params = getAtt(obj, "params");
                    var strOptionValueRef = optionValueRef.split("@")[0];
                    nodes = getNodes(domainXML, strOptionValueRef.replaceAll("###", "@"));
                    var xmlList = UIForm.getParams(params);
                    if (xmlList !== null) {
                        this.xmlToAutoComplete(obj, UIForm, domainXML, xmlList, true);
                    } else {
                        if (caption !== null && caption != "") {
                            obj.value = caption;
                        } else {
                            obj.value = "";
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".xmlToAutoCompleteByListParams", this);
            }
            return nodes;
        },
        setValueHidden: function(obj, domainXML, optionValueRef) {
            try {
                if (obj) {
                    var inputHidden = $(obj.id + ".hidden");
                    if (domainXML && optionValueRef) {
                        var stringArgsPathValueRef = optionValueRef.split("@");
                        if (stringArgsPathValueRef && stringArgsPathValueRef.length > 0) {
                            var nodeDomain = getNodes(domainXML, stringArgsPathValueRef[0].replaceAll("###", "@")), attNameOptionValueRef = stringArgsPathValueRef[1];
                            if (attNameOptionValueRef !== null && nodeDomain && nodeDomain.length > 0) {
                                inputHidden.value = nodeDomain[0].getAttribute(attNameOptionValueRef);
                            }
                        }
                    } else {
                        inputHidden.value = "";
                    }
                }
            } catch (oErr) {
                outPrint(oErr, this.clazz + ".setValueHidden", this);
            }
        },
        onClickRadio: function(selector) {
            try {
                if (!selector) return;
                var obj = $(selector.id.split(".")[0]), value = selector.getAttribute("value"), texto = selector.getAttribute("searchText");
                if (obj) {
                    ProxyAc.close();
                    var UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(obj);
                    if (UIForm) {
                        var gtMty = getAttMandatory, selectedIndex = selector ? selector.getAttribute("selectedIndex") : "";
                        var domainXML = getDomainXML(obj, UIForm), objXML = cloneObjXML(UIForm.getParams(gtMty(obj, "params")));
                        if (domainXML !== null && objXML) {
                            var optionValue = gtMty(obj, "optionValue"), optionValueRef = gtMty(obj, "optionValueRef"), path = getAtt(obj, "node");
                            if (path == null || path === "") {
                                path = getStringPath(objXML, optionValue, "", "");
                            }
                            path = path.replaceAll("###", "@");
                            var fatherNode = XML.getSingleNode(objXML, createPathFatherNode(path)), nodeOption = getNodes(objXML, path);
                            if (nodeOption && nodeOption.length > 0) {
                                objXML = XML.deleteNodes(objXML, path + "[@selectedIndex != '" + parseInt(selectedIndex) + "']");
                                AutoCompleteRsis.commonProcess(obj, {
                                    UIForm: UIForm,
                                    objXML: objXML,
                                    domainXML: domainXML,
                                    path: path,
                                    optionValue: optionValue,
                                    optionValueRef: optionValueRef,
                                    value: value,
                                    texto: texto
                                });
                            }
                        }
                    }
                    obj = null;
                }
            } catch (oErr) {
                outPrint(oErr, "onClickRadio", this);
            }
        },
        setOptionSel: function(objId, value, texto) {
            try {
                var obj = $(objId);
                if (obj) {
                    ProxyAc.close();
                    var UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(obj);
                    if (UIForm) {
                        var gtMty = getAttMandatory;
                        var selectedIndex = $(objId + ".selector").selectedIndex, domainXML = getDomainXML(obj, UIForm), objXML = cloneObjXML(UIForm.getParams(gtMty(obj, "params")));
                        if (domainXML !== null && objXML) {
                            var optionValue = gtMty(obj, "optionValue"), optionValueRef = gtMty(obj, "optionValueRef"), path = getAtt(obj, "node");
                            if (path == null || path === "") {
                                path = getStringPath(objXML, optionValue, "", "");
                            }
                            path = path.replaceAll("###", "@");
                            var fatherNode = XML.getSingleNode(objXML, createPathFatherNode(path)), nodeOption = getNodes(objXML, path);
                            if (nodeOption && nodeOption.length > 0) {
                                objXML = XML.deleteNodes(objXML, path + "[@selectedIndex != '" + parseInt(selectedIndex) + "']");
                                this.commonProcess(obj, {
                                    UIForm: UIForm,
                                    objXML: objXML,
                                    domainXML: domainXML,
                                    path: path,
                                    optionValue: optionValue,
                                    optionValueRef: optionValueRef,
                                    value: value,
                                    texto: texto
                                });
                            }
                        }
                    }
                    obj = null;
                }
            } catch (oErr) {
                outPrint(oErr, "setOptionSel", AutoCompleteRsis);
            }
        }
    };
})(Rsis);

(function($R) {
    ProxyAc = {
        countProcess: null,
        sendTime: null,
        waitingTime: null,
        lockCall: false,
        lockDelay: false,
        conf: {
            queryInterval: 1,
            timeOutCall: 5
        },
        makeRequest: function(_callback_, conf) {
            try {
                if (!$R.isUndefined(conf) && typeof conf === "object") {
                    conf = $R.extend(this.conf, conf);
                }
                if (!this.lockCall) {
                    this.lockCall = true;
                    this.wait(_callback_);
                } else {
                    if (this.sendTime !== null && this.waitingTime == null) {
                        this.waitingTime = $R.now();
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "ProxyAc.makeRequest", AutoCompleteRsis);
            }
        },
        wait: function(_callback_) {
            try {
                var OB = this;
                OB.countProcess = window.setInterval(function() {
                    OB.flush(_callback_);
                }, OB.conf.queryInterval * 1e3);
            } catch (oErr) {
                outPrint(oErr, "ProxyAc.wait", AutoCompleteRsis);
            }
        },
        destroy: function() {
            var p = this.countProcess;
            this.countProcess = null;
            return window.clearInterval(p);
        },
        flush: function(_callback_) {
            try {
                var OB = this;
                if (!OB.lockDelay && (OB.waitingTime !== null && $R.now() - OB.waitingTime > OB.conf.timeOutCall * 1e3 || OB.sendTime == null)) {
                    OB.waitingTime = null;
                    OB.sendTime = $R.now();
                    if (isFunction(_callback_)) {
                        _callback_.call(OB);
                    } else if (!isEmptyArray(_callback_)) {
                        if (_callback_.length == 1) {
                            if (isFunction(_callback_[0])) {
                                _callback_[0].call(OB);
                            }
                        } else {
                            var parameters = _callback_;
                            var fn = parameters.pop(), $injection = parameters;
                            if (isFunction(fn)) {
                                fn.apply(OB, $injection);
                            }
                        }
                    }
                }
            } catch (oErr) {
                this.destroy();
                outPrint(oErr, "ProxyAc.flush", AutoCompleteRsis);
            }
        },
        sendTimeValidate: function(Transfer, _callback_) {
            var OB = this;
            try {
                if (Transfer && Transfer.objXML) {
                    var nodeSendTime = getNodes(Transfer.objXML, "/sendTime"), _sendTime = null;
                    if (nodeSendTime && nodeSendTime.length > 0) {
                        _sendTime = nodeSendTime[0].getAttribute("value");
                        if (OB.sendTime == _sendTime) {
                            OB.lockDelay = true;
                            OB.destroy();
                            OB.sendTime = null;
                            if (OB.waitingTime == null) {
                                this.lockCall = false;
                            } else {
                                this.wait(_callback_);
                            }
                            OB.lockDelay = false;
                            return true;
                        }
                    }
                }
            } catch (oErr) {
                this.destroy();
                this.lockCall = false;
                this.lockDelay = false;
                outPrint(oErr, "ProxyAc.sendTimeValidate", AutoCompleteRsis);
            }
            return false;
        },
        close: function() {
            this.lockDelay = true;
            this.destroy();
            this.lockCall = false;
            this.lockDelay = false;
            this.lockDelay = false;
        }
    };
})(Rsis);

(function($R) {
    AutoComplete = {
        error: false,
        OnclickEvent: null,
        OnclickButton: false,
        returnXML: null,
        clickEmulateWindow: function(obj, evt) {
            this.startDialog(obj, AutoCompleteRsis);
            return this.openSearch(obj, evt, "searchOpen");
        },
        emulateWindow: function(obj, evt) {
            this.startDialog(obj, AutoCompleteRsis);
        },
        searchOpen: function(object, evt) {
            return this.openSearch(object, evt, "searchOpen");
        },
        viewOptions: function(object, evt) {
            return this.openSearch(object, evt, "viewOptions");
        },
        openSearch: function(object, evt, ORIGEM) {
            try {
                if (object) {
                    var objId = object.id, evt = Rsis.events.getEvent(evt), args = objId.split("."), stringObject = args[0], stringButton = args[1], AC = AutoCompleteRsis;
                    this.OnclickButton = stringButton === "btnSearch" ? true : false;
                    var obj = $(stringObject), UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(object);
                    if (ORIGEM === "viewOptions") {
                        var objXML = UIForm.getParams(obj.getAttribute("params"));
                        if (this.OnclickButton == true && !objXML && !AC.validateChars(obj, evt)) {
                            return false;
                        }
                    } else {
                        if (!AC.validateChars(obj, evt)) {
                            return false;
                        }
                    }
                    AC.setCollection(obj, null);
                    obj.className = $R(obj).isMandatory(UIForm.state) ? "iACptReq" : "iACpt";
                    var listHolder = $R(obj).getListHolder(evt);
                    if (!listHolder || listHolder && listHolder.style.display === "none") {
                        AC.search(obj, evt);
                    } else {
                        $R(listHolder).hide();
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".openSearch", AC);
            }
        },
        openWindow: function(addButton) {
            try {
                if (addButton) {
                    var UIContext = Rsis.UIContext.get(addButton), UIForm = UIContext.getUIForm(addButton), stringArgs = addButton.id.split("."), obj = $(stringArgs[0]);
                    if (obj && UIForm) {
                        var urlModal = getAttMandatory(obj, "url"), modalWidth = getAtt(obj, "modalWidth"), modalHeight = getAtt(obj, "modalHeight"), dialogParams = null;
                        if (modalWidth !== null && modalWidth !== "" || modalHeight !== null && modalHeight !== "") {
                            dialogParams = [ modalWidth, modalHeight ];
                        }
                        UIForm.objXMLTemp = getDomainXML(obj, UIForm);
                        if (UIForm.objXMLTemp !== null) {
                            var param = new Array();
                            param["modalFormField"] = getAttMandatory(obj, "modalFormField");
                            param["inputSearchValue"] = Trim(obj.value);
                            param["searchNode"] = getAttMandatory(obj, "searchValue");
                            param["state"] = UIRsis.SEARCHING;
                            compressEvalRsisAll(getAttFuncDeveloper(obj, "executeBeforeStartModalAdd"), obj, addButton, UIForm, param);
                            crossDialog.show(urlModal, param, dialogParams, function(returnValueWindow, args) {
                                try {
                                    var UIForm = args[0], obj = args[1], addButton = args[2];
                                    var ret = compressEvalRsisAll(getAttFuncDeveloper(obj, "executeAfterClosingModal"), obj, addButton, UIForm, returnValueWindow);
                                    if (typeof ret !== "undefined") {
                                        return ret;
                                    }
                                    var returnDomainXML = createObjXML(returnValueWindow);
                                    if (returnDomainXML) {
                                        var UIContext = Rsis.UIContext.get(obj);
                                        if (returnDomainXML !== null && !returnDomainXML.documentElement) {
                                            return false;
                                        }
                                        var ret = compressEvalRsisAll(getAttFuncDeveloper(obj, "renderDeveloperAddItem"), obj, addButton, UIForm, returnDomainXML);
                                        if (typeof ret !== "undefined") {
                                            return ret;
                                        }
                                        UIForm.setParams(obj.getAttribute("params"), null, false);
                                        UIContext.setUIForms(UIForm.getForm().id, UIForm);
                                        AutoComplete.returnXML = returnDomainXML;
                                    }
                                    $R(obj).delListHolder();
                                    obj.evtkey = "0";
                                    obj.classOld = $R(obj).isMandatory(UIForm.state) ? "iACptReq" : "iACpt";
                                    obj.enterPressLocal = false;
                                    AutoCompleteRsis.callJavaActionByFull(obj);
                                } catch (oErr) {
                                    outPrint(oErr, "crossDialog.anonima()", PedidoVenda);
                                }
                            }, [ UIForm, obj, addButton ]);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".openWindow", AutoCompleteRsis);
            }
            return false;
        },
        checkkyPrs: function(objId, evt, value, texto) {
            evt = $R.events.getEvent(evt);
            var rEvts = $R.events, acRsis = AutoCompleteRsis, obj = $(objId);
            switch (evt.keyCode) {
              case rEvts.KEY_PAGEUP:
              case rEvts.KEY_PAGEDOWN:
              case rEvts.KEY_HOME:
              case rEvts.KEY_END:
              case rEvts.KEY_UP:
              case rEvts.KEY_DOWN:
              case rEvts.KEY_LEFT:
                acRsis.start(obj, evt);
                break;

              case rEvts.KEY_RIGHT:
                break;

              case rEvts.KEY_RETURN:
                if (isEnterKeyUp(evt)) {
                    this.active = 0;
                    return acRsis.setOptionSel(objId, value, texto);
                }

              case rEvts.KEY_BACKSPACE:
              case rEvts.KEY_ESC:
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    this.active = 0;
                    $R($R(obj).getListHolder()).hide();
                    $R(obj).focus();
                }
                break;

              default:
                if (isEnterKeyUp(evt)) {
                    this.active = 0;
                    return acRsis.setOptionSel(objId, value, texto);
                }
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    $R($R(obj).getListHolder()).hide();
                    $R(obj).focus();
                }
            }
            return;
        },
        checkDwn: function(obj, evt) {
            evt = $R.events.getEvent(evt);
            var rEvts = $R.events, acRsis = AutoCompleteRsis;
            switch (evt.keyCode) {
              case rEvts.KEY_PAGEUP:
              case rEvts.KEY_PAGEDOWN:
              case rEvts.KEY_HOME:
              case rEvts.KEY_END:
              case rEvts.KEY_UP:
              case rEvts.KEY_DOWN:
              case rEvts.KEY_LEFT:
                acRsis.setCollection(obj, null);
                acRsis.start(obj, evt);
                var listBox = $(obj.id + ".selector");
                if (listBox) {
                    var menuitem = listBox.getElementsByTagName("li");
                    if (menuitem && menuitem.length > 0) {
                        if (menuitem[0] !== document.activeElement) {
                            this.active = 0;
                            $R.$(menuitem[0]).focus().addClass("selected");
                            rEvts.stopPropagation(evt);
                        }
                    }
                }
                break;

              case rEvts.KEY_RIGHT:
              case rEvts.KEY_RETURN:
                if (isEnterKeyUp(evt)) {
                    this.active = 0;
                    return acRsis.setOptionSel(obj.id, value, texto);
                }

              case rEvts.KEY_BACKSPACE:
              case rEvts.KEY_ESC:
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    this.active = 0;
                    $R($R(obj).getListHolder()).hide();
                    $R(obj).focus();
                }
                break;

              default:
                rejeitaTecla(evt);
                desabilitaLista(obj, evt);
            }
        },
        menuselect: function(obj, evt) {
            evt = $R.events.getEvent(evt);
            var rEvts = $R.events;
            switch (evt.keyCode) {
              case rEvts.KEY_PAGEUP:
                this.previousPage(obj, evt);
                break;

              case rEvts.KEY_PAGEDOWN:
                this.nextPage(obj, evt);
                break;

              case rEvts.KEY_HOME:
                this.active = 0;
                this._move("first", obj, evt);
                break;

              case rEvts.KEY_END:
                this.active = 0;
                this._move("last", obj, evt);
                break;

              case rEvts.KEY_UP:
                this.previous(obj, evt);
                break;

              case rEvts.KEY_DOWN:
                this.next(obj, evt);
                break;

              case rEvts.KEY_LEFT:
              case rEvts.KEY_RIGHT:
              case rEvts.KEY_RETURN:
                if (isEnterKeyUp(evt)) {
                    obj.click();
                    this.active = 0;
                }
                break;

              case rEvts.KEY_BACKSPACE:
              case rEvts.KEY_ESC:
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    this.active = 0;
                    $R($R(obj).getListHolder()).hide();
                    var listBox = $(obj.parentNode.id.split(".")[0]);
                    if (listBox) {
                        $R(listBox).focus();
                    }
                    this.active = 0;
                }
                break;

              default:
                if (isEnterKeyUp(evt)) {
                    this.active = 0;
                    return AutoCompleteRsis.setOptionSel(obj.id, value, texto);
                }
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    $R($R(obj).getListHolder()).hide();
                    var listBox = $(obj.parentNode.id.split(".")[0]);
                    if (listBox) {
                        $R(listBox).focus();
                    }
                    this.active = 0;
                }
            }
            return;
        },
        active: -1,
        next: function(obj, evt) {
            this._move("next", obj, evt);
        },
        previous: function(obj, evt) {
            this._move("previous", obj, evt);
        },
        previousPage: function(obj, evt) {
            this._move("previous", obj, evt);
        },
        nextPage: function(obj, evt) {
            this._move("next", obj, evt);
        },
        _move: function(direction, obj, evt) {
            if (obj, evt) {
                if (obj && obj.parentNode) {
                    var lista = obj.parentNode.childNodes;
                    if (lista && lista.length > 0) {
                        var max = lista.length;
                        if (direction === "first" || direction === "last") {
                            this.active = direction === "first" ? 0 : max - 1;
                            var scroll = lista[this.active].parentNode;
                            if (direction === "first") {
                                scroll.scrollTop = "0px";
                            } else if (this.active == max - 1) {
                                scroll.scrollTop = scroll.scrollHeight - lista[this.active].offsetHeight + "px";
                            }
                        } else {
                            if (direction === "next") {
                                this.active = this.active >= max - 1 ? 0 : this.active + 1;
                            } else {
                                this.active = this.active <= 0 ? max - 1 : this.active - 1;
                            }
                            var scroll = lista[this.active].parentNode;
                            if (this.active == 0) {
                                scroll.scrollTop = (parseFloat(lista[this.active].offsetHeight) || 0) + "px";
                            } else if (this.active == max - 1) {
                                scroll.scrollTop = this.active * parseFloat(lista[this.active].offsetHeight) + "px";
                            }
                            scroll.onscroll = function(event) {
                                var sel = this.getElementsByClassName("selected")[0];
                                if (sel) this.scrollTop = sel.offsetTop;
                            };
                        }
                        $R.$(".cteLbx ul li").removeClass("selected");
                        $R.$(lista[this.active]).focus().addClass("selected");
                    }
                }
            }
        },
        createMenu: function(obj) {
            var listHolder = $R(obj).getListHolder();
            if (listHolder == null) {
                listHolder = $R(obj).createListHolder();
            }
            if (listHolder) {
                $R(listHolder).hide();
                listHolder.innerHTML = this.templateHtml(obj);
                this.pos(obj, listHolder);
            }
            return listHolder;
        },
        templateHtml: function(obj) {
            var $win = UtilRsis.getParentWindow(obj);
            var html = '<div id="pLbx" autoCompleteElement="true" {1}>' + ' <div class="lBx">';
            html += '  \t<div class="cteLbx" autoCompleteElement="true" {1}>' + '\t\t<ul id="{0}.selector" autoCompleteElement="true" {1}></ul>' + "  \t</div>" + " </div>" + "</div>";
            return Message.parser(html, obj.id, Rsis.isMobileDevice ? "" : 'style="height:123px"');
        },
        position: function(obj, listHolder) {
            if (obj && listHolder) {
                var lst = listHolder.style, _t_ = $(obj.id.split("#")[0] + ".container");
                var offset = $R.$(obj).offset(), left = offset.left, top = offset.top + $R.$(obj.parentNode).height(), widthListHolder = $R.$(listHolder).width(), heightListHolder = $R.$(listHolder).height();
                var limitesWidth = 0, limitesHeight = 0, dialogUi = $(obj.id.split("#")[0]);
                if (dialogUi) {
                    limitesWidth = dialogUi.offsetWidth;
                    limitesHeight = dialogUi.offsetHeight;
                }
                if (limitesWidth === GetWidth() && limitesHeight == GetHeight()) {
                    if (left !== null && top !== null) {
                        if (top + heightListHolder > limitesHeight) {
                            top = top - heightListHolder;
                        }
                        if (left + widthListHolder > limitesWidth) {
                            left = left - widthListHolder;
                        }
                    }
                }
                $R.$(listHolder).css({
                    left: left + "px",
                    top: top + "px"
                });
            }
        }
    };
})(Rsis);

function renderAutoComplete(obj, state) {
    try {
        if (obj) {
            var nodes = null, $win = UtilRsis.getParentWindow(obj), sEvent = getStringEvent(obj);
            if ($R(obj).isRenderAll()) {
                nodes = xmlToSelect(obj);
                var isEditable = $R(obj).isEditable(state), isMandatory = $R(obj).isMandatory(state);
                AutoCompleteRsis.renderInput(obj, state, isEditable, isMandatory, $win, sEvent);
                AutoCompleteRsis.renderButtons(obj, isEditable, isMandatory, $win, sEvent);
            }
            $R(obj).cssHelp().renderDev(nodes, arguments[2]);
            obj = null;
        }
    } catch (oErr) {
        outPrint(oErr, "renderAutoComplete", AutoCompleteRsis);
    }
}

AutoComplete._filterMenuItems = function(UIForm, obj, pathString, textoDigitado, searchFull, evt, that, acRsis) {
    try {
        if (!acRsis) acRsis = AutoCompleteRsis;
        if (!that) that = AutoComplete;
        if (!evt) evt = acRsis.eventSelected;
        var listHolder = that.createMenu(obj);
        if (obj.value !== null && obj.value.length === 0 && !searchFull) {
            obj.className = $R(obj).isMandatory(UIForm.state) ? "iACptReq" : "iACpt";
            if (listHolder) {
                $R(listHolder).hide();
            }
            return;
        }
        var $win = UtilRsis.getParentWindow(obj), pattern = $R(obj).getMask(), textoDigitado = obj.value, objXML = UIForm.getParams(obj.getAttribute("params")), match = false, objectId = obj.id;
        if (textoDigitado !== null && textoDigitado !== "") {
            textoDigitado = textoDigitado.replaceAll("%", "");
        }
        var newSelectBox = acRsis.createList(obj, objXML, pathString), invalid = "_invalid";
        if (newSelectBox !== null && (textoDigitado !== "" || searchFull == true)) {
            if (pattern !== null && pattern !== "" && !getMapPattern(pattern)) {
                textoDigitado = unformatField(obj.value, pattern);
            }
            if (textoDigitado !== null && textoDigitado !== "" && searchFull == true) {
                textoDigitado = "";
            }
            var contentText = "", collection = getNodes(objXML, pathString.replaceAll("###", "@")), countSelectedIndex = 0, a = 0, mxL = newSelectBox.length, maxlgth = 1, regExpText = "";
            if (textoDigitado !== null && textoDigitado !== "") {
                regExpText = new RegExp(textoDigitado.toLowerCase().replace(" ", "|"));
            }
            var _menu = null;
            if (listHolder) {
                _menu = $(obj.id + ".selector");
                Sarissa.clearChildNodes(_menu);
            }
            for (;a < mxL; a++) {
                var selBox = newSelectBox[a];
                var ctValue = selBox[0], txtSuggestion = selBox[1], ctText2 = selBox[2];
                ctText = selBox[3];
                var searchedText = ctText2.toLowerCase();
                if (MaskRsis.isDate(pattern) || MaskRsis.isMesAno(pattern)) {
                    searchedText = unformatField(searchedText, pattern);
                }
                if (txtSuggestion.length > maxlgth) {
                    maxlgth = txtSuggestion.length;
                }
                if (ctValue !== null && (searchedText.search(regExpText) >= 0 || searchFull == true && textoDigitado === "")) {
                    if (collection[a]) {
                        collection[a].setAttribute("selectedIndex", countSelectedIndex);
                    }
                    that.createItem(obj, _menu, $win, ctValue, ctText, txtSuggestion, countSelectedIndex);
                    match = true;
                    countSelectedIndex++;
                }
            }
            if (match) {
                that.show(obj, listHolder, maxlgth, mxL);
            }
        } else {
            if (!$R.isUndefined(obj.classOld) && obj.classOld !== null && obj.classOld.search(invalid) === -1) {
                obj.className = obj.classOld + invalid;
            }
            if (listHolder) {
                $R(listHolder).hide();
            }
        }
    } catch (oErr) {
        outPrint(oErr, "._filterMenuItems", AutoCompleteRsis);
    } finally {
        AutoComplete.OnclickEvent = false;
        AutoComplete.OnclickButton = false;
    }
    return match;
};

var clearAutoComplete = function(object) {
    try {
        if (object) {
            var stringArgs = object.id.split("."), obj = $(stringArgs[0]);
            return clearXMLAutoComplete(obj);
        }
    } catch (oErr) {
        outPrint(oErr, "clearAutoComplete", AutoCompleteRsis);
    }
}, clearXMLAutoComplete = function(obj) {
    try {
        if (obj) {
            var UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(obj), domainXML = getDomainXML(obj, UIForm);
            if (domainXML !== null) {
                var mask = $R(obj).getMask(), optionValueRef = getAttMandatory(obj, "optionValueRef"), clear = false;
                var attributeNode = $R(obj).getAttNode(optionValueRef), nodeDomain = getNodes(UIForm.domainXML, $R(obj).getPathNode(optionValueRef));
                if (nodeDomain && nodeDomain.length > 0) {
                    var valueAttNode = nodeDomain[0].getAttribute(attributeNode);
                    if (valueAttNode !== null && valueAttNode !== "") {
                        Crud.savedNode(UIForm);
                    }
                }
                clear = $R(obj).clearAtts(domainXML, clear);
                clear = $R(obj).clearNodes(domainXML, clear, null);
                if (clear) {
                    obj.value = "";
                    var inputHidden = $(obj.id + ".hidden");
                    if (inputHidden) {
                        inputHidden.value = "";
                    }
                    setDomainXML(obj, UIForm, domainXML, optionValueRef);
                }
                if (isRemoteSearch(obj)) {
                    UIForm.setParams(getAttMandatory(obj, "params"), null, false);
                }
                $R(obj).clearExc(UIForm);
                var renderElements = obj.getAttribute("renderElements");
                if (renderElements !== null && renderElements !== "") {
                    var elements = getElements(UIForm, renderElements);
                    renderDependents(obj, UIForm, elements);
                }
                UIContext.setUIForms(UIForm);
            } else {
                obj.value = "";
                var inputHidden = $(obj.id + ".hidden");
                if (inputHidden) {
                    inputHidden.value = "";
                }
            }
            obj.setAttribute("textCached", null);
            $R(obj).setHint();
        }
    } catch (oErr) {
        outPrint(oErr, "clearXMLAutoComplete", AutoCompleteRsis);
    }
    return false;
}, xmlToSelect = function(obj) {
    try {
        var nodes = null;
        if (obj) {
            var UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(obj);
            if (UIForm) {
                var optionTextRef = getAtt(obj, "optionTextRef"), domainXML = getDomainXML(obj, UIForm), AC = AutoCompleteRsis;
                if (isRemoteSearch(obj) == true || isRemoteSearch(obj) == false && optionTextRef !== "") {
                    nodes = AC.xmlToAutoComplete(obj, UIForm, domainXML, undefined, false);
                } else {
                    nodes = AC.xmlToAutoCompleteByListParams(obj, UIForm, domainXML);
                }
                $R(obj).setHint();
            }
        }
    } catch (oErr) {
        outPrint(oErr, "xmlToSelect()", AutoCompleteRsis);
    }
    return nodes;
}, getSuggestionValues = getTextValueOption = function(obj, objXMLCombo, nodes, count, optionValue, optionText, mask) {
    try {
        var textValue = "";
        if (obj && nodes) {
            var path = getStringPath(objXMLCombo, optionValue, "", "");
            path = path.replaceAll("###", "@");
            var listPathNodes = optionText.split(",");
            if (listPathNodes && listPathNodes.length > 0) {
                var k = 0, mxK = listPathNodes.length;
                for (;k < mxK; k++) {
                    var str = Trim(listPathNodes[k]);
                    if (typeof str == "string" && str !== null && str !== "") {
                        if (str.substring(0, 1) === "'") {
                            textValue += str.replace(/'/g, "");
                        } else {
                            var pathChield = "", stringPath = "", stringAttribute = "", stringArgsSplit = str.split("@");
                            if (stringArgsSplit && stringArgsSplit.length > 1) {
                                stringPath = stringArgsSplit[0];
                                pathChield = stringArgsSplit[1];
                                stringAttribute = stringArgsSplit[stringArgsSplit.length - 1];
                            } else {
                                stringPath = stringArgsSplit[0];
                                stringAttribute = stringArgsSplit[1];
                            }
                            if (stringPath && stringPath !== "" && (stringAttribute && stringAttribute !== "")) {
                                var stringArgsAtt = pathChield.split("/"), strChieldsPath = "";
                                if (stringArgsAtt && stringArgsAtt.length > 1) {
                                    strChieldsPath = getMountPath(stringArgsAtt);
                                }
                                var objNode = getNodes(objXMLCombo, path + strChieldsPath), attributeNode = typeof stringAttribute === "undefined" ? "" : stringAttribute;
                                if (mask !== null && mask !== "") {
                                    if (attributeNode !== null && attributeNode !== "") {
                                        textValue += $R(obj).toField(getNodeValueId(objNode, attributeNode, count));
                                    } else {
                                        textValue += $R(obj).toField(getNodeText(objNode[count]));
                                    }
                                } else {
                                    textValue += attributeNode !== null && attributeNode !== "" ? getNodeValueId(objNode, attributeNode, count) : getNodeText(objNode[count]);
                                }
                            }
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "getTextValueOption", AutoCompleteRsis);
    }
    return textValue;
}, optionHiddenAC = function(object) {
    try {
        if (object) {
            var stringArgs = object.id.split(".");
            if (stringArgs && stringArgs[0] !== "") {
                var obj = $(stringArgs[0]), UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(obj), listHolder = obj ? $R(obj).getListHolder() : null;
                if (Rsis.isMobileDevice) {
                    $R.$(".autocomplete-suggestions").html("");
                    $R("dialog-search-term").hide();
                } else {
                    if (UIForm && obj && listHolder && listHolder.style.display !== "none") {
                        $R(listHolder).hide();
                        listHolder = null;
                    }
                }
            }
            object = null;
        }
    } catch (oErr) {
        outPrint(oErr, "optionHiddenAC()", AutoCompleteRsis);
    }
}, clearAutoCompleteEditTable = function(obj, state) {
    try {
        if (obj) {
            var $win = UtilRsis.getParentWindow(obj), sEvent = getStringEvent(obj);
            var isEditable = $R(obj).isEditable(state), isMandatory = $R(obj).isMandatory(state);
            AutoCompleteRsis.renderInput(obj, state, isEditable, isMandatory, $win, sEvent);
            AutoCompleteRsis.renderButtons(obj, isEditable, isMandatory, $win, sEvent);
            obj.value = "";
            var inputHidden = $(obj.id + ".hidden");
            if (inputHidden) inputHidden.value = "";
            $R(obj).renderDev(null, arguments[2]);
            var renderElements = obj.getAttribute("renderElements");
            if (renderElements !== null && renderElements !== "") {
                renderDependents(obj, UIForm, getElements(UIForm, renderElements));
            }
        }
    } catch (oErr) {
        outPrint(oErr, "clearAutoCompleteEditTable", AutoCompleteRsis);
    }
}, setValueAutoComplete = function(_o, _oHdn, _vText, _vHdn) {
    setValueSelect(_o, _oHdn, _vText, _vHdn);
}, renderHelpAutoComplete = function(object, UIForm, enableHelp) {
    if (object) {
        renderHelp(object, UIForm, enableHelp);
    }
}, renderHelpKeysAutoComplete = function(object, UIForm, enableHelp) {
    if (object) {
        renderHelpKeys(object, UIForm, enableHelp);
    }
}, isRemoteSearch = function(obj) {
    return toBoolean(obj.getAttribute("remoteSearch"));
}, isListBoxElement = function(obj) {
    return obj && obj.getAttribute("listBoxElement") === "true" ? true : false;
};

function eventKeyPressSelect(evt, objectId) {
    var rEvts = Rsis.events;
    evt = rEvts.getEvent(evt);
    var keyCode = rEvts.getCode(evt), bwr = Rsis.browser;
    if (keyCode == rEvts.KEY_TAB || keyCode == rEvts.KEY_SHIFT || keyCode == rEvts.KEY_ESC || evt.shiftKey && keyCode == rEvts.KEY_TAB) {
        var obj = $(objectId), listHolder = obj ? $R(obj).getListHolder() : null;
        if (listHolder) {
            $R(listHolder).hide();
        }
        if (bwr.msie && bwr.version >= 6 && bwr.version < 7) {
            obj.focus();
        }
    }
}

function eventBlurSelect(evt, objectId) {
    evt = Rsis.events.getEvent(evt);
    var element = Rsis.events.getTarget(evt), bwr = Rsis.browser;
    if (bwr.msie && AutoComplete.OnclickEvent == false) {
        var obj = $(objectId), listHolder = obj ? $R(obj).getListHolder() : null;
        if (listHolder) {
            $R(listHolder).hide();
            listHolder = null;
        }
        if (bwr.msie && bwr.version == 6 || bwr.firefox) obj.focus();
        obj = null;
    }
}

function retiraAcentos(txt) {
    try {
        txt = txt.toUpperCase();
        txt = txt.replace(/[aA]/g, "a");
        txt = txt.replace(/[eE]/g, "e");
        txt = txt.replace(/[iI]/g, "i");
        txt = txt.replace(/[oO]/g, "o");
        txt = txt.replace(/[uU]/g, "u");
        txt = txt.replace(/[cC]/g, "c");
        txt = txt.replace(/[nN]/g, "n");
        txt = txt.replace(/[%]/g, "");
    } catch (oErr) {
        outPrint(oErr, "retiraAcentos", AutoCompleteRsis);
    }
    return txt;
}

function desabilitaLista(obj, evt) {
    try {
        evt = Rsis.events.getEvent(evt);
        if (obj && evt) {
            var keyCode = Rsis.events.getCode(evt), listHolder = obj ? $R(obj).getListHolder() : null;
            if (keyCode == 9 || keyCode == 27) {
                if (!(listHolder == null || Rsis.isUndefined(listHolder) || listHolder.style.display === "none")) {
                    if (keyCode == 9) {
                        var sel = $(obj.id + ".selector");
                        if (sel) {
                            sel.selectedIndex = 0;
                            listHolder.focus();
                        } else {
                            $R(listHolder).hide();
                        }
                    }
                    if (keyCode == 27) {
                        $R(listHolder).hide();
                    }
                }
                listHolder = null;
            }
        }
    } catch (oErr) {
        outPrint(oErr, "desabilitaLista", AutoCompleteRsis);
    }
}

function rejeitaTecla(evt) {
    try {
        evt = Rsis.events.getEvent(evt);
        var tecla = Rsis.events.getCode(evt);
        if (evt.type === "keydown" && Rsis.browser.msie) {
            return false;
        }
        if (typeof evt.keyCode === "number" && tecla == 13) {
            if (typeof evt.preventDefault == "function") {
                evt.preventDefault();
            } else {
                evt.returnValue = false;
                evt.keyCode = 0;
            }
        }
    } catch (oErr) {
        outPrint(oErr, "rejeitaTecla", AutoCompleteRsis);
    }
}

function isStringNotNull(value) {
    return typeof value === "string" && value !== null && value !== "" ? true : false;
}

function getXPathListNode(object, xpathNode) {
    if (object) {
        var node = object.getAttribute("node");
        if (isStringNotNull(node)) {
            return node + xpathNode;
        }
    }
    return xpathNode;
}

function getXPathFatherNode(object, xpathNode) {
    if (object) {
        var isNodeForm = object.getAttribute("nodeForm");
        if (isNodeForm === "true") {
            var form = $(object.id.split(":")[0]), rootNode = "";
            if (form) {
                rootNode = form.getAttribute("node");
            }
            return object && isStringNotNull(rootNode) ? object.getAttribute(value) + rootNode : "";
        }
    }
    return xpathNode;
}

AutoComplete.createItem = function(obj, _menu, $win, ctValue, ctText, txtSuggestion, countSelectedIndex) {
    var span = Rsis.isMobileDevice ? '<span class="glyphicon-import"></span>' : "";
    var $element = $R.$('<li tabindex="-1" name="listBox.li" autoCompleteElement="true"><div class="li-div">' + txtSuggestion + "</div>" + span + "</li>");
    $element.keyup(function(event) {
        AutoComplete.menuselect(this, event);
        event.stopImmediatePropagation();
        event.preventDefault();
    }).click(function(event) {
        AutoCompleteRsis.onClickRadio(this);
        event.stopImmediatePropagation();
        event.preventDefault();
    }).attr({
        id: obj.id + ".li" + countSelectedIndex,
        value: ctValue.replace(/\'/gi, ""),
        searchText: ctText,
        selectedIndex: countSelectedIndex
    });
    _menu.appendChild($element[0]);
};

AutoComplete.setDimentions = function(obj, listHolder, maxlgth, mxL) {
    if (!obj || !listHolder) return;
    var objectId = obj.id, sel = $(objectId + ".selector"), width = $R.$(obj).width(), btnSearch = $(obj.id + ".btnSearch"), clrBtn = $(obj.id + ".clrBtn"), addButton = $(obj.id + ".addButton"), widthresults = $R.$(obj).attr("widthresults"), widthButton = 22;
    if (widthresults) {
        width = widthresults;
    } else {
        if (btnSearch && btnSearch.style.display != "none") width += widthButton;
        if (clrBtn && clrBtn.style.display != "none") width += widthButton;
        if (addButton && addButton.style.display != "none") width += 20;
    }
    $R.$(listHolder).width(width);
    if (sel) {
        if (Rsis.isMobileDevice) {
            sel.style.display = "block";
            sel.style.width = "100%";
            sel.style.fontSize = "1.2em";
            sel.style.padding = "1em 2em";
        } else {
            $R.$(sel).width(width - 1);
        }
    }
    var lst = listHolder.style, _t_ = $(obj.id.split("#")[0] + ".container"), _wh = $R(obj).getListHolderPosition();
    var wg = hg = 0;
    var dialogUi = $(obj.id.split("#")[0]);
    if (dialogUi) {
        wg = dialogUi.offsetWidth;
        hg = dialogUi.offsetHeight;
    }
    if (wg == GetWidth() && hg == GetHeight()) {
        if (_wh.top !== null && _wh.left !== null) {
            var posY = findPosY(obj) + obj.offsetHeight - _wh.top, posYListHolder = posY + listHolder.firstChild.clientHeight;
            if (posYListHolder > _t_.clientHeight) {
                lst.top = posY - listHolder.firstChild.clientHeight - obj.offsetHeight + "px";
            } else lst.top = posY + "px";
            lst.left = findPosX(obj) + 1 - _wh.left + "px";
        } else {
            var posY = findPosY(obj) + obj.offsetHeight, posYListHolder = posY + listHolder.firstChild.clientHeight;
            if (posYListHolder > _t_.clientHeight) {
                lst.top = posY - listHolder.firstChild.clientHeight - obj.offsetHeight + "px";
            } else lst.top = posY + "px";
            lst.left = findPosX(obj) + 1 + "px";
        }
    }
    window.onresize = redirecionaLista;
};

(function($R) {
    SearchBox = {
        show: function(obj, listHolder, maxlgth, mxL) {
            if (!obj || !listHolder) return;
            $R(listHolder).show();
            this.setDimentions(obj, listHolder, maxlgth, mxL);
            this.pos(obj, listHolder);
        },
        pos: function(obj, listHolder) {
            if (obj && listHolder) {
                var lst = listHolder.style, _t_ = $(obj.id.split("#")[0] + ".container");
                var offset = $R.$(obj).offset(), left = offset.left, top = offset.top + $R.$(obj.parentNode).height(), widthListHolder = $R.$(listHolder).width(), heightListHolder = $R.$(listHolder).height();
                var limitesWidth = 0, limitesHeight = 0, dialogUi = $(obj.id.split("#")[0]);
                if (dialogUi) {
                    limitesWidth = dialogUi.offsetWidth;
                    limitesHeight = dialogUi.offsetHeight;
                }
                if (limitesWidth === GetWidth() && limitesHeight == GetHeight()) {
                    if (left !== null && top !== null) {
                        if (top + heightListHolder > limitesHeight) {
                            top = top - heightListHolder;
                        }
                        if (left + widthListHolder > limitesWidth) {
                            left = left - widthListHolder;
                        }
                    }
                }
                $R.$(listHolder).css({
                    left: left + "px",
                    top: top + "px"
                });
            }
        },
        getInput: function(obj) {
            if (!obj) return null;
            var arrayName = obj.id.split(".");
            return arrayName && arrayName.length > 1 ? $(arrayName[0]) : obj;
        },
        isRemoteSearch: function(obj) {
            return obj ? toBoolean(obj.getAttribute("remoteSearch")) : false;
        },
        createDialog: function() {
            var $dialogSearch = $R.$("#dialog-search-term");
            if ($dialogSearch[0] == null) {
                $dialogSearch = $R.$('<div id="dialog-search-term" class="search-menu"></div>');
                $dialogSearch.appendTo(document.body);
            } else {
                $R.$(".panel-header").css({
                    display: "none"
                });
            }
            return $dialogSearch[0];
        },
        startDialog: function(obj, instance) {
            var $menu = null;
            if (obj) {
                var self = this;
                if (typeof instance == "undefined") instance = AutoCompleteRsis; else if (isString(instance)) {
                    instance = $R.str2Fn($W, instance);
                }
                var dialog = this.createDialog();
                if (dialog) {
                    $menu = this._createMenuPanel(obj, dialog, self, instance);
                }
            }
            return $menu;
        },
        _createMenuPanel: function(obj, dialog, self, instance) {
            var template = this._createTemplate;
            var $template = $R.$(dialog).html(template(self.getInput(obj))), config = self.config(self.getInput(obj)), _isRemoteSearch_ = isEmpty(config.remoteSearch) ? false : toBoolean(config.remoteSearch);
            $template.css({
                left: "0",
                top: "1px"
            });
            this._updatePanelMobile($template[0], _isRemoteSearch_);
            $R($template[0]).show();
            this.closePaneHeader(_isRemoteSearch_);
            this._createInputSearch(obj, config, self, instance);
            this._configCloseButton();
            return $template[0];
        },
        _configCloseButton: function() {
            var $clearSearchBtn = $R.$(".btn-clear-search");
            $clearSearchBtn.click(function(event) {
                $R.$("div.results .autocomplete-suggestions").html("");
                $R.$('.panel-header input[type="text"]').val("").focus();
                $R.$(".no-results").hide().html("");
            });
        },
        _createTemplate: function _template(obj) {
            return '\t<div class="menu-panel drop-down" style="top:100%;height:auto">' + '\t  \t<div class="panel-header">' + '\t\t\t<button class="btn-close-search" type="button"><span class="glyphicon-arrow-left"></span></button>' + '\t\t\t<input id="' + obj.id + '.search-term" autocomplete="off" type="text" value="" placeholder="Pesquisar...">' + '\t\t\t<button class="btn-clear-search" style="display:none" autoCompleteElement="true" type="button">' + '\t\t\t\t<span class="glyphicon-remove" autoCompleteElement="true"></span>' + "\t\t\t</button>" + "\t  \t</div>" + '\t\t<div class="panel-body">' + '\t\t\t<div class="panel-body-contents clearfix">' + '\t\t\t\t<div class="results">' + '\t\t\t\t\t<ul id="' + obj.id + '.search-term.selector" class="autocomplete-suggestions"></ul>' + '\t\t\t\t\t<div class="no-results"></div>' + "\t\t\t\t</div>" + "\t\t\t</div>" + "\t\t</div>" + "\t</div>";
        },
        _createInputSearch: function(obj, config, self, instance) {
            if (!obj || !config) return;
            var $searchTerm = $R.$('.menu-panel input[type="text"]');
            if ($searchTerm && $searchTerm[0]) {
                $searchTerm.attr(config);
                $searchTerm.val("");
                $searchTerm.on({
                    keypress: function(e) {
                        return instance.check(this, e, getAtt(this, "mask"));
                    },
                    keyup: function(e) {
                        var _isRemoteSearch_ = isRemoteSearch(self.getInput(this));
                        if (_isRemoteSearch_) {
                            $R($R.$(".btn-clear-search")[0]).visible(isNoEmpty(this.value));
                        }
                        instance.setCollection(self.getInput(this), null);
                        return instance.start(this, e);
                    },
                    keydown: function(e) {
                        var key = $R.events;
                        e = key.getEvent(e);
                        switch (e.keyCode) {
                          case key.KEY_BACKSPACE:
                            return true;

                          case key.KEY_DELETE:
                          case key.KEY_RETURN:
                            instance.setCollection(self.getInput(this), null);
                            return instance.start(this, e);

                          default:
                            rejeitaTecla(e);
                            desabilitaLista(obj, e);
                            return true;
                        }
                    }
                });
                $searchTerm.focus();
            }
        },
        closePaneHeader: function(isRemoteSearch) {
            $R.$(".panel-header").css({
                display: isRemoteSearch ? "inline-flex" : "none",
                width: "width: 100%"
            });
        },
        getStringConfigCpts: function() {
            return [ "mask", "xpath", "node", "remoteSearch", "optionSearch", "optionValue", "optionText", "optionValueRef", "optionTextRef", "concatOptSearchOptText", "targetAction", "targetMethod", "searchParameter", "xmlSearchTemplate", "isFullySelectedXml", "useDomainXML", "params", "attRef", "pathNodeIdent", "compositeKey" ];
        },
        config: function(obj) {
            if (!obj) return {};
            var attsArray = this.getStringConfigCpts(), _conf_ = {};
            $R.each(attsArray, function(i, name) {
                _conf_[name] = getAtt(obj, name);
            });
            _conf_.textCached = "";
            _conf_.value = "";
            var name = this._getCompElem(obj);
            if (isNoEmpty(name)) {
                _conf_[name] = "true";
            }
            return _conf_;
        },
        _getCompElem: function _getCompElem(obj) {
            var value = null;
            $R.each([ "autoCompleteElement", "comboElement", "suggestBoxElement", "listBoxElement" ], function(i, name) {
                if (obj.getAttribute(name) == "true") {
                    value = name;
                    return true;
                }
            });
            return value;
        },
        _filter: function(UIForm, obj, pathString, textoDigitado, searchFull, evt, that, selfRsis) {
            try {
                if (!evt) {
                    evt = selfRsis.eventSelected;
                }
                var listHolder = that.createDialog(), _isRemoteSearch = isRemoteSearch(obj), _menu = $R.$(".autocomplete-suggestions")[0];
                if (_menu) {
                    var $chkall = $R.$('input[roule="checkall"]');
                    if ($chkall && $chkall.length > 0) {
                        $R.$(".chkAllLbx").remove();
                    }
                    that.closePaneHeader(_isRemoteSearch);
                    Sarissa.clearChildNodes(_menu);
                } else {
                    listHolder = that.startDialog(obj, selfRsis);
                    _menu = $R.$(".autocomplete-suggestions")[0];
                }
                var $win = UtilRsis.getParentWindow(obj), pattern = $R(obj).getMask(), textoDigitado = obj.value, objXML = UIForm.getParams(obj.getAttribute("params")), match = false, objectId = obj.id;
                if (textoDigitado !== null && textoDigitado !== "") {
                    textoDigitado = textoDigitado.replaceAll("%", "");
                }
                var newSelectBox = selfRsis.createList(that.getInput(obj), objXML, pathString), invalid = "_invalid", msgerror = "No foi encontrado nenhum item para a pesquisa!";
                var $msg = $R.$(".no-results");
                if (newSelectBox !== null && (textoDigitado !== "" || searchFull == true)) {
                    if (pattern !== null && pattern !== "" && !getMapPattern(pattern)) {
                        textoDigitado = unformatField(obj.value, pattern);
                    }
                    if (textoDigitado !== null && textoDigitado !== "" && searchFull == true) {
                        textoDigitado = "";
                    }
                    var contentText = "", collection = getNodes(objXML, pathString.replaceAll("###", "@")), countSelectedIndex = 0, a = 0, mxL = newSelectBox.length, maxlgth = 1, regExpText = "";
                    if (textoDigitado !== null && textoDigitado !== "") {
                        regExpText = new RegExp(textoDigitado.toLowerCase().replace(" ", "|"));
                    }
                    for (;a < mxL; a++) {
                        var selBox = newSelectBox[a];
                        var ctValue = selBox[0], txtSuggestion = selBox[1], ctText2 = selBox[2];
                        ctText = selBox[3];
                        var searchedText = ctText2.toLowerCase();
                        if (MaskRsis.isDate(pattern) || MaskRsis.isMesAno(pattern)) {
                            searchedText = unformatField(searchedText, pattern);
                        }
                        if (txtSuggestion.length > maxlgth) {
                            maxlgth = txtSuggestion.length;
                        }
                        if (ctValue !== null && (searchedText.search(regExpText) >= 0 || searchFull == true && textoDigitado === "")) {
                            if (collection[a]) collection[a].setAttribute("selectedIndex", countSelectedIndex);
                            that.createItem(obj, _menu, $win, ctValue, ctText, txtSuggestion, countSelectedIndex);
                            match = true;
                            countSelectedIndex++;
                        }
                    }
                    var msg = "";
                    if (match) {
                        that._updatePanelMobile(listHolder, _isRemoteSearch);
                        if (listHolder.style.display == "none") {
                            $R(listHolder).show();
                        }
                        $msg.hide().html("");
                    } else {
                        $msg.show().html(msgerror);
                    }
                } else {
                    $msg.show().html(msgerror);
                }
            } catch (oErr) {
                outPrint(oErr, "._filter", selfRsis);
            } finally {
                that.OnclickEvent = false;
                that.OnclickButton = false;
            }
            return match;
        },
        _updatePanelMobile: function(listHolder, _isRemoteSearch, $injection) {
            if (listHolder && $R.isMobileDevice) {
                var $menupainel = $R.$("#dialog-search-term .menu-panel"), $panelbody = $R.$(".menu-panel .panel-body");
                $listHolder = $R.$(listHolder);
                if (!_isRemoteSearch) {
                    $listHolder.css({
                        width: "",
                        height: "",
                        "max-height": "320px"
                    });
                    $listHolder.addClass("max-h-panel");
                    $listHolder.center();
                    $R.$("#dialog-search-term .menu-panel").addClass("max-h-panel");
                    $R.$("#dialog-search-term .results").css({
                        "max-height": "320px"
                    });
                    $menupainel.css({
                        height: "auto"
                    });
                    $menupainel.addClass("max-h-panel");
                    $panelbody.css({
                        "max-height": "320px"
                    });
                } else {
                    $listHolder.css({
                        width: "100%",
                        height: "100%",
                        "max-height": ""
                    });
                    $listHolder.removeClass("max-h-panel");
                    $menupainel.css({
                        height: "100%"
                    });
                    $menupainel.removeClass("max-h-panel");
                    $panelbody.css({
                        "max-height": ""
                    });
                }
                if ($R.isArray($injection)) {
                    $R.$invoker(this, $injection);
                } else if (isFunction($injection)) {
                    $injection.call(this, listHolder, _isRemoteSearch);
                }
            }
        }
    };
    $R.extend(AutoComplete, SearchBox);
    $R.$.fn.center = function() {
        this.css("position", "absolute");
        $R.$(this).width("50%");
        this.css("top", Math.max(0, ($R.$(window).height() - $R.$(this).outerHeight()) / 2 + $R.$(window).scrollTop()) + "px");
        this.css("left", Math.max(0, ($R.$(window).width() - $R.$(this).outerWidth()) / 2 + $R.$(window).scrollLeft()) + "px");
        return this;
    };
})(Rsis);

(function() {
    ManagerCacheRsis = {
        _FILE: "029ManagerCacheRsis.js",
        version: JRetail.rsis.VersionJS,
        orderBy: function(args) {
            var table = isEmpty(args.table) ? args.cache.object : args.table, myCache = args.cache, attribute = isEmpty(args.attribute) ? "countCache" : args.attribute, sort = isEmpty(args.sort) ? "asc" : args.sort;
            if (myCache && myCache.UIForm && table && attribute) {
                var stringArgsDataTable = myCache.path.split("/"), xmlCache = myCache.UIForm.getDataScrollerXMLCache(table.id), oldXmlCache = cloneObjXML(xmlCache), path = "/managerCache/" + stringArgsDataTable[stringArgsDataTable.length - 1];
                var nodes = getNodes(oldXmlCache, path), number = false;
                if (nodes && nodes.length > 0) {
                    var list = [];
                    for (var i = 0; i < nodes.length; i++) {
                        var value = nodes[i].getAttribute(attribute);
                        if (isNaN(value)) list.push(value); else {
                            list.push(parseFloat(value));
                            number = true;
                        }
                    }
                    var fatherNode = xmlCache.documentElement.selectSingleNode(ROOT_NODE + "/managerCache");
                    if (fatherNode) {
                        Sarissa.clearChildNodes(fatherNode);
                    }
                    if (number) list = sort == "asc" ? list.sort(function(a, b) {
                        return a - b;
                    }) : list.sort(function(a, b) {
                        return b - a;
                    }); else list = sort == "asc" ? list.sort() : list.reverse();
                    for (var k = 0; k < list.length; k++) {
                        var node = getNodes(oldXmlCache, path + "[@" + attribute + "='" + list[k] + "']");
                        if (node && node.length > 0) {
                            Sarissa.appendChildNode(fatherNode, node[0]);
                        }
                    }
                    if (xmlCache) {
                        myCache.UIForm.setDataScrollerXMLCache(table.id, xmlCache);
                    }
                }
            }
        },
        updateTableXML: function(ManagerCache, isElementNode) {
            var binding = false;
            try {
                if (ManagerCache && ManagerCache.UIForm && ManagerCache.node && ManagerCache.object) {
                    binding = ManagerCache.UIForm.binding;
                    var fatherNodeTable = XML.getSingleNode(ManagerCache.UIForm.getTableXML(ManagerCache.object.id), "/page/pageElements");
                    if (fatherNodeTable) {
                        var stringArgsPath = ManagerCache.path.split("/"), object = getObjectTable(ManagerCache), path = getAttMandatory(object, "node");
                        if (isElementNode == true) {
                            var countCache = parseInt(ManagerCache.node.getAttribute("countCache"), 10);
                            var oldChildNodeTable = getNodes(ManagerCache.UIForm.getTableXML(object.id), path + "[@countCache='" + countCache + "']");
                            if (oldChildNodeTable && oldChildNodeTable.length > 0) {
                                var newChildNode = cloneNodeElement(ManagerCache.node);
                                if (newChildNode.getAttribute("indSelecionado") == null) {
                                    newChildNode.setAttribute("indSelecionado", "1");
                                }
                                Sarissa.replaceChildNode(fatherNodeTable, newChildNode, oldChildNodeTable[0]);
                            }
                        } else {
                            for (var k = 0; k < ManagerCache.node.length; k++) {
                                var countCache = parseInt(ManagerCache.node[k].getAttribute("countCache"), 10);
                                var oldChildNodeTable = getNodes(ManagerCache.UIForm.getTableXML(object.id), path + "[@countCache='" + countCache + "']");
                                if (oldChildNodeTable && oldChildNodeTable.length > 0) {
                                    var newChildNode = cloneNodeElement(ManagerCache.node[k]);
                                    if (newChildNode.getAttribute("indSelecionado") == null) {
                                        newChildNode.setAttribute("indSelecionado", "1");
                                    }
                                    Sarissa.replaceChildNode(fatherNodeTable, newChildNode, oldChildNodeTable[0]);
                                }
                            }
                        }
                        ManagerCache.UIForm.setTableXML(object.id, ManagerCache.UIForm.getTableXML(object.id), false);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "updateTableXML", this);
            }
        }
    };
})();

function MCache() {
    this.managerCacheSet = new Array();
    this.addElement = function(n) {
        if (this.managerCacheSet.length > 0) {
            for (var i = 0; i < this.managerCacheSet.length; i++) {
                if (n.equals(this.managerCacheSet[i]) == true) {
                    alert("Found duplicated ManagerCache name: [" + n.name + "].");
                    break;
                }
            }
        }
        this.managerCacheSet[this.managerCacheSet.length] = n;
    };
    this.getElements = function() {
        return this.managerCacheSet;
    };
    this.get = function(n) {
        if (this.managerCacheSet.length > 0) {
            for (var i = 0; i < this.managerCacheSet.length; i++) {
                if (this.managerCacheSet[i].equals(n) == true) {
                    return this.managerCacheSet[i];
                }
            }
        }
        return null;
    };
    this.remove = function(n) {
        if (this.managerCacheSet.length > 0) {
            for (var i = 0; i < this.managerCacheSet.length; i++) {
                if (this.managerCacheSet[i].equals(n) == true) {
                    this.managerCacheSet.slice(0, i);
                    break;
                }
            }
        }
    };
    this.removeByDialogId = function(name) {
        if (this.managerCacheSet.length > 0 && name) {
            for (var i = 0; i < this.managerCacheSet.length; i++) {
                var n = this.managerCacheSet[i].name;
                if (n != null && n !== "") {
                    var navName = n.split("#")[0];
                    if (navName === name) {
                        this.managerCacheSet.slice(0, i);
                        break;
                    }
                }
            }
        }
    };
    this.getInstance = function(name) {
        var instance = this.get(name);
        if (!instance) {
            instance = new ManagerCacheXML();
            instance.name = name;
            this.addElement(instance);
        }
        return instance;
    };
    this.stored = function(n, valor) {
        if (this.managerCacheSet.length > 0) {
            for (var i = 0; i < this.managerCacheSet.length; i++) {
                if (this.managerCacheSet[i].equals(n) == true) {
                    this.managerCacheSet[i] = valor;
                    break;
                }
            }
        }
    };
}

function createObjXMLCache() {
    return createObjXML(addTagRoot('<managerCache totalSearch="0" cacheElements="0" totalAllElementsCache="0" totalAllElementsBanco="0"></managerCache>'));
}

function getFirstNodePage(UIForm, path, object, pageNumber, pageSize) {
    if (UIForm && path && object) {
        var stringArgsDataTable = path.split("/");
        var childNodeCache = getNodes(UIForm.getDataScrollerXMLCache(object.id), "/managerCache/" + stringArgsDataTable[stringArgsDataTable.length - 1]);
        if (childNodeCache && childNodeCache.length > 0) {
            var count = pageNumber == 0 ? 0 : pageNumber * parseInt(pageSize, 10);
            return childNodeCache.item(count);
        }
    }
    return null;
}

function ManagerCacheProcess(_mc, origem, noCreateTableXML, noAfterRender) {
    if (_mc && origem) {
        if (typeof origem == "undefined" || origem == null) {
            origem = _mc.origem;
        }
        origem = isString(origem) ? toInt(origem) : origem;
        switch (origem) {
          case _mc.PO_INSERT_PERSISTENCE:
            _insertCache(_mc, origem, true);
            break;

          case _mc.PO_INSERT:
            _insertCache(_mc, origem, true);
            break;

          case _mc.PO_INSERT_AFTER:
            _insertCache(_mc, origem, false);
            break;

          case _mc.PO_UPDATE:
            _updateCache(_mc);
            break;

          case _mc.PO_UPDATE_LIST:
            if (noCreateTableXML) {
                ManagerCacheRsis.updateTableXML(_mc, false);
            }
            _updateCacheByListNodes(_mc);
            break;

          case _mc.PO_UPDATE_ELEMENT:
            if (noCreateTableXML) {
                ManagerCacheRsis.updateTableXML(_mc, true);
            }
            _updateCacheByElementNode(_mc, noCreateTableXML);
            break;

          case _mc.PO_DELETE:
            _deleteCache(_mc, origem);
            _searchCache(_mc);
            break;

          case _mc.PO_DELETE_CACHE:
            _deleteCache(_mc, origem);
            _searchCache(_mc);
            break;

          case _mc.PO_SEARCH:
            _searchCache(_mc);
            _storeCache(_mc, origem, true);
            break;

          case _mc.PO_SEARCH_CACHE:
            _searchCache(_mc, origem, true);
            break;

          case _mc.PO_SEARCH_RETURN:
            _storeCache(_mc, origem, true);
            break;

          case _mc.PO_DELETE_CACHE_NO_SEARCH:
            _deleteCache(_mc, origem);
            break;
        }
        if (noCreateTableXML != true) {
            createTableXML(_mc);
        }
        if (noAfterRender != true && _mc.object != null) {
            var afterManagerCache = getAttFuncDeveloper(_mc.object, "afterManagerCache");
            if (afterManagerCache != null && afterManagerCache !== "") {
                compressEvalMC(_mc, afterManagerCache);
            }
        }
        var form = _mc.UIForm.getForm(), UIContext = Rsis.UIContext.get(form), table = _mc.object;
        if (table) {
            _mc.UIForm.setDataScrollerXMLCache(table.id, _mc.UIForm.getDataScrollerXMLCache(table.id));
        }
        UIContext.setUIForms(_mc.UIForm);
        _mc.origem = -1;
    }
    function _insertCache(ManagerCache, origem, insertInit) {
        try {
            if (ManagerCache.UIForm && ManagerCache.node != null) {
                var binding = ManagerCache.UIForm.binding;
                if (ManagerCache.UIForm.getDataScrollerXMLCache(ManagerCache.object.id) == null) {
                    var objXMLCacheNew = createObjXMLCache();
                    if (objXMLCacheNew != null) {
                        ManagerCache.UIForm.setDataScrollerXMLCache(ManagerCache.object.id, objXMLCacheNew);
                    }
                }
                var countCache = -1, pageSize = 1, dataScroller = getDataScroller(ManagerCache);
                if (dataScroller) {
                    pageSize = toInt(dataScroller.getAttribute("maxRowsTable"));
                }
                var fatherNode = ManagerCache.UIForm.getDataScrollerXMLCache(ManagerCache.object.id).documentElement.selectSingleNode(ROOT_NODE + "/managerCache");
                if (fatherNode) {
                    var stringArgsPath = ManagerCache.path.split("/");
                    var countCache = -1, objNodeLength = getNodes(ManagerCache.UIForm.getDataScrollerXMLCache(ManagerCache.object.id), "/managerCache/" + stringArgsPath[stringArgsPath.length - 1]);
                    if (objNodeLength && objNodeLength.length > 0) {
                        countCache = getMaxCountCache(objNodeLength) + 1;
                    }
                    if (countCache === -1) {
                        countCache = 0;
                    }
                    var fatherNode = XML.getSingleNode(ManagerCache.UIForm.getDataScrollerXMLCache(ManagerCache.object.id), "/managerCache"), numElementsInserted = 0;
                    for (var i = 0; i < ManagerCache.node.length; i++) {
                        ManagerCache.node[i].setAttribute("countCache", countCache);
                        if (insertInit) {
                            var childNodeAfter = getFirstNodePage(ManagerCache.UIForm, ManagerCache.path, ManagerCache.object, ManagerCache.initPage, pageSize);
                            Sarissa.insertBefore(fatherNode, childNodeAfter, ManagerCache.node[i]);
                        } else {
                            Sarissa.appendChildNode(fatherNode, ManagerCache.node[i]);
                        }
                        numElementsInserted++;
                        countCache++;
                    }
                    var totalAllElementsBanco = getNodesTableXML(ManagerCache);
                    if (fatherNode) {
                        var cacheElements = numElementsInserted + toInt(fatherNode.getAttribute("cacheElements"));
                        var totalAllElementsCache = toInt(fatherNode.getAttribute("totalAllElementsCache")) + numElementsInserted;
                        fatherNode.setAttribute("cacheElements", cacheElements);
                        fatherNode.setAttribute("pageNumberCache", ManagerCache.initPage);
                        fatherNode.setAttribute("totalAllElementsCache", totalAllElementsCache);
                        fatherNode.setAttribute("totalAllElementsBanco", totalAllElementsBanco);
                        if (origem == ManagerCache.PO_INSERT_PERSISTENCE) {
                            fatherNode.setAttribute("totalSearch", totalAllElementsBanco < pageSize ? totalAllElementsBanco : pageSize);
                        }
                        var totalCachePages = 0;
                        if (totalAllElementsCache % pageSize == 0) {
                            totalCachePages = totalAllElementsCache / pageSize;
                        } else {
                            totalCachePages = toInt(totalAllElementsCache / pageSize) + 1;
                        }
                        fatherNode.setAttribute("totalPagesCache", totalCachePages);
                    }
                    var tableXML = ManagerCache.UIForm.getTableXML(ManagerCache.object.id);
                    if (tableXML == null) {
                        tableXML = cloneObjXML(ManagerCache.objXML);
                    }
                    if (tableXML) {
                        var nodePage2 = getNodes(tableXML, "/page");
                        nodePage2[0].setAttribute("pageNumber", "0");
                        nodePage2[0].setAttribute("pageSize", "0");
                        nodePage2[0].setAttribute("totalAllElements", "0");
                        var collectionNode = XML.getSingleNode(tableXML, ROOT_NODE + "/page/pageElements");
                        while (collectionNode.hasChildNodes()) {
                            collectionNode.removeChild(collectionNode.firstChild);
                        }
                        ManagerCache.UIForm.setTableXML(ManagerCache.object.id, tableXML, false);
                    }
                }
            }
        } catch (oErr) {
            outPrint(oErr, "_insertCache", ManagerCacheRsis);
        } finally {
            ManagerCache.node = null;
        }
    }
    function _storeCache(ManagerCache, origem, insertInit) {
        try {
            if (ManagerCache.UIForm && ManagerCache.node != null) {
                var object = getObjectTable(ManagerCache);
                if (ManagerCache.UIForm.getDataScrollerXMLCache(object.id) == null) {
                    var objXMLCacheNew = createObjXMLCache();
                    if (objXMLCacheNew != null) {
                        ManagerCache.UIForm.setDataScrollerXMLCache(object.id, objXMLCacheNew);
                    }
                }
                var countCache = -1, pageSize = 1, dataScroller = getDataScroller(ManagerCache);
                if (dataScroller) {
                    pageSize = parseInt(dataScroller.getAttribute("maxRowsTable"), 10);
                }
                var fatherNode = XML.getSingleNode(ManagerCache.UIForm.getDataScrollerXMLCache(object.id), "/managerCache");
                if (fatherNode) {
                    var stringArgsPath = ManagerCache.path.split("/");
                    var countCache = -1, objNodeLength = getNodes(ManagerCache.UIForm.getDataScrollerXMLCache(object.id), "/managerCache/" + stringArgsPath[stringArgsPath.length - 1]);
                    if (objNodeLength && objNodeLength.length > 0) {
                        countCache = getMaxCountCache(objNodeLength) + 1;
                    }
                    if (countCache == -1) {
                        countCache = 0;
                    }
                    var fatherNode = XML.getSingleNode(ManagerCache.UIForm.getDataScrollerXMLCache(object.id), "/managerCache");
                    if (fatherNode && ManagerCache.initPage == 0 && ManagerCache.node && ManagerCache.node.length > 0) {
                        while (fatherNode.hasChildNodes()) {
                            fatherNode.removeChild(fatherNode.firstChild);
                        }
                    }
                    var elementsReturn = 0;
                    for (var i = 0; i < ManagerCache.node.length; i++) {
                        ManagerCache.node[i].setAttribute("countCache", countCache);
                        Sarissa.appendChildNode(fatherNode, ManagerCache.node[i]);
                        elementsReturn++;
                        countCache++;
                    }
                    var totalAllElementsBanco = getNodesTableXML(ManagerCache);
                    if (fatherNode) {
                        var cacheElements = parseInt(fatherNode.getAttribute("cacheElements"), 10) + elementsReturn;
                        fatherNode.setAttribute("cacheElements", cacheElements);
                        fatherNode.setAttribute("pageNumberCache", ManagerCache.initPage);
                        fatherNode.setAttribute("totalAllElementsBanco", totalAllElementsBanco);
                        fatherNode.setAttribute("totalAllElementsCache", cacheElements);
                        var totalSearch = parseInt(fatherNode.getAttribute("totalSearch"), 10);
                        if (totalSearch == 0) {
                            if (origem == ManagerCache.PO_SEARCH) {
                                fatherNode.setAttribute("totalSearch", totalAllElementsBanco < pageSize ? totalAllElementsBanco : pageSize);
                            }
                        }
                        var totalAllElementsCache = parseInt(fatherNode.getAttribute("totalAllElementsCache"), 10);
                        var totalCachePages = 0;
                        if (totalAllElementsCache % pageSize == 0) {
                            totalCachePages = totalAllElementsCache / pageSize;
                        } else {
                            totalCachePages = toInt(totalAllElementsCache / pageSize) + 1;
                        }
                        fatherNode.setAttribute("totalPagesCache", totalCachePages);
                    }
                    var tableXML = ManagerCache.UIForm.getTableXML(object.id);
                    if (tableXML == null) {
                        tableXML = cloneObjXML(ManagerCache.objXML);
                    }
                    if (tableXML) {
                        var nodePage2 = getNodes(tableXML, "/page");
                        nodePage2[0].setAttribute("pageNumber", "0");
                        nodePage2[0].setAttribute("pageSize", "0");
                        nodePage2[0].setAttribute("totalAllElements", "0");
                        var collectionNode = XML.getSingleNode(tableXML, "/page/pageElements");
                        while (collectionNode.hasChildNodes()) {
                            collectionNode.removeChild(collectionNode.firstChild);
                        }
                        ManagerCache.UIForm.setTableXML(object.id, tableXML, false);
                    }
                }
            }
        } catch (oErr) {
            outPrint(oErr, "_storeCache", ManagerCacheRsis);
        } finally {
            ManagerCache.node = null;
        }
    }
    function _updateCache(ManagerCache) {
        try {
            if (ManagerCache.UIForm && (ManagerCache.node && ManagerCache.node.length > 0)) {
                var fatherNode = XML.getSingleNode(ManagerCache.UIForm.getDataScrollerXMLCache(ManagerCache.object.id), "/managerCache");
                if (fatherNode) {
                    var stringArgsPath = ManagerCache.path.split("/");
                    var countCache = toInt(ManagerCache.node[0].getAttribute("countCache"));
                    var oldChildNode = getNodes(ManagerCache.UIForm.getDataScrollerXMLCache(ManagerCache.object.id), "/managerCache/" + stringArgsPath[stringArgsPath.length - 1] + "[@countCache='" + countCache + "']");
                    if (oldChildNode && oldChildNode.length > 0) {
                        ManagerCache.node[0].setAttribute("indSelecionado", "1");
                        Sarissa.replaceChildNode(fatherNode, ManagerCache.node[0], oldChildNode[0]);
                    }
                }
            }
        } catch (oErr) {
            outPrint(oErr, "_updateCache", ManagerCacheRsis);
        } finally {
            ManagerCache.node = null;
        }
    }
    function _updateCacheByListNodes(ManagerCache) {
        try {
            if (ManagerCache.UIForm && (ManagerCache.node && ManagerCache.node.length > 0)) {
                var fatherNode = XML.getSingleNode(ManagerCache.UIForm.getDataScrollerXMLCache(ManagerCache.object.id), "/managerCache");
                if (fatherNode) {
                    var stringArgsPath = ManagerCache.path.split("/");
                    var pathManager = stringArgsPath[stringArgsPath.length - 1];
                    for (var k = 0; k < ManagerCache.node.length; k++) {
                        var countCache = parseInt(ManagerCache.node[k].getAttribute("countCache"), 10), xQuery = "[@countCache='" + countCache + "']";
                        if (ManagerCache.xQuery != null && ManagerCache.xQuery !== "") {
                            xQuery = "[" + ManagerCache.xQuery + "]";
                        }
                        var oldChildNode = getNodes(ManagerCache.UIForm.getDataScrollerXMLCache(ManagerCache.object.id), "/managerCache/" + pathManager + xQuery);
                        if (oldChildNode && oldChildNode.length > 0) {
                            if (ManagerCache.node[k].getAttribute("indSelecionado") == null) {
                                ManagerCache.node[k].setAttribute("indSelecionado", "1");
                            }
                            Sarissa.replaceChildNode(fatherNode, ManagerCache.node[k], oldChildNode[0]);
                        }
                    }
                }
            }
        } catch (oErr) {
            outPrint(oErr, "_updateCacheByListNodes", ManagerCacheRsis);
        } finally {
            ManagerCache.node = null;
        }
    }
    function _updateCacheByElementNode(ManagerCache, noCreateTableXML) {
        try {
            if (ManagerCache.UIForm && ManagerCache.node) {
                var fatherNode = XML.getSingleNode(ManagerCache.UIForm.getDataScrollerXMLCache(ManagerCache.object.id), "/managerCache");
                if (fatherNode) {
                    var stringArgsPath = ManagerCache.path.split("/");
                    var countCache = toInt(ManagerCache.node.getAttribute("countCache"));
                    var xQuery = "[@countCache='" + countCache + "']";
                    if (ManagerCache.xQuery != null && ManagerCache.xQuery !== "") {
                        xQuery = "[" + ManagerCache.xQuery + "]";
                    }
                    var oldChildNode = getNodes(ManagerCache.UIForm.getDataScrollerXMLCache(ManagerCache.object.id), "/managerCache/" + stringArgsPath[stringArgsPath.length - 1] + xQuery);
                    if (oldChildNode && oldChildNode.length > 0) {
                        if (ManagerCache.node.getAttribute("indSelecionado") == null) {
                            ManagerCache.node.setAttribute("indSelecionado", "1");
                        }
                        Sarissa.replaceChildNode(fatherNode, ManagerCache.node, oldChildNode[0]);
                    }
                }
            }
        } catch (oErr) {
            outPrint(oErr, "_updateCacheByElementNode", ManagerCacheRsis);
        } finally {
            ManagerCache.node = null;
        }
    }
    function _deleteCache(ManagerCache, origem) {
        try {
            var object = getObjectTable(ManagerCache);
            if (ManagerCache.UIForm.getDataScrollerXMLCache(object.id)) {
                var fatherNodeCache = XML.getSingleNode(ManagerCache.UIForm.getDataScrollerXMLCache(object.id), "/managerCache");
                if (fatherNodeCache) {
                    var elementsDeleted = 0;
                    var oldChildNode = getNodes(ManagerCache.UIForm.getDataScrollerXMLCache(object.id), ManagerCache.pathDelete);
                    if (oldChildNode && oldChildNode.length > 0) {
                        for (var k = 0; k < oldChildNode.length; k++) {
                            fatherNodeCache.removeChild(oldChildNode[k]);
                            elementsDeleted++;
                        }
                        var pageSize = 1, dataScroller = getDataScroller(ManagerCache);
                        if (dataScroller) {
                            pageSize = parseInt(dataScroller.getAttribute("maxRowsTable"), 10);
                        }
                        var cacheElements = parseInt(fatherNodeCache.getAttribute("cacheElements"), 10) - elementsDeleted;
                        fatherNodeCache.setAttribute("cacheElements", cacheElements);
                        var totalAllElementsCache = parseInt(fatherNodeCache.getAttribute("totalAllElementsCache"), 10) - elementsDeleted;
                        fatherNodeCache.setAttribute("totalAllElementsCache", totalAllElementsCache);
                        if (origem == ManagerCache.PO_DELETE) {
                            var totalAllElementsBanco = parseInt(fatherNodeCache.getAttribute("totalAllElementsBanco"), 10) - elementsDeleted;
                            fatherNodeCache.setAttribute("totalAllElementsBanco", totalAllElementsBanco >= 0 ? totalAllElementsBanco : 0);
                            var totalSearch = parseInt(fatherNodeCache.getAttribute("totalSearch"), 10) - elementsDeleted;
                            fatherNodeCache.setAttribute("totalSearch", totalSearch >= 0 ? totalSearch : 0);
                        }
                        var totalCachePages = 0;
                        if (totalAllElementsCache % pageSize == 0) {
                            totalCachePages = totalAllElementsCache / pageSize;
                        } else {
                            totalCachePages = parseInt(totalAllElementsCache / pageSize, 10) + 1;
                        }
                        fatherNodeCache.setAttribute("totalPagesCache", totalCachePages);
                        var tableXML = ManagerCache.UIForm.getTableXML(object.id);
                        if (tableXML == null) {
                            var tableXML = cloneObjXML(ManagerCache.objXML);
                        }
                        if (tableXML) {
                            var nodePage2 = getNodes(tableXML, "/page");
                            nodePage2[0].setAttribute("pageNumber", "0");
                            nodePage2[0].setAttribute("pageSize", "0");
                            nodePage2[0].setAttribute("totalAllElements", "0");
                            var collectionNode = XML.getSingleNode(tableXML, "/page/pageElements");
                            while (collectionNode.hasChildNodes()) {
                                collectionNode.removeChild(collectionNode.firstChild);
                            }
                            ManagerCache.UIForm.setTableXML(object.id, tableXML, false);
                        }
                    }
                }
            }
        } catch (oErr) {
            outPrint(oErr, "_deleteCache", ManagerCacheRsis);
        } finally {
            ManagerCache.pathDelete = "";
        }
    }
    function _searchCache(ManagerCache) {
        try {
            var object = getObjectTable(ManagerCache);
            if (ManagerCache && ManagerCache.UIForm.getDataScrollerXMLCache(object.id)) {
                var stringArgsDataTable = ManagerCache.path.split("/"), pageNumber = 0, pageSize = 1, proxPage = 0, lengthCache = 0, totalAllElementsCache = 0;
                var dataScroller = getDataScroller(ManagerCache);
                if (dataScroller) {
                    pageNumber = parseInt(ManagerCache.initPage, 10);
                    pageSize = parseInt(dataScroller.getAttribute("maxRowsTable"), 10);
                }
                var totalAllElementsBancoRef = 0;
                var nodeCacheFather = ManagerCache.UIForm.getDataScrollerXMLCache(object.id).documentElement.selectSingleNode(ROOT_NODE + "/managerCache");
                if (nodeCacheFather) {
                    totalAllElementsCache = parseInt(nodeCacheFather.getAttribute("totalAllElementsCache"), 10);
                    totalAllElementsBancoRef = parseInt(nodeCacheFather.getAttribute("totalAllElementsBanco"), 10);
                }
                var lengthCache = parseInt(nodeCacheFather.childNodes.length, 10);
                var totalCompleteCachePages = parseInt(lengthCache / pageSize, 10);
                var recuperarCache = false;
                if (totalCompleteCachePages >= pageNumber + 1) {
                    recuperarCache = true;
                }
                var totalSearch = parseInt(nodeCacheFather.getAttribute("totalSearch"), 10);
                var recuperarServer = false;
                if (totalAllElementsBancoRef - totalSearch > 0) {
                    recuperarServer = true;
                }
                if (recuperarCache || !recuperarServer) {
                    createTableXML(ManagerCache);
                } else {
                    var nextPageNumberBanco = parseInt(totalSearch / pageSize, 10);
                    executeAction(ManagerCache, nextPageNumberBanco, pageSize, totalAllElementsBancoRef, lengthCache);
                }
            }
        } catch (oErr) {
            outPrint(oErr, "_searchCache", ManagerCacheRsis);
        }
    }
    function executeAction(ManagerCache, pageNumber, pageSize, totalAllElementsBanco, lengthCache) {
        try {
            if (ManagerCache) {
                var object = getObjectTable(ManagerCache);
                var nodeCacheFather = XML.getSingleNode(ManagerCache.UIForm.getDataScrollerXMLCache(object.id), "/managerCache");
                var UIContext = Rsis.UIContext.get(object);
                if (nodeCacheFather) {
                    if (pageNumber < ManagerCache.initPage && pageSize === lengthCache) {
                        pageNumber = parseInt(ManagerCache.initPage, 10);
                    }
                }
                Message.close(ManagerCache.UIForm);
                if (pageNumber < 0) {
                    pageNumber = 0;
                }
                var targetMethod = "search", parameters = "&pageNumber=" + escapeParam(pageNumber, false) + "&pageSize=" + escapeParam(pageSize, false), dataScroller = null, objName = ManagerCache.object.id;
                var component = getAttMandatory(ManagerCache.object, "component");
                if (component == "editTable" || component == "dataTable") {
                    var dataScrollers = ManagerCache.UIForm.getUIComponent("dataScroller");
                    for (var m = 0; m < dataScrollers.length; m++) {
                        if (dataScrollers[m].getAttribute("editTable") == objName || dataScrollers[m].getAttribute("dataTable") == objName) {
                            var dataScroller = dataScrollers[m];
                            break;
                        }
                    }
                } else {
                    var dataScroller = ManagerCache.object;
                }
                var queryString = "", strParamModal = "";
                if (dataScroller != null) {
                    var suppressMethods = getAtt(dataScroller, "suppressMethods");
                    if (suppressMethods != null && suppressMethods != "") {
                        targetMethod = suppressMethods.split("::")[1];
                    }
                    var paramModal = UIContext.DialogParams();
                    if (paramModal && paramModal["stringParams"]) {
                        strParamModal = paramModal["stringParams"];
                    }
                    var searchParameter = getAtt(dataScroller, "searchParameter");
                    if (searchParameter != null && searchParameter != "") {
                        var QueryString = new Object();
                        QueryString.add = "";
                        compressEvalTBSearchParam(ManagerCache.UIForm, QueryString, searchParameter);
                        var queryString = QueryString.add;
                    }
                }
                var managerCacheExecute = getAttFuncDeveloper(ManagerCache.object, "managerCacheExecute");
                if (managerCacheExecute != null && managerCacheExecute != "") {
                    compressEvalMCExec(ManagerCache, parameters, managerCacheExecute);
                } else {
                    Properties.setProperty(ManagerCache.UIForm.getDialogId() + "ManagerCacheReq", ManagerCache);
                    var form = ManagerCache.UIForm.getForm(), objXMLDomain = ManagerCache.UIForm.getPageFilterXML(object.id) != null ? ManagerCache.UIForm.getPageFilterXML(object.id).xml : "", targetAction = form.getAttribute("targetAction"), callbackFunction = "callBackSearchCache";
                    var parameters = "xmlDomain=" + escapeParam(objXMLDomain, true) + parameters + strParamModal + queryString;
                    AjaxRsis.callActionSync(form.id, URL, targetAction, targetMethod, callbackFunction, "", parameters);
                }
            }
        } catch (oErr) {
            outPrint(oErr, "executeAction", ManagerCacheRsis);
        }
    }
    function createTableXML(ManagerCache) {
        var error = false;
        try {
            var object = getObjectTable(ManagerCache);
            if (ManagerCache) {
                var totalElementsData = 0, pageNumber = 0, totalAllElements = 0, proxPage = 0, pageSize = 1, cacheElements = 0, totalAllElementsCache = 0, stringArgsDataTable = ManagerCache.path.split("/");
                var MANAGER_CACHE_PATH_STRING = stringArgsDataTable[stringArgsDataTable.length - 1];
                if (MANAGER_CACHE_PATH_STRING != "") {
                    MANAGER_CACHE_PATH_STRING = "/" + MANAGER_CACHE_PATH_STRING;
                }
                var tableXML = cloneObjXML(ManagerCache.UIForm.getTableXML(object.id)), dataScroller = getDataScroller(ManagerCache);
                if (dataScroller) {
                    pageSize = parseInt(dataScroller.getAttribute("maxRowsTable"), 10);
                }
                if (ManagerCache.UIForm.getDataScrollerXMLCache(object.id) == null) {
                    var objXMLCacheNew = createObjXMLCache();
                    if (objXMLCacheNew != null) {
                        ManagerCache.UIForm.setDataScrollerXMLCache(object.id, objXMLCacheNew);
                    }
                }
                var nodeCacheFather = ManagerCache.UIForm.getDataScrollerXMLCache(object.id).documentElement.selectSingleNode(ROOT_NODE + "/managerCache");
                if (nodeCacheFather) {
                    totalAllElementsCache = toInt(nodeCacheFather.getAttribute("totalAllElementsCache"));
                    pageNumber = toInt(ManagerCache.initPage, 10);
                    totalAllElements = toInt(nodeCacheFather.getAttribute("totalAllElementsBanco"));
                    cacheElements = toInt(nodeCacheFather.getAttribute("cacheElements"));
                }
                if (tableXML) {
                    var collectionNode = tableXML.documentElement.selectSingleNode(ROOT_NODE + "/page/pageElements");
                    while (collectionNode.hasChildNodes()) {
                        collectionNode.removeChild(collectionNode.firstChild);
                    }
                }
                var dataScrollerXMLCache = cloneObjXML(ManagerCache.UIForm.getDataScrollerXMLCache(object.id)), childNodeCache = getNodes(dataScrollerXMLCache, "/managerCache" + MANAGER_CACHE_PATH_STRING);
                if (childNodeCache && childNodeCache.length > 0) {
                    var count = pageNumber * pageSize, maxCount = 0;
                    if (count == 0) {
                        maxCount = totalAllElementsCache < pageSize ? childNodeCache.length : count + pageSize;
                    } else {
                        var totalPaginas = totalAllElementsCache % pageSize == 0 ? toInt(totalAllElementsCache / pageSize) : toInt(totalAllElementsCache / pageSize) + 1;
                        if (pageNumber == totalPaginas - 1) {
                            maxCount = totalAllElementsCache - pageSize < pageSize ? childNodeCache.length : count + pageSize - (count + pageSize - totalAllElementsCache);
                        } else {
                            maxCount = totalAllElementsCache - pageSize < pageSize ? childNodeCache.length : count + pageSize;
                        }
                    }
                    var countRowTable = 0, countNumRegs = 0;
                    for (var itPage = count; itPage < maxCount; itPage++) {
                        if (childNodeCache[itPage]) {
                            childNodeCache[itPage].setAttribute("countRowsTable", countRowTable);
                            Sarissa.appendChildNode(collectionNode, childNodeCache[itPage]);
                            countRowTable++;
                        }
                    }
                }
                var totalElements = totalAllElementsCache > totalAllElements ? totalAllElementsCache : totalAllElements, page = new Page(pageNumber, pageSize, totalElements);
                if (tableXML) {
                    var objNoPage = getNodes(tableXML, "/page");
                    if (objNoPage && objNoPage.length > 0) {
                        objNoPage[0].setAttribute("pageNumber", page.getPageNumber());
                        objNoPage[0].setAttribute("totalAllElements", totalElements);
                        objNoPage[0].setAttribute("firstPage", page.isFirstPage());
                        objNoPage[0].setAttribute("lastPage", page.isLastPage());
                        objNoPage[0].setAttribute("lastPageNumber", page.getLastPageNumber());
                        objNoPage[0].setAttribute("nextPageNumber", page.getNextPageNumber());
                        objNoPage[0].setAttribute("pageSize", pageSize);
                        objNoPage[0].setAttribute("indAlterado", "1");
                        objNoPage[0].setAttribute("new", "true");
                    }
                }
            }
        } catch (oErr) {
            outPrint(oErr, "createTableXML()", ManagerCacheRsis);
            var error = true;
        } finally {
            if (!error && object) ManagerCache.UIForm.setTableXML(object.id, tableXML, false);
        }
    }
}

function callLoadCache(form, _targetAction, _targetMethod, _callbackFunction, _parameters) {
    AjaxRsis.callActionSync(form, URL, _targetAction, _targetMethod, _callbackFunction, "", _parameters);
}

function callBackSearchCache(f) {
    var dataUi = "";
    try {
        var Transfer = AjaxRsis.process(f);
        if (Transfer && Transfer.objXML && Transfer.UIForm) {
            var objXML = Transfer.objXML, UIForm = Transfer.UIForm, form = UIForm.getForm(), nodeDomain = UIForm.getXPath(), COMPONENTS = UIForm.getAllUIComponents();
            if (UIForm && UIForm.getDialogId()) {
                dataUi = UIForm.getDialogId();
            }
            if (COMPONENTS) {
                Message.render(UIForm, objXML);
                if (UIForm.hasError == false) {
                    var myCacheReq = Properties.getProperty(dataUi + "ManagerCacheReq"), UIContext = Rsis.UIContext.get(UIForm), object = null;
                    if (typeof myCacheReq == "undefined" || myCacheReq == null || typeof myCacheReq.object == "undefined") {
                        var dataTables = COMPONENTS["dataTable"];
                        if (dataTables != undefined && dataTables.length > 0) {
                            object = dataTables[0];
                        }
                        var editTables = COMPONENTS["editTable"];
                        if (editTables != undefined && editTables.length > 0) {
                            object = editTables[0];
                        }
                    } else {
                        object = myCacheReq.object;
                    }
                    var objXMLTable = XML.broke(objXML, "/xmlTable/page");
                    if (!objXMLTable || objXMLTable == null) {
                        objXMLTable = cloneObjXML(objXML);
                    }
                    if (!(typeof ManagerCacheRsis == "undefined")) {
                        if (myCacheReq && myCacheReq.object) {
                            var component = getAttMandatory(myCacheReq.object, "component");
                            if (component == "dataScroller") {
                                object = $(getAtt(myCacheReq.object, "editTable"));
                                if (object == null) {
                                    object = $(getAtt(myCacheReq.object, "dataTable"));
                                }
                            } else {
                                object = myCacheReq.object;
                            }
                        }
                        var myCache = UIContext.cache.getInstance(object.id);
                        if (typeof myCache == "undefined" || myCache == null) {
                            myCache = new ManagerCacheXML();
                            if (!myCache.UIForm) myCache.UIForm = UIForm;
                        }
                        myCache.node = getNodes(objXMLTable, object.getAttribute("node"));
                        myCache.objXML = objXMLTable;
                        myCache.path = object.getAttribute("node");
                        myCache.object = object;
                        if (myCacheReq != null && myCacheReq.object != null) {
                            var dataScroller = getDataScroller(myCacheReq), callbackManagerCacheSearchAfterRender = getAttFuncDeveloper(dataScroller, "callbackManagerCacheSearchAfterRender");
                            if (callbackManagerCacheSearchAfterRender != null && callbackManagerCacheSearchAfterRender !== "") {
                                compressEvalMCCB(myCache, objXML, callbackManagerCacheSearchAfterRender);
                            }
                            if (typeof myCacheReq.updateAll === "string") {
                                compressEvalMCCB(myCache, objXML, myCacheReq.updateAll);
                            }
                        }
                        configurarMCTotalSearch(myCache, myCache.objXML);
                        myCache.searchReturn();
                        if (Rsis.Cache.isCache(object)) {
                            Rsis.Cache.setCheckedTableXML({
                                table: object,
                                UIForm: myCache.UIForm
                            });
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "callBackSearchCache", ManagerCacheRsis);
    } finally {
        Properties.setProperty(dataUi + "ManagerCacheReq", null);
    }
}

function configurarMCTotalSearch(ManagerCache, objXML) {
    var object = getObjectTable(ManagerCache), nodeCacheFather = XML.getSingleNode(ManagerCache.UIForm.getDataScrollerXMLCache(object.id), "/managerCache"), UIContext = Rsis.UIContext.get(object);
    if (nodeCacheFather) {
        var lengthCache = parseInt(nodeCacheFather.childNodes.length, 10);
        var nodePage = getNodes(objXML, "/page"), nodeElements = getNodes(objXML, object.getAttribute("node")), pageNumber = 0, pageSize = 0, totalAllElements = 0, elementos = 0, totalSearch = 0;
        if (nodePage && nodePage.length > 0) {
            pageNumber = parseInt(nodePage[0].getAttribute("pageNumber"), 10), pageSize = parseInt(nodePage[0].getAttribute("pageSize"), 10), 
            totalAllElements = parseInt(nodePage[0].getAttribute("totalAllElements"), 10);
        }
        if (nodeElements && nodeElements.length > 0) {
            elementos = parseInt(nodeElements.length, 10);
        }
        if (nodeCacheFather) {
            if (nodeCacheFather.getAttribute("totalSearch")) {
                totalSearch = toInt(nodeCacheFather.getAttribute("totalSearch"));
            }
            if (pageNumber === 0 && pageSize > lengthCache && pageSize > totalSearch && totalAllElements > totalSearch) {
                nodeCacheFather.setAttribute("totalSearch", totalAllElements < pageSize ? totalAllElements : pageSize);
            } else {
                nodeCacheFather.setAttribute("totalSearch", totalSearch + elementos);
            }
        }
    }
}

function getMaxCountCache(objNo) {
    var num = 0;
    if (objNo && objNo.length > 0) {
        for (var i = 0; i < objNo.length; i++) {
            var temp = parseInt(objNo[i].getAttribute("countCache"), 10);
            if (num < temp) var num = temp;
        }
    }
    return num;
}

function getObjectTable(ManagerCache) {
    if (ManagerCache && ManagerCache.object) {
        var component = getAttMandatory(ManagerCache.object, "component");
        if (component === "editTable" || component === "dataTable") {
            return ManagerCache.object;
        } else {
            var dataTableId = getAtt(ManagerCache.object, "dataTable");
            var editTableId = getAtt(ManagerCache.object, "editTable");
            if (dataTableId != null && dataTableId != "") {
                return $(dataTableId);
            } else if (editTableId != null && editTableId != "") {
                return $(editTableId);
            }
        }
    }
    return null;
}

function getNodesTableXML(ManagerCache) {
    var totalAllElements = 0;
    if (ManagerCache) {
        var nodePage = getNodes(ManagerCache.objXML, "/page");
        if (ManagerCache.objXML == null && !(nodePage && nodePage.length > 0)) {
            var nodePage = getNodes(ManagerCache.UIForm.getDataScrollerXMLCache(ManagerCache.object.id), "/managerCache");
            if (nodePage && nodePage.length > 0) totalAllElements = toInt(nodePage[0].getAttribute("totalAllElementsBanco"));
        } else if (nodePage && nodePage.length > 0) {
            totalAllElements = toInt(nodePage[0].getAttribute("totalAllElements"));
        }
    }
    return totalAllElements;
}

function getDataScroller(ManagerCache) {
    var dataScroller = null;
    if (ManagerCache) {
        var objName = ManagerCache.object.id;
        var component = getAttMandatory(ManagerCache.object, "component");
        if (component === "editTable" || component === "dataTable") {
            var dataScrollers = ManagerCache.UIForm.getUIComponent("dataScroller");
            if (!dataScrollers) return null;
            for (var m = 0; m < dataScrollers.length; m++) {
                if (dataScrollers[m].getAttribute("editTable") === objName || dataScrollers[m].getAttribute("dataTable") === objName) {
                    dataScroller = dataScrollers[m];
                    break;
                }
            }
        } else {
            dataScroller = ManagerCache.object;
        }
    }
    return dataScroller;
}

var suggestBoxSelected = null;

(function($R) {
    SuggestBoxRsis = $R.extend({}, AutoCompleteRsis, {
        _FILE: "030suggestBoxRsis.js",
        vClass: [ "iSBptReq", "iSBpt", "iSBptRdy" ],
        clazz: "SuggestBoxRsis",
        render: function() {
            return renderSuggestBox.apply(this, arguments);
        },
        renderInput: function(obj, state, isEditable, isMandatory, $win, sEvent) {
            try {
                var pattern = $R(obj).getMask(), events = Rsis.events;
                if (isEditable) {
                    var ac = "SuggestBoxRsis", rt = "return ", on_focus = $win + "removeCaracs(this,'" + pattern + "');", on_blur = $win + "blurSuggestBoxToXML(this, " + sEvent + ");";
                    obj.className = isEditable ? this.vClass[1] : this.vClass[2];
                    obj.disabled = !isEditable;
                    obj.readOnly = !isEditable;
                    $R(obj).setMandatory(state, SuggestBoxRsis.vClass);
                    if (obj.getAttribute("on-focus") !== null) {
                        on_focus = on_focus + rt + $win + obj.getAttribute("on-focus");
                    } else {
                        on_focus = rt + on_focus;
                    }
                    if (obj.getAttribute("on-blur") !== null) {
                        on_blur = on_blur + rt + $win + obj.getAttribute("on-blur");
                    } else {
                        on_blur = rt + on_blur;
                    }
                    if (obj.getAttribute("storeBlur") === "true") {
                        events.add(obj, "onblur", $win + "SelectBox.close(this," + sEvent + "); " + on_blur);
                    }
                    events.add(obj, "onfocus", on_focus).add("onkeypress", rt + $win + ac + ".check(this," + sEvent + ", '" + pattern + "');").add("onkeyup", rt + $win + ac + ".start(this," + sEvent + ");").add("onkeydown", rt + $win + ac + ".checkDwn(this, " + sEvent + ");");
                    if ($R.isMobileDevice) {
                        var sfn = "return " + $win + "SuggestBox.";
                        if (obj.getAttribute("remoteSearch") === "true") {
                            sfn += "emulateWindow";
                        } else {
                            sfn += "viewOptions";
                        }
                        obj.readOnly = true;
                        events.add("onclick", sfn + "(this," + sEvent + ");");
                    }
                    if (obj.getAttribute("keyup") !== null) {
                        events.add(obj, "onkeyup", $win + ac + ".start(this," + sEvent + ") return " + obj.getAttribute("keyup"));
                    }
                    if (obj.getAttribute("keydown") !== null) {
                        events.add(obj, "onkeydown", $win + ac + ".checkDwn(" + sEvent + "); return " + $win + obj.getAttribute("keydown"));
                    }
                } else {
                    if (obj.getAttribute("keydown") !== null) {
                        obj.onkeydown = "";
                    }
                    if (obj.getAttribute("keyup") !== null) {
                        obj.onkeyup = "";
                    }
                    if (obj.getAttribute("on-blur") !== null) {
                        obj.onblur = "";
                    }
                    events.add(obj, "onkeypress", "").add("onkeydown", "").add("onfocus", "").add("onblur", "return " + $win + "SelectBox.close(this, " + sEvent + ");");
                    $R(obj).rdOnly(true, this.vClass);
                }
                $R(obj).setTabIdx(state).visRestricted(state);
            } catch (oErr) {
                outPrint(oErr, this.clazz + ".renderInput", this);
            }
        },
        renderButtons: function(obj, isEditable, isMandatory, $win, sEvent) {
            try {
                if (obj) {
                    var objId = obj.id, events = $R.events, aCptDsd = "sBptDsd", sltBtn = $(objId + ".btnSearch"), nObj = $(objId + ".clrBtn"), nObjAdd = $(objId + ".addButton"), ac = "SuggestBox.", selbx = $win + "SelectBox.close(this,event); return ", nObjWdtIpt = $(objId + ".wdtIpt"), nObjWdtBtns = $(objId + ".wdtBtns"), wdtBtns = 16;
                    if (sltBtn) {
                        $R(sltBtn).rdOnly(!isEditable).disable(!isEditable, aCptDsd);
                        var sfn = "return " + $win + ac;
                        sfn += "searchOpen";
                        if ($R.isMobileDevice) {
                            sfn += "clickEmulateWindow";
                        } else {
                            sfn += "searchOpen";
                        }
                        events.add(sltBtn, "onclick", isEditable ? sfn + "(this," + sEvent + ");" : "");
                        setDataUICpt(obj, sltBtn);
                    }
                    var UR = UtilRsis;
                    if (nObj) {
                        $R(nObj).rdOnly(!isEditable).disable(!isEditable, aCptDsd);
                        UR.visibleObject(nObj, isEditable);
                        var clearButtonVisible = getAtt(obj, "clearButtonVisible");
                        if (isEditable && obj.style.display !== "none") {
                            $R(nObj).visible(clearButtonVisible !== "false" ? true : false);
                        }
                        if (clearButtonVisible === "false") {
                            obj.style.borderRight = "1px solid #69C";
                            obj.style.width = "99%";
                        }
                        events.add(nObj, "onclick", isEditable ? selbx + $win + "clearSuggestBox(this);" : "");
                        setDataUICpt(obj, nObj);
                    }
                    if (nObjAdd) {
                        $R(nObjAdd).rdOnly(!isEditable).disable(!isEditable, aCptDsd);
                        UR.visibleObject(nObjAdd, isEditable);
                        if (isEditable) wdtBtns = 32;
                        events.add(nObjAdd, "onclick", isEditable ? selbx + $win + ac + "openWindow(this);" : "");
                        setDataUICpt(obj, nObjAdd);
                    }
                    if (nObjWdtIpt) {
                        nObjWdtIpt.style.marginRight = wdtBtns + 5 + "px";
                    }
                    if (nObjWdtBtns) {
                        nObjWdtBtns.style.width = wdtBtns + "px";
                    }
                }
            } catch (oErr) {
                outPrint(oErr, this.clazz + ".renderButtons", this);
            }
        },
        check: function(obj, evt, pattern) {
            evt = $R.events.getEvent(evt);
            if ($R.browser.msie) {
                rejeitaTecla(evt);
                desabilitaLista(obj, evt);
                return validateMask(evt, pattern);
            } else {
                if (!this.validateChars(obj, evt)) {
                    return true;
                }
                rejeitaTecla(evt);
                desabilitaLista(obj, evt);
                return validateMask(evt, pattern);
            }
        },
        validateChars: function(obj, evt) {
            try {
                if (obj) {
                    evt = $R.events.getEvent(evt);
                    var params = obj.getAttribute("params"), UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(obj), objXML = UIForm.getParams(params);
                    var validateChars = isOnClickEvent(evt) || isEnterKeyUp(evt);
                    if (validateChars) {
                        var minlength = getAtt(obj, "minlength");
                        if (minlength !== null && minlength !== "") {
                            if (obj.value === "" || obj.value.length < minlength) {
                                return false;
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, this.clazz + ".validateChars", this);
            }
            return true;
        },
        checkkyPrs: function(objId, evt, value, texto) {
            evt = $R.events.getEvent(evt);
            if (isEnterKeyUp(evt)) {
                return this.setOptionSel(objId, value, texto);
            }
            if (isKeyCodePress(evt, 27)) {
                var obj = $(objId);
                $R($R(obj).getListHolder()).hide();
                obj.focus();
            }
            return;
        },
        checkDwn: function(obj, evt) {
            evt = Rsis.events.getEvent(evt);
            rejeitaTecla(evt);
            desabilitaLista(obj, evt);
            AutoComplete.checkDwn(obj, evt);
        },
        start: function(obj, evt) {
            evt = $R.events.getEvent(evt);
            if ($R.browser.msie) {
                if (!this.validateChars(obj, evt)) {
                    return true;
                }
            }
            return this.search(obj, evt);
        },
        search: function(obj, evt) {
            try {
                if (obj) {
                    var UIContext = Rsis.UIContext.get(obj);
                    evt = Rsis.events.getEvent(evt);
                    var act = SuggestBox, keyCode = Rsis.events.getCode(evt), UIForm = UIContext.getUIForm(obj), listHolder = obj ? $R(obj).getListHolder() : null;
                    act.OnclickEvent = isOnClickEvent(evt);
                    if (obj && obj.readOnly || !act.OnclickEvent && validaTeclaPressionada(evt) || !act.OnclickEvent && keyCode == 8 && (obj.value !== null && obj.value.length === 0)) {
                        if (listHolder) {
                            $R(listHolder).hide();
                        }
                        return false;
                    }
                    var targetMethod = obj.getAttribute("targetMethod"), hasTargetMethod = targetMethod !== null && targetMethod !== "";
                    var enterPress = this.startSearch(obj, evt, hasTargetMethod);
                    suggSelected = obj.id;
                    if (enterPress) {
                        if (!this.validateChars(obj, evt)) {
                            if (listHolder) {
                                $R(listHolder).hide();
                            }
                            return true;
                        }
                        obj.evtkey = keyCode;
                        obj.enterPressLocal = enterPress;
                        obj.classOld = obj.className;
                        this.callJavaAction(UIForm, obj, evt);
                    } else if (this.onKeyPress(evt)) {
                        var objXML = UIForm.getParams(obj.getAttribute("params")), pathString = obj.getAttribute("node"), optionValue = getAttMandatory(obj, "optionValue"), hasSearchedList = false;
                        if (pathString == null || pathString === "") {
                            pathString = getStringPath(objXML, optionValue, "", "");
                        }
                        if (objXML) {
                            var collection = getNodes(objXML, ROOT_NODE + pathString.replaceAll("###", "@"));
                            if (collection && collection.length > 0) {
                                hasSearchedList = true;
                            }
                        }
                        if (hasSearchedList) {
                            obj.evtkey = keyCode;
                            obj.enterPressLocal = enterPress;
                            var pathString = obj.getAttribute("node");
                            if (pathString == null || pathString === "") {
                                pathString = $R(obj).getPathNode(obj.getAttribute("optionSearch"));
                            }
                            var fun = $R.isMobileDevice ? SuggestBox._filter : SuggestBox._filterMenuItems;
                            fun.call(fun, UIForm, obj, pathString, obj.value, true, evt, SuggestBox, SuggestBoxRsis);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".search", this);
            }
        },
        callJavaAction: function(UIForm, obj, evt, ORIGEM) {
            try {
                this.ajax(UIForm, obj, evt, this.PO.SEARCH);
            } catch (oErr) {
                outPrint(oErr, ".callJavaAction", this);
            }
        },
        callJavaActionByFull: function(obj) {
            try {
                if (obj) {
                    var UIContext = Rsis.UIContext.get(obj);
                    var UIForm = UIContext.getUIForm(obj), evt = $R.events.getEvent();
                    this.ajax(UIForm, obj, evt, this.PO.FULL);
                }
            } catch (oErr) {
                outPrint(oErr, ".callJavaActionByFull()", this);
            }
        },
        ajax: function(UIForm, obj, evt, ORIGEM) {
            try {
                if (obj && UIForm) {
                    Rsis.Load.start(obj);
                    var _rsObj = $R(obj), textoDigitado = "";
                    if (ORIGEM === this.PO.SEARCH) {
                        _rsObj.upper();
                        textoDigitado = obj.value;
                        var pattern = _rsObj.getMask("mask"), validateChars = isOnClickEvent(evt) || (isEnterKeyUp(evt) || isEnterKeyPress(evt));
                        if (validateChars) {
                            var minlength = getAtt(obj, "minlength");
                            if (minlength !== null && minlength !== "" && (obj.value === "" || obj.value.length < minlength)) {
                                return false;
                            }
                        }
                        formatField(obj, pattern);
                        if (pattern !== null && pattern !== "" && !getMapPattern(pattern)) {
                            textoDigitado = unformatField(obj.value, pattern);
                        }
                    }
                    Message.close(UIForm);
                    var maxrows = getAtt(obj, "maxrows");
                    maxrows = maxrows !== null && maxrows !== "" ? maxrows : "10";
                    var xmlSearchTemplate = getAtt(obj, "xmlSearchTemplate"), useDomainXML = getAtt(obj, "useDomainXML"), paramSearch = _rsObj.getAttNode(obj.getAttribute("optionSearch"));
                    var objXMLSearchTemplate = null;
                    if (xmlSearchTemplate !== null && xmlSearchTemplate !== "") {
                        objXMLSearchTemplate = UIForm.getParams(xmlSearchTemplate);
                    } else if (useDomainXML === "true") {
                        objXMLSearchTemplate = UIForm.domainXML;
                        paramSearch = _rsObj.getAttNode(obj.getAttribute("optionTextRef")) || _rsObj.getAttNode(obj.getAttribute("optionSearch"));
                    }
                    if (objXMLSearchTemplate !== null) {
                        var pathSearch = UIForm.getXPath();
                        if (useDomainXML !== "true") {
                            pathSearch = _rsObj.getPathNode();
                            var args = pathSearch.split("/");
                            pathSearch = "/" + args[args.length - 1];
                        }
                        var nodeTemplate = getNodes(objXMLSearchTemplate, pathSearch.replaceAll("###", "@"));
                        if (nodeTemplate && nodeTemplate.length > 0) {
                            if (pattern !== null && pattern !== "" && !getMapPattern(pattern)) {
                                textoDigitado = unformatField(textoDigitado, pattern);
                            }
                            nodeTemplate[0].setAttribute(paramSearch, textoDigitado);
                        }
                    }
                    var ret = compressEvalRsisAll(getAttFuncDeveloper(obj, "executeSearchBefore"), obj, objXMLSearchTemplate, UIForm);
                    if (typeof ret !== "undefined") {
                        Rsis.Load.stop(obj);
                        return ret;
                    }
                    var queryString = "";
                    var searchParameter = getAttFuncDeveloper(obj, "searchParameter");
                    if (searchParameter !== null && searchParameter !== "") {
                        var QueryString = {
                            value: "",
                            add: ""
                        };
                        compressEvalRsisAll(searchParameter, UIForm, QueryString, obj);
                        queryString = typeof QueryString.value !== "undefined" ? QueryString.value : "";
                    }
                    var targetMethod = obj.getAttribute("targetMethod"), targetAction = obj.getAttribute("targetAction"), supressFunction = getAttFuncDeveloper(obj, "supressFunction"), strDomainXML = escapeParam(objXMLSearchTemplate !== null ? objXMLSearchTemplate.xml : "", true), form = UIForm.getForm();
                    if (targetAction == null || targetAction === "") {
                        targetAction = getAttMandatory(form, "targetAction");
                    }
                    var parameters = "xmlDomain=" + strDomainXML;
                    parameters = parameters + "&" + paramSearch + "=" + escapeParam(textoDigitado, false);
                    parameters = parameters + "&pageNumber=0&pageSize=" + escapeParam(maxrows, false);
                    parameters = parameters + "&maxrows=" + escapeParam(maxrows, false);
                    parameters = parameters + queryString;
                    if (supressFunction !== null && supressFunction !== "") {
                        compressEvalRsisAll(supressFunction, obj, UIForm, objXMLSearchTemplate, parameters);
                    } else {
                        var callbackFunction = $R.isUndefined(arguments[4]) ? SuggestBoxRsis._returnPromises : arguments[4], callComponent = obj.id;
                        if (ORIGEM === this.PO.FULL) {
                            var optionValue = getAttMandatory(obj, "optionValue");
                            if (SuggestBox.returnXML && (SuggestBoxRsis.permiteInclusaoDoNoh(optionValue.split("@")[0]) || SuggestBoxRsis.hasFunctionChangeObjectByXmlModal(obj))) {
                                callbackFunction = SuggestBoxRsis._returnPromisesAfterModal;
                            }
                        }
                        var promise = AjaxRsis.setLoadPanel(false).promises.post(null, {
                            action: targetAction,
                            method: targetMethod,
                            uiform: UIForm,
                            parameters: parameters,
                            async: true
                        });
                        promise.then(function(response) {
                            callbackFunction.call(SuggestBoxRsis, response, obj);
                        });
                        promise["catch"](function(err) {
                            console.log("errors in response", err);
                            Rsis.Load.stop(obj);
                            outPrint(err, ".ajax", SuggestBoxRsis);
                        });
                    }
                }
            } catch (oErr) {
                $R.Load.stop(obj);
                outPrint(oErr, "ajax", this);
            }
        },
        _returnPromises: function(Transfer, obj) {
            try {
                $R.Load.stop(obj);
                if (Transfer && Transfer.objXML && Transfer.UIForm) {
                    var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
                    Message.render(UIForm, objXML);
                    if (UIForm.hasError == false) {
                        var enterPressLocal = obj.enterPressLocal, optionValue = getAttMandatory(obj, "optionValue"), params = obj.getAttribute("params"), textoDigitado = obj.value;
                        var xmlDomain = XML.broke(objXML, "/xmlDomain/" + optionValue.split("/")[1]);
                        if (xmlDomain) {
                            UIForm.setParams(params, xmlDomain);
                            objXML = cloneObjXML(xmlDomain);
                        } else {
                            UIForm.setParams(params, objXML);
                        }
                        this.setCollection(obj, null);
                        var path = getAtt(obj, "node");
                        if (path == null || path === "") {
                            path = getStringPath(objXML, optionValue, "", "");
                        }
                        path = path.replaceAll("###", "@");
                        var elements = getNodes(objXML, path);
                        if (elements && elements.length == 1) {
                            storeXMLSearching(obj, UIForm);
                        } else {
                            var pathString = obj.getAttribute("node");
                            if (pathString == null || pathString === "") {
                                pathString = $R(obj).getPathNode(obj.getAttribute("optionSearch"));
                            }
                            var fun = $R.isMobileDevice ? SuggestBox._filter : SuggestBox._filterMenuItems;
                            fun.call(fun, UIForm, obj, pathString, textoDigitado, true, undefined, SuggestBox, SuggestBoxRsis);
                        }
                        $R(obj).setHint().cssHelp();
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "._returnPromises", this);
            }
        },
        _returnPromisesAfterModal: function(Transfer, obj) {
            try {
                $R.Load.stop(obj);
                if (Transfer && Transfer.objXML && Transfer.UIForm) {
                    var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
                    Message.render(UIForm, objXML);
                    if (UIForm.hasError == false) {
                        var optionValue = getAttMandatory(obj, "optionValue"), params = obj.getAttribute("params"), xmlDomain = XML.broke(objXML, "/xmlDomain/" + optionValue.split("/")[1]);
                        if (xmlDomain) {
                            UIForm.setParams(params, xmlDomain);
                            objXML = cloneObjXML(xmlDomain);
                        } else {
                            UIForm.setParams(params, objXML);
                        }
                        this.processXMLModal(obj, UIForm, SuggestBox.returnXML);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "._returnPromisesAfterModal", this);
            } finally {
                SuggestBox.error = false;
                SuggestBox.returnXML = null;
            }
        },
        callBack: function(f, callComponent) {
            try {
                var obj = $(callComponent);
                Rsis.Load.stop(obj);
                var Transfer = AjaxRsis.process(f);
                if (Transfer && Transfer.objXML && Transfer.UIForm) {
                    var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
                    Message.render(UIForm, objXML);
                    if (UIForm.hasError == false) {
                        if (obj) {
                            var enterPressLocal = obj.enterPressLocal, optionValue = getAttMandatory(obj, "optionValue"), params = obj.getAttribute("params"), textoDigitado = obj.value;
                            var xmlDomain = XML.broke(objXML, "/xmlDomain/" + optionValue.split("/")[1]);
                            if (xmlDomain) {
                                UIForm.setParams(params, xmlDomain);
                                objXML = cloneObjXML(xmlDomain);
                            } else {
                                UIForm.setParams(params, objXML);
                            }
                            this.setCollection(obj, null);
                            var path = getAtt(obj, "node");
                            if (path == null || path === "") {
                                path = getStringPath(objXML, optionValue, "", "");
                            }
                            path = path.replaceAll("###", "@");
                            var elements = getNodes(objXML, path);
                            if (elements && elements.length == 1) {
                                storeXMLSearching(obj, UIForm);
                            } else {
                                var pathString = obj.getAttribute("node");
                                if (pathString == null || pathString === "") {
                                    pathString = $R(obj).getPathNode(obj.getAttribute("optionSearch"));
                                }
                                var fun = $R.isMobileDevice ? SuggestBox._filter : SuggestBox._filterMenuItems;
                                fun.call(fun, UIForm, obj, pathString, textoDigitado, true, undefined, SuggestBox, SuggestBoxRsis);
                            }
                            $R(obj).setHint().cssHelp();
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".callBack()", this);
            }
        },
        callBackAndUpdateByModal: function(f, callComponent) {
            try {
                var obj = $(callComponent);
                Rsis.Load.stop(obj);
                var Transfer = AjaxRsis.process(f);
                if (Transfer && Transfer.objXML && Transfer.UIForm) {
                    var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
                    Message.render(UIForm, objXML);
                    if (UIForm.hasError == false) {
                        var optionValue = getAttMandatory(obj, "optionValue"), params = obj.getAttribute("params"), xmlDomain = XML.broke(objXML, "/xmlDomain/" + optionValue.split("/")[1]);
                        if (xmlDomain) {
                            UIForm.setParams(params, xmlDomain);
                            objXML = cloneObjXML(xmlDomain);
                        } else {
                            UIForm.setParams(params, objXML);
                        }
                        this.processXMLModal(obj, UIForm, SuggestBox.returnXML);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".callBackAndUpdateByModal", this);
            } finally {
                SuggestBox.error = false;
                SuggestBox.returnXML = null;
            }
        },
        createList: function(obj, objXML, pathString) {
            try {
                if (obj && objXML) {
                    var _rsObj = $R(obj);
                    var COLLECTIONS = this.getCollection(obj);
                    if (typeof COLLECTIONS == "undefined" || COLLECTIONS == null) {
                        var collection = getNodes(objXML, ROOT_NODE + pathString.replaceAll("###", "@"));
                        if (collection && collection.length > 0) {
                            var attOptionValue = _rsObj.getAttNode(obj.getAttribute("optionValue")), concatString = obj.getAttribute("concatString"), pattern = _rsObj.getMask(), optionValue = "", optionText = "", optionSearch = "", isStrConcat = false, z = 0, maxZ = collection.length;
                            var xpNode = obj.getAttribute("node");
                            optionText = xpNode + "@" + _rsObj.getAttNode(obj.getAttribute("optionText"));
                            optionValue = xpNode + "@" + _rsObj.getAttNode(obj.getAttribute("optionValue"));
                            optionSearch = xpNode + "@" + _rsObj.getAttNode(obj.getAttribute("optionSearch"));
                            var patternStr = pattern;
                            if (optionSearch !== optionText && concatString == "true") {
                                isStrConcat = true;
                                patternStr = "text";
                            }
                            COLLECTIONS = [];
                            for (;z < maxZ; z++) {
                                collection[z].setAttribute("selectedIndex", "");
                                var codigo = collection[z].getAttribute(attOptionValue), texto = getSuggestionValues(obj, objXML, collection[z], z, optionValue, optionText, patternStr), texto1 = getSuggestionValues(obj, objXML, collection[z], z, optionValue, optionSearch, pattern), txtSuggestion = "";
                                if (isStrConcat) {
                                    txtSuggestion = texto1.toUpperCase() + " - " + texto.toUpperCase();
                                } else {
                                    txtSuggestion = texto.toUpperCase();
                                }
                                texto2 = retiraAcentos(texto1.toUpperCase());
                                COLLECTIONS[z] = [ codigo, txtSuggestion, texto2, texto1 ];
                            }
                            this.setCollection(obj, COLLECTIONS);
                        }
                    } else {
                        var collection = getNodes(objXML, pathString.replaceAll("###", "@"));
                        if (collection && collection.length > 0) {
                            for (var z = 0; z < collection.length; z++) {
                                collection[z].setAttribute("selectedIndex", "");
                            }
                        }
                    }
                    return COLLECTIONS;
                }
            } catch (oErr) {
                outPrint(oErr, ".createList", this);
            }
            return null;
        },
        startSearch: function(obj, evt, hasTargetMethod) {
            var hasMinLength = getAtt(obj, "minlength") !== "" ? true : false;
            return (this.isEnterKeyUp(evt) || this.isEnterKeyPress(evt) || isOnClickEvent(evt) && SuggestBox.OnclickButton == false && hasMinLength == false) && hasTargetMethod == true && (obj && obj.value && obj.value.length > 0);
        },
        isEnterKeyPress: function(evt) {
            if (this.disabled || !this.enabled) {
                return false;
            }
            var e = Rsis.events;
            e.stopPropagation(evt);
            e.preventDefault(evt);
            switch (evt.keyCode) {
              case 9:
                return true;

              case 13:
                return true;

              default:
                return false;
            }
        },
        isEnterKeyUp: function(evt) {
            if (this.disabled) {
                return false;
            }
            switch (evt.keyCode) {
              case 9:
                return true;

              case 13:
                return true;

              default:
                return false;
            }
            return false;
        },
        onKeyPress: function(evt) {
            if (this.disabled) {
                return false;
            }
            var e = Rsis.events;
            e.stopPropagation(evt);
            e.preventDefault(evt);
            switch (evt.keyCode) {
              case 27:
                return false;

              case 9:
                return false;

              case 13:
                return false;

              case 38:
                return true;

              case 40:
                return true;

              default:
                return false;
            }
        },
        onKeyUp: function(evt) {
            if (this.disabled) {
                return false;
            }
            switch (evt.keyCode) {
              case 27:
                return false;

              case 9:
                return false;

              case 13:
                return false;

              case 38:
                return true;

              case 40:
                return true;

              default:
                return false;
            }
            return false;
        },
        clear: function(obj, clearStore) {
            try {
                if (obj) {
                    if (typeof clearStore === "undefined") {
                        clearStore = true;
                    }
                    var UIForm = $R.getUIForm(obj);
                    if (UIForm) {
                        if (clearStore) {
                            this.setCollection(obj, null);
                            UIForm.setParams(getAttMandatory(obj, "params"), null);
                        }
                        var selector = $(obj.id + ".selector");
                        if (selector) {
                            while (selector.firstChild) {
                                selector.removeChild(selector.firstChild);
                            }
                        }
                        clearXMLSuggestBox(obj);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".clear", this);
            }
        },
        commonProcess: function(obj, params) {
            this.commonProcess(obj, params);
        },
        processXMLModal: function(obj, UIForm, xmlReturnModal) {
            try {
                if (obj && UIForm) {
                    var params = obj.getAttribute("params");
                    xmlCollection = UIForm.getParams(obj.getAttribute("params"));
                    if (xmlCollection) {
                        var gtMty = getAttMandatory;
                        var optionValue = gtMty(obj, "optionValue"), optionValueRef = gtMty(obj, "optionValueRef"), optionText = gtMty(obj, "optionText");
                        var stringArgsOp = optionValue.split("@"), stringArgsOt = optionText.split("@"), pathValue = stringArgsOp[0], attValue = stringArgsOp[1], attText = stringArgsOt[1];
                        var argsXpathDomain = pathValue.split("/"), xpathDomain = ROOT_NODE + "/" + argsXpathDomain[argsXpathDomain.length - 1].replaceAll("###", "@"), xmlByChangeNodeName = null;
                        var permiteInclusaoDoNoh = this.permiteInclusaoDoNoh(pathValue);
                        if (permiteInclusaoDoNoh == false) {
                            var changeByXml = getAtt(obj, "changeObjectByXmlModal");
                            if (changeByXml !== null && changeByXml !== "") {
                                var tfr = compressEvalRsisAll(changeByXml, obj, UIForm, xmlReturnModal);
                                if (tfr) {
                                    xmlReturnModal = tfr.xmlByChangeObject;
                                    xmlByChangeNodeName = tfr.xmlByChangeNodeName;
                                }
                            }
                        }
                        var value = "", texto = "";
                        var nodeElementModal = getNodes(cloneObjXML(xmlReturnModal), xpathDomain);
                        if (nodeElementModal && nodeElementModal.length > 0) {
                            value = getNodeValue(nodeElementModal, attValue);
                            texto = getNodeValue(nodeElementModal, attText);
                            var xPathAtt = ROOT_NODE + pathValue.replaceAll("###", "@") + "[@" + attValue + "='" + value + "']", nodeElement = getNodes(xmlCollection, xPathAtt);
                            if (!(nodeElement && nodeElement.length > 0)) {
                                var fatherNode = XML.getSingleNode(xmlCollection, ROOT_NODE + createPathFatherNode(pathValue));
                                if (fatherNode) {
                                    Sarissa.appendChildNode(fatherNode, nodeElementModal[0]);
                                }
                            }
                            UIForm.setParams(obj.getAttribute("params"), xmlCollection);
                        }
                        var domainXML = getDomainXML(obj, UIForm), objXML = cloneObjXML(xmlCollection), path = getAtt(obj, "node");
                        if (path == null || path === "") {
                            path = getStringPath(objXML, optionValue, "", "");
                        }
                        path = path.replaceAll("###", "@");
                        var fatherNode = XML.getSingleNode(objXML, ROOT_NODE + createPathFatherNode(path));
                        if (fatherNode) {
                            var nodeOption = getNodes(objXML, ROOT_NODE + path);
                            if (xmlByChangeNodeName) {
                                for (var k = 0; k < nodeOption.length; k++) {
                                    fatherNode.removeChild(nodeOption[k]);
                                }
                                var xmlDocElem = xmlByChangeNodeName.documentElement;
                                if (xmlDocElem && xmlDocElem.firstChild) {
                                    var isFullySelectedXml = getAtt(obj, "isFullySelectedXml");
                                    if (isFullySelectedXml === "true") {
                                        var changeNodeNamePath = getAtt(obj, "changeNodeNamePath"), cloneXML = cloneObjXML(xmlReturnModal);
                                        var fatherNodeFull = XML.getSingleNode(cloneXML, xpathDomain);
                                        if (fatherNodeFull) {
                                            var childNodeOld = getNodes(cloneXML, xpathDomain + changeNodeNamePath);
                                            if (childNodeOld && childNodeOld.length > 0) {
                                                Sarissa.replaceChildNode(fatherNodeFull, xmlDocElem.firstChild, childNodeOld[0]);
                                            }
                                        }
                                        var childNodeChanged = getNodes(cloneXML, xpathDomain);
                                        if (childNodeChanged && childNodeChanged.length > 0) {
                                            Sarissa.appendChildNode(fatherNode, childNodeChanged[0]);
                                        }
                                    } else {
                                        Sarissa.appendChildNode(fatherNode, xmlDocElem.firstChild);
                                    }
                                }
                            } else {
                                for (var i = 0; i < nodeOption.length; i++) {
                                    if (parseInt(nodeOption[i].getAttribute(attValue)) != parseInt(value)) {
                                        fatherNode.removeChild(nodeOption[i]);
                                    }
                                }
                            }
                        }
                        this.commonProcess(obj, {
                            UIForm: UIForm,
                            objXML: objXML,
                            domainXML: domainXML,
                            path: path,
                            optionValue: optionValue,
                            optionValueRef: optionValueRef,
                            value: value,
                            texto: texto
                        });
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".processXMLModal()", this);
            }
        },
        hasFunctionChangeObjectByXmlModal: function(obj) {
            var changeXml = getAtt(obj, "changeObjectByXmlModal");
            return changeXml !== null && changeXml !== "" ? true : false;
        },
        permiteInclusaoDoNoh: function(stringXpath) {
            try {
                if (stringXpath !== null && stringXpath !== "") {
                    var argsXpathDomain = stringXpath.split("/"), nameElementModal = "", nodeRoot = getNodes(SuggestBox.returnXML, ROOT_NODE);
                    if (nodeRoot && nodeRoot[0] && nodeRoot[0].firstChild) {
                        nameElementModal = nodeRoot[0].firstChild.nodeName;
                    }
                    if (nameElementModal !== null && nameElementModal !== "") {
                        return argsXpathDomain[argsXpathDomain.length - 1] === nameElementModal ? true : false;
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".permiteInclusaoDoNoh", this);
            }
            return false;
        },
        xmlToSuggestBox: function(obj, UIForm, domainXML, xmlList, captionValidated, isList) {
            try {
                var nodes = null;
                if (obj && UIForm && domainXML) {
                    var _rsObj = $R(obj);
                    var mask = _rsObj.getMask(), optionValue = getAttMandatory(obj, "optionValue"), optionValueRef = getAttMandatory(obj, "optionValueRef"), caption = getAttMandatory(obj, "caption"), textValue = "";
                    var strOptionValueRef = optionValueRef.split("@")[0];
                    nodes = getNodes(domainXML, ROOT_NODE + strOptionValueRef.replaceAll("###", "@"));
                    var path = getStringPath(domainXML, optionValue, optionValueRef, "");
                    path = path.replaceAll("###", "@");
                    var _optText = getAttMandatory(obj, "optionText"), elements = getNodes(xmlList, ROOT_NODE + path);
                    if (Rsis.isUndefined(xmlList)) {
                        xmlList = domainXML;
                        _optText = getAtt(obj, "optionTextRef");
                        path = "";
                        elements = nodes;
                    }
                    if (elements && elements.length > 0) {
                        var listPathNodes = _optText.split(","), maxLpt = listPathNodes.length, i = 0, maxEls = elements.length;
                        if (maxLpt > 0) {
                            for (;i < maxEls; i++) {
                                for (var k = 0; k < maxLpt; k++) {
                                    textValue += _rsObj.getDescription(xmlList, i, listPathNodes[k], path, mask);
                                }
                            }
                        }
                        obj.value = textValue === "" ? caption !== null && caption !== "" ? caption : "" : textValue;
                    } else {
                        obj.value = caption !== null && caption !== "" ? caption : "";
                    }
                    this.setValueHidden(obj, xmlList);
                }
            } catch (oErr) {
                outPrint(oErr, ".xmlToSuggestBox", this);
            }
            return nodes;
        },
        xmlToSuggestBoxByListParams: function(obj, UIForm, domainXML) {
            try {
                var nodes = null;
                if (obj && UIForm && domainXML) {
                    var caption = getAttMandatory(obj, "caption"), optionValueRef = getAttMandatory(obj, "optionValueRef"), mask = $R(obj).getMask(), params = getAtt(obj, "params");
                    var strOptionValueRef = optionValueRef.split("@")[0];
                    nodes = getNodes(domainXML, ROOT_NODE + strOptionValueRef.replaceAll("###", "@"));
                    var xmlList = UIForm.getParams(params);
                    if (xmlList !== null) {
                        this.xmlToSuggestBox(obj, UIForm, domainXML, xmlList, true);
                    } else {
                        if (caption !== null && caption != "") {
                            obj.value = caption;
                        } else {
                            obj.value = "";
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".xmlToSuggestBoxByListParams", this);
            }
            return nodes;
        },
        setValueHidden: function(obj, domainXML, optionValueRef) {
            try {
                if (obj) {
                    var inputHidden = $(obj.id + ".hidden");
                    if (domainXML && optionValueRef) {
                        var stringArgsPathValueRef = optionValueRef.split("@");
                        if (stringArgsPathValueRef && stringArgsPathValueRef.length > 0) {
                            var nodeDomain = getNodes(domainXML, ROOT_NODE + stringArgsPathValueRef[0].replaceAll("###", "@")), attNameOptionValueRef = stringArgsPathValueRef[1];
                            if (attNameOptionValueRef !== null && nodeDomain && nodeDomain.length > 0) {
                                inputHidden.value = nodeDomain[0].getAttribute(attNameOptionValueRef);
                            }
                        }
                    } else {
                        inputHidden.value = "";
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".setValueHidden()", this);
            }
        },
        setOptionSel: function(objId, value, texto) {
            try {
                var obj = $(objId);
                if (obj) {
                    var UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(obj);
                    if (UIForm) {
                        var gtMty = getAttMandatory;
                        var selectedIndex = $(objId + ".selector").selectedIndex, domainXML = getDomainXML(obj, UIForm), objXML = cloneObjXML(UIForm.getParams(gtMty(obj, "params")));
                        if (domainXML !== null && objXML) {
                            var optionValue = gtMty(obj, "optionValue"), optionValueRef = gtMty(obj, "optionValueRef"), path = getAtt(obj, "node");
                            if (path == null || path === "") {
                                path = getStringPath(objXML, optionValue, "", "");
                            }
                            path = path.replaceAll("###", "@");
                            var fatherNode = XML.getSingleNode(objXML, ROOT_NODE + createPathFatherNode(path)), nodeOption = getNodes(objXML, ROOT_NODE + path);
                            if (nodeOption && nodeOption.length > 0) {
                                objXML = XML.deleteNodes(objXML, path + "[@selectedIndex != '" + parseInt(selectedIndex) + "']");
                                SuggestBoxRsis.commonProcess(obj, {
                                    UIForm: UIForm,
                                    objXML: objXML,
                                    domainXML: domainXML,
                                    path: path,
                                    optionValue: optionValue,
                                    optionValueRef: optionValueRef,
                                    value: value,
                                    texto: texto
                                });
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "setOptionSel", SuggestBoxRsis);
            }
        }
    });
})(Rsis);

(function($R) {
    var _AutoComplete = $R.extend({}, AutoComplete);
    SuggestBox = $R.extend({}, _AutoComplete, {
        error: false,
        OnclickEvent: null,
        OnclickButton: false,
        returnXML: null,
        clickEmulateWindow: function(obj, evt) {
            this.startDialog(obj, SuggestBoxRsis);
            return this.openSearch(obj, evt, "searchOpen");
        },
        emulateWindow: function(obj, evt) {
            this.startDialog(obj, SuggestBoxRsis);
        },
        searchOpen: function(object, evt) {
            return this.openSearch(object, evt, "searchOpen");
        },
        viewOptions: function(object, evt) {
            return this.openSearch(object, evt, "viewOptions");
        },
        openSearch: function(object, evt, ORIGEM) {
            try {
                if (object) {
                    var objId = object.id, evt = Rsis.events.getEvent(evt), args = objId.split("."), stringObject = args[0], stringButton = args[1], SB = SuggestBoxRsis;
                    this.OnclickButton = stringButton === "btnSearch" ? true : false;
                    var obj = $(stringObject), UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(object);
                    if (ORIGEM === "viewOptions") {
                        var objXML = UIForm.getParams(obj.getAttribute("params"));
                        if (this.OnclickButton == true && !objXML && !SB.validateChars(obj, evt)) {
                            return false;
                        }
                    } else {
                        if (!SB.validateChars(obj, evt)) {
                            return false;
                        }
                    }
                    SB.setCollection(obj, null);
                    obj.className = $R(obj).isMandatory(UIForm.state) ? "iSBptReq" : "iSBpt";
                    var listHolder = obj ? $R(obj).getListHolder() : null;
                    if (!listHolder || listHolder && listHolder.style.display === "none") {
                        SB.search(obj, evt);
                    } else {
                        $R(listHolder).hide();
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".openSearch", SB);
            }
        },
        openWindow: function(addButton) {
            try {
                if (addButton) {
                    var UIContext = Rsis.UIContext.get(addButton);
                    var UIForm = UIContext.getUIForm(addButton), stringArgs = addButton.id.split("."), obj = $(stringArgs[0]);
                    if (obj && UIForm) {
                        var urlModal = getAttMandatory(obj, "url"), modalWidth = getAtt(obj, "modalWidth"), modalHeight = getAtt(obj, "modalHeight"), dialogParams = "";
                        UIForm.objXMLTemp = getDomainXML(obj, UIForm);
                        if (UIForm.objXMLTemp !== null) {
                            var param = [];
                            param["modalFormField"] = getAttMandatory(obj, "modalFormField");
                            param["inputSearchValue"] = Trim(obj.value);
                            param["searchNode"] = getAttMandatory(obj, "searchValue");
                            param["state"] = UIRsis.SEARCHING;
                            compressEvalRsisAll(getAttFuncDeveloper(obj, "executeBeforeStartModalAdd"), obj, addButton, UIForm, param);
                            crossDialog.show(urlModal, param, null, function(returnValue, args) {
                                try {
                                    var UIForm = args[0], SuggestBox = args[1], obj = args[2], addButton = args[3];
                                    var ret = compressEvalRsisAll(getAttFuncDeveloper(obj, "executeAfterClosingModal"), obj, addButton, UIForm, returnValue);
                                    if (typeof ret !== "undefined") {
                                        return ret;
                                    }
                                    if (returnValue && returnValue !== null) {
                                        var returnDomainXML = createObjXML(returnValue);
                                        if (returnDomainXML) {
                                            if (returnDomainXML !== null && !returnDomainXML.documentElement) {
                                                return false;
                                            }
                                            compressEvalRsisAll(getAttFuncDeveloper(obj, "renderDeveloperAddItem"), obj, addButton, UIForm, returnDomainXML);
                                            UIForm.setParams(obj.getAttribute("params"), null);
                                            UIContext.setUIForms(UIForm.getForm().id, UIForm);
                                            SuggestBox.returnXML = returnDomainXML;
                                        }
                                        $R(obj).delListHolder();
                                        obj.evtkey = "0";
                                        obj.classOld = $R(obj).isMandatory(UIForm.state) ? "iSBptReq" : "iSBpt";
                                        obj.enterPressLocal = false;
                                        SuggestBoxRsis.callJavaActionByFull(obj);
                                    }
                                } catch (oErr) {
                                    outPrint(oErr, "crossDialog.anonima()", crossDialog);
                                }
                            }, [ UIForm, SuggestBox, obj, addButton ]);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".openWindow", SuggestBoxRsis);
            }
            return false;
        },
        checkkyPrs: function(objId, evt, value, texto) {
            evt = $R.events.getEvent(evt);
            var rEvts = $R.events, acRsis = AutoCompleteRsis, obj = $(objId);
            switch (evt.keyCode) {
              case rEvts.KEY_PAGEUP:
              case rEvts.KEY_PAGEDOWN:
              case rEvts.KEY_HOME:
              case rEvts.KEY_END:
              case rEvts.KEY_UP:
              case rEvts.KEY_DOWN:
              case rEvts.KEY_LEFT:
                acRsis.start(obj, evt);
                break;

              case rEvts.KEY_RIGHT:
                break;

              case rEvts.KEY_RETURN:
                if (isEnterKeyUp(evt)) {
                    this.active = 0;
                    return acRsis.setOptionSel(objId, value, texto);
                }

              case rEvts.KEY_BACKSPACE:
              case rEvts.KEY_ESC:
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    this.active = 0;
                    $R($R(obj).getListHolder()).hide();
                    $R(obj).focus();
                }
                break;

              default:
                if (isEnterKeyUp(evt)) {
                    this.active = 0;
                    return acRsis.setOptionSel(objId, value, texto);
                }
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    $R($R(obj).getListHolder()).hide();
                    $R(obj).focus();
                }
            }
            return;
        },
        checkDwn: function(obj, evt) {
            evt = $R.events.getEvent(evt);
            var rEvts = $R.events, acRsis = SuggestBoxRsis;
            switch (evt.keyCode) {
              case rEvts.KEY_PAGEUP:
              case rEvts.KEY_PAGEDOWN:
              case rEvts.KEY_HOME:
              case rEvts.KEY_END:
              case rEvts.KEY_UP:
              case rEvts.KEY_DOWN:
              case rEvts.KEY_LEFT:
                acRsis.setCollection(obj, null);
                acRsis.start(obj, evt);
                var listBox = $(obj.id + ".selector");
                if (listBox) {
                    var menuitem = listBox.getElementsByTagName("li");
                    if (menuitem && menuitem.length > 0) {
                        if (menuitem[0] !== document.activeElement) {
                            this.active = 0;
                            $R.$(menuitem[0]).focus().addClass("selected");
                            rEvts.stopPropagation(evt);
                        }
                    }
                }
                break;

              case rEvts.KEY_RIGHT:
              case rEvts.KEY_RETURN:
                if (isEnterKeyUp(evt)) {
                    this.active = 0;
                    return acRsis.setOptionSel(obj.id, value, texto);
                }

              case rEvts.KEY_BACKSPACE:
              case rEvts.KEY_ESC:
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    this.active = 0;
                    $R($R(obj).getListHolder()).hide();
                    $R(obj).focus();
                }
                break;

              default:
                rejeitaTecla(evt);
                desabilitaLista(obj, evt);
            }
        },
        menuselect: function(obj, evt) {
            evt = $R.events.getEvent(evt);
            var rEvts = $R.events;
            switch (evt.keyCode) {
              case rEvts.KEY_PAGEUP:
                this.previousPage(obj, evt);
                break;

              case rEvts.KEY_PAGEDOWN:
                this.nextPage(obj, evt);
                break;

              case rEvts.KEY_HOME:
                this.active = 0;
                this._move("first", obj, evt);
                break;

              case rEvts.KEY_END:
                this.active = 0;
                this._move("last", obj, evt);
                break;

              case rEvts.KEY_UP:
                this.previous(obj, evt);
                break;

              case rEvts.KEY_DOWN:
                this.next(obj, evt);
                break;

              case rEvts.KEY_LEFT:
              case rEvts.KEY_RIGHT:
              case rEvts.KEY_RETURN:
                if (isEnterKeyUp(evt)) {
                    obj.click();
                    this.active = 0;
                }
                break;

              case rEvts.KEY_BACKSPACE:
              case rEvts.KEY_ESC:
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    this.active = 0;
                    $R($R(obj).getListHolder()).hide();
                    var listBox = $(obj.parentNode.id.split(".")[0]);
                    if (listBox) {
                        $R(listBox).focus();
                    }
                    this.active = 0;
                }
                break;

              default:
                if (isEnterKeyUp(evt)) {
                    this.active = 0;
                    return SuggestBoxRsis.setOptionSel(obj.id, value, texto);
                }
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    $R($R(obj).getListHolder()).hide();
                    var listBox = $(obj.parentNode.id.split(".")[0]);
                    if (listBox) {
                        $R(listBox).focus();
                    }
                    this.active = 0;
                }
            }
            return;
        },
        active: -1,
        next: function(obj, evt) {
            AutoComplete._move("next", obj, evt);
        },
        previous: function(obj, evt) {
            AutoComplete._move("previous", obj, evt);
        },
        previousPage: function(obj, evt) {
            AutoComplete._move("previous", obj, evt);
        },
        nextPage: function(obj, evt) {
            AutoComplete._move("next", obj, evt);
        },
        _move: function(direction, obj, evt) {
            this._move(direction, obj, evt);
        },
        templateHtml: function(obj) {
            var $win = UtilRsis.getParentWindow(obj);
            var html = '<div id="pLbx" suggestBoxElement="true" {1}>' + ' <div class="lBx">';
            html += '  \t<div class="cteLbx" suggestBoxElement="true" {1}>' + '\t\t<ul id="{0}.selector" suggestBoxElement="true" {1}></ul>' + "  \t</div>" + " </div>" + "</div>";
            return Message.parser(html, obj.id, Rsis.isMobileDevice ? "" : 'style="height:123px"');
        },
        createItem: function(obj, _menu, $win, ctValue, ctText, txtSuggestion, countSelectedIndex) {
            var span = Rsis.isMobileDevice ? '<span class="glyphicon-import"></span>' : "";
            var $element = $R.$('<li tabindex="-1" name="listBox.li" suggestBoxElement="true"><div class="li-div">' + txtSuggestion + "</div>" + span + "</li>");
            $element.keyup(function(event) {
                SuggestBox.menuselect(this, event);
                event.stopImmediatePropagation();
                event.preventDefault();
            }).click(function(event) {
                AutoCompleteRsis.onClickRadio(this);
                event.stopImmediatePropagation();
                event.preventDefault();
            }).attr({
                id: obj.id + ".li" + countSelectedIndex,
                value: ctValue.replace(/\'/gi, ""),
                searchText: ctText,
                selectedIndex: countSelectedIndex
            });
            _menu.appendChild($element[0]);
        },
        _createInputSearch: function(obj, config, self, instance) {
            if (!obj || !config) return;
            var $searchTerm = $R.$(".menu-panel input");
            if ($searchTerm && $searchTerm[0]) {
                $searchTerm.attr(config);
                $searchTerm.val("");
                $searchTerm.on({
                    keypress: function(e) {
                        return instance.check(this, e, getAtt(this, "mask"));
                    },
                    keyup: function(e) {
                        var _isRemoteSearch_ = isRemoteSearch(self.getInput(this));
                        if (_isRemoteSearch_) {
                            $R($R.$(".btn-clear-search")[0]).visible(isNoEmpty(this.value));
                        }
                        return true;
                    },
                    keydown: function(e) {
                        var key = $R.events;
                        e = key.getEvent(e);
                        switch (e.keyCode) {
                          case key.KEY_BACKSPACE:
                            return true;

                          case key.KEY_DELETE:
                          case key.KEY_RETURN:
                            instance.setCollection(self.getInput(this), null);
                            return instance.start(this, e);

                          default:
                            rejeitaTecla(e);
                            desabilitaLista(obj, e);
                            return true;
                        }
                    }
                });
                var _isRemoteSearch_ = toBoolean(config.remoteSearch);
                $searchTerm[0].focus();
            }
        }
    });
})(Rsis);

function renderSuggestBox(obj, state) {
    try {
        if (obj) {
            var nodes = null, $win = UtilRsis.getParentWindow(obj), sEvent = getStringEvent(obj);
            if ($R(obj).isRenderAll()) {
                nodes = xmlToSuggestBox(obj);
                var isEditable = $R(obj).isEditable(state), isMandatory = $R(obj).isMandatory(state);
                SuggestBoxRsis.renderInput(obj, state, isEditable, isMandatory, $win, sEvent);
                SuggestBoxRsis.renderButtons(obj, isEditable, isMandatory, $win, sEvent);
            }
            $R(obj).cssHelp().renderDev(nodes, arguments[2]);
        }
    } catch (oErr) {
        outPrint(oErr, "renderSuggestBox()", SuggestBoxRsis);
    }
}

var clearSuggestBox = function(object) {
    try {
        if (object) {
            var stringArgs = object.id.split("."), obj = $(stringArgs[0]);
            return clearXMLSuggestBox(obj);
        }
    } catch (oErr) {
        outPrint(oErr, "clearSuggestBox", SuggestBoxRsis);
    }
}, clearXMLSuggestBox = function(obj) {
    try {
        if (obj) {
            var UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(obj), domainXML = getDomainXML(obj, UIForm);
            if (domainXML !== null) {
                var mask = $R(obj).getMask(), optionValueRef = getAttMandatory(obj, "optionValueRef"), clear = false;
                var attributeNode = $R(obj).getAttNode(optionValueRef), nodeDomain = getNodes(UIForm.domainXML, $R(obj).getPathNode(optionValueRef));
                if (nodeDomain && nodeDomain.length > 0) {
                    var valueAttNode = nodeDomain[0].getAttribute(attributeNode);
                    if (valueAttNode !== null && valueAttNode !== "") {
                        Crud.savedNode(UIForm);
                    }
                }
                clear = $R(obj).clearAtts(domainXML, clear);
                clear = $R(obj).clearNodes(domainXML, clear, null);
                if (clear) {
                    obj.value = "";
                    var inputHidden = $(obj.id + ".hidden");
                    if (inputHidden) {
                        inputHidden.value = "";
                    }
                    setDomainXML(obj, UIForm, domainXML, optionValueRef);
                }
                UIForm.setParams(getAttMandatory(obj, "params"), null);
                $R(obj).clearExc(UIForm);
                var renderElements = obj.getAttribute("renderElements");
                if (renderElements !== null && renderElements !== "") {
                    var elements = getElements(UIForm, renderElements);
                    renderDependents(obj, UIForm, elements);
                }
                UIContext.setUIForms(UIForm);
            } else {
                obj.value = "";
                var inputHidden = $(obj.id + ".hidden");
                if (inputHidden) {
                    inputHidden.value = "";
                }
            }
            $R(obj).setHint();
        }
    } catch (oErr) {
        outPrint(oErr, "clearXMLSuggestBox", SuggestBoxRsis);
    }
    return false;
}, xmlToSuggestBox = function(obj) {
    try {
        var nodes = null;
        if (obj) {
            var UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(obj);
            if (UIForm) {
                var domainXML = getDomainXML(obj, UIForm), SB = SuggestBoxRsis;
                nodes = SB.xmlToSuggestBox(obj, UIForm, domainXML, undefined, false);
                $R(obj).setHint();
            }
        }
    } catch (oErr) {
        outPrint(oErr, "xmlToSuggestBox", SuggestBoxRsis);
    }
    return nodes;
}, blurSuggestBoxToXML = function(input, evt) {
    try {
        evt = Rsis.events.getEvent(evt);
        if (input && evt && !_NO_RENDER_INPUT) {
            formatSgtBoxToXml(input);
        }
        return true;
    } catch (oErr) {
        outPrint(oErr, "blurSuggestBoxToXML", SuggestBoxRsis);
        return false;
    }
}, formatSgtBoxToXml = function(input) {
    try {
        if (input) {
            $R(input).upper();
            formatField(input, $R(input).getMask());
            inputSgtBoxToXML(input);
        }
    } catch (oErr) {
        outPrint(oErr, "formatSgtBoxToXml", SuggestBoxRsis);
    }
}, inputSgtBoxToXML = function(input) {
    try {
        if (input) {
            var UIContext = Rsis.UIContext.get(input);
            var minlength = getAtt(input, "minlength"), optionValueRef = getAtt(input, "optionValueRef"), optionTextRef = getAtt(input, "optionTextRef"), attribute = "optionValueRef";
            if (minlength !== null && minlength !== "") {
                var optTextRef = "", optVleRef = "";
                if (optionTextRef !== null && optionTextRef !== "") {
                    optTextRef = optionTextRef.split("@")[1];
                }
                if (optionValueRef !== null && optionValueRef !== "") {
                    optVleRef = optionValueRef.split("@")[1];
                }
                if (optVleRef === optTextRef) {
                    attribute = "optionTextRef";
                }
            }
            if (optionTextRef !== null && optionTextRef !== "") {
                var mask = $R(input).getMask(), UIForm = UIContext.getUIForm(input), domainXML = getDomainXML(input, UIForm);
                var pathNode = optionTextRef.split("@")[0];
                if (domainXML !== null && pathNode !== null && pathNode !== "") {
                    var attributeNode = optionTextRef.split("@")[1], nodes = getNodes(domainXML, ROOT_NODE + pathNode), mask = $R(input).getMask();
                    var valueAtt = $R(input).toXML(input.value);
                    if (attributeNode != undefined && attributeNode !== "") {
                        var valueAttNode = nodes[0].getAttribute(attributeNode);
                        if (valueAttNode !== valueAtt && (valueAttNode !== null || valueAttNode == null && valueAtt !== "")) {
                            nodes[0].setAttribute("changedNode", "yes");
                            Crud.savedNode(UIForm);
                        }
                        setAttributeNode(nodes, attributeNode, valueAtt);
                    } else {
                        setTextNode(nodes[0], valueAtt);
                    }
                    setDomainXML(input, UIForm, domainXML, getAttMandatory(input, attribute));
                    UIContext.setUIForms(UIForm);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "inputSgtBoxToXML", SuggestBoxRsis);
    }
    return true;
}, storeXMLSearching = function(selector, UIForm) {
    try {
        if (selector && UIForm) {
            var obj = $(selector.id.split(".")[0]), UIContext = Rsis.UIContext.get(obj), _rsObj = $R(obj), gtMty = getAttMandatory, domainXML = getDomainXML(obj, UIForm), objXML = cloneObjXML(UIForm.getParams(gtMty(obj, "params")));
            if (domainXML !== null && objXML) {
                var optionValue = gtMty(obj, "optionValue"), optionValueRef = gtMty(obj, "optionValueRef"), path = getAtt(obj, "node");
                if (path == null || path === "") {
                    path = getStringPath(objXML, optionValue, "", "");
                }
                path = path.replaceAll("###", "@");
                objXML = _rsObj.changeNdName(objXML);
                compressEvalRsisAll(getAttFuncDeveloper(obj, "afterProcessParser"), obj, objXML, domainXML);
                _rsObj.parserNds(obj, objXML, domainXML, optionValueRef, function(obj, objXML, domainXML, optionValueRef) {
                    var optionValue = getAttMandatory(obj, "optionValue"), pathNodeDomain = getStringPath(domainXML, optionValue, "", ""), argsOptionValue = pathNodeDomain.split("/"), strOptionValueRef = getStringPath(domainXML, optionValueRef, "", "");
                    XML.deleteNodes(domainXML, strOptionValueRef + "/" + argsOptionValue[argsOptionValue.length - 1]);
                });
                _rsObj.parserAtts(objXML, domainXML);
                setDomainXML(obj, UIForm, domainXML, optionValueRef);
                UIContext.setUIForms(UIForm);
                var pathString = obj.getAttribute("node");
                if (pathString == null || pathString === "") {
                    pathString = _rsObj.getPathNode(obj.getAttribute("optionSearch"));
                }
                var newSelectBox = SuggestBoxRsis.createList(obj, objXML, pathString), value = "", texto = "";
                if (newSelectBox) {
                    var selBox = newSelectBox[0];
                    if (selBox) {
                        var ctValue = selBox[0], ctText = selBox[3];
                        value = ctValue.replace(/\'/gi, "");
                        texto = ctText;
                    }
                }
                var inputHidden = $(obj.id + ".hidden");
                if (inputHidden) {
                    oldValueHidden = inputHidden.value;
                    inputHidden.value = value;
                }
                var listHolder = $R.isMobileDevice ? $("dialog-search-term") : obj ? $R(obj).getListHolder() : null;
                if (listHolder) {
                    $R(listHolder).hide();
                }
                var attributeNode = _rsObj.getAttNode(optionValueRef), nodeDomain = getNodes(UIForm.domainXML, _rsObj.getPathNode(optionValueRef));
                if (nodeDomain && nodeDomain.length > 0) {
                    var valueAttNode = nodeDomain[0].getAttribute(attributeNode);
                    if (valueAttNode !== value && (valueAttNode !== null || valueAttNode == null && value !== "")) {
                        Crud.savedNode(UIForm);
                    }
                }
                _rsObj.setHint();
                obj.value = texto;
                _rsObj.execDev([ objXML, domainXML ]);
                var on_change = getAttFuncDeveloper(obj, "on_change");
                if (on_change !== null && on_change !== "") {
                    var valueKey = getNodeAttributes(objXML, optionValue), objNode = getNodes(objXML, path);
                    compressEvalRsisAll(on_change, obj, UIForm, value, oldValueHidden, objNode);
                }
                var renderElements = obj.getAttribute("renderElements");
                if (renderElements !== null && renderElements !== "") {
                    renderDependents(obj, UIForm, getElements(UIForm, renderElements));
                }
                var bwr = Rsis.browser;
                if (bwr.msie && bwr.version >= 6 && bwr.version < 7 && !$R.isMobileDevice) {
                    obj.focus();
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "storeXMLSearching", SuggestBoxRsis);
    }
}, clearSuggestBoxEditTable = function(obj, state) {
    try {
        if (obj) {
            var $win = UtilRsis.getParentWindow(obj), sEvent = getStringEvent(obj);
            var isEditable = $R(obj).isEditable(state), isMandatory = $R(obj).isMandatory(state);
            SuggestBoxRsis.renderInput(obj, state, isEditable, isMandatory, $win, sEvent);
            SuggestBoxRsis.renderButtons(obj, isEditable, isMandatory, $win, sEvent);
            obj.value = "";
            var inputHidden = $(obj.id + ".hidden");
            if (inputHidden) inputHidden.value = "";
            var renderElements = obj.getAttribute("renderElements");
            if (renderElements !== null && renderElements !== "") {
                renderDependents(obj, UIForm, getElements(UIForm, renderElements));
            }
        }
    } catch (oErr) {
        outPrint(oErr, "clearSuggestBoxEditTable()", SuggestBoxRsis);
    }
}, setValueSuggestBox = function(_o, _oHdn, _vText, _vHdn) {
    setValueSelect(_o, _oHdn, _vText, _vHdn);
}, renderHelpSuggestBox = function(object, UIForm, enableHelp) {
    if (object) {
        renderHelp(object, UIForm, enableHelp);
    }
}, renderHelpKeysSuggestBox = function(object, UIForm, enableHelp) {
    if (object) {
        renderHelpKeys(object, UIForm, enableHelp);
    }
}, eventBlurSelect = function(evt, objectId) {
    evt = Rsis.events.getEvent(evt);
    var element = Rsis.events.getTarget(evt), bwr = Rsis.browser;
    if (bwr.msie && SuggestBox.OnclickEvent == false) {
        var obj = $(objectId), listHolder = obj ? $R(obj).getListHolder() : null;
        if (listHolder) {
            $R(listHolder).hide();
        }
        if (bwr.msie && bwr.version == 6 || bwr.firefox) {
            obj.focus();
        }
    }
};

(function() {
    TabbedPaneRsis = {
        _FILE: "031tabbedPaneRsis.js",
        version: JRetail.rsis.VersionJS,
        TabSelect: new Map(),
        iframeTab: null,
        tabSelectedCount: 0,
        timeLoadIframe: 0,
        temporizador: 0,
        contentWidth: 0,
        speed: Rsis.browser.firefox ? 10 : 5,
        moveTime: Rsis.browser.firefox ? 5 : 10,
        moveRightVar: 0,
        moveLeftVar: 0,
        noRenderDeveloper: null,
        render: function() {
            return renderTabbed.apply(this, arguments);
        },
        configTabs: function(object) {
            try {
                if (object) {
                    var objectId = object.getAttribute("id"), stringArgs = objectId.split(":"), tabcorrent = object.getAttribute("tabselect");
                    if (tabcorrent !== "true") {
                        var modal = object.getAttribute("modal"), tabbedPane = $(stringArgs[0] + ".tabs"), args1 = stringArgs[1];
                        if (tabbedPane) {
                            tabbedPane.style.width = "100%";
                            setDataUICpt(object, tabbedPane);
                            var list = tabbedPane.getElementsByTagName("li");
                            for (var i = 0; i < list.length; i++) {
                                var li = list[i];
                                if (li) {
                                    var anc = li.getElementsByTagName("a")[0];
                                    tabId = anc.getAttribute("id"), tabselect = anc.getAttribute("tabselect");
                                    setDataUICpt(object, anc);
                                    if ((modal == null || modal === "" || modal === "false") && (tabId && tabselect != null)) {
                                        var string = tabId.split(":")[1];
                                        if (string != undefined && string != null) {
                                            if (string === args1) {
                                                li.className = "";
                                                anc.className = "sel";
                                                displayDiv(tabId, true);
                                                anc.setAttribute("tabselect", "true");
                                            } else {
                                                li.className = "liTabOff";
                                                anc.className = "";
                                                displayDiv(tabId, false);
                                                anc.setAttribute("tabselect", "false");
                                            }
                                        }
                                    }
                                }
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".configTabs", this);
            }
        },
        isCreatedIframe: function(object) {
            if (object) {
                var frmId = object.getAttribute("frameId");
                if (frmId != null && frmId !== "") {
                    return true;
                }
            }
            return false;
        },
        createIframe: function(object) {
            var thiz = this;
            try {
                if (object) {
                    var objectId = object.getAttribute("id");
                    stringArgs = objectId.split(":"), tabbedPane = $(stringArgs[0] + ".tabs"), tabPanel = $(objectId + ".pane");
                    if (tabPanel && tabbedPane) {
                        var iframesTab = tabPanel.getElementsByTagName("IFRAME");
                        if (iframesTab && iframesTab.length > 0) {
                            thiz.renderForms(object, getIframeDocument(iframesTab[0]));
                        } else {
                            var ui = "", nameDialog = "";
                            if (objectId.search(/#/) > -1) {
                                var _dialogName = objectId.split("#")[0];
                                ui = _dialogName + "#";
                                nameDialog = "?ui=" + escapeParam(_dialogName, false);
                            }
                            var frameId = getAtt(object, "frameId"), frameUrl = getAtt(object, "frameUrl"), frameBorder = getAtt(object, "frameBorder"), frameMarginWidth = getAtt(object, "frameMarginWidth"), frameMarginHeight = getAtt(object, "frameMarginHeight"), frameWidth = getAtt(object, "frameWidth"), frameHeight = getAtt(object, "frameHeight");
                            var stringIframe = '<iframe id="' + ui + frameId + '" name="' + ui + frameId + '" frameborder="' + frameBorder + '" marginwidth="' + frameMarginWidth + '" ';
                            stringIframe = stringIframe + ' marginheight="' + frameMarginHeight + '" width="' + frameWidth + '" height="' + frameHeight + '"style="overflow-x:hidden;">';
                            stringIframe = stringIframe + "</iframe>";
                            tabPanel.innerHTML = stringIframe;
                            var newIFrame = tabPanel.getElementsByTagName("IFRAME")[0];
                            if (newIFrame) {
                                if (typeof Loading !== "undefined") {
                                    Loading.start();
                                }
                                var body = document.body;
                                if (frameHeight == null || frameHeight == "") {
                                    frameHeight = body.scrollHeight > tabPanel.scrollHeight ? body.scrollHeight - 60 : tabPanel.scrollHeight;
                                }
                                thiz.iframeTab = newIFrame;
                                newIFrame.height = frameHeight;
                                newIFrame.src = frameUrl + nameDialog;
                                thiz.temporizador = 600;
                                thiz.TabSelect.put(objectId, object);
                                thiz.callBackIframeValidate();
                            }
                        }
                    }
                }
            } catch (oErr) {
                if (typeof Loading !== "undefined") Loading.stop();
                outPrint(oErr, ".createIframe", thiz);
            }
        },
        createTabs: function(object) {
            var thiz = this;
            try {
                if (object) {
                    var modal = object.getAttribute("modal");
                    if (modal != null && modal !== "" && modal === "true") {
                        thiz.showModalDialogToTabbedPane(object);
                    } else {
                        var stringArgs = object.id.split(":");
                        tabPanel = $(object.id + ".pane");
                        thiz.renderForms(object, tabPanel);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".createTabs", thiz);
            }
        },
        renderForms: function(tabSelected, object) {
            var thiz = this;
            try {
                if (tabSelected && object) {
                    thiz.startTabsNavigation(object);
                    var hasIframe = false;
                    var forms = object.getElementsByTagName("form");
                    if (forms && forms.length > 0) {
                        for (var i = 0; i < forms.length; i++) {
                            var UIContext = Rsis.UIContext.get(forms[i]);
                            UIContext.FORM_ACCESSED = forms;
                            var formId = forms[i].id, isJsInParent = false, hasIframe = false, iframeName = getAtt(tabSelected, "frameId");
                            setDataUICpt(tabSelected, forms);
                            if (iframeName !== "") {
                                var body = object.getElementsByTagName("body")[0];
                                var isJsInParent = getAtt(body, "isJsInParent") === "true" ? true : false;
                                hasIframe = getAtt(tabSelected, "frameId") !== "" ? true : false;
                            }
                            var UIForm = UIContext.getUIForm(formId);
                            if (typeof UIForm == "undefined" || UIForm == null || !UIForm) {
                                initializeForms(forms);
                                UIForm = UIContext.getUIForm(formId);
                                var dataUi = forms[i].getAttribute("data-ui"), objectPanel = $(dataUi + ".ctrpanel");
                                UIForm.setDialogContainer(objectPanel);
                            }
                            if (parseInt(UIForm.isCached) === 0) {
                                UIForm.state = UIRsis.INITIAL;
                                renderUIForm(UIForm);
                                var functionLoadingInitialize = getAtt(tabSelected, "onClickLoading");
                                if (functionLoadingInitialize != null && functionLoadingInitialize !== "") {
                                    if (hasIframe && !isJsInParent) {
                                        functionLoadingInitialize = "window.frames['" + iframeName + "']." + functionLoadingInitialize;
                                    }
                                    compressEvalTp(object, functionLoadingInitialize);
                                    UIForm.isCached = 1;
                                    UIContext.setUIForms(formId, UIForm);
                                    renderUIForm(UIForm);
                                }
                            } else {
                                renderUIForm(UIForm);
                            }
                        }
                    }
                    var noRenderDeveloper = arguments[2] || thiz.noRenderDeveloper || null;
                    if (noRenderDeveloper == undefined || noRenderDeveloper == null || noRenderDeveloper == false) {
                        var tabSelectedId = tabSelected.getAttribute("id");
                        if (hasIframe) {
                            object = $(tabSelectedId + ".pane");
                        }
                        var stringArgs = tabSelectedId.split(":"), tabbedPane = $(stringArgs[0] + ".tabs");
                        $R(tabSelected).evalDev("renderDeveloper", [ tabSelected, tabbedPane, object ]);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".renderForms", thiz);
            } finally {
                if (tabSelected && tabSelected.id) {
                    thiz.TabSelect.remove(tabSelected.id);
                }
            }
        },
        showModalDialogToTabbedPane: function(object) {
            var thiz = this;
            try {
                var dialogParams = null, formId = "", nodePathDomain = "";
                var objectId = object.getAttribute("id");
                if (objectId != null && objectId !== "") {
                    var formId = objectId.split(":")[0], nodePathDomain = object.getAttribute("node"), modal = object.getAttribute("modal");
                    if (modal != null && modal != "" && modal == "true") {
                        var modalUrl = object.getAttribute("url"), modalWidth = object.getAttribute("modalWidth"), modalHeight = object.getAttribute("modalHeight");
                        if (modalWidth != null && modalWidth !== "" || modalHeight != null && modalHeight !== "") {
                            dialogParams = [ modalWidth, modalHeight ];
                        }
                    }
                }
                var param = [];
                param["modalFormField"] = formId;
                param["inputSearchValue"] = "";
                param["searchNode"] = nodePathDomain;
                param["domainXML"] = null;
                param["state"] = null;
                crossDialog.show(urlModal, param, dialogParams, function(returnValue, args) {
                    try {
                        var UIForm = args[0];
                    } catch (oErr) {
                        outPrint(oErr, "crossDialog.anonima()", thiz);
                    }
                }, [ UIForm ]);
            } catch (oErr) {
                outPrint(oErr, "showModalDialogToTabbedPane()", thiz);
            }
        },
        getTabbedPanel: function(object) {
            if (object) {
                var tables = object.getElementsByTagName("table");
                if (tables && tables.length > 0) {
                    for (var i = 0; i < tables.length; i++) {
                        if (tables[i].getAttribute("component") === "tabbedPane") return tables[i];
                    }
                }
            }
        },
        startTabsNavigation: function(object) {
            var thiz = this, bwr = Rsis.browser;
            try {
                if (object) {
                    var $win = UtilRsis.getParentWindow(object);
                    tabbedPane = thiz.getTabbedPanel(object);
                    if (tabbedPane) {
                        var tabbedPaneId = getAtt(tabbedPane, "id");
                        if (tabbedPaneId != null && tabbedPaneId !== "") {
                            thiz.crossobj = $(tabbedPaneId + ".panelLinks_content");
                            if (thiz.crossobj) {
                                if (bwr.msie) {
                                    thiz.contentWidth = thiz.crossobj.offsetWidth;
                                } else if (bwr.firefox) {
                                    thiz.contentWidth = thiz.crossobj.style.clip.width;
                                }
                            }
                            var msdow = "onmousedown", msup = "onmouseup", events = Rsis.events;
                            var panelImagePrev = $(tabbedPaneId + ".prevButton");
                            if (panelImagePrev) {
                                events.add(panelImagePrev, msdow, "return " + $win + "TabbedPaneRsis.moveRight();").add(msup, $win + "clearTimeout(TabbedPaneRsis.moveRightVar);");
                            }
                            var panelImageNext = $(tabbedPaneId + ".nextButton");
                            if (panelImageNext) {
                                events.add(panelImageNext, msdow, "return " + $win + "TabbedPaneRsis.moveLeft();").add(msup, $win + "clearTimeout(TabbedPaneRsis.moveLeftVar);");
                            }
                            thiz.getContentWidth(tabbedPaneId);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "TabbedPaneRsis.startTabsNavigation()", thiz);
            }
        },
        moveLeft: function() {
            var thiz = this, bwr = Rsis.browser;
            if ((bwr.msie || bwr.firefox) && parseInt(thiz.crossobj.style.left) >= thiz.contentWidth * -1 + 100) thiz.crossobj.style.left = parseInt(thiz.crossobj.style.left) - thiz.speed + "px"; else if (bwr.firefox && thiz.crossobj.left >= thiz.contentWidth * -1 + 100) thiz.crossobj.left -= thiz.speed;
            thiz.moveLeftVar = setTimeout(function() {
                thiz.moveLeft();
            }, thiz.moveTime);
        },
        moveRight: function() {
            var thiz = this, bwr = Rsis.browser;
            if ((bwr.msie || bwr.firefox) && parseInt(thiz.crossobj.style.left) <= 0) thiz.crossobj.style.left = parseInt(thiz.crossobj.style.left) + thiz.speed + "px"; else if (bwr.firefox && thiz.crossobj.left <= 0) thiz.crossobj.left += thiz.speed;
            thiz.moveRightVar = setTimeout(function() {
                thiz.moveRight();
            }, thiz.moveTime);
        },
        getContentWidth: function(tabbedPaneId) {
            var thiz = this, bwr = Rsis.browser;
            if (thiz.crossobj && (bwr.msie || bwr.firefox)) {
                thiz.contentWidth = thiz.crossobj.offsetWidth;
            } else if (bwr.firefox) {
                thiz.crossobj = $(tabbedPaneId + ".panelLinks_content");
                if (thiz.crossobj) {
                    thiz.crossobj.visibility = "show";
                }
            }
        },
        callBackIframeValidate: function() {
            var thiz = this;
            try {
                if (thiz.temporizador > 0) {
                    if (verifyDownloadHtmlNeeded(thiz.iframeTab)) {
                        clearInterval(thiz.timeLoadIframe);
                        thiz.temporizador = 0;
                        return true;
                    } else {
                        thiz.timeLoadIframe = setInterval(function() {
                            thiz.callBackIframeValidate();
                        }, 1e3);
                    }
                } else {
                    return true;
                }
                thiz.temporizador--;
            } catch (oErr) {
                outPrint(oErr, ".callBackIframeValidate", thiz);
            }
        }
    };
})();

function renderTabbed(tabbedPane, status) {
    try {
        if (tabbedPane != null) {
            var tabcorrent = tabbedPane.getAttribute("tabselect"), objectId = tabbedPane.getAttribute("id"), tabbedId = objectId.split(":")[0];
            if (objectId !== "" && tabcorrent == "true") {
                var tab = $(tabbedId + ".tabs"), pane = $(tabbedId + ".pane");
                if (tab && pane) {
                    var formsTab = pane.getElementsByTagName("form");
                    if (formsTab && formsTab.length > 0) {
                        var UIContext = Rsis.UIContext.get(formsTab[0]);
                        var arrayList = UIContext.getUIForms();
                        for (var i = 0; i < formsTab.length; i++) {
                            renderUIForm(arrayList[formsTab[i].id]);
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderTabbed", TabbedPaneRsis);
    }
}

function selectTab(object) {
    try {
        if (object) {
            var accessRestricted = getAtt(object, "accessRestricted");
            if (accessRestricted === "true") {
                return false;
            }
            var hasAcessTab = true, tpRsis = TabbedPaneRsis;
            var developerTabAccess = getAtt(object, "developerTabAccess");
            if (developerTabAccess != null && developerTabAccess !== "") {
                hasAcessTab = compressEvalRsisAll(developerTabAccess, object);
            }
            if (!hasAcessTab) {
                return false;
            }
            var visualizeRestricted = getAtt(object, "visualizeRestricted");
            if (!searchStringArgs(visualizeRestricted, status, ";")) {
                var isVisible = getAttMandatory(object, "isVisible");
                if (isVisible === "true") {
                    return false;
                }
            }
            tpRsis.configTabs(object);
            tpRsis.noRenderDeveloper = arguments[1];
            if (tpRsis.isCreatedIframe(object)) {
                tpRsis.createIframe(object);
            } else {
                tpRsis.createTabs(object);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "selectTab", TabbedPaneRsis);
    }
}

function displayDiv(id, op) {
    try {
        if (id != undefined && id != null && id !== "") {
            var object = $(id + ".pane");
            if (object) {
                $R(object).visible(op);
                object.className = op ? "pTabOn" : "pTabOff";
            }
        }
    } catch (oErr) {
        outPrint(oErr, "displayDiv", TabbedPaneRsis);
    }
}

function enableTabbedPane(id, idTab, op) {
    try {
        if (id != undefined && id != null && id !== "" && idTab != undefined && idTab != null && idTab !== "") {
            var tab = $(id + ":" + idTab);
            $R(tab).disable(op, "");
            tab.style.cursor = op ? "pointer" : "default";
        }
    } catch (oErr) {
        outPrint(oErr, "enableTabbedPane", TabbedPaneRsis);
    }
}

function verifyDownloadHtmlNeeded(_iframe) {
    var doc = getIframeDocument(_iframe);
    try {
        if (doc.location === "about:blank") {
            return false;
        } else if (doc) {
            return true;
        } else {
            return false;
        }
    } catch (e) {
        alert("No foi possvel estabelecer uma conexao com o servidor!");
        return true;
    }
}

(function() {
    TextAreaRsis = {
        _FILE: "032textAreaRsis.js",
        version: JRetail.rsis.VersionJS,
        vClass: [ "tAreaReq", "tArea", "tAreaRdy" ],
        render: function() {
            return renderTextArea.apply(this, arguments);
        },
        putPanelEditor: function(_key, _value) {
            this.cachePanelEditor.put(_key, _value);
        },
        removePanelEditor: function(_key) {
            this.cachePanelEditor.remove(_key);
        }
    };
})();

function renderTextArea(textArea, status) {
    try {
        var nodes = null;
        if (textArea) {
            var _rsObj = $R(textArea);
            var nodes = null, events = Rsis.events, $win = UtilRsis.getParentWindow(textArea), sEvent = getStringEvent(textArea);
            if (_rsObj.isRenderAll()) {
                var pattern = _rsObj.getMask(), strPattern = pattern.split("::");
                if (_rsObj.isEditable(status)) {
                    _rsObj.rdOnly(false).setMandatory(status, TextAreaRsis.vClass);
                    _NO_RENDER_INPUT = _rsObj.isColHeader();
                    events.add(textArea, "onblur", $win + "SelectBox.close(this," + sEvent + "); return " + $win + "blurTextAreaToXML(this, " + sEvent + ");").add("onfocus", "return " + $win + "removeCaracs(this,'" + pattern + "');").add("onkeypress", "return " + $win + "validateMask(" + sEvent + ", '" + pattern + "');");
                    if (textArea.getAttribute("keyup") != null) {
                        events.add(textArea, "onkeyup", "return " + $win + textArea.getAttribute("keyup"));
                    }
                    if (textArea.getAttribute("keydown") != null) {
                        events.add(textArea, "onkeydown", "return " + $win + textArea.getAttribute("keydown"));
                    }
                    _rsObj.setFocus();
                } else {
                    _rsObj.rdOnly(true, TextAreaRsis.vClass);
                    events.add(textArea, "onblur", "return " + $win + "SelectBox.close(this, " + sEvent + ");");
                    if (textArea.getAttribute("keydown") != null) textArea.onkeydown = "";
                    if (textArea.getAttribute("keyup") != null) textArea.onkeyup = "";
                }
                _rsObj.txtAlign();
                nodes = xmlToTextArea(textArea);
                _rsObj.execDev().visRestricted(status);
            }
            _rsObj.setTabIdx(status).cssHelp().widthCol().renderDev(nodes, arguments[2]);
        }
    } catch (oErr) {
        outPrint(oErr, "renderTextArea()", TextAreaRsis);
    }
}

function clearTextArea(textArea) {
    try {
        if (textArea) {
            textArea.value = "";
        }
    } catch (oErr) {
        outPrint(oErr, "clearTextArea()", TextAreaRsis);
    }
}

function blurTextAreaToXML(textArea, evt) {
    try {
        evt = !evt ? window.event : evt;
        if (evt && !_NO_RENDER_INPUT) {
            $R(textArea).upper();
            formatField(textArea, $R(textArea).getMask());
            textAreaToXML(textArea);
            return true;
        }
        return true;
    } catch (oErr) {
        outPrint(oErr, "blurTextAreaToXML()", TextAreaRsis);
    }
    return false;
}

function textAreaToXML(textArea) {
    try {
        if (textArea) {
            var UIContext = Rsis.UIContext.get(textArea);
            var minlength = getAtt(textArea, "minlength");
            if (minlength != null && minlength !== "") {
                if (!validadeTextAreaLength(textArea, parseInt(minlength), 10)) {
                    return false;
                }
            }
            var mask = $R(textArea).getMask(), UIForm = UIContext.getUIForm(textArea), domainXML = getDomainXML(textArea, UIForm);
            if (domainXML) {
                var pathNode = $R(textArea).getPathNode();
                if (pathNode == null || pathNode === "") {
                    pathNode = UIForm.getXPath();
                }
                if (pathNode != null && pathNode !== "") {
                    var attributeNode = $R(textArea).getAttNode(), nodes = getNodes(domainXML, ROOT_NODE + pathNode), mask = $R(textArea).getMask();
                    var valueAtt = $R(textArea).toXML(textArea.value);
                    if (typeof attributeNode !== "undefined" && attributeNode !== "") {
                        if (nodes && nodes.length > 0) {
                            var valueAttNode = nodes[0].getAttribute(attributeNode);
                            if (valueAttNode !== valueAtt && (valueAttNode != null || valueAttNode == null && valueAtt !== "")) {
                                nodes[0].setAttribute("changedNode", "yes");
                                Crud.savedNode(UIForm);
                            }
                        }
                        setAttributeNode(nodes, attributeNode, valueAtt);
                    } else {
                        setTextNode(nodes[0], valueAtt);
                    }
                    setDomainXML(textArea, UIForm, domainXML, getAttMandatory(textArea, "node"));
                    UIContext.setUIForms(UIForm.getForm().id, UIForm);
                }
            }
        }
    } catch (oErr) {
        if (oErr instanceof MiddlewareViewException) alert(oErr.message); else outPrint(oErr, "textAreaToXML()", TextAreaRsis);
    }
    return true;
}

function xmlToTextArea(textArea) {
    try {
        var nodes = null;
        if (textArea) {
            var UIContext = Rsis.UIContext.get(textArea);
            var UIForm = UIContext.getUIForm(textArea), domainXML = getDomainXML(textArea, UIForm);
            if (domainXML != null) {
                var pathNode = $R(textArea).getPathNode();
                if (pathNode == null || pathNode === "") {
                    pathNode = UIForm.getXPath();
                }
                if (pathNode != null && pathNode !== "") {
                    var attributeNode = $R(textArea).getAttNode(), mask = $R(textArea).getMask(), valueAtt = "";
                    nodes = getNodes(domainXML, pathNode);
                    if (mask != null && mask !== "") {
                        if (attributeNode != undefined && attributeNode !== "") {
                            valueAtt = $R(textArea).toField(getNodeValue(nodes, attributeNode));
                        } else {
                            valueAtt = $R(textArea).toField(getNodeText(nodes[0]));
                        }
                    } else {
                        valueAtt = attributeNode != undefined && attributeNode !== "" ? getNodeValue(nodes, attributeNode) : getNodeText(nodes[0]);
                    }
                    textArea.value = valueAtt;
                    UtilRsis.setHint(textArea);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "xmlToTextArea()", TextAreaRsis);
    }
    return nodes;
}

function validadeTextAreaLength(textArea, num) {
    try {
        return validadeInputLength(textArea, num);
    } catch (oErr) {
        outPrint(oErr, "validadeTextAreaLength()", TextAreaRsis);
    }
    return true;
}

function configTextArea(textArea, configXML) {
    try {
        if (textArea && configXML != null) {
            var textAreaId = getAttMandatory(textArea, "id");
            if (textAreaId != null && textAreaId != "") {
                var _id_ = textAreaId.split(":")[1];
                var configNodes = getNodes(configXML, ROOT_NODE + "/configComponents/textAreas/textArea[@id='" + _id_ + "']");
                if (configNodes && configNodes.length > 0) {
                    textArea.node = configNodes[0].getAttribute("node");
                    textArea.setAttribute("node", configNodes[0].getAttribute("node"));
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "configTextArea()", TextAreaRsis);
    }
}

function renderHelpTextArea(object, UIForm, enableHelp) {
    try {
        if (object) {
            renderHelp(object, UIForm, enableHelp);
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpTextArea()", TextAreaRsis);
    }
}

function renderHelpKeysTextArea(object, UIForm, enableHelp) {
    try {
        if (object) {
            renderHelpKeys(object, UIForm, enableHelp);
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpKeysTextArea()", TextAreaRsis);
    }
}

function ButtonRsis() {}

ButtonRsis._FILE = "033buttonRsis.js";

ButtonRsis.version = JRetail.rsis.VersionJS;

ButtonRsis.vClass = [ "btnReq", "btn", "btnRdy" ];

function renderButton(button, status) {
    try {
        if (button) {
            var _rsObj = $R(button);
            var nodes = null, $win = UtilRsis.getParentWindow(button), sEvent = getStringEvent(button);
            if (_rsObj.isRenderAll()) {
                var editable = _rsObj.isEditable(status);
                _rsObj.rdOnly(!editable);
                button.disabled = !editable;
                renderCSSButton(button, "btnDsb");
            }
            _rsObj.visRestricted(status).cssHelp().widthCol().renderDev(nodes, arguments[2]);
        }
    } catch (oErr) {
        outPrint(oErr, "renderButton()", ButtonRsis);
    }
}

function renderHelpButton(object, UIForm, enableHelp) {
    renderHelp(object, UIForm, enableHelp);
}

function renderHelpKeysButton(object, UIForm, enableHelp) {
    renderHelpKeys(object, UIForm, enableHelp);
}

(function($R) {
    CheckBoxRsis = {
        _FILE: "034checkboxRsis.js",
        version: JRetail.rsis.VersionJS,
        render: function() {
            return renderCheckBox.apply(this, arguments);
        },
        configCheck: function(chk, editavel, obrigatorio) {
            try {
                if (chk) {
                    chk.disabled = !editavel;
                    chk.readOnly = !editavel;
                    chk.cursor = editavel ? "pointer" : "default";
                    var className = "chkBxRdy";
                    if (editavel) {
                        className = "chkBx";
                        if (obrigatorio) {
                            className = "chkBxReq";
                        }
                        if (!getAtt(chk, "onclick")) {
                            var sEvent = getStringEvent(chk), $win = UtilRsis.getParentWindow(chk);
                            $R.events.add(chk, "onclick", "return " + $win + "CheckBoxRsis.check(this, " + sEvent + ");");
                        }
                    }
                    chk.className = className;
                }
            } catch (oErr) {
                outPrint(oErr, "configCheck", this);
            }
        },
        check: function(obj, evt) {
            if (!obj) return;
            var UIForm = $R.getUIForm(obj);
            if (UIForm) {
                var checkbox = $(obj.id.split(".")[0]), $checkbox = $R(checkbox);
                var pathNode = $checkbox.getPathNode();
                if (isEmpty(pathNode)) {
                    pathNode = UIForm.getXPath();
                }
                if (isNoEmpty(pathNode)) {
                    var attributeNode = $checkbox.getAttNode(), domainXML = getDomainXML(checkbox, UIForm), nodes = getNodes(domainXML, pathNode);
                    if (nodes && nodes.length > 0) {
                        var on = this.getOn(getAtt(checkbox, "on"), ";", obj, checkbox), valueAtt = obj.checked ? on : getAtt(checkbox, "off");
                        if (isNoEmpty(valueAtt)) {
                            if (isNoEmpty(attributeNode)) {
                                nodes[0].setAttribute("changedNode", "yes");
                                setAttributeNode(nodes, attributeNode, valueAtt);
                            } else {
                                setTextNode(nodes[0], valueAtt);
                            }
                        }
                        setDomainXML(checkbox, UIForm, domainXML, getAttMandatory(checkbox, "node"));
                        var UIContext = Rsis.UIContext.get(checkbox);
                        UIContext.setUIForms(UIForm);
                    }
                }
            }
        },
        getOn: function(stringArgs, splitParam, inputCheckbox, object) {
            try {
                if (typeof stringArgs === "string" && stringArgs !== "") {
                    var list = stringArgs.split(splitParam);
                    if (list && list.length > 0) {
                        for (var j = 0; j < list.length; j++) {
                            if (list[j] == null) continue;
                            var array = list[j].match(/[1|0|on|off|true|false]$/);
                            if (array != null && array.length > 0) {
                                return list[j];
                            } else {
                                var exte = null, parent;
                                try {
                                    var ns_string = list[j];
                                    if (ns_string.search(/\$P./) > -1) {
                                        ns_string = ns_string.replace("$P.", "");
                                    }
                                    exte = $R.str2Fn($P, ns_string);
                                    parent = Rsis.namespace($P, ns_string) || this;
                                } catch (e) {
                                    exte = $R.str2Fn($W, ns_string);
                                    parent = $R.namespace(ns_string) || this;
                                }
                                if (exte) {
                                    return exte.apply(parent, [ inputCheckbox, object, stringArgs ]);
                                }
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "getOn", this);
            }
            return null;
        },
        searchStringArguments: function(stringArgs, valor, splitParam, inputCheckbox, object) {
            try {
                if (typeof stringArgs === "string" && stringArgs !== "") {
                    var list = stringArgs.split(splitParam);
                    if (list && list.length > 0) {
                        for (var j = 0; j < list.length; j++) {
                            if (list[j] == null) continue;
                            var array = list[j].match(/[1|0|on|off|true|false]$/);
                            if (array != null && array.length > 0) {
                                if (list[j] === valor) return true;
                            } else {
                                var exte = null, parent;
                                try {
                                    var ns_string = list[j];
                                    if (ns_string.search(/\$P./) > -1) {
                                        ns_string = ns_string.replace("$P.", "");
                                    }
                                    exte = $R.str2Fn($P, ns_string);
                                    parent = Rsis.namespace($P, ns_string) || this;
                                } catch (e) {
                                    exte = $R.str2Fn($W, ns_string);
                                    parent = $R.namespace(ns_string) || this;
                                }
                                if (exte) {
                                    return exte.apply(parent, [ inputCheckbox, object, stringArgs ]);
                                }
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "searchStringArguments", this);
            }
            return false;
        }
    };
    CheckboxRsis = CheckBoxRsis;
})(Rsis);

function renderCheckBox(obj, status) {
    try {
        if (obj) {
            var objId = obj.id, isEditable = $R(obj).isEditable(status), isMandatory = $R(obj).isMandatory(status);
            if (objId !== "") {
                var chk = $(objId + ".inputCheckBox");
                if (chk) {
                    setDataUICpt(obj, chk);
                    CheckBoxRsis.configCheck(chk, isEditable, isMandatory);
                }
                if (getAtt(obj, "node")) {
                    xmlToCheckBox(obj);
                }
                $R(obj).cssHelp().visRestricted(status);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderCheckBox", CheckBoxRsis);
    }
}

function xmlToCheckBox(checkbox) {
    if (checkbox) {
        var UIContext = Rsis.UIContext.get(checkbox), UIForm = UIContext.getUIForm(checkbox), $checkbox = $R(checkbox), domainXML = getDomainXML(checkbox, UIForm);
        var objChk = $(checkbox.id + ".inputCheckBox");
        if (UIForm && objChk) {
            var pathNode = $checkbox.getPathNode();
            if (pathNode == null || pathNode === "") {
                pathNode = UIForm.getXPath();
            }
            if (isNoEmpty(pathNode)) {
                var valueAtt = "", attributeNode = $checkbox.getAttNode(), nodes = getNodes(domainXML, pathNode);
                if (nodes && nodes.length > 0) {
                    if (isNoEmpty(attributeNode)) {
                        valueAtt = $checkbox.toField(getNodeValue(nodes, attributeNode));
                    } else {
                        valueAtt = $checkbox.toField(getNodeText(nodes[0]));
                    }
                }
                objChk.checked = CheckBoxRsis.searchStringArguments(getAtt(checkbox, "on"), valueAtt, ";", objChk, checkbox);
            }
        }
        $R(checkbox).visible(getAttMandatory(checkbox, "isVisible") ? true : false);
    }
}

function clearCheckBox(checkbox) {
    if (checkbox) {
        var checkboxId = getAttMandatory(checkbox, "id");
        if (checkboxId !== "") {
            var objectCheck = $(checkboxId + ".objectCheck");
            if (objectCheck) {
                objectCheck.checked = false;
            }
        }
    }
}

function renderHelpCheckBox(object, UIForm, enableHelp) {
    if (object) {
        var dChk = $(object.id + ".dChk"), objectCheck = $(object.id + ".inputCheckBox");
        if (!objectCheck) {
            objectCheck = $(object.id + ".objectCheck");
        }
        if (objectCheck) {
            if (enableHelp) {
                var seqHelpApp = objectCheck.getAttribute("help"), helpKey = objectCheck.getAttribute("helpKey");
                var node = UIRsis.getElementNodesHelp(UIForm, seqHelpApp, helpKey);
                if (node != null) {
                    var titleHelp = node.getAttribute("descBreve") != null ? node.getAttribute("descBreve") : "", descriptionHelp = node.getAttribute("descLonga") != null ? node.getAttribute("descLonga") : "";
                    if (descriptionHelp !== "") {
                        objectCheck.help = "true";
                        objectCheck.setAttribute("help", "true");
                        objectCheck.setAttribute("hintHelp", "&lt;h1&gt;" + titleHelp + "&lt;/h1&gt;&lt;p&gt;" + descriptionHelp + "&lt;/p&gt;");
                        dChk.className = setJretailHelpBorder(dChk.className);
                        Rsis.addClass(dChk, "jretail-help-border");
                    } else {
                        objectCheck.help = "false";
                        objectCheck.setAttribute("help", "false");
                        dChk.className = objectCheck.className.replaceAll(" undefined", "");
                        dChk.className = objectCheck.className.replaceAll(" jretail-help-border", "");
                        Rsis.removeClass(dChk, "jretail-help-border");
                    }
                }
                UtilRsis.setHelp(objectCheck);
            } else {
                objectCheck.help = "false";
                objectCheck.setAttribute("help", "false");
                dChk.className = dChk.className.replaceAll(" undefined", "");
                dChk.className = dChk.className.replaceAll(" jretail-help-border", "");
                Rsis.removeClass(dChk, "jretail-help-border");
                setDOMEvent(objectCheck, "onmouseover", "");
                setDOMEvent(objectCheck, "onmouseout", "");
            }
        }
    }
}

function renderHelpKeysCheckBox(object, UIForm, enableHelp) {
    try {
        if (object) {
            var dChk = $(object.id + ".dChk"), objectCheck = $(object.id + ".inputCheckBox");
            if (!objectCheck) {
                objectCheck = $(object.id + ".objectCheck");
            }
            if (objectCheck != null) {
                if (enableHelp) {
                    var stringArgs = object.id.split("__");
                    if (stringArgs && stringArgs.length > 1) {
                        body = getIframeDocument($(stringArgs[0])).getElementsByTagName("body")[0];
                    } else {
                        body = document.getElementsByTagName("body")[0];
                    }
                    var ctrpanel = $(object.id.split("#")[0] + ".ctrpanel"), seqHelpApp = null;
                    if (ctrpanel && !(stringArgs && stringArgs.length > 1)) {
                        seqHelpApp = getAtt(ctrpanel, "seqHelpApp");
                    } else {
                        seqHelpApp = getAtt(body, "seqHelpApp");
                    }
                    var helpKey = objectCheck.getAttribute("helpKey");
                    if (helpKey != null) {
                        objectCheck.helpKeys = "true";
                        objectCheck.setAttribute("helpKeys", "true");
                        objectCheck.setAttribute("hintHelpKeys", "&lt;h1&gt; SeqHelpApp:" + seqHelpApp + "&lt;/h1&gt;&lt;p&gt; HelpKey:" + helpKey + "&lt;/p&gt;");
                        dChk.className = setJretailHelpBorder(dChk.className);
                        Rsis.addClass(dChk, "jretail-help-border");
                    }
                    UtilRsis.setHelpKeys(objectCheck);
                } else {
                    objectCheck.helpKeys = "false";
                    objectCheck.setAttribute("helpKeys", "false");
                    dChk.className = dChk.className.replaceAll(" undefined", "");
                    dChk.className = dChk.className.replaceAll(" jretail-help-border", "");
                    Rsis.removeClass(dChk, "jretail-help-border");
                    setDOMEvent(objectCheck, "onmouseover", "");
                    setDOMEvent(objectCheck, "onmouseout", "");
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpKeysCheckBox", CheckBoxRsis);
    }
}

(function() {
    RadioButtonRsis = {
        _FILE: "035radiobuttonRsis.js",
        version: JRetail.rsis.VersionJS,
        render: function() {
            return renderRadioButton.apply(this, arguments);
        },
        create: function(radio) {
            try {
                if (radio) {
                    var UIContext = Rsis.UIContext.get(radio);
                    var $win = UtilRsis.getParentWindow(radio), radioId = getAttMandatory(radio, "id"), dtStringArgs = radioId.split(":"), UIForm = UIContext.getUIForm(radio), ul = $(radioId + ".ul");
                    if (radioId !== "" && UIForm != null && ul != null) {
                        var optionValue = getAttMandatory(radio, "optionValue"), optionValueRef = getAttMandatory(radio, "optionValueRef"), optionText = getAttMandatory(radio, "optionText"), showView = getAtt(radio, "showView"), strRadioButton = "";
                        setDataUICpt(radio, ul);
                        var listDomainXML = UIForm.getParams(getAttMandatory(radio, "params"));
                        if (listDomainXML != null) {
                            var dataUi = radio.getAttribute("data-ui"), path = getStringPath(listDomainXML, optionValue, "", ""), nodes = getNodes(listDomainXML, ROOT_NODE + path);
                            if (nodes && nodes.length > 0) {
                                ul.className = showView === "horizontal" ? "hztl" : "vrtl";
                                radio.style.height = showView === "horizontal" ? "auto" : "100%";
                                radio.style.lineHeight = showView === "horizontal" ? "auto" : "";
                                var itl = 0, pp = parseInt(nodes.length), strRdo = "";
                                for (;itl < pp; itl++) {
                                    nodes[itl].setAttribute("countRadio", itl + 1);
                                    var functionOption = "crudSelectRadioButton", optionOnclick = getAtt(radio, "optionOnclick");
                                    if (optionOnclick != null && optionOnclick !== "") {
                                        functionOption = optionOnclick;
                                    }
                                    strRdo = strRdo + "<li>";
                                    var functionRadioButton = functionOption + "(this, '" + (itl + 1) + "')";
                                    strRdo = strRdo + '<input idRadio="' + radioId + '" id="' + radioId + (itl + 1) + '" class="iptRdBt" data-ui="' + dataUi + '" type="radio" onClick="return ' + $win + functionRadioButton + '" count="' + (itl + 1) + '" value="' + (itl + 1) + '" name="' + radioId + '.objRadioBtn"/>';
                                    var textValue = createLabelRadio(listDomainXML, optionText, itl);
                                    strRdo = strRdo + '<label for="' + radioId + (itl + 1) + '" name="' + radioId + '.objLabel" data-ui="' + dataUi + '">' + textValue + "</label>";
                                    strRdo = strRdo + "</li>";
                                }
                                ul.innerHTML = strRdo;
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "RadioButtonRsis.create()", this);
            }
        },
        configRadio: function(rdBt, editavel, obrigatorio) {
            try {
                if (rdBt) {
                    rdBt.disabled = !editavel;
                    rdBt.readOnly = !editavel;
                    rdBt.cursor = editavel ? "pointer" : "default";
                    if (editavel) {
                        if (obrigatorio) {
                            rdBt.className = "rdBtReq";
                        } else {
                            rdBt.className = "rdBt";
                        }
                    } else {
                        rdBt.className = "rdBtRdy";
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "RadioButtonRsis.configRadio()", this);
            }
        }
    };
    RadiobuttonRsis = {
        _FILE: RadioButtonRsis._FILE
    };
})();

function renderRadioButton(radioButton, status) {
    try {
        if (radioButton) {
            RadioButtonRsis.create(radioButton);
            configRadioButton(radioButton, status);
            xmlToRadioButton(radioButton);
            $R(radioButton).visRestricted(status).cssHelp().renderDev(null, arguments[2], false);
        }
    } catch (oErr) {
        outPrint(oErr, "renderRadioButton()", RadioButtonRsis);
    }
}

function createLabelRadio(listDomainXML, optionText, i) {
    try {
        var textValue = "", listPathNodes = optionText.split(",");
        if (listPathNodes && listPathNodes.length > 0) {
            var mxListPath = listPathNodes.length, k = 0;
            for (;k < mxListPath; k++) {
                var str = Trim(listPathNodes[k]);
                if (str !== "") {
                    if (str.substring(0, 1) === "'") {
                        textValue = textValue + str.replace(/'/g, "");
                    } else {
                        var stArgs = str.split("@");
                        var stringPath = stArgs[0];
                        var stringAttribute = stArgs[1];
                        if (stringPath && stringPath !== "" && (stringAttribute && stringAttribute !== "")) {
                            var nodes = getNodes(listDomainXML, ROOT_NODE + stringPath), attributeNode = stringAttribute == undefined ? "" : stringAttribute;
                            if (attributeNode != undefined && attributeNode !== "") {
                                textValue = textValue + getNodeValueId(nodes, attributeNode, i);
                            } else {
                                textValue = textValue + getNodeText(nodes[0]);
                            }
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "addRadioButton()", RadioButtonRsis);
    }
    return textValue;
}

function xmlToRadioButton(radio) {
    try {
        if (radio) {
            var UIContext = Rsis.UIContext.get(radio);
            var radioId = getAttMandatory(radio, "id"), stringArgsForm = radioId.split(":"), UIForm = UIContext.getUIForm(stringArgsForm[0]), arrayRadioButton = $$(radioId + ".objRadioBtn");
            if (arrayRadioButton && arrayRadioButton.length > 0) {
                var domainXML = getDomainXML(radio, UIForm), optionValue = getAttMandatory(radio, "optionValue"), optionValueRef = getAttMandatory(radio, "optionValueRef");
                var listXML = UIForm.getParams(getAtt(radio, "params"));
                if (listXML != null) {
                    var path = getStringPath(domainXML, optionValue, optionValueRef, ""), nodesRadio = getNodes(listXML, ROOT_NODE + path);
                    if (nodesRadio && nodesRadio.length > 0) {
                        var countRadio = nodesRadio[0].getAttribute("countRadio"), path = getStringPath(listXML, optionValue, "", ""), arrayRadioButton = $$(radioId + ".objRadioBtn");
                        if (arrayRadioButton && arrayRadioButton.length > 0) {
                            var mxl = arrayRadioButton.length, it2 = 0;
                            for (;it2 < mxl; it2++) {
                                var radioButtom = arrayRadioButton[it2];
                                if (getAttMandatory(radioButtom, "count") === countRadio) radioButtom.checked = true; else radioButtom.checked = false;
                            }
                        }
                    }
                }
                UIContext.setUIForms(stringArgsForm[0], UIForm);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "xmlToRadioButton()", RadioButtonRsis);
    }
}

function clearRadioButton(radio) {
    try {
        if (radio) {
            var UIContext = Rsis.UIContext.get(radio);
            var radioId = getAttMandatory(radio, "id"), stringArgsForm = radioId.split(":"), UIForm = UIContext.getUIForm(stringArgsForm[0]), arrayRadioButton = $$(radioId + ".objRadioBtn");
            if (arrayRadioButton && arrayRadioButton.length > 0) {
                var domainXML = getDomainXML(radio, UIForm);
                var optionValue = getAttMandatory(radio, "optionValue"), optionValueRef = getAttMandatory(radio, "optionValueRef"), parserAttributes = getAtt(radio, "parserAttributes"), parserNodes = getAtt(radio, "parserNodes"), changeNodeName = getAtt(radio, "changeNodeName");
                var attributeNode = $R(radio).getAttNode(optionValueRef), nodeDomain = getNodes(UIForm.domainXML, $R(radio).getPathNode(optionValueRef));
                if (nodeDomain && nodeDomain.length > 0) {
                    var valueAttNode = nodeDomain[0].getAttribute(attributeNode);
                    if (valueAttNode != null && valueAttNode !== "") {
                        Crud.savedNode(UIForm);
                    }
                }
                var path = getStringPath(domainXML, optionValueRef, optionValueRef, "");
                var listDomainXML = cloneObjXML(UIForm.getParams(getAttMandatory(radio, "params")));
                if (listDomainXML != null) {
                    var mxl = arrayRadioButton.length, k = 0;
                    for (;k < mxl; k++) {
                        var radioButtom = arrayRadioButton[k], path = getStringPath(domainXML, optionValueRef, optionValueRef, ""), clear = false;
                        if (parserAttributes != null && parserAttributes !== "") {
                            clearAttributesXML(parserAttributes, domainXML);
                            clear = true;
                        }
                        if (parserNodes != null && parserNodes !== "") {
                            var childNode = getNodes(domainXML, ROOT_NODE + path);
                            if (childNode && childNode.length > 0) {
                                var stringPathPai = getStringPath(domainXML, optionValueRef, "", "");
                                var args = stringPathPai.split("/");
                                var fatherNode = XML.getSingleNode(domainXML, ROOT_NODE + "/" + args[1]);
                                if (fatherNode) {
                                    fatherNode.removeChild(childNode.item(0));
                                    clear = true;
                                }
                            }
                        }
                        if (clear) {
                            radio.checked = false;
                            setDomainXML(radio, UIForm, domainXML, optionValueRef);
                        }
                    }
                    UIContext.setUIForms(stringArgsForm[0], UIForm);
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "clearRadioButton()", RadioButtonRsis);
    }
    return false;
}

function crudSelectRadioButton(objeto, countOption) {
    try {
        if (objeto) {
            var UIContext = Rsis.UIContext.get(objeto);
            var idRadio = getAttMandatory(objeto, "idRadio");
            if (idRadio && idRadio !== "") {
                var radio = $(idRadio + countOption), stringArgsForm = idRadio.split(":"), form = $(stringArgsForm[0]), stringNodeDomain = getAttMandatory(form, "node"), UIForm = UIContext.getUIForm(stringArgsForm[0]), radiogroup = $(idRadio);
                if (UIForm && radiogroup) {
                    var listXML = cloneObjXML(UIForm.getParams(getAttMandatory(radiogroup, "params")));
                    if (listXML) {
                        var optionValue = getAttMandatory(radiogroup, "optionValue"), optionValueRef = getAttMandatory(radiogroup, "optionValueRef"), optionText = getAttMandatory(radiogroup, "optionText"), path = getStringPath(listXML, optionValue, "", ""), nodeOption = getNodes(listXML, path);
                        if (nodeOption && nodeOption.length > 0) {
                            var pathFatherNode = createPathFatherNode(path);
                            var fatherNode = XML.getSingleNode(listXML, pathFatherNode);
                            for (var i = 0; i < nodeOption.length; i++) {
                                if (toInt(nodeOption[i].getAttribute("countRadio")) !== toInt(countOption)) {
                                    fatherNode.removeChild(nodeOption[i]);
                                }
                            }
                            if (listXML != null) {
                                var childNode = getNodes(listXML, path + "[@countRadio='" + countOption + "']");
                                if (childNode && childNode.length > 0) {
                                    var domainXML = getDomainXML(radio, UIForm);
                                    if (getAtt(radiogroup, "changeNodeName") != null && getAtt(radiogroup, "changeNodeName") !== "") {
                                        listXML = changeNodeName(radiogroup, listXML);
                                    }
                                    var parserNodes = getAtt(radiogroup, "parserNodes");
                                    if (parserNodes != null && parserNodes !== "") {
                                        var pathNodeDomain = getStringPath(domainXML, optionValueRef, "", ""), argsOptionValueRef = pathNodeDomain.split("/"), fatherNodeDomain = XML.getSingleNode(domainXML, ROOT_NODE + "/" + argsOptionValueRef[1]);
                                        nodeChildDomain = getNodes(domainXML, ROOT_NODE + pathNodeDomain);
                                        if (nodeChildDomain && nodeChildDomain.length > 0) {
                                            fatherNodeDomain.removeChild(nodeChildDomain.item(0));
                                        }
                                        parserNodesXML(parserNodes, listXML, domainXML);
                                    }
                                    var parserAttributes = getAtt(radiogroup, "parserAttributes");
                                    if (parserAttributes != null && parserAttributes !== "") {
                                        parserAttributesXML(parserAttributes, listXML, domainXML);
                                    }
                                    setDomainXML(radiogroup, UIForm, domainXML, optionValueRef);
                                    UIContext.setUIForms(stringArgsForm[0], UIForm);
                                    return true;
                                }
                            }
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "crudSelectRadioButton()", RadioButtonRsis._FILE);
    }
    return false;
}

function configRadioButton(radio, status) {
    try {
        if (radio) {
            var UIContext = Rsis.UIContext.get(radio);
            var radioId = getAttMandatory(radio, "id"), dtStringArgs = radioId.split(":"), UIForm = UIContext.getUIForm(dtStringArgs[0]), ul = $(radioId + ".ul");
            if (radioId !== "" && UIForm != null && ul != null) {
                var isEditable = $R(radio).isEditable(status), isMandatory = $R(radio).isMandatory(status);
                var arrayRadioButton = $$(radioId + ".objRadioBtn"), arrayLabel = $$(radioId + ".objLabel");
                if (arrayRadioButton && arrayRadioButton.length > 0) {
                    var maxLen = arrayRadioButton.length, k = 0;
                    for (;k < maxLen; k++) {
                        RadioButtonRsis.configRadio(arrayRadioButton[k], isEditable, isMandatory);
                        RadioButtonRsis.configRadio(arrayLabel[k], isEditable, isMandatory);
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "configRadioButton()", RadioButtonRsis);
    }
}

function checkedElementRadioGroup(formName, radioGroupName, lengthValue) {
    try {
        var radioGroup = $object(formName, radioGroupName);
        if (radioGroup) {
            var arrayRadioButton = $$(getAttMandatory(radioGroup, "id") + ".objRadioBtn");
            if (arrayRadioButton && arrayRadioButton.length > 0) {
                arrayRadioButton[lengthValue].checked = true;
            }
        }
    } catch (oErr) {
        outPrint(oErr, "checkedElementRadioGroup()", RadioButtonRsis);
    }
}

function renderHelpRadioButton(object, UIForm, enableHelp) {
    try {
        if (object) {
            if (enableHelp) {
                var seqHelpApp = object.getAttribute("help");
                var helpKey = object.getAttribute("helpKey");
                var node = UIRsis.getElementNodesHelp(UIForm, seqHelpApp, helpKey);
                if (node != null) {
                    var titleHelp = node.getAttribute("descBreve") != null ? node.getAttribute("descBreve") : "";
                    var descriptionHelp = node.getAttribute("descLonga") != null ? node.getAttribute("descLonga") : "";
                    if (descriptionHelp != "") {
                        object.help = "true";
                        object.setAttribute("help", "true");
                        object.setAttribute("hintHelp", "&lt;h1&gt;" + titleHelp + "&lt;/h1&gt;&lt;p&gt;" + descriptionHelp + "&lt;/p&gt;");
                        object.className = setJretailHelpBorder(object.className);
                    } else {
                        object.help = "false";
                        object.setAttribute("help", "false");
                        object.className = object.className.replaceAll(" jretail-help-border", "");
                    }
                }
                UtilRsis.setHelp(object);
            } else {
                object.help = "false";
                object.setAttribute("help", "false");
                object.className = object.className.replaceAll(" jretail-help-border", "");
                setDOMEvent(object, "onmouseover", "");
                setDOMEvent(object, "onmouseout", "");
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpRadioButton()", RadioButtonRsis);
    }
}

function renderHelpKeysRadioButton(object, UIForm, enableHelp) {
    try {
        if (object) {
            if (enableHelp) {
                var stringArgs = object.id.split("__"), seqHelpApp = "";
                if (stringArgs && stringArgs.length > 1) {
                    body = getIframeDocument($(stringArgs[0])).getElementsByTagName("body")[0];
                } else {
                    body = document.getElementsByTagName("body")[0];
                }
                var ctrpanel = $(object.id.split("#")[0] + ".ctrpanel");
                if (ctrpanel && !(stringArgs && stringArgs.length > 1)) {
                    seqHelpApp = getAtt(ctrpanel, "seqHelpApp");
                } else {
                    seqHelpApp = getAtt(body, "seqHelpApp");
                }
                var helpKey = object.getAttribute("helpKey");
                if (helpKey != null) {
                    object.helpKeys = "true";
                    object.setAttribute("helpKeys", "true");
                    object.setAttribute("hintHelpKeys", "&lt;h1&gt; SeqHelpApp:" + seqHelpApp + "&lt;/h1&gt;&lt;p&gt; HelpKey:" + helpKey + "&lt;/p&gt;");
                    object.className = setJretailHelpBorder(object.className);
                }
                UtilRsis.setHelpKeys(object);
            } else {
                object.helpKeys = "false";
                object.setAttribute("helpKeys", "false");
                object.className = object.className.replaceAll(" jretail-help-border", "");
                setDOMEvent(object, "onmouseover", "");
                setDOMEvent(object, "onmouseout", "");
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpKeysRadioButton()", RadioButtonRsis);
    }
}

(function($R) {
    ComboRsis = {
        _FILE: "036comboRsis.js",
        version: JRetail.rsis.VersionJS,
        vClass: [ "iCboReq", "iCbo", "iCboRdy" ],
        render: function() {
            return renderComboBox.apply(this, arguments);
        },
        onClickLink: function(selector) {
            try {
                if (!selector) return;
                var obj = $(selector.id.split(".")[0]), valor = selector.getAttribute("value"), descricao = selector.getAttribute("searchText");
                if (obj) {
                    crudSelectOptions(obj, valor, descricao);
                }
            } catch (oErr) {
                outPrint(oErr, "onClickLink", this);
            }
        },
        _COLLECTION_: null,
        getCollection: function(obj) {
            return this._COLLECTION_ !== null ? this._COLLECTION_[obj.id] : null;
        },
        setCollection: function(obj, list) {
            if (this._COLLECTION_ == null) {
                this._COLLECTION_ = [];
            }
            this._COLLECTION_[obj.id] = list;
        },
        renderInput: function(obj, state, isEditable, isMandatory, $win, sEvent) {
            try {
                var pattern = $R(obj).getMask(), events = Rsis.events;
                if (isEditable) {
                    obj.className = isEditable ? this.vClass[1] : this.vClass[2];
                    obj.style.cursor = !isEditable ? "default" : "pointer";
                    if ($R.isMobileDevice) {
                        obj.readyOnly = true;
                        obj.disable = true;
                    } else {
                        obj.readyOnly = !isEditable;
                        obj.disable = false;
                    }
                    $R(obj).setMandatory(status, ComboRsis.vClass).visRestricted(status);
                    var sfn = "return " + $win + "ComboBox.";
                    if ($R.isMobileDevice) {
                        sfn += "clickEmulateWindow";
                    } else {
                        sfn += "optionshow";
                    }
                    events.add("onclick", sfn + "(this," + sEvent + ");");
                    if (obj.getAttribute("on-focus") !== null) {
                        events.add(obj, "onfocus", $win + obj.getAttribute("on-focus"));
                    }
                    if (obj.getAttribute("on-blur") !== null) {
                        events.add(obj, "onblur", "return " + $win + obj.getAttribute("on-blur"));
                    }
                    UtilRsis.setHint(obj);
                    var isMount = getAtt(obj, "isMount");
                    if (isMount == null) {
                        obj.setAttribute("isMount", "false");
                    }
                } else {
                    events.add("onclick", "");
                }
                $R(obj).setTabIdx(state).visRestricted(state);
            } catch (oErr) {
                outPrint(oErr, ".renderInput", this);
            }
        },
        renderButtons: function(obj, isEditable, isMandatory, $win, sEvent) {
            try {
                if (obj) {
                    var events = Rsis.events, ac = "ComboBox.", cboDsd = "cboDsd", comboId = obj.id, nObjWdtIpt = $(comboId + ".wdtIpt"), nObjWdtBtns = $(comboId + ".wdtBtns"), wdtBtns = 20;
                    var sltBtn = $(comboId + ".sltBtn");
                    if (sltBtn) {
                        $R(sltBtn).rdOnly(!isEditable).disable(!isEditable, cboDsd);
                        var sfn = "return " + $win + ac;
                        if (Rsis.isMobileDevice) {
                            sfn += "clickEmulateWindow";
                        } else {
                            sfn += "optionshow";
                        }
                        events.add(sltBtn, "onclick", isEditable ? sfn + "(this," + sEvent + ");" : "");
                        setDataUICpt(obj, sltBtn);
                    }
                    var clrBtn = $(comboId + ".clrBtn");
                    if (clrBtn) {
                        $R(sltBtn).rdOnly(!isEditable).disable(!isEditable, cboDsd);
                        UtilRsis.visibleObject(clrBtn, isEditable);
                        if (isEditable) wdtBtns = 40;
                        events.add(clrBtn, "onclick", isEditable ? "return " + $win + "clearComboBox(this);" : "");
                        setDataUICpt(obj, clrBtn);
                    }
                    if (nObjWdtIpt) {
                        $R.$(obj.parentNode.parentNode).css({
                            width: "98%"
                        });
                        $R.$(obj).css({
                            width: ""
                        });
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".renderButtons", this);
            }
        },
        createList: function(obj, objXML, pathString) {
            if (!obj) return null;
            var UIForm = $R.getUIForm(obj);
            objXML = objXML ? objXML : UIForm.getParams(obj.getAttribute("params"));
            var getM = getAttMandatory;
            var optionValue = getM(obj, "optionValue"), optionValueRef = getM(obj, "optionValueRef"), optionText = getM(obj, "optionText"), params = getM(obj, "params");
            pathString = pathString ? pathString : getStringPath(objXML, optionValue, "", "");
            pathString = pathString.replaceAll("###", "@");
            var elements = getNodes(objXML, pathString), COLLECTIONS = this.getCollection(obj);
            if (elements && elements.length > 0) {
                if (!COLLECTIONS) {
                    var listPathNodes = optionText.split(","), _rsCombo = $R(obj), maxLpt = listPathNodes.length, i = 0, maxEls = elements.length, mask = _rsCombo.getMask(), contentText = "", attribute = _rsCombo.getAttNode(optionValue);
                    if (maxLpt > 0) {
                        COLLECTIONS = [];
                        for (;i < maxEls; i++) {
                            elements[i].setAttribute("countOption", i + 1);
                            elements[i].setAttribute("selectedIndex", i);
                            var textValue = "";
                            for (var k = 0; k < maxLpt; k++) {
                                textValue = ComboRsis.getDescription(obj, objXML, i, listPathNodes[k], pathString, mask);
                            }
                            var vlr = getNodeValueId(elements, attribute, i);
                            vlr = vlr ? vlr : "";
                            var codigo = vlr.replace(/\'/gi, "");
                            COLLECTIONS[i] = [ codigo, textValue ];
                        }
                    }
                } else {
                    for (var z = 0; z < collection.length; z++) {
                        collection[z].setAttribute("selectedIndex", "");
                    }
                }
            }
            return COLLECTIONS;
        }
    };
    function getCombo(object) {
        var obj = null;
        if (object) {
            var args = object.id.split(".");
            obj = $(args[0]);
        }
        return obj;
    }
    ComboBox = {
        clickEmulateWindow: function(object, evt) {
            var obj = getCombo(object);
            this.startDialog(obj, ComboRsis);
            this._filter(obj, evt, this, ComboRsis);
        },
        emulateWindow: function(object, evt) {
            var obj = getCombo(object);
            this.startDialog(obj, ComboRsis);
        },
        optionshow: function(object, evt) {
            var obj = getCombo(object);
            this._filterMenuItems(obj, evt, this, ComboRsis);
        },
        templateHtml: function(obj) {
            var $win = UtilRsis.getParentWindow(obj);
            var html = '<div id="pLbx" comboElement="true" {1}>' + ' <div class="lBx">';
            html += '  \t<div class="cteLbx" comboElement="true" {1}>' + '\t\t<ul id="{0}.selector" comboElement="true" {1}></ul>' + "  \t</div>" + " </div>" + "</div>";
            return Message.parser(html, obj.id, $R.isMobileDevice ? "" : 'style="height:123px"');
        },
        createItem: function(obj, _menu, $win, ctValue, ctText, countSelectedIndex) {
            var span = Rsis.isMobileDevice ? '<span class="glyphicon-import"></span>' : "";
            var $element = $R.$('<li tabindex="-1" name="listBox.li" comboElement="true"><div class="li-div">' + ctText + "</div>" + span + "</li>");
            $element.keyup(function(event) {
                ComboBox.menuselect(this, event);
                event.stopImmediatePropagation();
                event.preventDefault();
            }).click(function(event) {
                ComboRsis.onClickLink(this);
                event.stopImmediatePropagation();
                event.preventDefault();
            }).attr({
                id: obj.id + ".li" + countSelectedIndex,
                value: ctValue.replace(/\'/gi, ""),
                searchText: ctText,
                selectedIndex: countSelectedIndex
            });
            $element.appendTo(_menu);
        },
        _filterMenuItems: function(obj, evt, that, acRsis) {
            try {
                if (obj) {
                    if (!acRsis) acRsis = ComboRsis;
                    if (!that) that = this || ComboBox;
                    if (!evt) evt = acRsis.eventSelected;
                    var listHolder = that.createMenu(obj);
                    evt = Rsis.events.getEvent(evt);
                    if (obj.type === "text" && obj.hasDisable) {
                        return;
                    }
                    var newSelectBox = acRsis.createList(obj);
                    if (newSelectBox !== null) {
                        var $win = UtilRsis.getParentWindow(obj), _menu = null, mxL = newSelectBox.length, maxlgth = 1;
                        if (listHolder) {
                            _menu = $R.$(".autocomplete-suggestions")[0];
                            if (!_menu) _menu = $(obj.id + ".selector");
                            Sarissa.clearChildNodes(_menu);
                        }
                        $R.each(newSelectBox, function(index, item) {
                            var txtSuggestion = item[1];
                            if (txtSuggestion.length > maxlgth) {
                                maxlgth = txtSuggestion.length;
                            }
                            that._createOptions(obj, _menu, $win, item[0], txtSuggestion, index);
                        });
                        that.show(obj, listHolder, maxlgth, mxL);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "_filterMenuItems", ComboRsis);
            }
        },
        _createOptions: function(obj, _menu, $win, value, text, index) {
            this.createItem(obj, _menu, $win, value, text, index);
        },
        setDimentions: function(obj, listHolder, maxlgth, mxL) {
            if (!obj || !listHolder) return;
            var objectId = obj.id, sel = $(objectId + ".selector"), width = $R.$(obj).width(), btnSearch = $(obj.id + ".btnSearch"), clrBtn = $(obj.id + ".clrBtn"), sltBtnAc = $(obj.id + ".sltBtnAc"), btnOk = $(obj.id + ".btnOk"), widthresults = $R.$(obj).attr("widthresults"), widthButton = 22;
            if (widthresults) {
                width = widthresults;
            } else {
                if (btnSearch && btnSearch.style.display != "none") width += widthButton;
                if (clrBtn && clrBtn.style.display != "none") width += widthButton;
                if (sltBtnAc && sltBtnAc.style.display != "none") width += 27;
                if (btnOk && btnOk.style.display != "none") width += 29;
            }
            $R.$(listHolder).width(width);
            if (sel) {
                if (Rsis.isMobileDevice) {
                    sel.style.display = "block";
                    sel.style.width = "100%";
                    sel.style.fontSize = "1.2em";
                    sel.style.padding = "1em 2em";
                } else {
                    $R.$(sel).width(width - 1);
                }
            }
            var lst = listHolder.style, _t_ = $(obj.id.split("#")[0] + ".container"), _wh = $R(obj).getListHolderPosition();
            var wg = hg = 0;
            var dialogUi = $(obj.id.split("#")[0]);
            if (dialogUi) {
                wg = dialogUi.offsetWidth;
                hg = dialogUi.offsetHeight;
            }
            if (wg == GetWidth() && hg == GetHeight()) {
                if (_wh.top !== null && _wh.left !== null) {
                    var posY = findPosY(obj) + obj.offsetHeight - _wh.top, posYListHolder = posY + listHolder.firstChild.clientHeight;
                    if (posYListHolder > _t_.clientHeight) {
                        lst.top = posY - listHolder.firstChild.clientHeight - obj.offsetHeight + "px";
                    } else lst.top = posY + "px";
                    lst.left = findPosX(obj) + 1 - _wh.left + "px";
                } else {
                    var posY = findPosY(obj) + obj.offsetHeight, posYListHolder = posY + listHolder.firstChild.clientHeight;
                    if (posYListHolder > _t_.clientHeight) {
                        lst.top = posY - listHolder.firstChild.clientHeight - obj.offsetHeight + "px";
                    } else lst.top = posY + "px";
                    lst.left = findPosX(obj) + 1 + "px";
                }
            }
            window.onresize = redirecionaLista;
        }
    };
    var _AutoComplete = $R.extend({}, AutoComplete);
    ComboBox = $R.extend(_AutoComplete, ComboBox, {
        _createTemplate: function _template(obj) {
            return '\t<div class="menu-panel drop-down" style="top:100%;height:auto;">' + '\t\t<div class="panel-body">' + '\t\t\t<div class="panel-body-contents clearfix">' + '\t\t\t\t<div class="results" style="max-height:320px">' + '\t\t\t\t\t<ul id="' + obj.id + '.search-term.selector" class="autocomplete-suggestions"></ul>' + '\t\t\t\t\t<div class="no-results"></div>' + "\t\t\t\t</div>" + "\t\t\t</div>" + "\t\t</div>" + "\t</div>";
        },
        _filter: function(obj, evt, that, acRsis) {
            try {
                if (obj) {
                    if (!acRsis) acRsis = ComboRsis;
                    if (!that) that = this || ComboBox;
                    if (!evt) evt = acRsis.eventSelected;
                    var listHolder = that.createDialog(), _isRemoteSearch = isRemoteSearch(obj), _menu = $R.$(".autocomplete-suggestions")[0];
                    if (_menu) {
                        that.closePaneHeader(_isRemoteSearch);
                        Sarissa.clearChildNodes(_menu);
                    } else {
                        listHolder = that.startDialog(obj, selfRsis);
                        _menu = $R.$(".autocomplete-suggestions")[0];
                    }
                    $R.$(listHolder).css({
                        "max-height": "320px"
                    });
                    evt = Rsis.events.getEvent(evt);
                    if (obj.type === "text" && obj.hasDisable) {
                        return;
                    }
                    var newSelectBox = acRsis.createList(obj);
                    if (newSelectBox !== null) {
                        var $win = UtilRsis.getParentWindow(obj), _menu = null;
                        if (listHolder) {
                            _menu = $R.$(".autocomplete-suggestions")[0];
                            Sarissa.clearChildNodes(_menu);
                        }
                        $R.each(newSelectBox, function(index, item) {
                            that._createOptions(obj, _menu, $win, item[0], item[1], index);
                        });
                    }
                    $R.$(".no-results").hide();
                    $R.$(listHolder).center();
                }
            } catch (oErr) {
                outPrint(oErr, "_filter", ComboRsis);
            }
        }
    });
})(Rsis);

function renderComboBox(obj, state) {
    try {
        if (obj) {
            var nodes = null, $win = UtilRsis.getParentWindow(obj), sEvent = getStringEvent(obj);
            if ($R(obj).isRenderAll()) {
                nodes = xmlToCombo(obj);
                var isEditable = $R(obj).isEditable(state), isMandatory = $R(obj).isMandatory(state);
                ComboRsis.renderInput(obj, state, isEditable, isMandatory, $win, sEvent);
                ComboRsis.renderButtons(obj, isEditable, isMandatory, $win, sEvent);
            }
            $R(obj).cssHelp().setTabIdx(state).renderDev(nodes, arguments[2]);
            obj = null;
        }
    } catch (oErr) {
        outPrint(oErr, "renderComboBox", ComboRsis);
    }
}

function xmlToCombo(combo) {
    try {
        var nodes = null;
        if (combo) {
            var _rsCombo = $R(combo);
            var UIContext = Rsis.UIContext.get(combo);
            var UIForm = UIContext.getUIForm(combo), optionValueRef = getAttMandatory(combo, "optionValueRef"), mask = _rsCombo.getMask(), params = getAtt(combo, "params"), caption = "", valueAtt = "";
            var domainXML = getDomainXML(combo, UIForm);
            nodes = getNodes(domainXML, _rsCombo.getPathNode(optionValueRef));
            var xmlList = UIForm.getParams(params);
            if (xmlList) {
                var caption = getAttMandatory(combo, "caption"), optionValue = getAttMandatory(combo, "optionValue"), optionText = getAttMandatory(combo, "optionText");
                var path = getStringPath(domainXML, optionValue, optionValueRef, "");
                path = path.replaceAll("###", "@");
                var elements = getNodes(xmlList, path);
                if (elements && elements.length > 0) {
                    var listPathNodes = optionText.split(","), maxLpt = listPathNodes.length, i = 0, maxEls = elements.length;
                    if (maxLpt > 0) {
                        for (;i < maxEls; i++) {
                            for (var k = 0; k < maxLpt; k++) {
                                valueAtt = _rsCombo.getDescription(xmlList, i, listPathNodes[k], path, mask);
                            }
                        }
                    }
                    valueAtt = valueAtt === "" && caption !== null && caption !== "" ? caption : valueAtt;
                } else {
                    valueAtt = caption !== null && caption !== "" ? caption : "";
                }
            } else {
                valueAtt = caption !== null && caption !== "" ? caption : "";
            }
            combo.value = valueAtt;
        }
    } catch (oErr) {
        outPrint(oErr, "xmlToCombo", ComboRsis);
    }
    return nodes;
}

function clearComboBox(clearButton) {
    try {
        if (clearButton) {
            var UIContext = Rsis.UIContext.get(clearButton);
            var UIForm = UIContext.getUIForm(clearButton), stringArgs = clearButton.id.split("."), combo = $(stringArgs[0]);
            if (UIForm && combo) {
                var _rsCombo = $R(combo);
                var domainXML = getDomainXML(combo, UIForm), optionValue = getAttMandatory(combo, "optionValue"), optionValueRef = getAttMandatory(combo, "optionValueRef"), path = getStringPath(domainXML, optionValueRef, optionValueRef, ""), clear = false;
                var attributeNode = _rsCombo.getAttNode(optionValueRef), nodeDomain = getNodes(UIForm.domainXML, $R(combo).getPathNode(optionValueRef));
                if (nodeDomain && nodeDomain.length > 0) {
                    var valueAttNode = nodeDomain[0].getAttribute(attributeNode);
                    if (valueAttNode !== null && valueAttNode !== "") {
                        Crud.savedNode(UIForm);
                    }
                }
                clear = _rsCombo.clearAtts(domainXML, clear);
                clear = _rsCombo.clearNodes(domainXML, clear);
                if (clear) {
                    var caption = getAttMandatory(combo, "caption");
                    combo.value = caption !== null && caption !== "" ? caption : "";
                    setDomainXML(combo, UIForm, domainXML, optionValueRef);
                }
                UtilRsis.setHint(combo);
                _rsCombo.clearExc(UIForm, clearButton);
                UIContext.setUIForms(UIForm.getForm().id, UIForm);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "clearComboBox()", ComboRsis);
    }
    return false;
}

function optionshow(obj, evt) {
    ComboBox.optionshow(obj, evt);
}

ComboRsis.getDescription = function(combo, xmlList, idx, param, path, mask) {
    var textValue = "";
    try {
        var str = Trim(param);
        if (str !== null && str !== "") {
            if (str.substring(0, 1) === "'") {
                textValue = textValue + str.replace(/'/g, "");
            } else {
                var pathChield = "", stringAttribute = "", stringPath = "", stringArgsSplit = str.split("@");
                if (stringArgsSplit && stringArgsSplit.length > 1) {
                    stringPath = stringArgsSplit[0];
                    pathChield = stringArgsSplit[1];
                    stringAttribute = stringArgsSplit[stringArgsSplit.length - 1];
                } else {
                    stringPath = stringArgsSplit[0];
                    stringAttribute = stringArgsSplit[1];
                }
                if (stringPath && stringPath !== "" && stringAttribute && stringAttribute !== "") {
                    var stringArgsAtt = pathChield.split("/"), strChieldsPath = "";
                    if (stringArgsAtt && stringArgsAtt.length > 1) {
                        strChieldsPath = getMountPath(stringArgsAtt);
                    }
                    var node = getNodes(xmlList, path + strChieldsPath);
                    attributeNode = typeof stringAttribute === "undefined" ? "" : stringAttribute;
                    var _rsCombo = $R(combo);
                    if (mask !== null && mask !== "") {
                        if (attributeNode != undefined && attributeNode !== "") {
                            textValue = _rsCombo.toField(getNodeValueId(node, attributeNode, idx));
                        } else {
                            textValue = _rsCombo.toField(getNodeText(node[idx]));
                        }
                    } else {
                        textValue = attributeNode != undefined && attributeNode !== "" ? getNodeValueId(node, attributeNode, idx) : getNodeText(node[idx]);
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "ComboRsis.getDescription()", ComboRsis);
    }
    return textValue;
};

function crudSelectOptions(obj, valor, descricao) {
    try {
        if (obj) {
            if (obj.type === "text" && obj.hasDisable) {
                return;
            }
            var UIContext = Rsis.UIContext.get(obj);
            var UIForm = UIContext.getUIForm(obj), $win = UtilRsis.getParentWindow(obj), combo = obj.tagName !== "input" ? $(obj.id.split(".")[0]) : obj;
            if (combo && UIForm) {
                var _rsCombo = $R(combo);
                var getM = getAttMandatory;
                var optionValue = getM(combo, "optionValue"), optionValueRef = getM(combo, "optionValueRef"), optionText = getM(combo, "optionText");
                var attOptionValue = _rsCombo.getAttNode(optionValue), xmlList = cloneObjXML(UIForm.getParams(getM(combo, "params"))), path = getStringPath(xmlList, optionValue, "", "");
                path = path.replaceAll("###", "@");
                var elements = getNodes(xmlList, path);
                if (elements && elements.length > 0) {
                    xmlList = XML.deleteNodes(xmlList, path + "[@" + attOptionValue + "!= '" + valor + "']");
                    var domainXML = getDomainXML(combo, UIForm);
                    if (domainXML) {
                        combo.value = descricao;
                        UtilRsis.setHint(combo);
                        xmlList = _rsCombo.changeNdName(xmlList);
                        _rsCombo.parserNds(combo, xmlList, domainXML, optionValueRef, function(combo, xmlList, domainXML, optionValueRef) {
                            XML.deleteNodes(domainXML, getStringPath(domainXML, optionValueRef, "", ""));
                        });
                        _rsCombo.parserAtts(xmlList, domainXML);
                        setDomainXML(combo, UIForm, domainXML, optionValueRef);
                        UIContext.setUIForms(UIForm.getForm().id, UIForm);
                        var attributeNode = _rsCombo.getAttNode(optionValueRef), nodeDomain = getNodes(UIForm.domainXML, _rsCombo.getPathNode(optionValueRef));
                        if (nodeDomain && nodeDomain.length > 0) {
                            var valueAttNode = nodeDomain[0].getAttribute(attributeNode);
                            if (valueAttNode !== valor && (valueAttNode !== null || valueAttNode == null && valor !== "")) {
                                Crud.savedNode(UIForm);
                            }
                        }
                        var onchange = getAttFuncDeveloper(combo, "onchange");
                        if (onchange !== null && onchange !== "") {
                            var valueKey = getNodeAttributes(xmlList, optionValue), objNode = getNodes(xmlList, path);
                            compressEvalRsisAll(onchange, combo, UIForm, valueKey, objNode);
                        }
                    }
                }
                var listHolder = $R.isMobileDevice ? $("dialog-search-term") : obj ? $R(obj).getListHolder() : null;
                if (listHolder) {
                    $R(listHolder).hide();
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "crudSelectOptions()", ComboRsis);
    }
    return false;
}

ComboRsis.clear = function(combo, clearStore) {
    try {
        if (combo) {
            var UIContext = Rsis.UIContext.get(combo), UIForm = UIContext.getUIForm(combo);
            if (UIForm) {
                if (typeof clearStore === "undefined") clearStore = true;
                if (clearStore) UIForm.setParams(getAttMandatory(combo, "params"), null, false);
                clearComboBox(combo);
                combo.setAttribute("isMount", "false");
            }
        }
    } catch (oErr) {
        outPrint(oErr, ".clear", ComboRsis);
    }
};

function clearComboEditTable(combo, status) {
    try {
        if (combo) {
            var _rsCombo = $R(combo);
            var nodes = null, $win = UtilRsis.getParentWindow(combo), sEvent = getStringEvent(combo), events = Rsis.events, comboId = getAttMandatory(combo, "id");
            var isEditable = _rsCombo.isEditable(status), isMandatory = _rsCombo.isMandatory(status);
            combo.className = isEditable ? ComboRsis.vClass[1] : ComboRsis.vClass[2];
            combo.disabled = !isEditable;
            combo.style.cursor = !isEditable ? "default" : "pointer";
            _rsCombo.setMandatory(status, ComboRsis.vClass).visRestricted(status);
            combo.value = "";
            var isMount = getAtt(combo, "isMount");
            if (isMount == null) {
                combo.isMount = "false";
                combo.setAttribute("isMount", "false");
            }
            var sltBtn = $(comboId + ".sltBtn");
            if (sltBtn) {
                $R(sltBtn).rdOnly(!isEditable).disable(!isEditable, "cboDsd");
                events.add(sltBtn, "onclick", isEditable ? "return " + $win + "optionshow(this, event);" : "");
            }
            var clrBtn = $(comboId + ".clrBtn");
            if (clrBtn) {
                $R(clrBtn).rdOnly(!isEditable).disable(!isEditable, "cboDsd");
                events.add(clrBtn, "onclick", isEditable ? "return " + $win + "clearComboBox(this);" : "");
            }
        }
    } catch (oErr) {
        outPrint(oErr, "clearComboEditTable()", ComboRsis);
    }
}

function optionHidden(combo) {
    try {
        if (combo) {
            var listHolder = $R(combo).getListHolder();
            if (listHolder) {
                $R(listHolder).hide();
            }
        }
    } catch (oErr) {
        outPrint(oErr, "optionHidden()", ComboRsis);
    }
}

function getMountPath(args) {
    var s = "";
    if (args && args.length > 1) {
        for (var i = 1; i < args.length; i++) {
            s = s + "/" + args[i];
        }
    }
    return s;
}

function renderHelpCombo(object, UIForm, enableHelp) {
    try {
        if (object) {
            if (enableHelp) {
                var seqHelpApp = object.getAttribute("help");
                var helpKey = object.getAttribute("helpKey");
                var node = UIRsis.getElementNodesHelp(UIForm, seqHelpApp, helpKey);
                if (node !== null) {
                    var titleHelp = node.getAttribute("descBreve") !== null ? node.getAttribute("descBreve") : "";
                    var descriptionHelp = node.getAttribute("descLonga") !== null ? node.getAttribute("descLonga") : "";
                    if (descriptionHelp != "") {
                        object.help = "true";
                        object.setAttribute("help", "true");
                        object.setAttribute("hintHelp", "&lt;h1&gt;" + titleHelp + "&lt;/h1&gt;&lt;p&gt;" + descriptionHelp + "&lt;/p&gt;");
                        object.className = setJretailHelpBorder(object.className);
                    } else {
                        object.help = "false";
                        object.setAttribute("help", "false");
                        object.className = object.className.replace(" jretail-help-border", "");
                    }
                }
                UtilRsis.setHelp(object);
            } else {
                object.help = "false";
                object.setAttribute("help", "false");
                object.className = object.className.replace(" jretail-help-border", "");
                setDOMEvent(object, "onmouseover", "");
                setDOMEvent(object, "onmouseout", "");
                UtilRsis.setHint(object);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpCombo()", ComboRsis);
    }
}

function renderHelpKeysCombo(object, UIForm, enableHelp) {
    try {
        if (object) {
            if (enableHelp) {
                var stringArgs = object.id.split("__"), seqHelpApp = "";
                if (stringArgs && stringArgs.length > 1) {
                    body = getIframeDocument($(stringArgs[0])).getElementsByTagName("body")[0];
                } else {
                    body = document.getElementsByTagName("body")[0];
                }
                var ctrpanel = $(object.id.split("#")[0] + ".ctrpanel");
                if (ctrpanel && !(stringArgs && stringArgs.length > 1)) {
                    seqHelpApp = getAtt(ctrpanel, "seqHelpApp");
                } else {
                    seqHelpApp = getAtt(body, "seqHelpApp");
                }
                var helpKey = object.getAttribute("helpKey");
                if (helpKey !== null) {
                    object.helpKeys = "true";
                    object.setAttribute("helpKeys", "true");
                    object.setAttribute("hintHelpKeys", "&lt;h1&gt; SeqHelpApp:" + seqHelpApp + "&lt;/h1&gt;&lt;p&gt; HelpKey:" + helpKey + "&lt;/p&gt;");
                    object.className = setJretailHelpBorder(object.className);
                }
                UtilRsis.setHelpKeys(object);
            } else {
                object.helpKeys = "false";
                object.setAttribute("helpKeys", "false");
                object.className = object.className.replace(" jretail-help-border", "");
                setDOMEvent(object, "onmouseover", "");
                setDOMEvent(object, "onmouseout", "");
                UtilRsis.setHint(object);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpCombo()", ComboRsis);
    }
}

function configComboBox(comboBox, configXML) {
    try {
        if (comboBox && configXML !== null) {
            var comboBoxId = getAttMandatory(comboBox, "id");
            if (comboBoxId !== null && comboBoxId != "") {
                var _id_ = comboBoxId.split(":")[1];
                var configNodes = getNodes(configXML, "/configComponents/comboBoxs/comboBox[@id='" + _id_ + "']");
                if (configNodes && configNodes.length > 0) {
                    comboBox.params = configNodes[0].getAttribute("params");
                    comboBox.optionValue = configNodes[0].getAttribute("optionValue");
                    comboBox.optionValueRef = configNodes[0].getAttribute("optionValueRef");
                    comboBox.optionText = configNodes[0].getAttribute("optionText");
                    comboBox.parserAttributes = configNodes[0].getAttribute("parserAttributes");
                    comboBox.parserNodes = configNodes[0].getAttribute("parserNodes");
                    comboBox.changeNodeName = configNodes[0].getAttribute("changeNodeName");
                    comboBox.setAttribute("params", configNodes[0].getAttribute("params"));
                    comboBox.setAttribute("optionValue", configNodes[0].getAttribute("optionValue"));
                    comboBox.setAttribute("optionValueRef", configNodes[0].getAttribute("optionValueRef"));
                    comboBox.setAttribute("optionText", configNodes[0].getAttribute("optionText"));
                    comboBox.setAttribute("parserNodes", configNodes[0].getAttribute("parserNodes"));
                    comboBox.setAttribute("parserAttribute", configNodes[0].getAttribute("parserAttribute"));
                    comboBox.setAttribute("changeNodeName", configNodes[0].getAttribute("changeNodeName"));
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "configComboBox", ComboRsis);
    }
}

(function($R) {
    ComboActionsRsis = {
        _FILE: "037comboActionsRsis.js",
        version: JRetail.rsis.VersionJS,
        vClass: [ "iCboAcReq", "iCboAc", "iCboAcRdy" ],
        lfDvClass: [ "iCboAcReq", "iCboAc", "iCboAcRdy" ],
        bSlClass: [ "slCboAcReq", "slCboAc", "slCboAcRdy" ],
        bOkClass: [ "okCboAcReq", "okCboAc", "okCboAcRdy" ],
        render: function() {
            return renderComboActions.apply(this, arguments);
        },
        renderInput: function(obj, state, isEditable, isMandatory, $win, sEvent) {
            try {
                if ($R(obj).isRenderAll()) {
                    $R(obj).setMandatory(status, this.vClass).visRestricted(status);
                    var isMount = getAtt(obj, "isMount");
                    if (isMount == null) {
                        obj.setAttribute("isMount", "false");
                    }
                }
                obj.className = isEditable ? this.vClass[1] : this.vClass[2];
                obj.style.cursor = !isEditable ? "default" : "pointer";
                if ($R.isMobileDevice) {
                    obj.readyOnly = true;
                    obj.disable = true;
                } else {
                    obj.readyOnly = !isEditable;
                    obj.disable = false;
                }
                var sfn = "return " + $win + "ComboBox.", events = Rsis.events;
                if ($R.isMobileDevice) {
                    sfn += "clickEmulateWindow";
                } else {
                    sfn += "optionshow";
                }
                events.add(obj, "onclick", sfn + "(this," + sEvent + ");");
                $R(obj).setTabIdx(state).visRestricted(state);
            } catch (oErr) {
                outPrint(oErr, ".renderInput", this);
            }
        },
        renderButtons: function(obj, isEditable, isMandatory, $win, sEvent) {
            try {
                if (obj) {
                    var events = Rsis.events, ac = "ComboBox.", cboDsd = "cboDsd", comboId = obj.id, nObjWdtIpt = $(comboId + ".wdtIpt"), nObjWdtBtns = $(comboId + ".wdtBtns"), wdtBtns = 20;
                    var sltBtn = $(comboId + ".sltBtnAc");
                    if (sltBtn) {
                        $R(sltBtn).rdOnly(!isEditable).disable(!isEditable, "cboDsd").setMandatory(status, this.bSlClass);
                        var sfn = "return " + $win + ac;
                        if ($R.isMobileDevice) {
                            sfn += "clickEmulateWindow";
                        } else {
                            sfn += "optionshow";
                        }
                        events.add(sltBtn, "onclick", isEditable ? sfn + "(this," + sEvent + ");" : "");
                        setDataUICpt(obj, sltBtn);
                    }
                    var okBtn = $(comboId + ".btnOk");
                    if (okBtn) {
                        $R(okBtn).rdOnly(!isEditable).disable(!isEditable, "cboDsd");
                        var sfn = "return " + $win + "ComboActionsRsis";
                        events.add(okBtn, "onclick", isEditable ? sfn + ".execAction(this);" : "");
                        var onkeypressButton = getAtt(obj, "onkeypressButton"), onkeydownButton = getAtt(obj, "onkeydownButton"), onkeyupButton = getAtt(obj, "onkeyupButton");
                        if (onkeypressButton !== "") events.add(okBtn, "onkeypress", isEditable ? $win + onkeypressButton : "");
                        if (onkeydownButton !== "") events.add(okBtn, "onkeydown", isEditable ? $win + onkeydownButton : "");
                        if (onkeyupButton !== "") events.add(okBtn, "onkeyup", isEditable ? $win + onkeyupButton : "");
                        setDataUICpt(obj, okBtn);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".renderButtons", this);
            }
        },
        execAction: function(obj) {
            try {
                if (obj) {
                    var UIContext = Rsis.UIContext.get(obj);
                    var $win = UtilRsis.getParentWindow(obj), sEvent = getStringEvent(obj);
                    var UIForm = UIContext.getUIForm(obj);
                    if (UIForm && UIForm.domainXML !== null) {
                        var combo = obj.tagName.toLowerCase() === "input" && obj.type !== "text" ? $(obj.id.split(".")[0]) : obj, parserAttributes = getAtt(combo, "parserAttributes"), nodeDomain = getNodes(UIForm.domainXML, ROOT_NODE + UIForm.getXPath()), onclickButton = getAttFuncDeveloper(obj, "onclickButton"), attributeNode = "";
                        if (parserAttributes !== null && parserAttributes !== "") {
                            attributeNode = parserAttributes.split("::")[1].split("@")[1];
                        }
                        var selectAction = nodeDomain !== null && nodeDomain.length > 0 ? getNodeValue(nodeDomain, attributeNode) : "";
                        if (onclickButton !== null && onclickButton !== "") {
                            compressEvalRsisAll(onclickButton, obj, UIForm, selectAction);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".execAction", this);
            }
        }
    };
    var _ComboRsis_ = $R.extend({}, ComboRsis);
    ComboActionsRsis = $R.extend(_ComboRsis_, ComboActionsRsis, {});
})(Rsis);

function renderComboActions(obj, state) {
    try {
        if (obj) {
            var nodes = null, $win = UtilRsis.getParentWindow(obj), sEvent = getStringEvent(obj);
            var isEditable = false, isMandatory = false;
            if ($R(obj).isRenderAll()) {
                isEditable = $R(obj).isEditable(state);
                isMandatory = $R(obj).isMandatory(state);
            } else {
                isEditable = true;
                isMandatory = false;
            }
            nodes = xmlToCombo(obj);
            UtilRsis.setHint(obj);
            ComboActionsRsis.renderInput(obj, state, isEditable, isMandatory, $win, sEvent);
            ComboActionsRsis.renderButtons(obj, isEditable, isMandatory, $win, sEvent);
            $R(obj).cssHelp().setTabIdx(state).renderDev(nodes, arguments[2]);
            obj = null;
        }
    } catch (oErr) {
        outPrint(oErr, "renderComboActions", ComboActionsRsis);
    }
}

function onkeydownExecuteAction(button, evt) {
    if (isEnterKeyDown(evt)) return ComboActionsRsis.execAction(button);
}

function renderHelpComboActions(object, UIForm, enableHelp) {
    try {
        if (object) {
            renderHelp(object, UIForm, enableHelp);
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpComboActions()", ComboActionsRsis);
    }
}

function renderHelpKeysComboActions(object, UIForm, enableHelp) {
    try {
        if (object) {
            renderHelpKeys(object, UIForm, enableHelp);
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpKeysComboActions", ComboActionsRsis);
    }
}

(function() {
    FileUploadRsis = {
        _FILE: "038fileUploadRsis.js",
        version: JRetail.rsis.VersionJS,
        timeout: 600,
        FILE_UPLOAD: null,
        vClass: [ "fiptReq", "fipt", "fiptRdy" ],
        render: function() {
            return renderFileUpload.apply(null, arguments);
        },
        timeLoad: 0,
        timeCounter: 0,
        open: function(form, _URL_, vfileUpload) {
            var thiz = this;
            try {
                if (form) {
                    var doc = document, formId = form.id, divIframe = $(form.id + ":divIframe");
                    if (divIframe) {
                        divIframe.innerHTML = "";
                    } else {
                        var divIframe = doc.createElement("div");
                        divIframe.id = formId + ":divIframe";
                        divIframe.style.display = "none";
                    }
                    var divFormUpload = $(formId + ":divFormUpload");
                    if (divFormUpload) {
                        divFormUpload.innerHTML = "";
                    } else {
                        var divFormUpload = doc.createElement("div");
                        divFormUpload.id = formId + ":divFormUpload";
                        divFormUpload.style.display = "none";
                        divFormUpload.style.visibility = "hidden";
                    }
                    vfileUpload.filescount = 0;
                    var element = form.getElementsByTagName("iframe")[0];
                    if (element) {
                        form.removeChild(element);
                    }
                    var formIframe = IFrame.createForm(formId, _URL_), iframe = IFrame.create(formId, formIframe);
                    divIframe.innerHTML = iframe;
                    form.parentNode.appendChild(divIframe);
                    divFormUpload.innerHTML = formIframe;
                    form.parentNode.appendChild(divFormUpload);
                    vfileUpload._iframe = $(formId + ".iframe_temp");
                    vfileUpload._iframeForm = $(formId + "_temp");
                    if (iframe != null && formIframe != null) {
                        var iframeDocument = IFrame.getIframeDocument(vfileUpload._iframe);
                        iframeDocument.location.replace("about:blank");
                        if (Rsis.browser.msie && iframeDocument.characterSet) iframeDocument.characterSet = document.characterSet; else iframeDocument.charset = document.charset;
                        var sizeMax = 0;
                        var arryList = form.getElementsByTagName("input");
                        if (arryList != null && arryList.length > 0) {
                            for (var z = 0; z < arryList.length; z++) {
                                var clone = false, object = arryList[z];
                                if (object.type === "file" && object.value !== "") {
                                    if (object.fileSize) {
                                        sizeMax += object.fileSize;
                                    }
                                    object.name = object.id;
                                    vfileUpload._iframeForm.appendChild(object);
                                    vfileUpload.filescount++;
                                    clone = true;
                                }
                                if (clone) {
                                    var fpd = $(object.id.split(".")[0] + ".fpd");
                                    fpd.appendChild(createInputFile(object));
                                }
                            }
                        }
                        thiz.timeout = vfileUpload.filescount * thiz.timeout;
                    }
                    vfileUpload.form = form;
                }
            } catch (oErr) {
                outPrint(oErr, "FileUploadRsis.open()", thiz);
            }
        },
        send: function(form, parameters, vfileUpload) {
            var thiz = this;
            try {
                if (vfileUpload.lock) return;
                var completeCallback = arguments[4];
                if (completeCallback && typeof completeCallback === "function") {
                    vfileUpload._iframe.onComplete = completeCallback;
                }
                var startCallback = arguments[5];
                if (startCallback && typeof startCallback === "function") {
                    vfileUpload._iframe.onStartCallback = startCallback;
                }
                if (vfileUpload._iframe != null && vfileUpload._iframeForm != null) {
                    var actionForm = vfileUpload._iframeForm.action;
                    vfileUpload._iframeForm.action = actionForm + "?" + parameters;
                    submitForm(vfileUpload._iframeForm);
                    vfileUpload.lock = true;
                    thiz.FILE_UPLOAD = vfileUpload;
                    thiz.timeLoad = setInterval(checkStatusIframe, vfileUpload.uploadPollingRate);
                }
            } catch (oErr) {
                thiz.errorUpload(vfileUpload);
                outPrint(oErr, "FileUploadRsis.send()", thiz);
            }
        },
        errorUpload: function(vfileUpload) {
            thiz.timeout = 300;
            thiz.FILE_UPLOAD = null;
            vfileUpload.lock = false;
            clearInterval(thiz.timeLoad);
            clearInputFileUpload(vfileUpload.form);
        }
    };
    IFrame = {
        create: function(formId, formIframe) {
            try {
                if (formId == null || formId == "") return null;
                var iframe = '<iframe id="' + $(formId).id + '.iframe_temp" name="' + $(formId).id + '.iframe_temp" width="0" ' + ' height="0" border="0" style="width:100%; height:0; border:none;"></iframe>';
                return iframe;
            } catch (oErr) {
                outPrint(oErr, "IFrame.create()", FileUploadRsis);
            }
        },
        remove: function(iframe) {
            try {
                iframe.body.innerHTML = "";
            } catch (oErr) {
                outPrint(oErr, "IFrame.remove()", FileUploadRsis);
            }
        },
        createForm: function(formId, _URL_) {
            try {
                if (formId == null || formId == "") return null;
                var form = '<form id="' + $(formId).id + '_temp" name="' + $(formId).id + '_temp" target="' + $(formId).id + '.iframe_temp" action="' + _URL_ + '" ' + ' enctype="multipart/form-data" encoding="multipart/form-data" method="POST"></form>';
                return form;
            } catch (oErr) {
                outPrint(oErr, "IFrame.createForm()", FileUploadRsis);
            }
        },
        getIframeDocument: function(iframe) {
            var doc;
            if (iframe.contentDocument) {
                doc = iframe.contentDocument;
            } else if (iframe.contentWindow) {
                doc = iframe.contentWindow.document;
            } else if (iframe.document) {
                doc = iframe.document;
            }
            return doc;
        },
        isBlank: function(iframe) {
            if (iframe) {
                var fileInputValue = IFrame.getIframeDocument(iframe.id);
                return fileInputValue ? false : true;
            }
        }
    };
})();

function renderFileUpload(obj, status) {
    try {
        if (obj) {
            var _rsObj = $R(obj);
            var nodes = null, $win = UtilRsis.getParentWindow(obj), events = Rsis.events, sEvent = getStringEvent(obj);
            if (_rsObj.isRenderAll()) {
                var isEditable = _rsObj.isEditable(status), isMandatory = _rsObj.isMandatory(status), objId = obj.id;
                if (isEditable) {
                    _rsObj.rdOnly(false).setMandatory(status, FileUploadRsis.vClass);
                    _NO_RENDER_INPUT = _rsObj.isColHeader();
                    events.add(obj, "onblur", "return " + $win + "blurInputToXML(this, " + sEvent + ")");
                    if (obj.getAttribute("keyup") != null) {
                        events.add(obj, "onkeyup", "return " + $win + obj.getAttribute("keyup"));
                    }
                    if (obj.getAttribute("keydown") != null) {
                        events.add(obj, "onkeydown", "return " + $win + obj.getAttribute("keydown"));
                    }
                    if (obj.getAttribute("keypress") != null) {
                        events.add(obj, "onkeypress", "return " + $win + obj.getAttribute("keypress"));
                    }
                    _rsObj.setFocus();
                } else {
                    _rsObj.rdOnly(true, FileUploadRsis.vClass);
                    events.add(obj, "onblur", "return " + $win + "SelectBox.close(this, " + sEvent + ");");
                    if (obj.getAttribute("keydown") != null) obj.onkeydown = noAction;
                    if (obj.getAttribute("keyup") != null) obj.onkeyup = noAction;
                }
                var fpd = $(obj.id + ".fpd");
                if (fpd) {
                    fpd.className = isEditable ? "fpd" : "fpd fpdDsd";
                    fpd.disabled = !isEditable;
                    setDataUICpt(file, fpd);
                }
                var file = $(objId + ".file");
                if (file) {
                    $R(file).rdOnly(!isEditable);
                    file.disabled = !isEditable;
                    if (Rsis.browser.msie && !(file.style.opacity === "0")) {
                        file.style.filter = "alpha(opacity=0)";
                    }
                    setDataUICpt(file, clrFpd);
                }
                var clrFpd = $(objId + ".clrFpd");
                if (clrFpd) {
                    $R(clrFpd).rdOnly(!isEditable).disable(!isEditable, "fpdDsd");
                    setDataUICpt(obj, clrFpd);
                }
                _rsObj.execDev().visRestricted(status);
            }
            _rsObj.setTabIdx(status).cssHelp().renderDev(nodes, arguments[2]);
        }
    } catch (oErr) {
        outPrint(oErr, "renderFileUpload()", FileUploadRsis);
    }
}

function clearInputFileUpload(form) {
    try {
        if (form) {
            var arryList = form.getElementsByTagName("input");
            if (arryList && arryList.length > 0) {
                for (var z = 0; z < arryList.length; z++) {
                    var object = arryList[z], typeFile = object.getAttribute("typeFile"), componenteName = object.getAttribute("component");
                    if (typeFile === "file" && componenteName === "fileUpload" && ("type" in object || object["type"] !== undefined)) {
                        object["value"] = "";
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "clearInputFileUpload()", FileUploadRsis);
    }
}

function FileUpload() {
    var button = null;
    var functionDeveloper = null;
    this.queryString = null;
    this.form = null;
    this._iframeForm = null;
    this._iframe = null;
    this.sync = false;
    this.lock = false;
    this.uploadPollingRate = 1e3;
    this.filescount = 0;
    this.isSendWithForm = function(form) {
        try {
            if (form) {
                var arryList = form.getElementsByTagName("input");
                if (arryList != null && arryList.length > 0) {
                    for (var z = 0; z < arryList.length; z++) {
                        var object = arryList[z], typeFile = object.getAttribute("typeFile"), componenteName = object.getAttribute("component"), sendWithForm = object.getAttribute("sendWithForm");
                        if (typeFile === "file" && componenteName === "fileUpload" && sendWithForm === "true" && object["type"] !== "") {
                            return true;
                        }
                    }
                }
            }
        } catch (oErr) {
            outPrint(oErr, "FileUpload.isSendWithForm()", FileUploadRsis);
            return false;
        }
        return false;
    };
    this.open = function(form, _URL_, Async) {
        FileUploadRsis.open(form, _URL_, this);
    };
    this.send = function(form, parameters) {
        FileUploadRsis.send(form, parameters, this, arguments[2], arguments[3]);
    };
    this.getForm = function() {
        return this.form;
    };
    this.setButton = function(b) {
        return button = b;
    };
    this.getButton = function() {
        return button;
    };
    this.setFunctionDeveloper = function(ft) {
        return functionDeveloper = ft;
    };
    this.getFunctionDeveloper = function() {
        return functionDeveloper;
    };
}

function loaded(vfileUpload) {
    try {
        var doc = IFrame.getIframeDocument(vfileUpload._iframe);
        if (doc.body && doc.body.innerHTML !== "") {
            vfileUpload.responseText = doc.body.innerHTML;
            vfileUpload.lock = false;
            FileUploadRsis.timeout = 300;
            FileUploadRsis.FILE_UPLOAD = null;
            clearInterval(FileUploadRsis.timeLoad);
            clearInputFileUpload(vfileUpload.form);
            if (typeof vfileUpload._iframe.onComplete === "function") {
                return vfileUpload._iframe.onComplete(vfileUpload);
            }
            if (typeof vfileUpload._iframe.onStartCallback === "function") {
                return vfileUpload._iframe.onStartCallback(vfileUpload);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "loaded()", FileUploadRsis);
    }
}

function checkStatusIframe() {
    try {
        var OB = FileUploadRsis, vfileUpload = OB.FILE_UPLOAD;
        OB.timeCounter++;
        if (verifyFileUploadNeeded(vfileUpload)) {
            loaded(vfileUpload);
        }
        if (OB.timeCounter / 2 > OB.timeout && OB.timeout > 0) {
            clearInterval(OB.timeLoad);
            vfileUpload.lock = false;
            OB.timeout = 300;
            clearInputFileUpload(vfileUpload.form);
            var doc = IFrame.getIframeDocument(vfileUpload._iframe);
            if (doc.body && doc.body.innerHTML !== "") {
                vfileUpload.responseText = doc.body.innerHTML;
                vfileUpload.lock = false;
                OB.timeout = 300;
                OB.FILE_UPLOAD = null;
                clearInterval(OB.timeLoad);
            }
            if (typeof vfileUpload._iframe.onComplete === "function") {
                return vfileUpload._iframe.onComplete(vfileUpload);
            }
            if (typeof vfileUpload._iframe.onStartCallback === "function") {
                return vfileUpload._iframe.onStartCallback(vfileUpload);
            }
            return;
        }
    } catch (oErr) {
        outPrint(oErr, "checkStatusIframe()", OB);
        OB.FILE_UPLOAD = null;
    }
}

function verifyFileUploadNeeded(vfileUpload) {
    var doc = IFrame.getIframeDocument(vfileUpload._iframe);
    try {
        if (doc.location === "about:blank") {
            return false;
        } else if (doc) {
            return true;
        } else {
            return false;
        }
    } catch (e) {
        alert("No foi possvel estabelecer uma conexao com o servidor!");
        return true;
    }
}

function submitForm(form) {
    form.submit();
}

function removeFileForm(button) {
    try {
        if (button) {
            var objectId = button.id.split(".")[0];
            $(objectId + ".file").value = "";
            $(objectId).value = "";
        }
    } catch (oErr) {
        outPrint(oErr, "removeFileForm()", FileUploadRsis);
    }
    return true;
}

function atualizaInputFile(file) {
    $(file.id.split(".")[0]).value = file.value;
}

function createInputFile(object) {
    if (object) {
        var newInputFile = document.createElement("input");
        newInputFile.type = "file";
        newInputFile.className = "fHdn";
        newInputFile.id = object.id;
        newInputFile.name = object.id;
        newInputFile.sendWithForm = object.sendWithForm;
        newInputFile.onchange = function(event) {
            atualizaInputFile(Rsis.events.getTarget(event, true));
        };
        return newInputFile;
    }
}

function sendFileUpload(button) {
    try {
        if (button) {
            var UIContext = Rsis.UIContext.get(button), UIForm = UIContext.getUIForm(button);
            if (UIForm) {
                var form = UIForm.getForm();
                if (typeof FileUpload !== "undefined") {
                    var fileUpload = new FileUpload();
                    if (fileUpload && !fileUpload.isSendWithForm(form)) {
                        if (typeof Loading !== "undefined") {
                            Loading.start();
                        }
                        var targetAction = form.getAttribute("targetAction"), targetMethod = button.getAttribute("targetMethod");
                        if (targetMethod == null || targetMethod === "") {
                            targetMethod = "upload";
                        }
                        fileUpload.setButton(button);
                        var callBackDeveloper = button.getAttribute("callBackDeveloper");
                        if (callBackDeveloper != null && callBackDeveloper !== "") {
                            fileUpload.setFunctionDeveloper(callBackDeveloper);
                        }
                        var parameters = "", uploadParameters = getAtt(button, "uploadParameters");
                        if (uploadParameters != null && uploadParameters != "") {
                            compressEvalRsisAll(uploadParameters, UIForm, fileUpload);
                            parameters = fileUpload.queryString;
                        }
                        var paramsSend = "do=fileUpload&targetAction=" + targetAction + "&targetMethod=" + targetMethod + "&" + parameters;
                        fileUpload.open(form, URL, false);
                        fileUpload.send(form, paramsSend, "", startCallback);
                        UIContext.fileUpload = fileUpload;
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "sendFileUpload()", FileUploadRsis);
    }
}

function startCallback(fUpload) {
    try {
        if (typeof Loading !== "undefined") {
            Loading.stop();
        }
        var button = fUpload.getButton();
        if (button) {
            var UIContext = Rsis.UIContext.get(button), UIForm = UIContext.getUIForm(button);
            if (UIForm) {
                compressEvalRsisAll(fUpload.getFunctionDeveloper(), UIForm, fUpload);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "startCallback()", FileUploadRsis);
    }
}

function renderHelpFileUpload(object, UIForm, enableHelp) {
    renderHelp(object, UIForm, enableHelp);
}

function renderHelpKeysFileUpload(object, UIForm, enableHelp) {
    renderHelpKeys(object, UIForm, enableHelp);
}

function configFileUpload(input, configXML) {
    try {
        if (input && configXML != null) {
            var inputId = getAttMandatory(input, "id");
            if (inputId != null && inputId != "") {
                var _id_ = inputId.split(":")[1];
                var configNodes = getNodes(configXML, ROOT_NODE + "/configComponents/fileUploads/fileUpload[@id='" + _id_ + "']");
                if (configNodes && configNodes.length > 0) {
                    input.editable = configNodes[0].getAttribute("editable");
                    input.mandatory = configNodes[0].getAttribute("mandatory");
                    input.setAttribute("editable", configNodes[0].getAttribute("editable"));
                    input.setAttribute("mandatory", configNodes[0].getAttribute("mandatory"));
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "configFileUpload()", FileUploadRsis._FILE, FileUploadRsis.version);
    }
}

var listBoxSelected = null;

(function($R) {
    ListBoxRsis = {
        _FILE: "039listBoxRsis.js",
        version: JRetail.rsis.VersionJS,
        CACHE_LIST_BOX: "_cacheListBox",
        vClass: [ "ilBxReq", "ilBx", "ilBxRdy" ],
        clazz: "ListBoxRsis",
        sendTime: null,
        eventSelected: null,
        PO: {
            SEARCH: "SR",
            FULL: "SF"
        },
        COLLECTION: null,
        getCollection: function(obj) {
            return this.COLLECTION != null ? this.COLLECTION[obj.id] : null;
        },
        setCollection: function(obj, list) {
            if (this.COLLECTION == null) {
                this.COLLECTION = [];
            }
            this.COLLECTION[obj.id] = list;
        },
        render: function() {
            return renderListBox.apply(this, arguments);
        },
        renderButtons: function(obj, isEditable, isMandatory, $win, sEvent) {
            try {
                if (obj) {
                    var objId = obj.id, events = $R.events, lBxDsd = "lBxDsd", sltBtn = $(objId + ".btnSearch"), nObj = $(objId + ".clearButton"), ac = "ListBox.", selbx = $win + ac + "hide(this,event);return ", nObjWdtIpt = $(objId + ".wdtIpt"), nObjWdtBtns = $(objId + ".wdtBtns"), wdtBtns = 16;
                    if (sltBtn) {
                        $R(sltBtn).rdOnly(!isEditable).disable(!isEditable, lBxDsd);
                        var sfn = $R.browser.msie ? $win + ac : "return " + $win + ac;
                        var sfn = "return " + $win + ac;
                        if (obj.getAttribute("remoteSearch") === "true") {
                            if ($R.isMobileDevice) {
                                sfn += "clickEmulateWindow";
                            } else {
                                sfn += "searchOpen";
                            }
                        } else {
                            sfn += "viewOptions";
                        }
                        events.add(sltBtn, "onclick", isEditable ? sfn + "(this," + sEvent + ");" : "");
                        setDataUICpt(obj, sltBtn);
                    }
                    var UR = UtilRsis;
                    if (nObj) {
                        $R(nObj).rdOnly(!isEditable).disable(!isEditable, lBxDsd);
                        UR.visibleObject(nObj, isEditable);
                        if (isEditable) wdtBtns = 32;
                        if (isEditable && obj.style.display !== "none") {
                            $R(nObj).visible(getAtt(obj, "clearButtonVisible") !== "false" ? true : false);
                        }
                        events.add(nObj, "onclick", isEditable ? selbx + $win + ac + "clearListBox(this);" : "");
                        setDataUICpt(obj, nObj);
                    }
                    if (nObjWdtIpt) {
                        nObjWdtIpt.style.marginRight = wdtBtns + 5 + "px";
                    }
                    if (nObjWdtBtns) {
                        nObjWdtBtns.style.width = wdtBtns + "px";
                    }
                }
            } catch (oErr) {
                outPrint(oErr, this.clazz + ".renderButtons", this);
            }
        },
        renderInput: function(obj, state, isEditable, isMandatory, $win, sEvent) {
            try {
                var pattern = $R(obj).getMask(), events = $R.events;
                if (isEditable) {
                    var ac = "ListBoxRsis.", rt = "return ";
                    obj.className = isEditable ? this.vClass[1] : this.vClass[2];
                    obj.disabled = !isEditable;
                    obj.readOnly = !isEditable;
                    $R(obj).setMandatory(state, this.vClass);
                    var on_focus = $win + ac + "cleanDescription(this);" + $win + "removeCaracs(this,'" + pattern + "');";
                    if (obj.getAttribute("on-focus") != null) {
                        on_focus = on_focus + rt + $win + obj.getAttribute("on-focus");
                    } else {
                        on_focus = rt + on_focus;
                    }
                    var on_blur = $win + ac + "getDescription(this,event);";
                    if (obj.getAttribute("on-blur") != null) {
                        on_blur = on_blur + rt + $win + obj.getAttribute("on-blur");
                    } else {
                        on_blur = rt + on_blur;
                    }
                    events.add(obj, "onblur", on_blur);
                    events.add(obj, "onfocus", on_focus).add("onkeypress", rt + $win + ac + "check(this," + sEvent + ", '" + pattern + "');").add("onkeyup", rt + $win + ac + "start(this," + sEvent + ");").add("onkeydown", rt + $win + ac + "checkDwn(this, " + sEvent + ");");
                    if ($R.isMobileDevice) {
                        var sfn = "return " + $win + "ListBox.";
                        if (obj.getAttribute("remoteSearch") === "true") {
                            sfn += "emulateWindow";
                        } else {
                            sfn += "viewOptions";
                        }
                        obj.readOnly = true;
                        events.add("onclick", sfn + "(this," + sEvent + ");");
                    }
                    if (obj.getAttribute("keyup") != null) {
                        events.add(obj, "onkeyup", $win + ac + "start(this," + sEvent + ") return " + obj.getAttribute("keyup"));
                    }
                    if (obj.getAttribute("keydown") != null) {
                        events.add(obj, "onkeydown", $win + ac + "checkDwn(" + sEvent + "); return " + $win + obj.getAttribute("keydown"));
                    }
                } else {
                    if (obj.getAttribute("keydown") != null) {
                        obj.onkeydown = function() {};
                    }
                    if (obj.getAttribute("keyup") != null) {
                        obj.onkeyup = function() {};
                    }
                    if (obj.getAttribute("on-blur") != null) {
                        obj.onblur = function() {};
                    }
                    $R(obj).rdOnly(true, this.vClass);
                    events.add(obj, "onkeypress", "").add("onkeydown", "").add("onblur", "");
                }
                $R(obj).setTabIdx(state).visRestricted(state);
            } catch (oErr) {
                outPrint(oErr, ".renderInput", this);
            }
        },
        check: function(obj, evt, pattern) {
            evt = $R.events.getEvent(evt);
            if ($R.browser.firefox) {
                this.validateChars(obj, evt);
                rejeitaTecla(evt);
                desabilitaLista(obj, evt);
                return validateMask(evt, pattern);
            } else {
                rejeitaTecla(evt);
                desabilitaLista(obj, evt);
                return validateMask(evt, pattern);
            }
        },
        checkkyPrs: function(objId, evt, value, texto) {
            evt = $R.events.getEvent(evt);
            var rEvts = $R.events, selfRsis = ListBoxRsis, obj = $(objId);
            switch (evt.keyCode) {
              case rEvts.KEY_PAGEUP:
              case rEvts.KEY_PAGEDOWN:
              case rEvts.KEY_HOME:
              case rEvts.KEY_END:
              case rEvts.KEY_UP:
              case rEvts.KEY_DOWN:
              case rEvts.KEY_LEFT:
                selfRsis.start(obj, evt);
                break;

              case rEvts.KEY_RIGHT:
                break;

              case rEvts.KEY_RETURN:
                if (isEnterKeyUp(evt)) {
                    return selfRsis.setOptionSel(objId, value, texto);
                }

              case rEvts.KEY_BACKSPACE:
              case rEvts.KEY_ESC:
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    $R($R(obj).getListHolder()).hide();
                    $R(obj).focus();
                }
                break;

              default:
                if (isEnterKeyUp(evt)) {
                    return selfRsis.setOptionSel(objId, value, texto);
                }
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    $R($R(obj).getListHolder()).hide();
                    $R(obj).focus();
                }
            }
            return;
        },
        checkDwn: function(obj, evt) {
            evt = $R.events.getEvent(evt);
            var rEvts = $R.events;
            switch (evt.keyCode) {
              case rEvts.KEY_PAGEUP:
              case rEvts.KEY_PAGEDOWN:
              case rEvts.KEY_HOME:
              case rEvts.KEY_END:
              case rEvts.KEY_UP:
              case rEvts.KEY_DOWN:
              case rEvts.KEY_LEFT:
                this.setCollection(obj, null);
                this.start(obj, evt);
                var listBox = $(obj.id + ".listBox");
                if (listBox) {
                    var menuitem = listBox.getElementsByTagName("li");
                    if (menuitem && menuitem.length > 0) {
                        if (menuitem[0] !== document.activeElement) {
                            $R(menuitem[0]).addClass("selected");
                            var $check = $R.$(menuitem[0].firstChild).children(0);
                            $check[0].focus();
                            rEvts.stopPropagation(evt);
                        }
                    }
                }
                break;

              case rEvts.KEY_RIGHT:
              case rEvts.KEY_RETURN:
                if (isEnterKeyUp(evt)) {
                    return this.setOptionSel(obj.id, value, texto);
                }

              case rEvts.KEY_BACKSPACE:
              case rEvts.KEY_ESC:
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    $R($R(obj).getListHolder()).hide();
                    $R(obj).focus();
                }
                break;

              default:
                rejeitaTecla(evt);
                desabilitaLista(obj, evt);
            }
        },
        menuselect: function(obj, evt) {
            evt = $R.events.getEvent(evt);
            var rEvts = $R.events;
            switch (evt.keyCode) {
              case rEvts.KEY_PAGEUP:
                this.previousPage(obj, evt);
                break;

              case rEvts.KEY_PAGEDOWN:
                this.nextPage(obj, evt);
                break;

              case rEvts.KEY_HOME:
                this.active = 0;
                this._move("first", obj, evt);
                break;

              case rEvts.KEY_END:
                this.active = 0;
                this._move("last", obj, evt);
                break;

              case rEvts.KEY_UP:
                this.previous(obj, evt);
                break;

              case rEvts.KEY_DOWN:
                this.next(obj, evt);
                break;

              case rEvts.KEY_LEFT:
              case rEvts.KEY_RIGHT:
              case rEvts.KEY_RETURN:
                if (isEnterKeyUp(evt)) {
                    obj.firstChild.firstChild.click();
                }

              case rEvts.KEY_BACKSPACE:
              case rEvts.KEY_ESC:
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    $R($R(obj).getListHolder()).hide();
                    var listBox = $(obj.parentNode.id.split(".")[0]);
                    if (listBox) {
                        $R(listBox).focus();
                    }
                    this.active = 0;
                }
                break;

              default:
                if (isEnterKeyUp(evt)) {
                    return this.setOptionSel(obj.id, value, texto);
                }
                if (isKeyCodePress(evt, $R.events.KEY_ESC)) {
                    $R($R(obj).getListHolder()).hide();
                    var listBox = $(obj.parentNode.id.split(".")[0]);
                    if (listBox) {
                        $R(listBox).focus();
                    }
                    this.active = 0;
                }
            }
            return;
        },
        active: -1,
        next: function(obj, evt) {
            this._move("next", obj, evt);
        },
        previous: function(obj, evt) {
            this._move("previous", obj, evt);
        },
        previousPage: function(obj, evt) {
            this._move("previous", obj, evt);
        },
        nextPage: function(obj, evt) {
            this._move("next", obj, evt);
        },
        _move: function(direction, obj, evt) {
            if (obj, evt) {
                if (obj && obj.parentNode) {
                    var lista = obj.parentNode.childNodes;
                    if (lista && lista.length > 0) {
                        var max = lista.length;
                        if (direction === "first" || direction === "last") {
                            this.active = direction === "first" ? 0 : max - 1;
                            var scroll = lista[this.active].parentNode;
                            if (direction === "first") {
                                scroll.scrollTop = "0px";
                            } else if (this.active == max - 1) {
                                scroll.scrollTop = scroll.scrollHeight - lista[this.active].offsetHeight + "px";
                            }
                        } else {
                            if (direction === "next") {
                                this.active = this.active >= max - 1 ? 0 : this.active + 1;
                            } else {
                                this.active = this.active <= 0 ? max - 1 : this.active - 1;
                            }
                            var scroll = lista[this.active].parentNode;
                            if (this.active == 0) {
                                scroll.scrollTop = (parseFloat(lista[this.active].offsetHeight) || 0) + "px";
                            } else if (this.active == max - 1) {
                                scroll.scrollTop = this.active * parseFloat(lista[this.active].offsetHeight) + "px";
                            }
                            scroll.onscroll = function(event) {
                                var sel = this.getElementsByClassName("selected")[0];
                                if (sel) this.scrollTop = sel.offsetTop;
                            };
                        }
                        $R.$(".cteLbx ul li").removeClass("selected");
                        $R.$(lista[this.active]).addClass("selected");
                        $R.$('input[type="checkbox"]', lista[this.active]).focus();
                    }
                }
            }
        },
        start: function(obj, evt) {
            evt = $R.events.getEvent(evt);
            if ($R.browser.msie) {
                this.validateChars(obj, evt);
            }
            return this.search(obj, evt);
        },
        validateChars: function(obj, evt) {
            try {
                if (obj) {
                    evt = $R.events.getEvent(evt);
                    var params = obj.getAttribute("params"), UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(obj), objXML = UIForm.getParams(params);
                    var validateChars = isOnClickEvent(evt) && !objXML || isRemoteSearch(obj) && (isEnterKeyUp(evt) || isEnterKeyPress(evt));
                    if (validateChars) {
                        var minlength = getAtt(obj, "minlength");
                        if (minlength != null && minlength !== "") {
                            if (obj.value == "" || obj.value.length < minlength) {
                                alert(getMessageBundle("ERROR_STRING_LENGTH").replace("XXX", minlength));
                                return false;
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".validateChars", this);
            }
            return true;
        },
        cleanDescription: function(obj) {
            if (obj && obj.value) {
                obj.value = "";
            }
            return true;
        },
        getDescription: function(obj, evt) {
            xmlToListBox(obj);
        },
        search: function(obj, evt) {
            try {
                if (obj) {
                    var UIContext = $R.UIContext.get(obj);
                    evt = $R.events.getEvent(evt);
                    this.eventSelected = evt;
                    var act = ListBox, keyCode = $R.events.getCode(evt), UIForm = UIContext.getUIForm(obj), thiz = this;
                    act.OnclickEvent = isOnClickEvent(evt);
                    var textCached = obj.getAttribute("textCached"), textoDigitado = obj.value;
                    if (thiz.isCloseOptions(obj, evt)) {
                        return false;
                    }
                    if (act.OnclickEvent) {
                        var objXML = UIForm.getParams(obj.getAttribute("params"));
                        if (objXML && isRemoteSearch(obj)) {
                            UIForm.setParams(obj.getAttribute("params"), null, false);
                        }
                    }
                    UIForm = ListBox.setCollectionXMLCache(obj, UIForm, null);
                    listBoxSelected = obj.id;
                    if (isRemoteSearch(obj) == true) {
                        thiz.remoteSearching(obj, UIForm, evt);
                    } else {
                        thiz.localSearching(obj, UIForm, evt);
                    }
                    thiz.checkAllValidate(obj, UIForm);
                }
            } catch (oErr) {
                outPrint(oErr, ".search", this);
            }
        },
        localSearching: function(obj, UIForm, evt) {
            try {
                if (obj && UIForm) {
                    var pathString = this.getPathNode(obj, UIForm), thiz = this, textoDigitado = obj.value, pattern = $R(obj).getMask(), targetMethod = obj.getAttribute("targetMethod"), events = $R.events, keyCode = events.getCode(evt), existXmlStored = this.hasXMLStored(obj, UIForm);
                    if (existXmlStored || targetMethod == null && !existXmlStored) {
                        if (pattern != null && pattern !== "" && !getMapPattern(pattern)) {
                            textoDigitado = unformatField(textoDigitado, pattern);
                        }
                        obj.evtkey = keyCode;
                        obj.classOld = obj.className;
                        var searchFull = evt.type == "click" || textoDigitado === "" && (events.KEY_RETURN == keyCode || events.KEY_DOWN == keyCode);
                        var fun = $R.isMobileDevice ? ListBox._filter : ListBox._filterMenuItems;
                        fun.call(fun, UIForm, obj, pathString, textoDigitado, searchFull, undefined, ListBox, thiz);
                        $R(obj).setHint().cssHelp();
                    } else if (targetMethod != null && targetMethod !== "") {
                        obj.evtkey = keyCode;
                        obj.classOld = obj.className;
                        this.callJavaAction(UIForm, obj, false);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".localSearching", this);
            }
        },
        remoteSearching: function(obj, UIForm, evt) {
            try {
                if (obj && UIForm) {
                    var pathString = this.getPathNode(obj, UIForm), act = ListBox, thiz = this, events = $R.events, keyCode = events.getCode(evt), existXmlStored = thiz.hasXMLStored(obj, UIForm);
                    var textCached = obj.getAttribute("textCached"), textoDigitado = obj.value, textKeypress = textoDigitado != null ? textoDigitado.toLowerCase() : null;
                    textCached = textCached != null ? textCached.toLowerCase() : null;
                    var isEqualsText = textCached == textKeypress ? true : false;
                    if (isOnClickEvent(evt) && act.OnclickButton) {
                        if (existXmlStored) {
                            obj.evtkey = keyCode;
                            obj.classOld = obj.className;
                            var fun = $R.isMobileDevice ? act._filter : act._filterMenuItems;
                            fun.call(fun, UIForm, obj, pathString, textoDigitado, true, evt, act, this);
                            $R(obj).setHint().cssHelp();
                        } else {
                            obj.evtkey = keyCode;
                            obj.classOld = obj.className;
                            var searchFull = thiz.isSearchFullLb(obj, UIForm, textoDigitado);
                            if (searchFull) {
                                thiz.callJavaActionByFull(obj);
                            } else {
                                thiz.callJavaAction(UIForm, obj, true);
                            }
                        }
                    } else {
                        if (!isEqualsText) {
                            obj.evtkey = keyCode;
                            obj.classOld = obj.className;
                            ProxyAc.makeRequest([ this, UIForm, obj, function($thiz, $UIForm, $object) {
                                $thiz.sendTime = this.sendTime;
                                $thiz.callJavaAction($UIForm, $object, false);
                            } ]);
                        } else {
                            var searchFull = evt.type == "click" || textoDigitado === "" && (events.KEY_RETURN == keyCode || events.KEY_DOWN == keyCode);
                            if (existXmlStored || searchFull) {
                                var pattern = $R(obj).getMask();
                                if (pattern != null && pattern !== "" && !getMapPattern(pattern)) {
                                    textoDigitado = unformatField(textoDigitado, pattern);
                                }
                                obj.evtkey = keyCode;
                                obj.classOld = obj.className;
                                var fun = $R.isMobileDevice ? act._filter : act._filterMenuItems;
                                fun.call(fun, UIForm, obj, pathString, textoDigitado, searchFull, evt, act, this);
                                $R(obj).setHint().cssHelp();
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".remoteSearching", this);
            }
        },
        isEqualsInputText: function(obj) {
            if (obj) {
                var textCached = obj.getAttribute("textCached"), textoDigitado = obj.value, textKeypress = textoDigitado != null ? textoDigitado.toLowerCase() : null;
                textCached = textCached != null ? textCached.toLowerCase() : null;
                return textCached == textKeypress ? true : false;
            }
            return false;
        },
        hasXMLStored: function(obj, UIForm) {
            try {
                if (obj && UIForm) {
                    var objXML = UIForm.getParams(obj.getAttribute("params")), pathString = obj.getAttribute("node"), optionValue = getAttMandatory(obj, "optionValue");
                    if (pathString == null || pathString === "") {
                        pathString = getStringPath(objXML, optionValue, "", "");
                    }
                    if (objXML) {
                        var collection = getNodes(objXML, pathString.replaceAll("###", "@"));
                        if (collection && collection.length > 0) {
                            return true;
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".hasXMLStored", this);
            }
            return false;
        },
        getPathNode: function(obj, UIForm) {
            try {
                if (obj && UIForm) {
                    var objXML = UIForm.getParams(obj.getAttribute("params")), pathString = obj.getAttribute("node");
                    if (pathString == null || pathString === "") {
                        pathString = getStringPath(objXML, getAttMandatory(obj, "optionValue"), "", "");
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".getPathNode", this);
            }
            return pathString;
        },
        isCloseOptions: function(obj, evt) {
            if (obj) {
                var act = ListBox, keyCode = $R.events.getCode(evt), events = $R.events, listHolder = obj ? $R(obj).getListHolder() : null;
                if (listHolder) {
                    if (obj && obj.readOnly && !$R.isMobileDevice || !act.OnclickEvent && validaTeclaPressionada(evt) || !act.OnclickEvent && keyCode == events.KEY_BACKSPACE && (obj.value != null && obj.value.length === 0)) {
                        if (listHolder) {
                            $R(listHolder).hide();
                        }
                        return true;
                    }
                }
            }
            return false;
        },
        isSearchFullLb: function(obj, UIForm, textoDigitado) {
            var lb = ListBox;
            if (obj && UIForm) {
                var isLocalSearch = UIForm.getParams(params) == null && lb.OnclickButton ? true : false, params = obj.getAttribute("params");
                var searchFull = textoDigitado === "" && isRemoteSearch(obj) || textoDigitado !== "" && isLocalSearch == true || textoDigitado === "" && !isRemoteSearch(obj) || textoDigitado !== "" && !isRemoteSearch(obj) && isLocalSearch == false ? true : false;
            }
            return searchFull;
        },
        callJavaAction: function(UIForm, obj, validateChars, ORIGEM) {
            this.ajax(UIForm, obj, validateChars, this.PO.SEARCH);
        },
        callJavaActionByFull: function(obj) {
            try {
                if (obj) {
                    var UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(obj), validateChars = false;
                    this.ajax(UIForm, obj, validateChars, this.PO.FULL);
                }
            } catch (oErr) {
                outPrint(oErr, ".callJavaActionByFull", this);
            }
        },
        ajax: function(UIForm, obj, validateChars, ORIGEM) {
            try {
                if (obj && UIForm) {
                    var textoDigitado = "", that = ListBoxRsis;
                    if (ORIGEM === that.PO.SEARCH) {
                        $R(obj).upper();
                        textoDigitado = obj.value;
                        var pattern = $R(obj).getMask("mask");
                        if (validateChars) {
                            var minlength = getAtt(obj, "minlength");
                            if (minlength != null && minlength !== "" && (obj.value === "" || obj.value.length < minlength)) {
                                return false;
                            }
                        }
                        formatField(obj, pattern);
                        if (pattern != null && pattern !== "" && !getMapPattern(pattern)) {
                            textoDigitado = unformatField(obj.value, pattern);
                        }
                        var searchFull = that.isSearchFullLb(obj, UIForm, textoDigitado);
                        if (that.isEqualsInputText(obj) && searchFull === false) {
                            return false;
                        }
                        obj.setAttribute("textCached", textoDigitado);
                    }
                    $R.Load.start(obj);
                    Message.close(UIForm);
                    var maxrows = getAtt(obj, "maxrows");
                    maxrows = maxrows != null && maxrows !== "" ? maxrows : "10";
                    var xmlSearchTemplate = getAtt(obj, "xmlSearchTemplate"), useDomainXML = getAtt(obj, "useDomainXML"), paramSearch = $R(obj).getAttNode(obj.getAttribute("optionSearch"));
                    if (paramSearch == null || paramSearch === "") {
                        paramSearch = $R(obj).getAttNode(obj.getAttribute("optionText"));
                    }
                    var objXMLSearchTemplate = null;
                    if (xmlSearchTemplate != null && xmlSearchTemplate !== "") {
                        objXMLSearchTemplate = UIForm.getParams(xmlSearchTemplate);
                    } else if (useDomainXML === "true") {
                        objXMLSearchTemplate = UIForm.domainXML;
                        paramSearch = $R(obj).getAttNode(obj.getAttribute("optionTextRef")) || $R(obj).getAttNode(obj.getAttribute("optionSearch")) || $R(obj).getAttNode(obj.getAttribute("optionText"));
                    }
                    if (objXMLSearchTemplate != null && isRemoteSearch(obj) == true) {
                        var pathSearch = UIForm.getXPath();
                        if (useDomainXML !== "true") {
                            pathSearch = $R(obj).getPathNode();
                            var args = pathSearch.split("/");
                            pathSearch = "/" + args[args.length - 1];
                        }
                        var nodeTemplate = getNodes(objXMLSearchTemplate, pathSearch.replaceAll("###", "@"));
                        if (nodeTemplate && nodeTemplate.length > 0) {
                            nodeTemplate[0].setAttribute(paramSearch, textoDigitado);
                        }
                    }
                    var ret = compressEvalRsisAll(getAttFuncDeveloper(obj, "executeSearchBefore"), obj, objXMLSearchTemplate, UIForm);
                    if (typeof ret !== "undefined") {
                        $R.Load.stop(obj);
                        return ret;
                    }
                    var queryString = "";
                    var searchParameter = getAttFuncDeveloper(obj, "searchParameter");
                    if (searchParameter != null && searchParameter !== "") {
                        var QueryString = {
                            value: "",
                            add: ""
                        };
                        compressEvalRsisAll(searchParameter, UIForm, QueryString, obj);
                        queryString = typeof QueryString.value !== "undefined" ? QueryString.value : "";
                    }
                    var targetMethod = obj.getAttribute("targetMethod"), targetAction = obj.getAttribute("targetAction"), supressFunction = getAttFuncDeveloper(obj, "supressFunction"), strDomainXML = escapeParam(objXMLSearchTemplate != null ? objXMLSearchTemplate.xml : "", true), form = UIForm.getForm();
                    if (isEmpty(targetAction)) {
                        targetAction = UIForm.getTargetAction();
                    }
                    var parameters = "xmlDomain=" + strDomainXML;
                    parameters = parameters + "&" + paramSearch + "=" + escapeParam(textoDigitado, false);
                    parameters = parameters + "&pageNumber=0&pageSize=" + escapeParam(maxrows, false);
                    parameters = parameters + "&maxrows=" + escapeParam(maxrows, false);
                    parameters = parameters + "&sendTime=" + escapeParam(this.sendTime ? this.sendTime : "", false);
                    parameters = parameters + queryString;
                    if (supressFunction != null && supressFunction !== "") {
                        compressEvalRsisAll(supressFunction, obj, UIForm, objXMLSearchTemplate, parameters);
                    } else {
                        var callbackFunction = $R.isUndefined(arguments[4]) ? ListBoxRsis._returnPromises : arguments[4], callComponent = obj.id;
                        if (ORIGEM === that.PO.FULL) {
                            var optionValue = getAttMandatory(obj, "optionValue");
                            if (ListBox.returnXML && (that.permiteInclusaoDoNoh(optionValue.split("@")[0]) || that.hasFunctionChangeObjectByXmlModal(obj))) {
                                callbackFunction = ListBoxRsis._returnPromisesAfterModal;
                            }
                        }
                        var promise = AjaxRsis.setLoadPanel(false).promises.post(null, {
                            action: targetAction,
                            method: targetMethod,
                            uiform: UIForm,
                            parameters: parameters,
                            async: true
                        });
                        promise.then(function(response) {
                            callbackFunction.call(ListBoxRsis, response, obj);
                        });
                        promise["catch"](function(err) {
                            console.log("errors in response", err);
                            $R.Load.stop(obj);
                            outPrint(err, ".ajax", ListBoxRsis);
                        });
                    }
                }
            } catch (oErr) {
                $R.Load.stop(obj);
                outPrint(oErr, "ajax", this);
            }
        },
        _returnPromises: function(Transfer, obj) {
            try {
                $R.Load.stop(obj);
                var enterPressLocal = obj.enterPressLocal, params = obj.getAttribute("params"), searchFull = false, textoDigitado = obj.value;
                ProxyAc.sendTimeValidate(Transfer, [ this, Transfer.UIForm, obj, function($thiz, $UIForm, $obj) {
                    $thiz.sendTime = this.sendTime;
                    $thiz.callJavaAction($UIForm, $obj, false);
                } ]);
                if (Transfer.objXML && Transfer.UIForm) {
                    var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
                    Message.render(UIForm, objXML);
                    if (UIForm.hasError == false) {
                        var isLocalSearch = UIForm.getParams(params) == null && enterPressLocal ? true : false;
                        UIForm.setParams(params, objXML, false);
                        this.setCollection(obj, null);
                        var _isRemoteSearch_ = isRemoteSearch(obj);
                        if (this.isSearchFullLb(obj, UIForm, textoDigitado) && ListBox.OnclickButton == true || textoDigitado === "" && _isRemoteSearch_ || textoDigitado === "" && !_isRemoteSearch_) {
                            searchFull = true;
                        }
                        var pathString = obj.getAttribute("node");
                        if (isEmpty(pathString)) {
                            pathString = $R(obj).getPathNode(obj.getAttribute("optionSearch"));
                            if (isEmpty(pathString)) {
                                pathString = $R(obj).getPathNode(obj.getAttribute("optionText"));
                            }
                        }
                        var fun = $R.isMobileDevice ? ListBox._filter : ListBox._filterMenuItems;
                        fun.call(fun, UIForm, obj, pathString, textoDigitado, searchFull, undefined, ListBox, this);
                        $R(obj).setHint().cssHelp();
                    }
                }
            } catch (oErr) {
                $R.Load.stop(obj);
                outPrint(oErr, "._returnPromises", this);
            }
        },
        _returnPromisesAfterModal: function(Transfer, obj) {
            try {
                $R.Load.stop(obj);
                if (Transfer.objXML && Transfer.UIForm) {
                    var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
                    Message.render(UIForm, objXML);
                    if (UIForm.hasError == false) {
                        UIForm.setParams(obj.getAttribute("params"), objXML, false);
                    }
                }
            } catch (oErr) {
                $R.Load.stop(obj);
                outPrint(oErr, "._returnPromisesAfterModal", this);
            } finally {
                ListBox.error = false;
                ListBox.returnXML = null;
            }
        },
        createList: function(obj, objXML, pathString) {
            try {
                if (obj && objXML) {
                    var UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(obj), COLLECTIONS = this.getCollection(obj), xmlListDomain = ListBox.getCollectionXMLCache(UIForm, obj);
                    if (typeof COLLECTIONS == "undefined" || COLLECTIONS == null) {
                        var collection = getNodes(objXML, pathString.replaceAll("###", "@"));
                        if (collection && collection.length > 0) {
                            var attOptionValue = $R(obj).getAttNode(obj.getAttribute("optionValue")), isConcat = obj.getAttribute("concatOptSearchOptText"), remoteSearch = obj.getAttribute("remoteSearch"), pattern = $R(obj).getMask(), optionValue = "", optionText = "", optionSearch = "", optionTextRef = "", isStrConcat = false, z = 0, maxZ = collection.length;
                            if (isConcat === "true") {
                                isStrConcat = true;
                            }
                            if (remoteSearch === "true") {
                                var xpNode = obj.getAttribute("node");
                                optionText = xpNode + "@" + $R(obj).getAttNode(obj.getAttribute("optionText"));
                                optionValue = xpNode + "@" + $R(obj).getAttNode(obj.getAttribute("optionValue"));
                                var optSrh = obj.getAttribute("optionSearch");
                                if (optSrh != null && optSrh !== "") {
                                    optionSearch = xpNode + "@" + $R(obj).getAttNode(optSrh);
                                }
                            } else {
                                optionText = obj.getAttribute("optionText");
                                optionValue = obj.getAttribute("optionValue");
                                optionSearch = obj.getAttribute("optionSearch");
                            }
                            optionTextRef = obj.getAttribute("optionTextRef");
                            var patternStr = pattern;
                            if (optionSearch != null && optionSearch !== "" && optionSearch !== optionText) {
                                patternStr = "text";
                            }
                            var collectionPath = getAttMandatory(obj, "collectionPath"), argsCollectionPath = collectionPath.split("@");
                            argsCollectionPath[0] = replaceClassName(argsCollectionPath[0]);
                            COLLECTIONS = [];
                            for (;z < maxZ; z++) {
                                collection[z].setAttribute("selectedIndex", "");
                                var identValue = _createCompositeKey(obj, collection, z);
                                var textoListBox = _createCompositeTexts(obj, optionTextRef, collection, z, pattern);
                                var codigo = collection[z].getAttribute(attOptionValue), texto = getTextValueOption(obj, objXML, collection[z], z, optionValue, optionText, patternStr), txtSuggestion = "", texto1 = "", checkItem = false;
                                if (identValue) {
                                    var nodeSelected = getNodes(xmlListDomain, argsCollectionPath[0] + identValue);
                                    if (nodeSelected && nodeSelected.length > 0) {
                                        checkItem = true;
                                    }
                                }
                                if (optionSearch != null && optionSearch !== "") {
                                    texto1 = getTextValueOption(obj, objXML, collection[z], z, optionValue, optionSearch, pattern);
                                } else {
                                    texto1 = texto;
                                }
                                texto1 = texto1 ? texto1 : textoListBox;
                                if (isStrConcat) {
                                    txtSuggestion = texto1 + " - " + texto;
                                } else {
                                    txtSuggestion = texto;
                                }
                                texto2 = retiraAcentos(texto1.toUpperCase());
                                COLLECTIONS[z] = [ codigo, txtSuggestion, texto2, texto1, identValue, textoListBox, checkItem ];
                            }
                            this.setCollection(obj, COLLECTIONS);
                        }
                    } else {
                        var collection = getNodes(objXML, pathString.replaceAll("###", "@"));
                        if (collection && collection.length > 0) {
                            for (var z = 0; z < collection.length; z++) {
                                collection[z].setAttribute("selectedIndex", "");
                            }
                        }
                    }
                    return COLLECTIONS;
                }
            } catch (oErr) {
                outPrint(oErr, ".createList", this);
            }
            return null;
        },
        getCollectionNode: function(obj, UIForm) {
            try {
                if (obj && UIForm) {
                    var collectionPath = $R(obj).getPathNode(getAttMandatory(obj, "collectionPath")), xmlListDomain = ListBox.getCollectionXMLCache(UIForm, obj);
                    if (xmlListDomain) {
                        return getNodes(xmlListDomain, replaceClassName(collectionPath));
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".getCollectionNode", this);
            }
            return null;
        },
        onClickCheckBox: function(obj) {
            try {
                if (obj) {
                    var listBox = $(obj.id.split(".")[0]), UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(obj);
                    if (obj.checked) {
                        this.checkOn(obj, listBox, UIForm);
                    } else {
                        this.checkOff(obj, listBox, UIForm);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".onClickCheckBox", this);
            }
        },
        checkOn: function(checkBox, obj, UIForm, validate, syncnow) {
            if (typeof validate === "undefined") validate = true;
            if (typeof syncnow === "undefined") syncnow = true;
            if (checkBox && obj && UIForm) {
                var selectedIndex = checkBox.getAttribute("selectedIndex"), xmlListDomain = ListBox.getCollectionXMLCache(UIForm, obj), objXML = cloneObjXML(UIForm.getParams(getAttMandatory(obj, "params")));
                if (xmlListDomain != null && objXML && toInt(selectedIndex) > -1) {
                    var path = getAtt(obj, "node"), optionValue = getAttMandatory(obj, "optionValue"), optionValueRef = getAttMandatory(obj, "optionValueRef");
                    if (path == null || path === "") {
                        path = getStringPath(objXML, optionValue, "", "");
                    }
                    path = path.replaceAll("###", "@");
                    var pathFatherNode = createPathFatherNode(path);
                    var fatherNode = XML.getSingleNode(objXML, pathFatherNode), nodeOption = getNodes(objXML, path);
                    if (nodeOption && nodeOption.length > 0) {
                        for (var i = 0; i < nodeOption.length; i++) {
                            if (parseInt(nodeOption[i].getAttribute("selectedIndex"), 10) !== parseInt(selectedIndex, 10)) {
                                fatherNode.removeChild(nodeOption[i]);
                            }
                        }
                        objXML = $R(obj).changeNdName(objXML);
                        compressEvalRsisAll(getAttFuncDeveloper(obj, "afterProcessParser"), obj, objXML, xmlListDomain);
                        this.addElementNodeInListDomain(obj, UIForm, xmlListDomain, objXML);
                        if (validate) ListBoxRsis.checkAllValidate(obj, UIForm);
                        $R(obj).execDev([ objXML, xmlListDomain ]);
                        var on_change = getAttFuncDeveloper(obj, "on_change");
                        if (on_change != null && on_change !== "") {
                            var valueKey = getNodeAttributes(objXML, optionValue), objNode = getNodes(objXML, path);
                            compressEvalRsisAll(on_change, obj, UIForm, objNode);
                        }
                        if (syncnow) this.syncToDomain(obj, UIForm);
                    }
                }
            }
        },
        checkOff: function(checkBox, obj, UIForm, validate, syncnow) {
            if (typeof validate === "undefined") validate = true;
            if (typeof syncnow === "undefined") syncnow = true;
            if (checkBox && obj && UIForm) {
                var selectedIndex = checkBox.getAttribute("selectedIndex"), xmlListDomain = ListBox.getCollectionXMLCache(UIForm, obj), objXML = cloneObjXML(UIForm.getParams(getAttMandatory(obj, "params")));
                if (xmlListDomain != null && objXML && parseInt(selectedIndex, 10) > -1) {
                    var valueToCheck = obj.getAttribute("valueToCheck"), collectionPath = getAttMandatory(obj, "collectionPath"), argsCollectionPath = collectionPath.split("@"), xQueryIdent = checkBox.value, optionValueSearch = getAttMandatory(obj, "optionValueSearch"), argsOptionValueSearch = optionValueSearch.split("@");
                    var nodesObjXML = getNodes(objXML, argsOptionValueSearch[0] + "[@selectedIndex='" + selectedIndex + "']");
                    if (nodesObjXML && nodesObjXML.length > 0) {
                        nodesObjXML[0].setAttribute(valueToCheck, "0");
                    }
                    var isChildNodeKey = false, xpathQuery = xQueryIdent.split("[")[0], optionValueRef = getAttMandatory(obj, "optionValueRef"), argsIdent = optionValueRef.split(",");
                    xpathQuery = xpathQuery.replaceAll("[", "");
                    if (argsIdent && argsIdent.length > 1 || xpathQuery != null && xpathQuery !== "") {
                        isChildNodeKey = true;
                    }
                    argsCollectionPath[0] = replaceClassName(argsCollectionPath[0]);
                    var collection = getNodes(xmlListDomain, argsCollectionPath[0] + xQueryIdent.replaceAll("", "'"));
                    if (collection && collection.length > 0) {
                        var xpathFather = createPathFatherNode(argsCollectionPath[0]);
                        xpathFather = replaceClassName(xpathFather);
                        var fatherNode = XML.getSingleNode(xmlListDomain, xpathFather.replaceAll("###", "@")), node = collection[0];
                        if (isChildNodeKey) node = collection[0].parentNode;
                        if (node != null) {
                            fatherNode.removeChild(node);
                        }
                    }
                }
                if (validate) this.checkAllValidate(obj, UIForm);
                if (syncnow) this.syncToDomain(obj, UIForm);
            }
        },
        addElementNodeInListDomain: function(obj, UIForm, xmlListDomain, objXML) {
            try {
                if (obj) {
                    var UIContext = $R.UIContext.get(obj), gtMdy = getAttMandatory;
                    var compositeKey = obj.getAttribute("compositeKey") == "true" ? true : false, collectionPath = gtMdy(obj, "collectionPath"), argsCollectionPath = collectionPath.split("@"), optionValueRefSearch = gtMdy(obj, "optionValueRefSearch"), argsOptionValueRefAC = optionValueRefSearch.split("@"), objNodeAutoComplete = getNodes(objXML, argsOptionValueRefAC[0]);
                    if (objNodeAutoComplete && objNodeAutoComplete.length > 0) {
                        var optionValueRef = gtMdy(obj, "optionValueRef"), optionTextRef = gtMdy(obj, "optionTextRef"), argsOptionValueRef = optionValueRef.split("@"), argsOptionTextRef = optionTextRef.split("@");
                        var valueToCheck = getAtt(obj, "valueToCheck");
                        if (valueToCheck == null || valueToCheck == "") {
                            valueToCheck = "indSelecionado";
                        }
                        var pathFatherNode = createPathFatherNode(argsCollectionPath[0]);
                        argsCollectionPath[0] = replaceClassName(argsCollectionPath[0]);
                        var collection = getNodes(xmlListDomain, argsCollectionPath[0]);
                        if (!(collection && collection.length > 0)) {
                            var xmlCollection = createObjXMLByXPath(pathFatherNode.replaceAll("###", "@"), 0), firstChild = xmlCollection.documentElement.firstChild;
                            if (xmlCollection && firstChild) {
                                var fatherNodeDomain = xmlListDomain.documentElement.selectSingleNode(ROOT_NODE);
                                if (fatherNodeDomain) {
                                    if (firstChild) {
                                        Sarissa.clearChildNodes(fatherNodeDomain);
                                    }
                                    Sarissa.appendChildNode(fatherNodeDomain, firstChild);
                                    pathFatherNode = replaceClassName(pathFatherNode);
                                    pathFatherNode = pathFatherNode.replaceAll("###", "@");
                                    var fatherNode = XML.getSingleNode(xmlListDomain, pathFatherNode);
                                    if (fatherNode) {
                                        fatherNode.setAttribute("className", "java.util.ArrayList");
                                        objNodeAutoComplete[0].setAttribute(valueToCheck, "1");
                                        Sarissa.appendChildNode(fatherNode, objNodeAutoComplete[0]);
                                    }
                                }
                            }
                        } else {
                            pathFatherNode = replaceClassName(pathFatherNode);
                            pathFatherNode = pathFatherNode.replaceAll("###", "@");
                            var fatherNode = XML.getSingleNode(xmlListDomain, pathFatherNode);
                            if (fatherNode) {
                                fatherNode.setAttribute("className", "java.util.ArrayList");
                                var xpathIdent = this.createCompositeKey(obj, objNodeAutoComplete, 0), argsSplit = xpathIdent.split("["), findChildNodes = argsSplit && argsSplit.length > 0 && argsSplit[0] !== "" ? true : false;
                                var nodeSelected = getNodes(xmlListDomain, argsCollectionPath[0] + xpathIdent);
                                if (nodeSelected && nodeSelected.length > 0) {
                                    for (var i = 0; i < nodeSelected.length; i++) {
                                        var node = nodeSelected[i];
                                        if (node) {
                                            if (findChildNodes) {
                                                var hasNodeElement = getChildNodes(node.parentNode, xpathIdent);
                                                if (hasNodeElement && hasNodeElement.length > 0) {
                                                    objNodeAutoComplete[0].setAttribute(valueToCheck, "1");
                                                    Sarissa.replaceChildNode(fatherNode, objNodeAutoComplete[0], node.parentNode);
                                                    break;
                                                }
                                            } else {
                                                objNodeAutoComplete[0].setAttribute(valueToCheck, "1");
                                                Sarissa.replaceChildNode(fatherNode, objNodeAutoComplete[0], node);
                                                break;
                                            }
                                        }
                                    }
                                } else {
                                    objNodeAutoComplete[0].setAttribute(valueToCheck, "1");
                                    Sarissa.appendChildNode(fatherNode, objNodeAutoComplete[0]);
                                }
                            }
                        }
                        compressEvalRsisAll(getAttFuncDeveloper(obj, "beforeProcessParser"), obj, objXML, xmlListDomain);
                        UIForm = ListBox.setCollectionXMLCache(obj, UIForm, xmlListDomain);
                        UIContext.setUIForms(UIForm.getForm().id, UIForm);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".addElementNodeInListDomain", ListBoxRsis);
            }
        },
        createCompositeKey: function(obj, collection, index) {
            try {
                if (obj && collection) {
                    if (typeof index === "undefined") index = 0;
                    var compositeKey = obj.getAttribute("compositeKey") == "true" ? true : false, optionValueRef = getAttMandatory(obj, "optionValueRef"), optionTextRef = getAttMandatory(obj, "optionTextRef"), argsOptionValueRef = optionValueRef.split("@"), argsOptionTextRef = optionTextRef.split("@"), identValue = "";
                    if (compositeKey) {
                        identValue = "";
                        var strArgsIdent = optionValueRef.split(",");
                        if (strArgsIdent && strArgsIdent.length > 0) {
                            identValue = createIndexKey(strArgsIdent, collection[index]);
                        } else {
                            var valor = getValorIdent(argsOptionValueRef, collection[index]);
                            identValue = getXPathIdent(argsOptionValueRef) + "[@" + argsOptionValueRef[1] + "='" + valor + "']";
                        }
                    } else {
                        var valor = getValorIdent(argsOptionValueRef, collection[index]);
                        identValue = getXPathIdent(argsOptionValueRef) + "[@" + argsOptionValueRef[1] + "='" + valor + "']";
                    }
                    return identValue;
                }
            } catch (oErr) {
                outPrint(oErr, ".createCompositeKey", this);
            }
            return null;
        },
        syncToDomain: function(obj, UIForm) {
            var thiz = this;
            try {
                if (obj) {
                    if (obj && UIForm) {
                        var UIContext = $R.UIContext.get(obj);
                        valueToCheck = obj.getAttribute("valueToCheck"), collectionPath = getAttMandatory(obj, "collectionPath"), 
                        argsCollectionPath = collectionPath.split("@");
                        var xmlListDomain = cloneObjXML(ListBox.getCollectionXMLCache(UIForm, obj));
                        if (xmlListDomain) {
                            var xpathFather = createPathFatherNode(argsCollectionPath[0]);
                            xpathFather = replaceClassName(xpathFather);
                            var fatherNode = XML.getSingleNode(xmlListDomain, xpathFather.replaceAll("###", "@"));
                            argsCollectionPath[0] = replaceClassName(argsCollectionPath[0]);
                            var collection = getNodes(xmlListDomain, argsCollectionPath[0] + "[@" + valueToCheck + "='0']");
                            if (collection && collection.length > 0) {
                                for (var i = 0; i < collection.length; i++) {
                                    fatherNode.removeChild(collection[i]);
                                }
                            }
                            var domainXML = getDomainXML(obj, UIForm), xml = obj.getAttribute("xml"), xpathFatherDomian = xml != null && xml !== "" ? "/" + argsCollectionPath[0].split("/")[1] : UIForm.getXPath();
                            var fatherNodeDomain = XML.getSingleNode(domainXML, xpathFatherDomian);
                            if (fatherNodeDomain && fatherNode) {
                                var xpathChildDomian = xml != null && xml !== "" ? "" : UIForm.getXPath(), nodeListDomain = XML.getSingleNode(domainXML, xpathChildDomian + xpathFather.replaceAll("###", "@"));
                                if (nodeListDomain && nodeListDomain.parentNode) {
                                    Sarissa.replaceChildNode(nodeListDomain.parentNode, fatherNode, nodeListDomain);
                                } else {
                                    Sarissa.appendChildNode(fatherNodeDomain, fatherNode);
                                }
                                Crud.savedNode(UIForm);
                            } else {
                                if (fatherNodeDomain && !fatherNode) {
                                    var xpathChildDomian = xml != null && xml !== "" ? "" : UIForm.getXPath(), collection = getNodes(domainXML, xpathChildDomian + xpathFather.replaceAll("###", "@"));
                                    if (collection && collection.length > 0) {
                                        for (var i = 0; i < collection.length; i++) {
                                            fatherNodeDomain.removeChild(collection[i]);
                                        }
                                    }
                                    Crud.savedNode(UIForm);
                                }
                            }
                            var optionValueRef = getAttMandatory(obj, "optionValueRef"), argsIdent = optionValueRef.split(",");
                            argsOptionValueRef = argsIdent && argsIdent.length > 1 ? argsIdent[0].split("@") : optionValueRef.split("@");
                            var xpathref = argsCollectionPath[0].replaceAll("###", "@") + argsOptionValueRef[0].replaceAll("###", "@");
                            setDomainXML(obj, UIForm, domainXML, xpathref);
                            compressEvalRsisAll(getAttFuncDeveloper(obj, "onclickConfirmButton"), obj, UIForm, domainXML);
                            UIContext.setUIForms(UIForm.getForm().id, UIForm);
                        }
                    }
                    xmlToListBox(obj);
                }
            } catch (oErr) {
                outPrint(oErr, ".syncToDomain", thiz);
            }
        },
        checkAll: function(object) {
            try {
                if (object) {
                    object.value = object.value === "off" ? "on" : "off";
                    var obj = $(object.id.split(".")[0]), UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(object);
                    if (obj && UIForm) {
                        var collectionCheck = this.getCheckBox(obj);
                        if (collectionCheck && collectionCheck.length > 0) {
                            var isChecked = object.value === "on" ? true : false, isCheck = isChecked == true ? "1" : "0", i = 0, maxI = collectionCheck.length;
                            for (;i < maxI; i++) {
                                collectionCheck[i].checked = isChecked;
                                if (isChecked) {
                                    this.checkOn(collectionCheck[i], obj, UIForm, false, false);
                                } else {
                                    this.checkOff(collectionCheck[i], obj, UIForm, false, false);
                                }
                            }
                            this.checkAllValidate(obj, UIForm);
                            this.syncToDomain(obj, UIForm);
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".checkAll", this);
            }
        },
        checkAllValidate: function(obj, UIForm) {
            var thiz = this;
            try {
                if (obj && UIForm) {
                    var checkAll = $(obj.id + ".checkAll");
                    if (checkAll) {
                        setDataUICpt(obj, checkAll);
                        var valueToCheck = obj.getAttribute("valueToCheck"), countNotChecked = 0, collectionPath = getAttMandatory(obj, "collectionPath"), argsCollectionPath = collectionPath.split("@"), xmlListDomain = ListBox.getCollectionXMLCache(UIForm, obj), objXML = UIForm.getParams(obj.getAttribute("params")), pathString = this.getPathNode(obj, UIForm), collection = getNodes(objXML, pathString.replaceAll("###", "@")), maxIt = collection && collection.length > 0 ? collection.length : 0;
                        argsCollectionPath[0] = replaceClassName(argsCollectionPath[0]);
                        if (maxIt > 0) {
                            for (var i = 0; i < maxIt; i++) {
                                var identValue = _createCompositeKey(obj, collection, i), checkItem = false;
                                if (identValue) {
                                    var nodeSelected = getNodes(xmlListDomain, argsCollectionPath[0] + identValue);
                                    if (nodeSelected && nodeSelected.length > 0) {
                                        checkItem = true;
                                        collection[i].setAttribute(valueToCheck, "1");
                                    }
                                }
                                if (!checkItem) {
                                    countNotChecked++;
                                }
                            }
                        } else {
                            countNotChecked++;
                        }
                        if (countNotChecked > 0) {
                            checkAll.checked = false;
                            checkAll.value = "off";
                        } else {
                            checkAll.checked = true;
                            checkAll.value = "on";
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".checkAllValidate", this);
            }
        },
        getCheckBox: function(obj) {
            try {
                var checks = null, iframe = $getIframeByObject(obj);
                if (iframe != null) {
                    if (iframe.contentDocument) {
                        checks = iframe.contentDocument.getElementsByName("listBox.checkbox");
                    } else if (iframe.contentWindow) {
                        checks = iframe.contentWindow.document.getElementsByName("listBox.checkbox");
                    }
                } else {
                    checks = $$("listBox.checkbox");
                }
            } catch (oErr) {
                outPrint(oErr, ".getCheckBox", this);
            }
            return checks;
        }
    };
    var _AutoCompleteInstance = $R.extend({}, AutoComplete);
    ListBox = {
        EVENT_KEY_PRESS: null,
        searchOpen: function(object, evt) {
            return this.openSearch(object, evt, "searchOpen");
        },
        viewOptions: function(object, evt) {
            return this.openSearch(object, evt, "viewOptions");
        },
        hide: function(obj, evt) {
            try {
                if (!evt) evt = $R.events.getEvent(evt);
                if (obj && (isOnClickEvent(evt) || evt.type == "scroll")) {
                    var formId = getAttMandatory(obj, "id").split(":")[0];
                    if (formId) {
                        var UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(formId);
                        if (UIForm != null) {
                            var cpts = UIForm.getUIComponent("listBox");
                            if (typeof cpts != "undefined") {
                                for (var it1 = 0; it1 < cpts.length; it1++) {
                                    optionHiddenAC(cpts[it1]);
                                }
                            }
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".hide", this);
            }
            return this;
        },
        openSearch: function(object, evt, ORIGEM) {
            try {
                if (object) {
                    var objId = object.id, evt = $R.events.getEvent(evt), args = objId.split("."), stringObject = args[0], stringButton = args[1], selfRsis = ListBoxRsis;
                    this.OnclickButton = stringButton === "btnSearch" ? true : false;
                    var obj = $(stringObject), UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(object);
                    if (ORIGEM === "viewOptions") {
                        var objXML = UIForm.getParams(obj.getAttribute("params"));
                        if (this.OnclickButton === true && !objXML && !selfRsis.validateChars(obj, evt)) {
                            return false;
                        }
                    } else if (!selfRsis.validateChars(obj, evt)) {
                        return false;
                    }
                    selfRsis.setCollection(obj, null);
                    this.setCollectionXMLCache(obj, UIForm, null);
                    obj.className = $R(obj).isMandatory(UIForm.state) ? "ilBxReq" : "ilBx";
                    var listHolder = $R(obj).getListHolder(evt);
                    if (!listHolder || listHolder && listHolder.style.display === "none") {
                        selfRsis.search(obj, evt);
                    } else {
                        $R(listHolder).hide();
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".openSearch", this);
            }
        },
        clearListBox: function(object) {
            try {
                if (object) {
                    this.clearXMLListBox($(object.id.split(".")[0]));
                }
            } catch (oErr) {
                outPrint(oErr, ".clearListBox", ListBoxRsis);
            }
            return this;
        },
        clearXMLListBox: function(obj) {
            try {
                if (obj) {
                    var UIContext = $R.UIContext.get(obj), UIForm = UIContext.getUIForm(obj);
                    if (UIForm) {
                        var domainXML = getDomainXML(obj, UIForm);
                        if (domainXML) {
                            var textoListBox = "", mask = $R(obj).getMask(), collectionPath = getAttMandatory(obj, "collectionPath"), argsCollectionPath = collectionPath.split("@");
                            argsCollectionPath[0] = replaceClassName(argsCollectionPath[0]);
                            var xpathFather = createPathFatherNode(argsCollectionPath[0]), xpathDomain = UIForm.getXPath(), xml = obj.getAttribute("xml");
                            if (xml != null && xml !== "") {
                                xpathDomain = "";
                            }
                            var collection = getNodes(domainXML, xpathDomain + xpathFather);
                            if (collection && collection.length > 0) {
                                Sarissa.clearChildNodes(collection[0]);
                                Crud.savedNode(UIForm);
                            }
                            if (isRemoteSearch(obj)) {
                                UIForm.setParams(getAttMandatory(obj, "params"), null, false);
                            }
                            this.setCollectionXMLCache(obj, UIForm, null);
                            if (obj) {
                                obj.value = "";
                            }
                            $R(obj).clearExc(UIForm, $(obj.id + ".clearButton"));
                            UIContext.setUIForms(UIForm.getForm().id, UIForm);
                        } else {
                            obj.value = "";
                        }
                        obj.setAttribute("textCached", null);
                        $R(obj).setHint();
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".clearXMLListBox", ListBoxRsis);
            }
        },
        getCollectionXMLCache: function(UIForm, obj) {
            if (UIForm && obj && obj.id) {
                return UIForm.getParams(obj.id + ListBoxRsis.CACHE_LIST_BOX);
            }
            return null;
        },
        setCollectionXMLCache: function(obj, UIForm, xmlListDomain) {
            try {
                if (obj && UIForm) {
                    var UIContext = $R.UIContext.get(arguments[0]);
                    if (xmlListDomain == null) {
                        var collectionPath = replaceClassName(getAttMandatory(obj, "collectionPath")), xmlCloneDomain = cloneObjXML(getDomainXML(obj, UIForm)), xpathDomain = UIForm.getXPath(), xpathCollection = xpathDomain + "/" + collectionPath.split("/")[1], xml = obj.getAttribute("xml");
                        if (xml != null && xml !== "") {
                            xpathDomain = "/" + collectionPath.split("/")[1];
                            xpathCollection = "" + xpathDomain + "/" + collectionPath.split("/")[2];
                        }
                        if (xml != null && xml !== "" && this.isNodePathCollectionPath(xmlCloneDomain, xpathCollection)) {
                            xmlListDomain = xmlCloneDomain;
                        } else {
                            var xmlListDomain = XML.broke(xmlCloneDomain, xpathCollection);
                            if (!xmlListDomain) {
                                var xmlListDomain = createObjXMLByXPath(xpathCollection.replaceAll("###", "@"), 1), firstChild = xmlListDomain.documentElement.firstChild;
                                if (xmlListDomain && firstChild) {
                                    var fatherNodeDomain = XML.getSingleNode(xmlCloneDomain, ROOT_NODE + xpathDomain);
                                    if (fatherNodeDomain) {
                                        Sarissa.appendChildNode(fatherNodeDomain, firstChild);
                                    }
                                }
                            }
                        }
                    }
                    UIForm.setParams(obj.id + ListBoxRsis.CACHE_LIST_BOX, xmlListDomain, false);
                    UIContext.setUIForms(UIForm.getForm().id, UIForm);
                }
            } catch (oErr) {
                outPrint(oErr, ".setCollectionXMLCache", ListBoxRsis);
            }
            return UIForm;
        },
        isNodePathCollectionPath: function(xmlCloneDomain, xpathCollection) {
            if (xmlCloneDomain && xpathCollection !== "") {
                var nodes = getNodes(xmlCloneDomain, xpathCollection);
                if (nodes && nodes.length > 0) {
                    return true;
                }
            }
            return false;
        },
        createMenu: function(obj) {
            var listHolder = $R(obj).getListHolder();
            if (listHolder == null) {
                listHolder = $R(obj).createListHolder();
            }
            if (listHolder) {
                $R(listHolder).hide();
                listHolder.innerHTML = this.createHtml(obj);
                this.position(obj, listHolder);
            }
            return listHolder;
        },
        createHtml: function(obj) {
            var $win = UtilRsis.getParentWindow(obj);
            var html = '<div id="pLbx" listBoxElement="true">' + ' <div class="lBx">' + '  <div class="chkAllLbx" listBoxElement="true">' + '\t<input type="checkbox" id="' + obj.id + '.checkAll" value="off" onclick="' + $win + 'ListBoxRsis.checkAll(this);" listBoxElement="true"/>' + '\t\t<label listBoxElement="true" for="' + obj.id + '.checkAll">Selecionar Todos</label>' + "  </div>" + '  <div class="cteLbx" listBoxElement="true">' + '\t<ul id="' + obj.id + '.listBox" listBoxElement="true"></ul>' + "  </div>" + " </div>" + "</div>";
            return html;
        },
        position: function(obj, listHolder) {
            if (obj && listHolder) {
                var lst = listHolder.style, _t_ = $(obj.id.split("#")[0] + ".container"), _wh = $R(obj).getListHolderPosition();
                var wg = hg = 0, dialogUi = $(obj.id.split("#")[0]);
                if (dialogUi) {
                    wg = dialogUi.offsetWidth;
                    hg = dialogUi.offsetHeight;
                }
                if (wg == GetWidth() && hg == GetHeight()) {
                    if (_wh.top != null && _wh.left != null) {
                        var posY = findPosY(obj) + obj.offsetHeight - _wh.top, posYListHolder = posY + ($R.isUndefined(listHolder.firstChild) ? listHolder.firstChild.clientHeight : 0);
                        if (posYListHolder > _t_.clientHeight) {
                            lst.top = posY - ($R.isUndefined(listHolder.firstChild) ? listHolder.firstChild.clientHeight : 0) - obj.offsetHeight + "px";
                        } else lst.top = posY + "px";
                        lst.left = findPosX(obj) - _wh.left + "px";
                    } else {
                        var posY = findPosY(obj) + obj.offsetHeight, posYListHolder = posY + ($R.isUndefined(listHolder.firstChild) ? listHolder.firstChild.clientHeight : 0);
                        if (posYListHolder > _t_.clientHeight) {
                            lst.top = posY - ($R.isUndefined(listHolder.firstChild) ? listHolder.firstChild.clientHeight : 0) - obj.offsetHeight + "px";
                        } else lst.top = posY + "px";
                        lst.left = findPosX(obj) + "px";
                    }
                }
            }
        }
    };
    ListBox = $R.extend(_AutoCompleteInstance, ListBox, {
        clickEmulateWindow: function(obj, evt) {
            this.startDialog(obj, ListBoxRsis);
            return this.openSearch(obj, evt, "searchOpen");
        },
        emulateWindow: function(obj, evt) {
            this.startDialog(obj, ListBoxRsis);
        },
        _filterMenuItems: function(UIForm, obj, pathString, textoDigitado, searchFull, evt, that, acRsis) {
            try {
                if (!acRsis) acRsis = ListBoxRsis;
                if (!that) that = ListBox;
                if (!evt) evt = acRsis.eventSelected;
                var listHolder = that.createMenu(obj);
                if (obj.value !== null && obj.value.length === 0 && !searchFull) {
                    obj.className = $R(obj).isMandatory(UIForm.state) ? "ilBxReq" : "ilBx";
                    if (listHolder) {
                        $R(listHolder).hide();
                    }
                    return;
                }
                var $win = UtilRsis.getParentWindow(obj), pattern = $R(obj).getMask(), textoDigitado = obj.value, objXML = UIForm.getParams(obj.getAttribute("params")), match = false, compositeKey = obj.getAttribute("compositeKey") == "true" ? true : false, valueToCheck = getAtt(obj, "valueToCheck"), objectId = obj.id;
                if (textoDigitado != null && textoDigitado !== "") {
                    textoDigitado = textoDigitado.replaceAll("%", "");
                }
                var newSelectBox = acRsis.createList(obj, objXML, pathString), invalid = "_invalid";
                if (newSelectBox != null && (textoDigitado !== "" || searchFull == true)) {
                    if (pattern != null && pattern !== "" && !getMapPattern(pattern)) {
                        textoDigitado = unformatField(obj.value, pattern);
                    }
                    if (textoDigitado != null && textoDigitado !== "" && searchFull == true) {
                        textoDigitado = "";
                    }
                    var contentText = "", collection = getNodes(objXML, pathString.replaceAll("###", "@")), countSelectedIndex = 0, a = 0, mxL = newSelectBox.length, maxlgth = 1;
                    var regExpText = "";
                    if (textoDigitado != null && textoDigitado !== "") {
                        if (isRemoteSearch(obj)) {
                            regExpText = new RegExp(textoDigitado.toLowerCase().replace(" ", "|"));
                        } else {
                            regExpText = new RegExp(textoDigitado.toLowerCase());
                        }
                    }
                    if (valueToCheck == null || valueToCheck === "") {
                        valueToCheck = "indSelecionado";
                    }
                    var _menu = null;
                    if (listHolder) {
                        _menu = $(obj.id + ".listBox");
                        Sarissa.clearChildNodes(_menu);
                    }
                    for (;a < mxL; a++) {
                        var selBox = newSelectBox[a];
                        var ctValue1 = selBox[0], txtSuggestion1 = selBox[1], ctText2 = selBox[2], ctText = selBox[3], ctValue = selBox[4], txtSuggestion = selBox[5], checkItem = selBox[6];
                        var searchedText = txtSuggestion.toLowerCase();
                        if (MaskRsis.isDate(pattern) || MaskRsis.isMesAno(pattern)) {
                            searchedText = unformatField(searchedText, pattern);
                        }
                        if (txtSuggestion.length > maxlgth) {
                            maxlgth = txtSuggestion.length;
                        }
                        if (ctValue != null && (searchedText.search(regExpText) >= 0 || searchFull == true && textoDigitado === "")) {
                            if (collection[a]) {
                                collection[a].setAttribute(valueToCheck, checkItem ? 1 : 0);
                                collection[a].setAttribute("selectedIndex", countSelectedIndex);
                            }
                            that.createItem(obj, _menu, $win, ctValue, ctText, txtSuggestion, checkItem, countSelectedIndex);
                            match = true;
                            countSelectedIndex++;
                        }
                    }
                    if (match) {
                        that.show(obj, listHolder, maxlgth, mxL);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "._filterMenuItems", this);
            } finally {
                that.OnclickEvent = false;
                that.OnclickButton = false;
            }
        },
        _filter: function(UIForm, obj, pathString, textoDigitado, searchFull, evt, that, selfRsis) {
            try {
                if (!evt) {
                    evt = selfRsis.eventSelected;
                }
                var listHolder = that.createDialog(), _isRemoteSearch = isRemoteSearch(obj), _menu = $R.$(".autocomplete-suggestions")[0];
                if (_menu) {
                    that._updatePanelMobile(listHolder, _isRemoteSearch);
                    _menu = that._updateCheckAll(obj, listHolder);
                    that.closePaneHeader(_isRemoteSearch);
                    Sarissa.clearChildNodes(_menu);
                } else {
                    listHolder = that.startDialog(obj, selfRsis);
                    _menu = $R.$(".autocomplete-suggestions")[0];
                }
                var $win = UtilRsis.getParentWindow(obj), pattern = $R(obj).getMask(), textoDigitado = obj.value, valueToCheck = getAtt(obj, "valueToCheck"), objXML = UIForm.getParams(obj.getAttribute("params")), match = false, objectId = obj.id;
                if (textoDigitado !== null && textoDigitado !== "") {
                    textoDigitado = textoDigitado.replaceAll("%", "");
                }
                var newSelectBox = selfRsis.createList(that.getInput(obj), objXML, pathString), invalid = "_invalid", msgerror = "No foi encontrado nenhum item para a pesquisa!";
                var $msg = $R.$(".no-results");
                if (newSelectBox !== null && (textoDigitado !== "" || searchFull == true)) {
                    if (pattern !== null && pattern !== "" && !getMapPattern(pattern)) {
                        textoDigitado = unformatField(obj.value, pattern);
                    }
                    if (textoDigitado !== null && textoDigitado !== "" && searchFull == true) {
                        textoDigitado = "";
                    }
                    var contentText = "", collection = getNodes(objXML, pathString.replaceAll("###", "@")), countSelectedIndex = 0, a = 0, mxL = newSelectBox.length, maxlgth = 1, regExpText = "";
                    if (textoDigitado !== null && textoDigitado !== "") {
                        regExpText = new RegExp(textoDigitado.toLowerCase().replace(" ", "|"));
                    }
                    if (valueToCheck == null || valueToCheck === "") {
                        valueToCheck = "indSelecionado";
                    }
                    for (;a < mxL; a++) {
                        var selBox = newSelectBox[a];
                        var ctValue1 = selBox[0], txtSuggestion1 = selBox[1], ctText2 = selBox[2], ctText = selBox[3], ctValue = selBox[4], txtSuggestion = selBox[5], checkItem = selBox[6];
                        var searchedText = txtSuggestion.toLowerCase();
                        if (MaskRsis.isDate(pattern) || MaskRsis.isMesAno(pattern)) {
                            searchedText = unformatField(searchedText, pattern);
                        }
                        if (txtSuggestion.length > maxlgth) {
                            maxlgth = txtSuggestion.length;
                        }
                        if (ctValue != null && (searchedText.search(regExpText) >= 0 || searchFull == true && textoDigitado === "")) {
                            if (collection[a]) {
                                collection[a].setAttribute(valueToCheck, checkItem ? 1 : 0);
                                collection[a].setAttribute("selectedIndex", countSelectedIndex);
                            }
                            that.createItem(obj, _menu, $win, ctValue, ctText, txtSuggestion, checkItem, countSelectedIndex);
                            match = true;
                            countSelectedIndex++;
                        }
                    }
                    if (match) {
                        that._updatePanelMobile(listHolder, _isRemoteSearch);
                        if (listHolder.style.display == "none") {
                            $R(listHolder).show();
                        }
                        $msg.hide().html("");
                    } else {
                        $msg.show().html(msgerror);
                    }
                } else {
                    $msg.show().html(msgerror);
                }
            } catch (oErr) {
                outPrint(oErr, "._filter", selfRsis);
            } finally {
                that.OnclickEvent = false;
                that.OnclickButton = false;
            }
            return match;
        },
        _updateCheckAll: function(obj, listHolder) {
            $R.$(".panel-body").html(this.__templateChkAll(obj));
            return $R.$(".autocomplete-suggestions")[0];
        },
        createItem: function(obj, _menu, $win, ctValue, ctText, txtSuggestion, checkItem, countSelectedIndex) {
            var span = $R.isMobileDevice ? '<span class="glyphicon-import"></span>' : "";
            var $element = $R.$('<li tabindex="-1" name="listBox.li" listBoxElement="true">' + '<div class="li-div" listBoxElement="true"></div>' + span + "</li>");
            $element.keyup(function(event) {
                ListBoxRsis.menuselect(this, event);
                event.stopImmediatePropagation();
                event.preventDefault();
            }).click(function(event) {
                this.firstChild.firstChild.click();
            }).attr({
                id: obj.id + ".li" + countSelectedIndex,
                value: ctValue.replace(/\'/gi, "'"),
                searchText: ctText,
                selectedIndex: countSelectedIndex,
                listBoxElement: "true"
            });
            var $win = UtilRsis.getParentWindow(obj);
            var $div = $R.$("div.li-div", $element);
            var $checkbox = $R.$('<input type="checkbox"/>');
            $checkbox.click(function(event) {
                ListBoxRsis.onClickCheckBox(this);
                event.stopImmediatePropagation();
            }).attr({
                name: "listBox.checkbox",
                id: obj.id + ".checkbox" + countSelectedIndex,
                value: ctValue.replace(/\'/gi, "'"),
                checked: checkItem,
                searchText: ctText,
                selectedIndex: countSelectedIndex,
                listBoxElement: "true"
            });
            if ($R.isMobileDevice) {
                $checkbox.css({
                    "margin-right": "10px",
                    height: "1.3em",
                    width: "1.3em"
                });
            }
            $checkbox.appendTo($div);
            var $label = $R.$('<span listBoxElement="true">' + txtSuggestion + "</span>");
            $label.appendTo($div);
            $element.appendTo(_menu);
        },
        _createTemplate: function _templateListBox(obj) {
            var $win = UtilRsis.getParentWindow(obj);
            var html = '\t<div class="menu-panel drop-down" style="top:100%;height:auto">' + '\t  \t<div class="panel-header">' + '\t\t\t<button class="btn-close-search" type="button"><span class="glyphicon-arrow-left"></span></button>' + '\t\t\t<input id="' + obj.id + '.search-term" autocomplete="off" type="text" value="" placeholder="Pesquisar...">' + '\t\t\t<button class="btn-clear-search" style="display:none" type="button" listBoxElement="true"><span class="glyphicon-remove" listBoxElement="true"></span></button>' + "\t  \t</div>" + '\t\t<div class="panel-body">' + ListBox.__templateChkAll(obj) + "\t\t</div>" + "\t</div>";
            return html;
        },
        __templateChkAll: function(obj) {
            var $win = UtilRsis.getParentWindow(obj);
            var html = '<div class="panel-body-contents clearfix">' + '\t<div class="chkAllLbx chkall-mobile" listBoxElement="true">' + '\t\t<input type="checkbox" class="chkall-mobile-ipt" roule="checkall" id="' + obj.id + '.checkAll" onclick="' + $win + 'ListBoxRsis.checkAll(this);" value="off" listBoxElement="true"/>' + '\t\t<label for="' + obj.id + '.checkAll" listBoxElement="true" class="chkall-mobile-lbl">Selecionar todos da lista</label>' + "\t</div>" + '\t<div class="results">' + '\t\t<ul id="' + obj.id + '.search-term.selector" class="autocomplete-suggestions"></ul>' + '\t\t\t<div class="no-results"></div>' + "\t</div>" + "</div>";
            return html;
        },
        getStringConfigCpts: function() {
            var lista = AutoComplete.getStringConfigCpts();
            return lista.concat([ "collectionPath", "optionValueSearch", "optionTextSearch", "optionValueRefSearch", "valueToCheck" ]);
        },
        setDimentions: function(obj, listHolder, maxlgth, mxL) {
            if (!obj || !listHolder) return;
            var objectId = obj.id, sel = $(objectId + ".selector"), width = $R.$(obj).width(), btnSearch = $(obj.id + ".btnSearch"), clrBtn = $(obj.id + ".clearButton"), addButton = $(obj.id + ".addButton"), widthresults = $R.$(obj).attr("widthresults"), widthButton = 22;
            if (widthresults) {
                width = widthresults;
            } else {
                if (btnSearch && btnSearch.style.display != "none") width += widthButton;
                if (clrBtn && clrBtn.style.display != "none") width += widthButton;
                if (addButton && addButton.style.display != "none") width += 20;
            }
            $R.$(listHolder).width(width);
            if (sel) {
                if ($R.isMobileDevice) {
                    sel.style.display = "block";
                    sel.style.width = "100%";
                    sel.style.fontSize = "1.2em";
                    sel.style.padding = "1em 2em";
                } else {
                    $R.$(sel).width(width - 1);
                }
            }
            var lst = listHolder.style, _t_ = $(obj.id.split("#")[0] + ".container"), _wh = $R(obj).getListHolderPosition();
            var wg = hg = 0;
            var dialogUi = $(obj.id.split("#")[0]);
            if (dialogUi) {
                wg = dialogUi.offsetWidth;
                hg = dialogUi.offsetHeight;
            }
            if (wg == GetWidth() && hg == GetHeight()) {
                if (_wh.top !== null && _wh.left !== null) {
                    var posY = findPosY(obj) + obj.offsetHeight - _wh.top, posYListHolder = posY + listHolder.firstChild.clientHeight;
                    if (posYListHolder > _t_.clientHeight) {
                        lst.top = posY - listHolder.firstChild.clientHeight - obj.offsetHeight + "px";
                    } else lst.top = posY + "px";
                    lst.left = findPosX(obj) + 1 - _wh.left + "px";
                } else {
                    var posY = findPosY(obj) + obj.offsetHeight, posYListHolder = posY + listHolder.firstChild.clientHeight;
                    if (posYListHolder > _t_.clientHeight) {
                        lst.top = posY - listHolder.firstChild.clientHeight - obj.offsetHeight + "px";
                    } else lst.top = posY + "px";
                    lst.left = findPosX(obj) + 1 + "px";
                }
            }
        }
    });
})(Rsis);

function replaceClassName(s) {
    return s ? s.replaceAll("[###className='java.util.ArrayList']", "") : null;
}

function renderListBox(obj, state) {
    try {
        if (obj) {
            var nodes = null, $win = UtilRsis.getParentWindow(obj), sEvent = getStringEvent(obj), lb = ListBoxRsis;
            if ($R(obj).isRenderAll()) {
                var isEditable = $R(obj).isEditable(state), isMandatory = $R(obj).isMandatory(state);
                lb.renderInput(obj, state, isEditable, isMandatory, $win, sEvent);
                $R(obj).visRestricted(state);
                lb.renderButtons(obj, isEditable, isMandatory, $win, sEvent);
                nodes = xmlToListBox(obj);
            }
            $R(obj).cssHelp().setTabIdx(state).renderDev(nodes, arguments[2]);
            obj = null;
        }
    } catch (oErr) {
        outPrint(oErr, "renderListBox", ListBoxRsis);
    }
}

function xmlToListBox(obj) {
    try {
        var nodes = null;
        if (obj) {
            var UIContext = Rsis.UIContext.get(obj), UIForm = UIContext.getUIForm(obj);
            if (UIForm) {
                var domainXML = getDomainXML(obj, UIForm);
                if (domainXML) {
                    var textoListBox = "", mask = $R(obj).getMask(), xpathDomain = UIForm.getXPath(), xml = obj.getAttribute("xml"), gtMty = getAttMandatory;
                    if (xml != null && xml !== "") {
                        xpathDomain = "";
                    }
                    var collectionPath = gtMty(obj, "collectionPath"), argsCollectionPath = collectionPath.split("@"), optionValueRef = gtMty(obj, "optionValueRef"), optionTextRef = gtMty(obj, "optionTextRef"), argsOptionValueRef = optionValueRef.split("@"), argsOptionTextRef = optionTextRef.split("@"), collection = getNodes(domainXML, xpathDomain + replaceClassName(argsCollectionPath[0]));
                    if (collection && collection.length > 0) {
                        var valueToCheck = getAtt(obj, "valueToCheck");
                        if (valueToCheck == null || valueToCheck === "") {
                            valueToCheck = "indSelecionado";
                        }
                        var argsXpathCollection = collectionPath.split("/"), cloneDomainXML = cloneObjXML(domainXML), i = 0, maxi = collection.length;
                        for (;i < maxi; i++) {
                            var check = collection[i].getAttribute(valueToCheck);
                            if (check !== "0") {
                                collection[i].setAttribute(valueToCheck, "1");
                                if (i > 0) {
                                    textoListBox += ", ";
                                }
                                textoListBox += concateDescription_(obj, optionTextRef, collection[i], mask);
                            }
                        }
                    }
                    obj.value = textoListBox;
                }
                UtilRsis.setHint(obj);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "xmlToListBox", ListBoxRsis);
    }
    return nodes;
}

function _createCompositeKey(obj, collection, index) {
    try {
        if (obj && collection) {
            if (typeof index === "undefined") index = 0;
            var compositeKey = obj.getAttribute("compositeKey") == "true" ? true : false, optionValueRef = getAttMandatory(obj, "optionValueRef"), optionTextRef = getAttMandatory(obj, "optionTextRef"), argsOptionValueRef = optionValueRef.split("@"), argsOptionTextRef = optionTextRef.split("@"), identValue = "";
            if (compositeKey) {
                identValue = "";
                var strArgsIdent = optionValueRef.split(",");
                if (strArgsIdent && strArgsIdent.length > 0) {
                    identValue = createIndexKey(strArgsIdent, collection[index].parentNode);
                } else {
                    var valor = "";
                    if (argsOptionValueRef[0] != null && argsOptionValueRef[0] !== "") {
                        valor = getValorIdent(argsOptionValueRef, collection[index].parentNode, index);
                    } else {
                        valor = getValorIdent(argsOptionValueRef, collection[index], index);
                    }
                    identValue = getXPathIdent(argsOptionValueRef) + "[@" + argsOptionValueRef[1] + "='" + valor + "']";
                }
            } else {
                var valor = "";
                if (argsOptionValueRef[0] != null && argsOptionValueRef[0] !== "") {
                    valor = getValorIdent(argsOptionValueRef, collection[index].parentNode, index);
                } else {
                    valor = getValorIdent(argsOptionValueRef, collection[index], index);
                }
                identValue = getXPathIdent(argsOptionValueRef) + "[@" + argsOptionValueRef[1] + "='" + valor + "']";
            }
            return identValue;
        }
    } catch (oErr) {
        outPrint(oErr, "_createCompositeKey", ListBoxRsis);
    }
    return null;
}

function _createCompositeTexts(obj, optionTextRef, node, index, mask) {
    try {
        var textoListBox = "";
        var stringArgsOptionTextRef = optionTextRef.split(",");
        if (stringArgsOptionTextRef && stringArgsOptionTextRef.length > 0) {
            var k = 0, maxK = stringArgsOptionTextRef.length;
            for (;k < maxK; k++) {
                var str = Trim(stringArgsOptionTextRef[k]);
                if (str !== "") {
                    if (str.substring(0, 1) === "'") {
                        textoListBox += str.replace(/'/g, "");
                    } else {
                        var stringPath = str.split("@")[0];
                        stringPath = stringPath.replaceAll("###", "@");
                        var stringAttribute = str.split("@")[1];
                        stringAttribute = stringAttribute.replaceAll("###", "@");
                        var attributeNode = typeof stringAttribute === "undefined" ? "" : stringAttribute;
                        if (attributeNode && attributeNode !== "") {
                            if (stringPath && stringPath !== "") {
                                stringPath = stringPath.replaceAll("###", "@");
                                var elementNodes = getChildNodes(node[index].parentNode, stringPath);
                                if (elementNodes && elementNodes.length > 0) {
                                    var vle = $R(obj).toField(getNodeValueId(elementNodes, attributeNode, index));
                                    textoListBox = textoListBox + (vle == null ? "" : vle);
                                    valor = elementNodes[index].getAttribute(attributeNode);
                                }
                            } else {
                                var vle = $R(obj).toField(getNodeValueId([ node[index] ], attributeNode, 0));
                                textoListBox = textoListBox + (vle == null ? "" : vle);
                            }
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "_createCompositeTexts", ListBoxRsis);
    }
    return textoListBox;
}

function concateDescription_(obj, optionTextRef, node, mask) {
    try {
        var textoListBox = "";
        var stringArgsOptionTextRef = optionTextRef.split(",");
        if (stringArgsOptionTextRef && stringArgsOptionTextRef.length > 0) {
            var k = 0, maxK = stringArgsOptionTextRef.length;
            for (;k < maxK; k++) {
                var str = Trim(stringArgsOptionTextRef[k]);
                if (str !== "") {
                    if (str.substring(0, 1) === "'") {
                        textoListBox += str.replace(/'/g, "");
                    } else {
                        var stringPath = str.split("@")[0];
                        stringPath = stringPath.replaceAll("###", "@");
                        var stringAttribute = str.split("@")[1];
                        stringAttribute = stringAttribute.replaceAll("###", "@");
                        var attributeNode = typeof stringAttribute === "undefined" ? "" : stringAttribute;
                        if (attributeNode && attributeNode !== "") {
                            if (stringPath && stringPath !== "") {
                                stringPath = stringPath.replaceAll("###", "@");
                                var elementNodes = getChildNodes(node, stringPath);
                                if (elementNodes && elementNodes.length > 0) {
                                    var vle = $R(obj).toField(getNodeValueId(elementNodes, attributeNode, 0));
                                    textoListBox = textoListBox + (vle == null ? "" : vle);
                                    valor = elementNodes[0].getAttribute(attributeNode);
                                }
                            } else {
                                var vle = $R(obj).toField(getNodeValueId([ node ], attributeNode, 0));
                                textoListBox = textoListBox + (vle == null ? "" : vle);
                            }
                        }
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "concateDescription()", ListBoxRsis);
    }
    return textoListBox;
}

var renderHelpListBox = function(object, UIForm, enableHelp) {
    if (object) {
        renderHelp(object, UIForm, enableHelp);
    }
}, renderHelpKeysListBox = function(object, UIForm, enableHelp) {
    if (object) {
        renderHelpKeys(object, UIForm, enableHelp);
    }
};

(function($R) {
    SearchFieldRsis = {
        _FILE: "040searchFieldRsis.js",
        version: JRetail.rsis.VersionJS,
        vClass: [ "iSFldReq", "iSFld", "iSFldRdy" ],
        vClass2: [ "ivSFldReq", "ivSFld", "ivSFldRdy" ],
        clazz: "SearchFieldRsis",
        render: function() {
            return renderSearchField.apply(this, arguments);
        },
        renderInput: function(searchField, obj, state, isEditable, vClass, opVis) {
            var thiz = this;
            try {
                if (obj) {
                    var events = Rsis.events, $win = UtilRsis.getParentWindow(searchField);
                    obj.className = isEditable ? vClass[1] : vClass[2];
                    obj.readOnly = !isEditable;
                    if (isEditable) {
                        var isResultSearch = obj.id.split(".")[1] === "resultSearch" ? true : false, vClassRst = isResultSearch ? vClass[2] : vClass[1];
                        obj.className = $R(searchField).isMandatory(state) ? vClass[0] : vClassRst;
                        if (searchField.getAttribute("on-focus") != null) {
                            events.add(obj, "onfocus", $win + searchField.getAttribute("on-focus"));
                        }
                        if (searchField.getAttribute("on-blur") != null) {
                            events.add(obj, "onblur", "return " + $win + searchField.getAttribute("on-blur"));
                        }
                    } else {
                        if (searchField.getAttribute("on-focus") != null) {
                            events.add(obj, "onfocus", "");
                        }
                        if (searchField.getAttribute("on-blur") != null) {
                            events.add(obj, "onblur", "");
                        }
                    }
                    var vis = getAtt(obj, opVis);
                    if (vis !== "false") {
                        $R(obj).setFocus().visible(true);
                    } else {
                        $R(obj).visible(false);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, thiz.clazz + ".renderInput", thiz);
            }
        },
        renderButtons: function(obj, isEditable, isMandatory, $win, sEvent) {
            var thiz = this;
            try {
                if (obj) {
                    var objId = obj.id, sFldDsd = "sFldDsd", events = Rsis.events, sltBtn = $(objId + ".btnSearchField"), nObj = $(objId + ".btnClearField");
                    if (sltBtn) {
                        $R(sltBtn).rdOnly(!isEditable).disable(!isEditable, sFldDsd);
                        var strclick = $win + "SelectBox.close(this, " + sEvent + ");";
                        if (isEditable) {
                            strclick = strclick + " return " + $win + "SearchField.searchOpen(this);";
                        }
                        events.add(sltBtn, "onclick", strclick);
                    }
                    if (nObj) {
                        $R(nObj).rdOnly(!isEditable).disable(!isEditable, sFldDsd).visible(getAtt(obj, "clearButtonVisible") !== "false" ? true : false);
                        var strclick = $win + "SelectBox.close(this, " + sEvent + ");";
                        if (isEditable) {
                            strclick = strclick + " return " + $win + "clearSearchField(this);";
                        }
                        events.add(nObj, "onclick", strclick);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, thiz.clazz + ".renderButtons", thiz);
            }
        }
    };
})(Rsis);

function renderSearchField(obj, status) {
    try {
        if (obj) {
            var nodes = null, objId = obj.id, $win = UtilRsis.getParentWindow(obj), sEvent = getStringEvent(obj), searchValue = $(objId + ".searchValue"), resultSearch = $(objId + ".resultSearch"), SFR = SearchFieldRsis;
            if ($R(obj).isRenderAll()) {
                var isEditable = $R(obj).isEditable(status), isMandatory = $R(obj).isMandatory(status);
                SFR.renderInput(obj, searchValue, status, isEditable, SFR.vClass2, "visibleSearchValue");
                SFR.renderInput(obj, resultSearch, status, false, SFR.vClass, "visibleSearchResult");
                SFR.renderButtons(obj, isEditable, isMandatory, $win, sEvent);
                nodes = xmlToSearchField(obj);
                $R(obj).visRestricted(status);
            }
            $R(obj).setTabIdx(status);
            if (searchValue) $R(searchValue).cssHelp();
            if (resultSearch) $R(resultSearch).cssHelp();
            $R(obj).renderDev(nodes, arguments[2]);
        }
    } catch (oErr) {
        outPrint(oErr, "renderSearchField()", SearchFieldRsis);
    }
}

function xmlToSearchField(obj) {
    try {
        var nodes = null;
        if (obj) {
            var _rsObj = $R(obj);
            var UIContext = Rsis.UIContext.get(obj);
            var UIForm = UIContext.getUIForm(obj);
            if (UIForm) {
                var optionText = getAttMandatory(obj, "optionText"), optionValueRef = getAttMandatory(obj, "optionValueRef"), domainXML = getDomainXML(obj, UIForm);
                UIForm.objXMLTemp = domainXML;
                if (optionValueRef != null && optionValueRef !== "") {
                    var strPathOptionValueRef = optionValueRef.split("@")[0];
                    strPathOptionValueRef = strPathOptionValueRef.replaceAll("###", "@");
                    nodes = getNodes(domainXML, ROOT_NODE + strPathOptionValueRef);
                }
                var textValue = "", resultSearch = $(obj.id + ".resultSearch"), mask = _rsObj.getMask(), listPathNodes = optionText.split(",");
                if (listPathNodes && listPathNodes.length > 0) {
                    var k = 0, maxK = listPathNodes.length;
                    for (;k < maxK; k++) {
                        textValue += _rsObj.getDescription(domainXML, 0, listPathNodes[k], "", mask);
                    }
                }
                var visibleSearchResult = getAtt(obj, "visibleSearchResult");
                if (visibleSearchResult !== "false") {
                    resultSearch.value = textValue;
                    UtilRsis.setHint(resultSearch);
                } else {
                    var searchValue = $(obj.id + ".searchValue");
                    if (searchValue) {
                        searchValue.value = textValue;
                        UtilRsis.setHint(searchValue);
                    }
                }
            }
            $R(obj).visRestricted(UIForm.state);
        }
    } catch (oErr) {
        outPrint(oErr, "xmlToSearchField()", SearchFieldRsis);
    }
    return nodes;
}

function clearSearchField(obj) {
    try {
        if (obj) {
            var UIContext = Rsis.UIContext.get(obj);
            var UIForm = UIContext.getUIForm(obj);
            if (UIForm) {
                var searchFieldId = obj.id.split(".")[0], searchField = $(searchFieldId), inputText = $(searchFieldId + ".resultSearch"), inputOptionValue = $(searchFieldId + ".searchValue");
                if (searchField) {
                    var _rsObj = $R(searchField);
                    var domainXML = getDomainXML(searchField, UIForm), optionValueRef = getAttMandatory(searchField, "optionValueRef"), optionText = getAttMandatory(searchField, "optionText"), clear = false;
                    UIForm.objXMLTemp = domainXML;
                    var attributeNode = _rsObj.getAttNode(optionValueRef), nodeDomain = getNodes(UIForm.domainXML, _rsObj.getPathNode(optionValueRef));
                    if (nodeDomain && nodeDomain.length > 0) {
                        var valueAttNode = nodeDomain[0].getAttribute(attributeNode);
                        if (valueAttNode != null && valueAttNode !== "") {
                            Crud.savedNode(UIForm);
                        }
                    }
                    var listPathNodes = optionText.split(",");
                    if (listPathNodes && listPathNodes.length > 0) {
                        var k = 0, maxK = listPathNodes.length;
                        for (;k < maxK; k++) {
                            var str = Trim(listPathNodes[k]);
                            if (str !== "") {
                                if (str.substring(0, 1) !== "'") {
                                    var stringPath = str.split("@")[0];
                                    stringPath = stringPath.replaceAll("###", "@");
                                    var stringAttribute = str.split("@")[1];
                                    if (stringPath && stringPath !== "" && (stringAttribute && stringAttribute !== "")) {
                                        var nodes = getNodes(domainXML, ROOT_NODE + stringPath), attributeNode = typeof stringAttribute === "undefined" ? "" : stringAttribute;
                                        if (nodes && nodes.length > 0 && (attributeNode != null && attributeNode !== "")) {
                                            nodes[0].setAttribute(attributeNode, "");
                                            clear = true;
                                        }
                                    }
                                }
                            }
                        }
                    }
                    clear = _rsObj.clearAtts(domainXML, clear);
                    clear = _rsObj.clearNodes(domainXML, clear, null);
                    if (clear) {
                        inputText.value = "";
                        inputOptionValue.value = "";
                        setDomainXML(searchField, UIForm, domainXML, optionText);
                    }
                    var visibleSearchResult = getAtt(searchField, "visibleSearchResult");
                    if (visibleSearchResult !== "false") {
                        UtilRsis.setHint(inputText);
                    } else {
                        UtilRsis.setHint(inputOptionValue);
                    }
                    _rsObj.clearExc(UIForm, $(searchField.id + ".btnClearField"));
                    var renderElements = searchField.getAttribute("renderElements");
                    if (renderElements != null && renderElements !== "") {
                        var elements = getElements(UIForm, renderElements);
                        renderDependents(searchField, UIForm, elements);
                    }
                    UIContext.setUIForms(UIForm.getForm().id, UIForm);
                    UIForm.objXMLTemp = null;
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "clearSearchField()", SearchFieldRsis);
    }
    return false;
}

function clearSearchFieldEditTable(searchField) {
    try {
        if (searchField) {
            var searchFieldId = getAttMandatory(searchField, "id"), stringArgs = searchFieldId.split(".");
            if (stringArgs && stringArgs[0] !== "") {
                var stringArgsForm = searchFieldId.split(":"), inputText = $(searchFieldId + ".resultSearch"), inputOptionValue = $(searchFieldId + ".searchValue");
                if (inputText && inputOptionValue) {
                    inputText.value = "";
                    inputOptionValue.value = "";
                    var visibleSearchResult = getAtt(searchField, "visibleSearchResult");
                    if (visibleSearchResult !== "false") {
                        UtilRsis.setHint(inputText);
                    } else {
                        UtilRsis.setHint(inputOptionValue);
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "clearSearchFieldEditTable()", SearchFieldRsis);
    }
}

var SearchField = {
    searchOpen: function(obj) {
        return _searchOpen(obj);
    }
};

function _searchOpen(obj) {
    try {
        if (obj) {
            var UIContext = Rsis.UIContext.get(obj);
            var UIForm = UIContext.getUIForm(obj);
            if (UIForm) {
                var searchFieldId = obj.id.split(".")[0], searchField = $(searchFieldId);
                if (searchField) {
                    var urlModal = getAttMandatory(searchField, "url"), modalWidth = getAtt(searchField, "modalWidth"), modalHeight = getAtt(searchField, "modalHeight"), setParamsModal = getAttFuncDeveloper(searchField, "setParamsModal"), dialogParams = null;
                    if (modalWidth != null && modalWidth !== "" || modalHeight != null && modalHeight !== "") {
                        dialogParams = [ modalWidth, modalHeight ];
                    }
                    var domainXML = getDomainXML(searchField, UIForm);
                    UIForm.objXMLTemp = domainXML;
                    if (domainXML != null) {
                        var searchValue = $(searchFieldId + ".searchValue");
                        var param = [];
                        param["modalFormField"] = getAttMandatory(searchField, "modalFormField");
                        param["inputSearchValue"] = Trim(searchValue.value);
                        param["searchNode"] = getAttMandatory(searchField, "searchValue");
                        param["state"] = UIRsis.SEARCHING;
                        compressEvalRsisAll(setParamsModal, searchField, param);
                        crossDialog.show(urlModal, param, null, function(returnValue, args) {
                            try {
                                var UIForm = args[0], searchField = args[1], domainXML = args[2];
                                if (returnValue && returnValue != null) {
                                    var objXML = createObjXML(returnValue);
                                    if (objXML) {
                                        if (objXML != null && !objXML.documentElement) {
                                            return false;
                                        }
                                        var parserNodes = getAtt(searchField, "parserNodes"), parserAttributes = getAtt(searchField, "parserAttributes"), optionValueRef = getAttMandatory(searchField, "optionValueRef");
                                        var _rsObj = $R(searchField);
                                        objXML = _rsObj.changeNdName(objXML);
                                        _rsObj.parserNds(searchField, objXML, domainXML, optionValueRef);
                                        _rsObj.parserAtts(objXML, domainXML);
                                        var inputText = $(searchFieldId + ".resultSearch");
                                        if (inputText) {
                                            inputText.style.color = "#23405E";
                                            inputText.style.fontWeight = "normal";
                                        }
                                        var optionText = getAttMandatory(searchField, "optionText"), listPathNodes = optionText.split(","), textValue = "";
                                        if (listPathNodes && listPathNodes.length > 0) {
                                            var k = 0, maxK = listPathNodes.length;
                                            for (;k < maxK; k++) {
                                                var str = Trim(listPathNodes[k]);
                                                if (str !== "") {
                                                    if (str.substring(0, 1) === "'") {
                                                        textValue += str.replace(/'/g, "");
                                                    } else {
                                                        var stringPath = str.split("@")[0];
                                                        stringPath = stringPath.replaceAll("###", "@");
                                                        var stringAttribute = str.split("@")[1];
                                                        if (stringPath && stringPath !== "" && (stringAttribute && stringAttribute !== "")) {
                                                            var nodes = getNodes(UIForm.objXMLTemp, ROOT_NODE + stringPath), attributeNode = typeof stringAttribute === "undefined" ? "" : stringAttribute;
                                                            if (attributeNode != null && attributeNode !== "") {
                                                                textValue = textValue + getNodeValue(nodes, attributeNode);
                                                            } else {
                                                                textValue = textValue + getNodeText(nodes[0]);
                                                            }
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        var visibleSearchResult = getAtt(searchField, "visibleSearchResult");
                                        if (visibleSearchResult !== "false") {
                                            inputText.value = textValue;
                                            UtilRsis.setHint(inputText);
                                        } else {
                                            searchValue.value = textValue;
                                            UtilRsis.setHint(searchValue);
                                        }
                                        _rsObj.execDev([ UIForm, objXML, domainXML ]);
                                        var optionValue = getAttMandatory(searchField, "optionValue"), valueKey = getNodeAttributes(objXML, optionValue), oldValue = getNodeAttributes(UIForm.domainXML, optionValue);
                                        setDomainXML(searchField, UIForm, domainXML, optionText);
                                        var attributeNode = _rsObj.getAttNode(optionValueRef), nodeDomain = getNodes(UIForm.domainXML, _rsObj.getPathNode(optionValueRef));
                                        if (nodeDomain && nodeDomain.length > 0) {
                                            var valueAttNode = nodeDomain[0].getAttribute(attributeNode);
                                            if (valueAttNode !== valueKey && (valueAttNode != null || valueAttNode == null && valueKey !== "")) {
                                                Crud.savedNode(UIForm);
                                            }
                                        }
                                        var on_change = getAttFuncDeveloper(searchField, "on_change");
                                        if (on_change != null && on_change !== "") {
                                            var path = getStringPath(objXML, optionValue, "");
                                            path = path.replaceAll("###", "@");
                                            var objNode = getNodes(UIForm.domainXML, path);
                                            compressEvalRsisAll(on_change, searchField, UIForm, valueKey, oldValue, objNode);
                                        }
                                        var renderElements = searchField.getAttribute("renderElements");
                                        if (renderElements != null && renderElements !== "") {
                                            var elements = getElements(UIForm, renderElements);
                                            renderDependents(searchField, UIForm, elements);
                                        }
                                        UIContext.setUIForms(UIForm.getForm().id, UIForm);
                                        UIForm.objXMLTemp = null;
                                    }
                                }
                            } catch (oErr) {
                                outPrint(oErr, "crossDialog.anonima()", PedidoVenda);
                            }
                        }, [ UIForm, searchField, domainXML ]);
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "_searchOpen", SearchFieldRsis);
    }
    return false;
}

function renderHelpSearchField(object, UIForm, enableHelp) {
    try {
        if (object) {
            var searchValue = $(object.id + ".searchValue"), resultSearch = $(object.id + ".resultSearch");
            if (enableHelp) {
                var seqHelpApp = object.getAttribute("help"), helpKey = object.getAttribute("helpKey"), node = UIRsis.getElementNodesHelp(UIForm, seqHelpApp, helpKey);
                if (node != null) {
                    var descBreve = node.getAttribute("descBreve"), descLonga = node.getAttribute("descLonga"), titleHelp = descBreve != null ? descBreve : "", descriptionHelp = descLonga != null ? descLonga : "";
                    if (descriptionHelp !== "") {
                        resultSearch.help = "true";
                        resultSearch.setAttribute("help", "true");
                        resultSearch.setAttribute("hintHelp", "&lt;h1&gt;" + titleHelp + "&lt;/h1&gt;&lt;p&gt;" + descriptionHelp + "&lt;/p&gt;");
                        searchValue.className = setJretailHelpBorder(searchValue.className);
                        resultSearch.className = setJretailHelpBorder(resultSearch.className);
                    } else {
                        resultSearch.help = "false";
                        resultSearch.setAttribute("help", "false");
                        searchValue.className = searchValue.className.replaceAll(" jretail-help-border", "");
                        resultSearch.className = resultSearch.className.replaceAll(" jretail-help-border", "");
                    }
                }
                UtilRsis.setHelp(resultSearch);
            } else {
                resultSearch.help = "false";
                resultSearch.setAttribute("help", "false");
                searchValue.className = searchValue.className.replaceAll(" jretail-help-border", "");
                resultSearch.className = resultSearch.className.replaceAll(" jretail-help-border", "");
                setDOMEvent(resultSearch, "onmouseover", "");
                setDOMEvent(resultSearch, "onmouseout", "");
                UtilRsis.setHint(resultSearch);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpSearchField()", SearchFieldRsis);
    }
}

function renderHelpKeysSearchField(object, UIForm, enableHelp) {
    try {
        if (object) {
            var searchValue = $(object.id + ".searchValue"), resultSearch = $(object.id + ".resultSearch");
            if (enableHelp) {
                var helpKey = object.getAttribute("helpKey");
                var stringArgs = object.id.split("__"), seqHelpApp = "";
                if (stringArgs && stringArgs.length > 1) {
                    body = getIframeDocument($(stringArgs[0])).getElementsByTagName("body")[0];
                } else {
                    body = document.getElementsByTagName("body")[0];
                }
                var ctrpanel = $(object.id.split("#")[0] + ".ctrpanel");
                if (ctrpanel && !(stringArgs && stringArgs.length > 1)) {
                    seqHelpApp = getAtt(ctrpanel, "seqHelpApp");
                } else {
                    seqHelpApp = getAtt(body, "seqHelpApp");
                }
                if (helpKey != null) {
                    resultSearch.helpKeys = "true";
                    resultSearch.setAttribute("helpKeys", "true");
                    resultSearch.setAttribute("hintHelpKeys", "&lt;h1&gt; SeqHelpApp:" + seqHelpApp + "&lt;/h1&gt;&lt;p&gt; HelpKey:" + helpKey + "&lt;/p&gt;");
                    searchValue.className = setJretailHelpBorder(searchValue.className);
                    resultSearch.className = setJretailHelpBorder(resultSearch.className);
                }
                UtilRsis.setHelpKeys(resultSearch);
            } else {
                resultSearch.helpKeys = "false";
                resultSearch.setAttribute("helpKeys", "false");
                searchValue.className = searchValue.className.replaceAll(" jretail-help-border", "");
                resultSearch.className = resultSearch.className.replaceAll(" jretail-help-border", "");
                setDOMEvent(resultSearch, "onmouseover", "");
                setDOMEvent(resultSearch, "onmouseout", "");
                UtilRsis.setHint(resultSearch);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpSearchField()", SearchFieldRsis);
    }
}

function configSearchField(searchField, configXML) {
    try {
        if (searchField && configXML != null) {
            var searchFieldId = getAttMandatory(searchField, "id");
            if (searchFieldId != null && searchFieldId != "") {
                var _id_ = searchFieldId.split(":")[1];
                var configNodes = getNodes(configXML, ROOT_NODE + "/configComponents/searchFields/searchField[@id='" + _id_ + "']");
                if (configNodes && configNodes.length > 0) {
                    searchField.searchValue = configNodes[0].getAttribute("searchValue");
                    searchField.optionValue = configNodes[0].getAttribute("optionValue");
                    searchField.optionValueRef = configNodes[0].getAttribute("optionValueRef");
                    searchField.optionText = configNodes[0].getAttribute("optionText");
                    searchField.parserAttributes = configNodes[0].getAttribute("parserAttributes");
                    searchField.parserNodes = configNodes[0].getAttribute("parserNodes");
                    searchField.changeNodeName = configNodes[0].getAttribute("changeNodeName");
                    searchField.execute = configNodes[0].getAttribute("execute");
                    searchField.setAttribute("searchValue", configNodes[0].getAttribute("searchValue"));
                    searchField.setAttribute("optionValue", configNodes[0].getAttribute("optionValue"));
                    searchField.setAttribute("optionValueRef", configNodes[0].getAttribute("optionValueRef"));
                    searchField.setAttribute("optionText", configNodes[0].getAttribute("optionText"));
                    searchField.setAttribute("parserAttributes", configNodes[0].getAttribute("parserAttributes"));
                    searchField.setAttribute("parserNodes", configNodes[0].getAttribute("parserNodes"));
                    searchField.setAttribute("changeNodeName", configNodes[0].getAttribute("changeNodeName"));
                    searchField.setAttribute("execute", configNodes[0].getAttribute("execute"));
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "configSearchField()", SearchFieldRsis);
    }
}

(function() {
    ListNoteRsis = {
        _FILE: "041listNoteRsis.js",
        version: JRetail.rsis.VersionJS,
        render: function() {
            return renderListNotes.apply(this, arguments);
        }
    };
})();

function renderListNotes(obj, status) {
    try {
        if (obj) {
            var UIContext = Rsis.UIContext.get(obj);
            var nodes = null, $win = UtilRsis.getParentWindow(obj), sEvent = getStringEvent(obj);
            if ($R(obj).isRenderAll()) {
                var UIForm = UIContext.getUIForm(obj);
                if (UIForm) {
                    var xmlCollection = null, xml = obj.getAttribute("xml");
                    if (xml != null && xml !== "") {
                        var componentParam = $(xml);
                        if (componentParam && componentParam.name === "xml") {
                            xmlCollection = getObjXML(xml);
                        } else {
                            var table = UtilRsis.getTable(UIForm, xml);
                            if (table != null) {
                                xmlCollection = UIForm.getTableXML(xml);
                            } else {
                                xmlCollection = UIForm.getParams(xml);
                            }
                        }
                    } else {
                        xmlCollection = UIForm.getParams(getAttMandatory(obj, "params"));
                    }
                    if (xmlCollection) {
                        var stringNode = getAttMandatory(obj, "node");
                        if (stringNode != null && stringNode !== "") {
                            var nodesCollection = getNodes(xmlCollection, ROOT_NODE + stringNode);
                            if (nodesCollection && nodesCollection.length > 0) {
                                var valueNode = getAttMandatory(obj, "value"), width = getAtt(obj, "width"), height = getAtt(obj, "height");
                                if (width == null || width === "") {
                                    width = "100%";
                                }
                                if (height == null || height === "") {
                                    height = "100%";
                                }
                                var visibleValueCell = false, visualizeRestricted = getAtt(obj, "visualizeRestricted");
                                if (!searchStringArgs(visualizeRestricted, status, ";")) {
                                    var isVisible = getAttMandatory(obj, "isVisible");
                                    if (isVisible === "true") {
                                        visibleValueCell = true;
                                    }
                                }
                                var ulList = $(obj.id + ".ulListNote");
                                if (ulList) {
                                    ulList.innerHTML = "";
                                    var listPathNodes = valueNode.split(","), p = 0, maxP = nodesCollection.length;
                                    for (;p < maxP; p++) {
                                        var contentCell = "", li = document.createElement("li");
                                        k = 0, maxK = listPathNodes.length;
                                        for (;k < maxK; k++) {
                                            var str = Trim(listPathNodes[k]), attributeNode = "";
                                            if (str.substring(0, 1) === "'") {
                                                contentCell += str.replace(/'/g, "");
                                            } else {
                                                var stringArgs = str.split("@"), pathNode = stringArgs[0].replace("$$", "@");
                                                attributeNode = typeof stringArgs[1] === "undefined" ? "" : stringArgs[1];
                                                var att = getNodeValueId(nodesCollection, attributeNode, p);
                                                contentCell += att == null ? "" : att;
                                            }
                                        }
                                        li.innerHTML = contentCell;
                                        compressEvalRsisAll(getAttFuncDeveloper(obj, "execute"), obj, ulList, li, UIForm, nodesCollection[p], p);
                                        ulList.appendChild(li);
                                    }
                                }
                            }
                        }
                        $R(obj).renderDev(obj);
                    }
                }
            }
            obj = null;
        }
    } catch (oErr) {
        outPrint(oErr, "renderListNotes()", ListNoteRsis);
    }
}

function MenuRsis() {}

MenuRsis._FILE = "042menuRsis.js";

MenuRsis.version = JRetail.rsis.VersionJS;

MenuRsis.NODEPATH = "/MenuDtos/menuDto";

var menuJRetail, NAVIGATIONBAR = null;

function initMenu() {
    try {
        if (Loading != undefined) {
            Loading.init();
        }
        var UIContext = Rsis.UIContext.get(obj.id);
        formMenu = UIContext.formsStart;
        if (formMenu && formMenu.length > 0) {
            if (typeof _Menu !== "undefined") {
                _Menu.start(formMenu[1]);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "initMenu()", MenuRsis);
    }
}

(function($R) {
    var menuJRetail, NAVIGATIONBAR = null;
    _Menu = {
        objectMenu: null,
        idMenu: null,
        countNvgtBar: 0,
        getInstance: function(id) {
            this.idMenu = id;
            this.objectMenu = $(id);
        },
        start: function(form) {
            try {
                this.objectMenu = !objectMenu ? $(this.idMenu) : this.objectMenu;
                if (!(AjaxRsis && form)) throw new MiddlewareViewException(getMessageBundle("ERROR_PARAM_MSG"));
                var targetAction = getAttMandatory(form, "targetAction"), targetMethod = "recuperaMenu", callback = "_Menu.callBack", _p = "identMenuPai=";
                AjaxRsis.callAction(form.id, URL, targetAction, targetMethod, callback, "", _p);
            } catch (oErr) {
                outPrint(oErr, ".start()", MenuRsis);
            }
        },
        callBack: function(f) {
            try {
                var Transfer = AjaxRsis.process(f);
                if (Transfer && Transfer.objXML && Transfer.UIForm) {
                    var objXML = Transfer.objXML, UIForm = Transfer.UIForm, object = this.objectMenu;
                    Message.render(UIForm, objXML);
                    this.createLine(objXML, object);
                    var _flagApp = this.getFlagApp(objXML, object);
                    this.createCache(0, _flagApp, true);
                    this.renderNavigationBar(0, _flagApp);
                }
            } catch (oErr) {
                outPrint(oErr, ".callBack()", MenuRsis);
            }
        },
        create: function(xmlMenu) {
            try {
                this.createLine(xmlMenu, this.objectMenu);
                var _flagApp = this.getFlagApp(xmlMenu, this.objectMenu);
                this.createCache(0, _flagApp, true);
                this.renderNavigationBar(0, _flagApp);
            } catch (oErr) {
                outPrint(oErr, ".create()", MenuRsis);
            }
        },
        searchMenu: function(form, identMenuPai, flagApp) {
            if (!(AjaxRsis && form)) throw new MiddlewareViewException(getMessageBundle("ERROR_PARAM_MSG"));
            if (identMenuPai === 0) {
                identMenuPai = "";
            } else {
                flagApp = "";
            }
            var targetAction = getAttMandatory(form, "targetAction"), targetMethod = "recuperaMenu", callback = "_Menu.callBackSearch";
            var _p = "identMenuPai=" + escapeParam(identMenuPai, false);
            _p = _p + "&flagApp=" + escapeParam(flagApp, false);
            AjaxRsis.callAction(form.id, URL, targetAction, targetMethod, callback, "", _p);
        },
        callBackSearch: function(f) {
            var Transfer = AjaxRsis.process(f);
            if (Transfer && Transfer.objXML && Transfer.UIForm) {
                var objXML = Transfer.objXML, UIForm = Transfer.UIForm;
                Message.render(UIForm, objXML);
                this.update(objXML);
            }
        },
        update: function(xmlMenu) {
            if (xmlMenu) {
                this.createLine(xmlMenu, this.objectMenu);
            }
        },
        getFlagApp: function(objXML, menu) {
            if (objXML) {
                var nodePath = getAtt(menu, "node");
                if (nodePath === "") {
                    nodePath = MenuRsis.NODEPATH;
                }
                var nodes = getNodes(objXML, nodePath);
                if (nodes && nodes.length > 0) {
                    for (var i = 0; i < nodes.length; i++) {
                        var flagApp = getNodeValueId(nodes, "flagApp", i);
                        if (flagApp !== "") {
                            return flagApp;
                        }
                    }
                }
            }
            return null;
        },
        createLine: function(objXML, menu) {
            if (objXML && menu) {
                deleteRows(menu);
                var showView = getAtt(menu, "showView"), menuId = getAttMandatory(menu, "id"), tbody = $(menuId + ".tbody");
                var nodePath = getAtt(menu, "node");
                if (nodePath === "") {
                    nodePath = MenuRsis.NODEPATH;
                }
                var nodes = getNodes(objXML, nodePath);
                if (nodes && nodes.length > 0) {
                    switch (showView) {
                      case "vertical":
                        this.vertical(menu, tbody, nodes);
                        break;

                      case "horizontal":
                        this.horizontal(menu, tbody, nodes);
                        break;

                      default:
                        this.horizontal(menu, tbody, nodes);
                        break;
                    }
                }
            }
        },
        vertical: function(menu, tbody, nodes) {
            if (menu && tbody && nodes && nodes.length > 0) {
                var gNvI = getNodeValueId, strMenu = "", menuId = menu.id;
                if (tbody) {
                    strMenu = '<ul class="mnBarVt">';
                    for (var i = 0; i < nodes.length; i++) {
                        var identMenu = gNvI(nodes, "identMenu", i), destinoMenu = gNvI(nodes, "destino", i), descBreveMenu = gNvI(nodes, "descBreve", i), flagApp = gNvI(nodes, "flagApp", i), identRelatorio = gNvI(nodes, "identRelatorio", i), flagTipoMenu = gNvI(nodes, "flagTipoMenu", i), queryString = "";
                        if (identRelatorio != null && identRelatorio !== "") {
                            queryString = "?identRelatorio=" + identRelatorio;
                        }
                        switch (flagTipoMenu) {
                          case "SU":
                            functionMenu = "searchMenu(this, '" + identMenu + "', '" + flagApp + "');";
                            break;

                          case "MO":
                            functionMenu = "openModalMenu(this, '" + contextPath + destinoMenu + queryString + "', " + identMenu + ");";
                            break;

                          case "ML":
                            functionMenu = "openUrl( '" + contextPath + destinoMenu + queryString + "', " + identMenu + ");";
                            break;
                        }
                        strMenu = strMenu + "<li>";
                        strMenu = strMenu + '<a href="javascript:void(0)" ';
                        strMenu = strMenu + ' id="' + menuId + identMenu + '.url" ';
                        strMenu = strMenu + ' onkeypress="if(event.keyCode==13){return ' + functionMenu + '}return false;" ';
                        strMenu = strMenu + ' onclick="' + functionMenu + '" >';
                        strMenu = strMenu + descBreveMenu;
                        strMenu = strMenu + "</a>";
                        strMenu = strMenu + "</li>";
                    }
                    strMenu = strMenu + "</ul>";
                    tbody.innerHTML = strMenu;
                }
            }
        },
        horizontal: function(menu, tbody, nodes) {
            if (menu && tbody && nodes && nodes.length > 0) {
                var strMenu = "", menuId = menu.id;
                var gNvI = getNodeValueId, i = 0, line = 0;
                strMenu = '<ul class="mnBarHz">';
                for (;i < nodes.length; i++) {
                    var identMenu = gNvI(nodes, "identMenu", i), destinoMenu = gNvI(nodes, "destino", i), descBreveMenu = gNvI(nodes, "descBreve", i), nivel = gNvI(nodes, "nivel", i), flagApp = gNvI(nodes, "flagApp", i), identRelatorio = gNvI(nodes, "identRelatorio", i), flagTipoMenu = gNvI(nodes, "flagTipoMenu", i), queryString = "";
                    if (identRelatorio != null && identRelatorio !== "") {
                        queryString = "?identRelatorio=" + identRelatorio;
                    }
                    switch (flagTipoMenu) {
                      case "SU":
                        functionMenu = "searchMenu(this, '" + identMenu + "', '" + flagApp + "');";
                        break;

                      case "MO":
                        functionMenu = "openModalMenu(this, '" + contextPath + destinoMenu + queryString + "', " + identMenu + ");";
                        break;

                      case "ML":
                        functionMenu = "openUrl( '" + contextPath + destinoMenu + queryString + "', " + identMenu + ");";
                        break;
                    }
                    var regExpText = "", cssmenu = "menu";
                    if (descBreveMenu != null && descBreveMenu !== "" && descBreveMenu.toLowerCase().search(/config/) >= 0) {
                        cssmenu = "confmenu";
                    }
                    var classSpan = parseInt(nivel, 10) === 1 ? flagTipoMenu === "MO" ? "prmenu" : cssmenu : parseInt(nivel, 10) > 1 && flagTipoMenu === "MO" ? "modal" : "sbmenu";
                    strMenu = strMenu + "<li>";
                    strMenu = strMenu + '<a href="javascript:void(0)" ';
                    strMenu = strMenu + ' id="' + menuId + identMenu + '.url" ';
                    strMenu = strMenu + ' onkeypress="if(event.keyCode==13){return ' + functionMenu + '}return false;" ';
                    strMenu = strMenu + ' onclick="' + functionMenu + '" >';
                    strMenu = strMenu + '<span class="' + classSpan + '"></span>';
                    strMenu = strMenu + descBreveMenu;
                    strMenu = strMenu + "</a>";
                    strMenu = strMenu + "</li>";
                }
                strMenu = strMenu + "</ul>";
                tbody.innerHTML = strMenu;
            }
        },
        createCache: function(value, flagApp, createPrincipal) {
            var menu = $(this.idMenu);
            if (menu) {
                var value = parseInt(value), menuId = this.idMenu, navigationBarId = getAtt(menu, "navigationBar");
                if (navigationBarId != null && navigationBarId !== "") {
                    var hasValue = false;
                    if (value == 0) {
                        if (createPrincipal) {
                            this.countNvgtBar = 0;
                            NAVIGATIONBAR = [];
                        } else {
                            while (NAVIGATIONBAR.length > 1) {
                                var pp = NAVIGATIONBAR.pop();
                                for (var _p in pp) {
                                    pp[_p] = null;
                                }
                                pp = null;
                                delete pp;
                                this.countNvgtBar--;
                            }
                            if (NAVIGATIONBAR.length > 0) {
                                var hasValue = true;
                            }
                        }
                    } else {
                        if (NAVIGATIONBAR && NAVIGATIONBAR.length > 0) {
                            var maxLength = 0;
                            for (var i = 0; i < NAVIGATIONBAR.length; i++) {
                                if (NAVIGATIONBAR[i][0] === parseInt(value)) {
                                    hasValue = true;
                                    maxLength = i + 1;
                                    break;
                                }
                            }
                            if (hasValue && maxLength > 0) {
                                while (NAVIGATIONBAR.length > maxLength) {
                                    var pp = NAVIGATIONBAR.pop();
                                    for (var _p in pp) {
                                        pp[_p] = null;
                                    }
                                    pp = null;
                                    delete pp;
                                    this.countNvgtBar--;
                                }
                            }
                        }
                    }
                    if (!hasValue) {
                        var objAncora = "", captionLink = "", menuDivLink = $(menuId + value + ".url");
                        if (menuDivLink) {
                            objAncora = menuDivLink;
                            captionLink = objAncora.innerText;
                        } else {
                            if (value == 0) {
                                objAncora = document.createElement("A");
                            }
                        }
                        NAVIGATIONBAR[this.countNvgtBar++] = [ parseInt(value), objAncora, flagApp, captionLink ];
                    }
                }
            }
        },
        renderNavigationBar: function(value, _flagApp) {
            try {
                var menu = $(this.idMenu);
                if (menu) {
                    var value = parseInt(value, 10), menuId = this.idMenu, navigationBarId = getAtt(menu, "navigationBar");
                    if (navigationBarId != null && navigationBarId !== "") {
                        var objectNavBar = $(navigationBarId);
                        if (objectNavBar) {
                            objectNavBar.innerHTML = "";
                        }
                        var primeiro = 0, ultimo = NAVIGATIONBAR.length - 1;
                        jt = 0, maxLn = NAVIGATIONBAR.length, strNav = '<ul class="ulNav">';
                        while (jt < maxLn) {
                            if (jt > 0) {
                                strNav = strNav + '<li class="liNvDiv">&nbsp;&raquo;&nbsp;</li>';
                            }
                            strNav = strNav + '<li href="javascript:void(0);" ';
                            var obj = NAVIGATIONBAR[jt][1];
                            if (obj) {
                                var content = "";
                                if (jt === primeiro) {
                                    strNav = strNav + ' class="liNv" tabIndex="-1" ';
                                    strNav = strNav + ' id="' + menuId + value + '".url" ';
                                    strNav = strNav + " onkeypress=\"if(event.keyCode == 13){return searchMenu(this, 0,'" + NAVIGATIONBAR[jt][2] + "');}return false;\" ";
                                    strNav = strNav + " onclick=\"searchMenu(this, 0,'" + NAVIGATIONBAR[jt][2] + "');\" ";
                                    content = "Principal";
                                } else if (jt === ultimo) {
                                    strNav = strNav + ' class="liNvLast" tabIndex="-1" ';
                                    content = NAVIGATIONBAR[jt][3];
                                } else {
                                    strNav = strNav + ' class="liNv"  tabIndex="-1" ';
                                    strNav = strNav + ' id="' + menuId + value + '".url" ';
                                    strNav = strNav + ' onkeypress="if(event.keyCode == 13){return searchMenu(this, ' + value + ",'" + NAVIGATIONBAR[jt][2] + "');}return false;\" ";
                                    strNav = strNav + ' onclick="searchMenu(this, ' + NAVIGATIONBAR[jt][0] + ",'" + NAVIGATIONBAR[jt][2] + "');\" ";
                                    content = NAVIGATIONBAR[jt][3];
                                }
                                var clz = jt === ultimo ? ' class="sel"' : "";
                                strNav = strNav + ">";
                                strNav = strNav + '<a href="javascript:void(0);" ' + clz + ">" + content + "</a>";
                            }
                            strNav = strNav + "</li>";
                            jt++;
                        }
                        strNav = strNav + "</ul>";
                        objectNavBar.innerHTML = strNav;
                    }
                }
            } catch (oErr) {
                outPrint(oErr, "renderNavigationBar", MenuRsis);
            }
        }
    };
    function deleteRows(object) {
        if (object) {
            var tableContent = $(object.id + ".tbody");
            if (tableContent) tableContent.innerHTML = "";
        }
    }
})(Rsis);

function searchMenu(object, value, flagApp) {
    if (object) {
        var formMenuId = getAttMandatory(object, "id");
        if (formMenuId !== "") {
            var stringArgs = formMenuId.split(":");
            if (stringArgs && stringArgs.length > 0) {
                var form = $(stringArgs[0]);
                if (form && typeof _Menu === "object") {
                    _Menu.createCache(value, flagApp, false);
                    _Menu.renderNavigationBar(value, flagApp);
                    _Menu.searchMenu(form, value, flagApp);
                }
            }
        }
    }
}

function openModalMenu(obj, destino, identMenu) {
    if (destino !== "") {
        var UIContext = Rsis.UIContext.get(obj);
        if (UIContext) {
            var forms = UIContext.forms;
            var UIForm = UIContext.getUIForm(forms[0].id);
            if (UIForm) {
                Message.close(UIForm);
            }
        }
        var param = new Array();
        param["windowDialog"] = this;
        param["timeInit"] = new Date().getTime();
        param["identMenu"] = identMenu;
        crossDialog.show(destino, param, null, function() {
            param = null;
            delete param;
        });
    }
}

function openUrl(destino, identMenu) {
    if (destino !== "") {
        crossDialog.windowDialog = this;
        crossDialog.open(destino, "_self", "", "", true);
    }
}

var imgfake = contextResource + skinFolder + "/images/transparent.gif";

(function($R) {
    PhotoSlideRsis = {
        _FILE: "043photoSlideRsis.js",
        version: JRetail.rsis.VersionJS,
        render: function() {
            return renderPhotoSlide.apply(this, arguments);
        }
    };
    PhotoSlide = {
        COLLECTION: null,
        IMAGE_PRINCIPAL: null,
        parar: 0,
        count: 0,
        TIME: 2e3,
        INTERVAL: 0,
        NEXT: 0,
        PREV: 0,
        getWidth: function() {
            var doc = document;
            var ie = $R.browser.msie;
            var ieBox = ie && (doc.compatMode == null || doc.compatMode == "BackCompat");
            var canvasEl = ieBox ? doc.body : doc.documentElement;
            return window.innerWidth || canvasEl.clientWidth;
        },
        getHeight: function() {
            var doc = document;
            var ie = $R.browser.msie;
            var ieBox = ie && (doc.compatMode == null || doc.compatMode == "BackCompat");
            var canvasEl = ieBox ? doc.body : doc.documentElement;
            return window.innerHeight || canvasEl.clientHeight;
        },
        openWindow: function(object) {
            var thiz = this;
            try {
                if (object) {
                    if (thiz.COLLECTION != null) {
                        var $win = UtilRsis.getParentWindow(object);
                        objectId = getAttMandatory(object, "id");
                        objStringArgs = objectId.split(".");
                        showAutoDemo(object, true);
                        var autoPlay = $(objStringArgs[0] + ".playAutoDemo");
                        if (autoPlay) {
                            thiz.parar = 0;
                            thiz.INTERVAL = setTimeout("alfaImage()", thiz.TIME);
                            autoPlay.className = "btn dps";
                            setDOMEvent(autoPlay, "onclick", "return " + $win + "PhotoSlide.pauseAutoDemo(this);");
                        }
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".openWindow", PhotoSlideRsis);
            }
        },
        playAutoDemo: function(object) {
            var thiz = this;
            try {
                thiz.parar = 0;
                thiz.INTERVAL = setTimeout("alfaImage()", 500);
                object.className = "btn dps";
                var $win = UtilRsis.getParentWindow(object);
                setDOMEvent(object, "onclick", "return " + $win + "PhotoSlide.pauseAutoDemo(this);");
            } catch (oErr) {
                outPrint(oErr, ".playAutoDemo", PhotoSlideRsis);
            }
        },
        pauseAutoDemo: function(object) {
            var thiz = this;
            try {
                thiz.parar = 1;
                object.className = "btn dpy";
                var $win = UtilRsis.getParentWindow(object);
                setDOMEvent(object, "onclick", "return " + $win + "PhotoSlide.playAutoDemo(this);");
            } catch (oErr) {
                outPrint(oErr, ".pauseAutoDemo", PhotoSlideRsis);
            }
        },
        closeAutoDemo: function(object) {
            var thiz = this;
            try {
                thiz.parar = 1;
                thiz.INTERVAL = clearInterval(thiz.INTERVAL);
                showAutoDemo(object, false);
            } catch (oErr) {
                outPrint(oErr, ".playAutoDemo", PhotoSlideRsis);
            }
        },
        nextAutoDemo: function() {
            var thiz = this, list = thiz.COLLECTION, next = thiz.NEXT;
            if (list && list.length > 0) {
                if (next < list.length) {
                    thiz.IMAGE_PRINCIPAL.src = list[next];
                } else {
                    thiz.IMAGE_PRINCIPAL.src = list[0];
                    next = 0;
                }
                next++;
            }
            thiz.NEXT = next;
        },
        prevAutoDemo: function() {
            var thiz = this, list = thiz.COLLECTION, prev = thiz.PREV;
            if (list && list.length > 0) {
                if (prev >= 0 && prev < list.length) {
                    if (list[prev]) thiz.IMAGE_PRINCIPAL.src = list[prev];
                } else {
                    prev = list.length - 1;
                    thiz.IMAGE_PRINCIPAL.src = list[prev];
                }
                prev--;
            }
            thiz.PREV = prev;
        }
    };
})(Rsis);

function renderPhotoSlide(obj, status) {
    try {
        if (obj) {
            var UIContext = Rsis.UIContext.get(obj);
            var nodes = null, events = Rsis.events, $win = UtilRsis.getParentWindow(obj), sEvent = getStringEvent(obj);
            showAutoDemo(obj, false);
            if ($R(obj).isRenderAll()) {
                var objId = obj.id, UIForm = UIContext.getUIForm(obj);
                if (UIForm) {
                    var xmlCollection = null, xml = obj.getAttribute("xml"), fotoPrincipal = $(objId + ".fotoPrincipal");
                    setDataUICpt(obj, fotoPrincipal);
                    if (isNoEmpty(xml)) {
                        var componentParam = $(xml);
                        if (componentParam && componentParam.name == "xml") {
                            xmlCollection = getObjXML(xml);
                        } else {
                            var table = UtilRsis.getTable(UIForm, xml);
                            if (table != null) {
                                xmlCollection = UIForm.getTableXML(xml);
                            } else {
                                xmlCollection = UIForm.getParams(xml);
                            }
                        }
                    } else {
                        xmlCollection = UIForm.getParams(getAttMandatory(obj, "params"));
                    }
                    if (xmlCollection) {
                        var stringNode = getAttMandatory(obj, "node");
                        if (stringNode != null && stringNode !== "") {
                            var stringArgs = stringNode.split("@"), pathNode = stringArgs[0];
                            var nodesCollection = getNodes(xmlCollection, pathNode);
                            if (nodesCollection && nodesCollection.length > 0) {
                                var src = getAttMandatory(obj, "src"), hintImage = getAtt(obj, "hintImage"), imgWidthLarge = getAtt(obj, "imgWidthLarge"), imgHeightLarge = getAtt(obj, "imgHeightLarge");
                                if (isEmpty(imgWidthLarge)) {
                                    imgWidthLarge = "370px";
                                }
                                if (isEmpty(imgHeightLarge)) {
                                    imgHeightLarge = "278px";
                                }
                                if (fotoPrincipal) {
                                    if (src != null && src !== "") {
                                        var strSrcArgs = src.split("@"), href = "";
                                        if (strSrcArgs && strSrcArgs.length > 0) {
                                            var strAttPrinc = strSrcArgs[1];
                                            if (strSrcArgs && strSrcArgs[0] !== "") {
                                                var pathNodePrinc = strSrcArgs[0] !== "" ? "/" + strSrcArgs[0] : strSrcArgs[0], nodesColPrin = getNodes(xmlCollection, pathNode + pathNodePrinc);
                                                if (nodesColPrin) {
                                                    href = nodesColPrin[0].getAttribute(strAttPrinc);
                                                }
                                            } else {
                                                href = nodesCollection[0].getAttribute(strAttPrinc);
                                            }
                                        } else {
                                            href = nodesCollection[0].getAttribute(src);
                                        }
                                        fotoPrincipal.src = href;
                                    }
                                    if (hintImage != null && hintImage !== "") {
                                        var strHintArgs = hintImage.split("@"), alt = "";
                                        if (strHintArgs && strHintArgs.length > 0) {
                                            var strAttHintPrinc = strHintArgs[1];
                                            if (strHintArgs && strHintArgs[0] != "") {
                                                var pathNodeHintPrinc = strHintArgs[0] != "" ? "/" + strHintArgs[0] : strHintArgs[0], nodesColHintPrin = getNodes(xmlCollection, pathNode + pathNodeHintPrinc);
                                                if (nodesColHintPrin) {
                                                    alt = nodesColHintPrin[0].getAttribute(strAttHintPrinc);
                                                }
                                            } else {
                                                alt = nodesCollection[0].getAttribute(strAttHintPrinc);
                                            }
                                        } else {
                                            alt = nodesCollection[0].getAttribute(hintImage);
                                        }
                                        fotoPrincipal.alt = alt;
                                    }
                                    $R.$(fotoPrincipal).css({
                                        width: "",
                                        height: "",
                                        maxWidth: imgWidthLarge,
                                        maxHeight: imgHeightLarge,
                                        cursor: "pointer"
                                    });
                                    events.add(fotoPrincipal, "ondblclick", $win + "openLargeImage(this,'" + fotoPrincipal.src + "');");
                                }
                                var openLargeImage = $(objId + ".openLargeImage");
                                if (openLargeImage) {
                                    events.add(openLargeImage, "onclick", $win + "openLargeImage(this,'" + fotoPrincipal.src + "');");
                                    setDataUICpt(obj, openLargeImage);
                                }
                                var visualizeThumbnail = getAttMandatory(obj, "visualizeThumbnail");
                                if (visualizeThumbnail != null && visualizeThumbnail === "true") {
                                    var srcThumb = getAtt(obj, "srcThumb"), hintThumb = getAtt(obj, "hintThumb"), imgWidth = getAtt(obj, "imgWidth"), imgHeight = getAtt(obj, "imgHeight");
                                    if (isEmpty(imgWidth)) {
                                        imgWidth = "65";
                                    }
                                    if (isEmpty(imgHeight)) {
                                        imgHeight = "50";
                                    }
                                    var thumbnails = $(objId + ".thumbnails");
                                    if (thumbnails) {
                                        thumbnails.innerHTML = "";
                                        for (var it = 0; it < nodesCollection.length; it++) {
                                            if (it > 0) {
                                                var VALUE_SRC = "", strSrcThumbArgs = srcThumb.split("@");
                                                if (strSrcThumbArgs && strSrcThumbArgs.length > 0) {
                                                    var strAttThumb = strSrcThumbArgs[1];
                                                    if (strSrcThumbArgs && strSrcThumbArgs[0] != "") {
                                                        var pathNodeThumb = strSrcThumbArgs[0] != "" ? "/" + strSrcThumbArgs[0] : strSrcThumbArgs[0], nodesColThumb = getNodes(xmlCollection, pathNode + pathNodeThumb);
                                                        if (nodesColThumb) {
                                                            VALUE_SRC = nodesColThumb[it].getAttribute(strAttThumb);
                                                        }
                                                    } else {
                                                        VALUE_SRC = nodesCollection[it].getAttribute(strAttThumb);
                                                    }
                                                } else {
                                                    VALUE_SRC = nodesCollection[it].getAttribute(srcThumb);
                                                }
                                                var HINT_IMAGE = "";
                                                if (hintThumb != null && hintThumb !== "") {
                                                    var strHintThumbArgs = hintThumb.split("@");
                                                    if (strHintThumbArgs && strHintThumbArgs.length > 0) {
                                                        var strAttHintThumb = strHintThumbArgs[1];
                                                        if (strHintThumbArgs && strHintThumbArgs[0] != "") {
                                                            var pathNodeHintThumb = strHintThumbArgs[0] != "" ? "/" + strHintThumbArgs[0] : strHintThumbArgs[0];
                                                            var nodesColHintThumb = getNodes(xmlCollection, pathNode + pathNodeHintThumb);
                                                            if (nodesColHintThumb) {
                                                                HINT_IMAGE = nodesColHintThumb[it].getAttribute(strAttHintThumb);
                                                            }
                                                        } else {
                                                            HINT_IMAGE = nodesCollection[it].getAttribute(strAttHintThumb);
                                                        }
                                                    } else {
                                                        HINT_IMAGE = nodesCollection[it].getAttribute(hintThumb);
                                                    }
                                                }
                                                var li = "<li>" + '<a href="javascript:void(0)" onclick="' + $win + "ImageChange('" + objId + ".img_" + it + "'," + it + ');" id="' + objId + ".img_" + it + '">' + ' <img style="max-height:' + imgHeight + "px;max-width:" + imgWidth + 'px" alt="' + HINT_IMAGE + '" src="' + VALUE_SRC + '" name="' + objId + '.imgThumb" ' + ' \tid="' + objId + ".thumb_" + it + '" />' + "</a>" + "</li>";
                                                thumbnails.innerHTML += li;
                                            }
                                        }
                                    }
                                }
                                configAutoDemo(obj, xmlCollection);
                            } else {
                                fotoPrincipal.src = imgfake;
                                fotoPrincipal.style.width = "1px";
                                fotoPrincipal.style.height = "1px";
                            }
                        }
                        $R(obj).cssHelp(obj).renderDev();
                    } else {
                        fotoPrincipal.src = imgfake;
                        fotoPrincipal.style.width = "1px";
                        fotoPrincipal.style.height = "1px";
                    }
                }
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderPhotoSlide", PhotoSlideRsis);
    }
}

function renderButtonsImage(obj) {
    try {
        if (obj) {
            var $win = UtilRsis.getParentWindow(obj), objId = obj.id, events = Rsis.events, fotoPrincipal = $(objId + ".fotoPrincipal"), openLargeImage = $(objId + ".openLargeImage");
            if (openLargeImage) {
                events.add(openLargeImage, "onclick", $win + "openLargeImage(this,'" + fotoPrincipal.src + "');");
            }
        }
    } catch (oErr) {
        outPrint(oErr, "renderButtonsImage", PhotoSlideRsis);
    }
}

function ImageChange(objectId, numero) {
    try {
        if (objectId && numero) {
            var objStringArgs = objectId.split("."), obj = $(objStringArgs[0]), events = Rsis.events, thumbs = null, $win = UtilRsis.getParentWindow(obj), imagesThumbs = $$(objStringArgs[0] + ".imgThumb");
            if (imagesThumbs && imagesThumbs.length > 0) {
                thumbs = [], k = 0, maxl = imagesThumbs.length;
                for (;k < maxl; k++) {
                    thumbs[k] = imagesThumbs[k];
                }
            }
            var fotoPrincipal = $(objStringArgs[0] + ".fotoPrincipal");
            if (fotoPrincipal) {
                var aux = fotoPrincipal.src;
                fotoPrincipal.src = thumbs[numero - 1].src;
                fotoPrincipal.style.cursor = "pointer";
                events.add(fotoPrincipal, "ondblclick", $win + "openLargeImage(this,'" + fotoPrincipal.src + "');");
                thumbs[numero - 1].src = aux;
            }
            renderButtonsImage(obj);
        }
    } catch (oErr) {
        outPrint(oErr, "ImageChange", PhotoSlideRsis);
    }
}

function openLargeImage(object, url) {
    try {
        if (object && url !== "") {
            var obj = $(object.id.split(".")[0]);
            if (obj) {
                var pathLargeImage = getAtt(obj, "urlLargeImage");
                window.open(contextPath + pathLargeImage + "?pathArquivo=" + url, "imagetoolbar", "toolbar=0,scrollbars=0,resizable=0,menubar=0,status=0,directories=0,location=0,width=640px,height=480px");
            }
        }
    } catch (oErr) {
        outPrint(oErr, "openLargeImage", PhotoSlideRsis);
    }
}

function configAutoDemo(obj, xmlCollection) {
    try {
        if (obj && xmlCollection) {
            var PS = PhotoSlide, stringNode = getAttMandatory(obj, "node");
            if (stringNode != null && stringNode !== "") {
                var stringArgs = stringNode.split("@"), pathNode = stringArgs[0], nodesCollection = getNodes(xmlCollection, pathNode);
                if (nodesCollection && nodesCollection.length > 0) {
                    PS.COLLECTION = [];
                    var src = getAttMandatory(obj, "src"), it = 0, maxIt = nodesCollection.length;
                    for (;it < maxIt; it++) {
                        var strSrcArgs = src.split("@");
                        if (strSrcArgs && strSrcArgs.length > 0) {
                            var strAttPrinc = strSrcArgs[1];
                            if (strSrcArgs && strSrcArgs[0] !== "") {
                                var pathNodePrinc = strSrcArgs[0] !== "" ? "/" + strSrcArgs[0] : strSrcArgs[0], nodesColPrin = getNodes(xmlCollection, pathNode + pathNodePrinc);
                                if (nodesColPrin) {
                                    PS.COLLECTION[it] = nodesColPrin[it].getAttribute(strAttPrinc);
                                }
                            } else {
                                PS.COLLECTION[it] = nodesCollection[it].getAttribute(strAttPrinc);
                            }
                        } else {
                            PS.COLLECTION[it] = nodesCollection[it].getAttribute(src);
                        }
                    }
                }
                var img = $(obj.id + ".fotoPrincipalAutoDemo");
                var imgWidthLargeAd = getAtt(obj, "imgWidthLarge");
                if (imgWidthLargeAd == null || imgWidthLargeAd === "") {
                    imgWidthLargeAd = 540;
                }
                var imgHeightLargeAd = getAtt(obj, "imgHeightLarge");
                if (imgHeightLargeAd == null || imgHeightLargeAd === "") {
                    imgHeightLargeAd = 405;
                }
                var width = parseInt(getAtt(img, "width"), 10), height = parseInt(getAtt(img, "height"), 10);
                if (Rsis.isNumeric(width) && Rsis.isNumeric(height)) {
                    imgWidthLargeAd = imgWidthLargeAd > width ? "" : imgWidthLargeAd;
                    imgHeightLargeAd = imgHeightLargeAd > height ? "" : imgHeightLargeAd;
                }
                img.src = PS.COLLECTION[0];
                img.style.maxWidth = imgWidthLargeAd + "px";
                img.style.maxHeight = imgHeightLargeAd + "px";
                img.style.top = Math.ceil((PS.getHeight() - parseInt(imgHeightLargeAd)) / 2) + "px";
                img.align = "middle";
                PS.IMAGE_PRINCIPAL = img;
                PS.PREV = PS.COLLECTION.length - 1;
                showAutoDemo(obj, false);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "configAutoDemo()", PhotoSlideRsis);
    }
}

function alfaImage() {
    try {
        var PS = PhotoSlide;
        if (PS.COLLECTION != null) {
            if (PS.parar == 1) {
                PS.INTERVAL = clearInterval(PS.INTERVAL);
            } else {
                if (PS.count < PS.COLLECTION.length) {
                    PS.IMAGE_PRINCIPAL.src = PS.COLLECTION[PS.count];
                } else {
                    PS.IMAGE_PRINCIPAL.src = PS.COLLECTION[0];
                    PS.count = 0;
                }
                PS.count += 1;
                PS.INTERVAL = setTimeout("alfaImage()", PS.TIME);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "alfaImage()", PhotoSlideRsis);
    }
}

function showAutoDemo(object, op) {
    try {
        if (object) {
            var objectId = object.getAttribute("id"), objId = object.id.split(".")[0];
            var divPrincipalAutoDemo = $(objId + ".divPrincipalAutoDemo"), divImageToolBarAutoDemo = $(objId + ".divImageToolBarAutoDemo");
            if (divPrincipalAutoDemo) {
                var dpad = divPrincipalAutoDemo.style;
                if (op) {
                    dpad.width = PhotoSlide.getWidth() + "px";
                    dpad.height = PhotoSlide.getHeight() + "px";
                    dpad.left = 0;
                    dpad.top = 0;
                }
                $R(divPrincipalAutoDemo).visible(op);
            }
            if (divPrincipalAutoDemo) {
                $R(divImageToolBarAutoDemo).visible(op);
            }
        }
    } catch (oErr) {
        outPrint(oErr, "showAutoDemo()", PhotoSlideRsis);
    }
}

function start() {
    PhotoSlide.INTERVAL = setTimeout("alfaImage()", PhotoSlide.TIME);
}

function renderHelpPhotoSlide(object, UIForm, enableHelp) {
    try {
        if (object) {
            renderHelp(object, UIForm, enableHelp);
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpPhotoSlide()", PhotoSlideRsis);
    }
}

function renderHelpKeysPhotoSlide(object, UIForm, enableHelp) {
    try {
        if (object) {
            renderHelpKeys(object, UIForm, enableHelp);
        }
    } catch (oErr) {
        outPrint(oErr, "renderHelpKeysPhotoSlide()", PhotoSlideRsis);
    }
}

if (typeof JRetail === "undefined") {
    JRetail = {};
}

(function() {
    JRetail.PwdRsis = {
        _FILE: "044jretail.pwdRsis.js",
        version: JRetail.rsis.VersionJS
    };
    var strUpperCase = "ABCDEFGHIJKLMNOPQRSTUVWXYZ", strLowerCase = "abcdefghijklmnopqrstuvwxyz", strNumber = "0123456789", strCharacters = "!@#$%^&*?_~";
    JRetail.Pwd = {
        VERY_SECURE: 90,
        SECURE: 80,
        VERY_STRONG: 70,
        STRONG: 60,
        AVERAGE: 50,
        WEAK: 25,
        VERY_WEAK: 0,
        check: function(obj) {
            return check(obj);
        }
    };
    function check(obj) {
        try {
            if (obj) {
                var T = findPosY(obj), L = findPosX(obj), OB = JRetail.Pwd;
                var box = createMessageBox($getIframeByObject(obj), obj.id), bst = box.style;
                bst.display = "block";
                bst.top = T - 5 + "px";
                bst.left = L + obj.offsetWidth + 5 + "px";
                var ctlBar = $(obj.id + ".bar"), ctlText = $(obj.id + ".text");
                if (!ctlBar || !ctlText) {
                    return;
                }
                var strText = "<b>" + getMessageBundle("MSG_PASSWORD_STRENGTH") + "</b> ", vstrColor = "", clazzName = "defaultBar", valueScore = checkPassword(obj.value);
                if (valueScore >= OB.VERY_SECURE) {
                    strText = strText + getMessageBundle("MSG_VERY_SECURE");
                    strColor = "#0ca908";
                    clazzName = "verySecure";
                } else if (valueScore >= OB.SECURE) {
                    strText = strText + getMessageBundle("MSG_SECURE");
                    vstrColor = "#57d753";
                    clazzName = "secure";
                } else if (valueScore >= OB.VERY_STRONG) {
                    strText = strText + getMessageBundle("MSG_VERY_STRONG");
                    strColor = "#2c78c6";
                    clazzName = "veryStrong";
                } else if (valueScore >= OB.STRONG) {
                    strText = strText + getMessageBundle("MSG_STRONG");
                    strColor = "#6699cc";
                    clazzName = "strong";
                } else if (valueScore >= OB.AVERAGE) {
                    strText = strText + getMessageBundle("MSG_AVERAGE");
                    strColor = "#e58128";
                    clazzName = "average";
                } else if (valueScore >= OB.WEAK) {
                    strText = strText + getMessageBundle("MSG_WEAK");
                    strColor = "#ea4a4a";
                    clazzName = "weak";
                } else if (obj.value && obj.value.length > 0) {
                    strText = strText + getMessageBundle("MSG_VERY_WEAK");
                    strColor = "#a91717";
                    clazzName = "veryWeak";
                }
                ctlBar.className = "pwBxBr " + clazzName;
                ctlText.innerHTML = "<span style='color:#555;'>" + strText + "</span>";
            }
        } catch (oErr) {
            outPrint(oErr, "check()", JRetail.PwdRsis);
        }
    }
    function createBox(id) {
        return '<div id="pwdBox">' + '<div id="' + id + '.text" class="pwBxTxt"></div>' + '<div id="' + id + '.bar" class="pwBxBr"></div>' + "</div>";
    }
    function createMessageBox(iframe, id) {
        try {
            var doc = window.document;
            var list = null;
            if (iframe != null) {
                doc = getIframeDocument(iframe);
                list = $frame(iframe.id, "pwdBox");
            } else {
                list = $("pwdBox");
            }
            if (!list) {
                list = doc.createElement("DIV");
                list.id = "pwdBox";
                list.innerHTML = createBox(id);
                doc.body.appendChild(list);
            }
        } catch (oErr) {
            outPrint(oErr, "JRetail.pwd.createMessageBox", JRetail.PwdRsis);
        }
        return list;
    }
    function checkPassword(strPassword) {
        try {
            var valueScore = 0;
            if (strPassword != null && strPassword !== "") {
                valueScore = getScoreByLength(strPassword);
                if (strPassword.length > 4) {
                    var nUpperCount = getCountContain(strPassword, strUpperCase), nLowerCount = getCountContain(strPassword, strLowerCase), nLowerUpperCount = nUpperCount + nLowerCount;
                    if (nUpperCount == 0 && nLowerCount != 0) {
                        valueScore += 10;
                    } else if (nUpperCount != 0 && nLowerCount != 0) {
                        valueScore += 20;
                    }
                    var nNumberCount = getCountContain(strPassword, strNumber);
                    if (nNumberCount == 1) {
                        valueScore += 10;
                    }
                    if (nNumberCount >= 3) {
                        valueScore += 20;
                    }
                    var nCharacterCount = getCountContain(strPassword, strCharacters);
                    if (nCharacterCount == 1) {
                        valueScore += 10;
                    }
                    if (nCharacterCount > 1) {
                        valueScore += 25;
                    }
                    if (nNumberCount != 0 && nLowerUpperCount != 0) {
                        valueScore += 5;
                    }
                    if (nNumberCount != 0 && nLowerUpperCount != 0 && nCharacterCount != 0) {
                        valueScore += 10;
                    }
                    if (nNumberCount != 0 && nUpperCount != 0 && nLowerCount != 0 && nCharacterCount != 0) {
                        valueScore += 15;
                    }
                }
            }
        } catch (oErr) {
            outPrint(oErr, "JRetail.pwd.checkPassword()", JRetail.PwdRsis);
        }
        return valueScore;
    }
    function getScoreByLength(strPassword) {
        var valueScore = 0;
        if (strPassword) {
            if (strPassword.length < 5) {
                valueScore = 5;
            } else if (strPassword.length > 4 && strPassword.length < 8) {
                valueScore = 10;
            } else if (strPassword.length > 7) {
                valueScore = 25;
            }
        }
        return valueScore;
    }
    function getCountContain(strPassword, strCheck) {
        var nCount = 0;
        for (i = 0; i < strPassword.length; i++) {
            if (strCheck.indexOf(strPassword.charAt(i)) > -1) {
                nCount++;
            }
        }
        return nCount;
    }
})();

function LinkRsis() {}

LinkRsis._FILE = "045linkRsis.js";

LinkRsis.version = JRetail.rsis.VersionJS;

LinkRsis.vClass = [ "lsbb", "lsbb", "lsbbRdy" ];

function renderLink(a, status) {
    try {
        if (a) {
            var nodes = null, $win = UtilRsis.getParentWindow(a), sEvent = getStringEvent(a);
            if ($R(a).isRenderAll()) {
                if ($R(a).isEditable(status)) {
                    $R(a).rdOnly(false);
                } else {
                    $R(a).rdOnly(true, LinkRsis.vClass);
                }
                renderCSSButton(a, "lsbbDsb");
            }
            $R(a).visRestricted(status).cssHelp().widthCol().renderDev(nodes, arguments[2]);
            a = null;
        }
    } catch (oErr) {
        outPrint(oErr, "renderLink()", LinkRsis);
    }
}

function renderHelpButton(a, UIForm, enableHelp) {
    renderHelp(a, UIForm, enableHelp);
}

function renderHelpKeysButton(a, UIForm, enableHelp) {
    renderHelpKeys(a, UIForm, enableHelp);
}

(function($R, window, document) {
    "use strict";
    var defaults = {
        enable: false,
        timeout: 300,
        minWidth: 0,
        maxWidth: null,
        position: "top",
        restoration: "current",
        speed: 350,
        timer: 0,
        theme: "dropdown",
        touchDevices: true,
        trigger: "hover",
        updateAnimation: true,
        method: "getHelpApp",
        action: "jretail.action.HelpAction",
        xpath: "/aplicacao"
    };
    function observer(timeout, callback) {
        if (!timeout) return;
        var milliseconds = timeout * 1e3;
        var start = new Date().getTime();
        for (var i = 0; i < 1e7; i++) {
            if (new Date().getTime() - start > milliseconds || typeof callback == "function" && callback.call()) {
                break;
            }
        }
    }
    var cache = new Map(), XPATH_HELP_COMPONENTS = "/aplicacaoComponentes/aplicacaoComponente", enableHelp = true;
    $R.define($R, "helpStored", {
        initialize: function(sequence) {
            this.get(sequence, true);
        },
        enableHelp: function(isEnableHelp) {
            if (!isBoolean(isEnableHelp)) {
                var enable = isBoolean(this.storage.get()) ? this.storage.get() : enableHelp;
                isEnableHelp = !enable;
            }
            enableHelp = isEnableHelp;
            this.storage.set(isEnableHelp);
            return this;
        },
        getEnableHelp: function() {
            var isEnableHelp = this.storage.get();
            if (!isBoolean(isEnableHelp)) {
                isEnableHelp = enableHelp;
                this.storage.set(isEnableHelp);
            }
            return isEnableHelp;
        },
        getSeqHelpApp: function(object) {
            if (!object) return;
            var nodeName = object.nodeName;
            if (isNoEmpty(nodeName) && (nodeName.toLowerCase() == "th" || nodeName.toLowerCase() == "td" || nodeName.toLowerCase() == "tr")) {
                return this.getSeqHelpApp(object.parentNode);
            }
            try {
                var seqHelpApp = "", UIContext = $R.UIContext.get(object), container = Crud.getHTMLObject(object);
                var iframeId = container.getAttribute("frameId");
                if (isEmpty(iframeId) && (typeof UIContext != "undefined" && isNoEmpty(UIContext)) && (typeof UIContext.dialog != "undefined" && isNoEmpty(UIContext.dialog) && isNoEmpty(UIContext.dialog.id))) {
                    var ct = $(UIContext.dialog.id + ".container");
                    if (ct) {
                        container = $(UIContext.dialog.id + ".ctrpanel");
                    }
                }
                if (container) {
                    seqHelpApp = container.getAttribute("seqHelpApp");
                }
            } catch (oErr) {
                outPrint(oErr, ".getSeqHelpApp", this);
            }
            return seqHelpApp;
        },
        constraints: function(obj) {
            try {
                if (obj) {
                    var helpStored = $R.helpStored;
                    if (helpStored) {
                        var helpKey = obj.getAttribute("helpKey"), helpApp = helpStored.getSeqHelpApp(obj);
                        return {
                            helpApp: isNoEmpty(helpApp) ? helpApp : "",
                            helpKey: isNoEmpty(helpKey) ? helpKey : ""
                        };
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".constraints", this);
            }
            return null;
        },
        get: function(sequence, searching) {
            var xml = cache.get(sequence), searching = isBoolean(searching) ? searching : false;
            if (!xml && searching) {
                this.http(sequence);
            }
            return xml;
        },
        set: function(key, val) {
            cache.put(key, val);
            return this;
        },
        http: function(sequence) {
            try {
                if (isNoEmpty(sequence)) {
                    var self = this;
                    if (window.Promise) {
                        self.promise({
                            domainXML: "",
                            isCallAjax: "true",
                            targetAction: defaults.action,
                            targetMethod: defaults.method,
                            seqHelpApp: escapeParam(sequence, false)
                        }).then(function(response) {
                            self.set(sequence, XML.broke(XML.create(response), "/xmlDomain" + defaults.xpath));
                        }, function(Error) {
                            console.error(Error);
                            return null;
                        });
                    } else {
                        self.xhr(sequence);
                    }
                }
            } catch (oErr) {
                outPrint(oErr, ".http", this);
            }
        },
        promise: function(parameters) {
            var self = this;
            return new Promise(function(resolve, reject) {
                var request = new XMLHttpRequest();
                request.open("POST", URL, true);
                request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded;charset=UTF-8");
                request.onload = function() {
                    if (request && request.readyState == 4) {
                        if (self.statusValidate(request)) {
                            resolve(request.responseText);
                        } else {
                            reject(Error("didn't load successfully; error code:" + request.statusText));
                        }
                    }
                };
                request.onerror = function() {
                    reject(Error("There was a network error."));
                    console.log("There was a network error.");
                };
                request.send($R.param(parameters));
            });
        },
        xhr: function(sequence) {
            if (isEmpty(sequence)) return false;
            var self = this, parameters = {
                domainXML: "",
                isCallAjax: "true",
                targetAction: defaults.action,
                targetMethod: defaults.method,
                seqHelpApp: escapeParam(sequence, false)
            };
            AjaxRsis.call({
                url: URL,
                parameters: $R.param(parameters),
                async: true,
                callBack: function(f, obj) {
                    try {
                        var req = Properties.getProperty(f);
                        if (req && req.readyState == 4) {
                            if (self.statusValidate(req)) {
                                self.set(sequence, XML.broke(XML.create(req.responseText), "/xmlDomain" + defaults.xpath));
                            }
                        }
                    } catch (oErr) {
                        outPrint(oErr, ".callBack", this);
                    } finally {
                        Properties.remove(f);
                    }
                }
            });
            return this;
        },
        fatherNode: function(sequence) {
            if (isNoEmpty(sequence)) {
                var xml = this.get(sequence, arguments[1]);
                if (xml) {
                    var nodes = getNodes(xml, defaults.xpath);
                    if (nodes && nodes.length > 0) {
                        return nodes[0];
                    }
                }
            }
            return null;
        },
        element: function(sequence, helpKey) {
            if (isNoEmpty(sequence) && isNoEmpty(helpKey)) {
                var xml = this.get(sequence, arguments[2]);
                if (xml) {
                    var nodes = getNodes(xml, defaults.xpath + XPATH_HELP_COMPONENTS + "[@helpKey='" + helpKey + "']");
                    if (nodes && nodes.length > 0) {
                        return nodes[0];
                    }
                }
            }
            return null;
        },
        elements: function(sequence) {
            return isNoEmpty(sequence) ? getNodes(this.get(sequence, arguments[1]), defaults.xpath + XPATH_HELP_COMPONENTS) : null;
        },
        storage: {
            get: function() {
                var string = localStorage.getItem("isEnableHelp"), isEnableHelp = toBoolean(isEmpty(string) ? true : string), enable = false;
                enable = !isBoolean(isEnableHelp) ? enable : isEnableHelp;
                return enable;
            },
            set: function(enable) {
                if (isBoolean(enable)) {
                    localStorage.setItem("isEnableHelp", JSON.stringify(enable));
                }
            }
        },
        statusValidate: function(req) {
            if (req) {
                return AjaxRsis.state.isOk(req);
            }
            return false;
        }
    });
    $R.define($R, "HelpKey", {
        get: function() {
            var dialogName = $R.$(".confirm-container").last()[0].id, dialog = $(dialogName), $forms = $R.$("form", dialog);
            var self = this;
            var $div = self.createDialog(dialog), $ul = $R.$("<ul></ul>");
            $forms.each(function(idx, form) {
                self.createList($ul, form);
            });
            $ul.css({
                "border-top": "1px solid rgb(230, 230, 230)",
                padding: "15px 0"
            });
            $ul.appendTo($div);
            $div.appendTo(dialog).css({
                width: "50%",
                padding: "0 2%",
                margin: "5px",
                border: "1px solid #ccc",
                background: "#fff",
                position: "absolute",
                "z-index": "99999",
                "box-shadow": "rgba(204, 197, 197, 0.55) 0px 0px 6px 0px"
            });
            $div.center();
            $R.$("#closeDivHelpKey").click(function() {
                $R.$("#helpKeysView", document.body).remove();
            }).css({
                cursor: "pointer"
            });
        },
        createDialog: function(dialog) {
            var url = $R.$(dialog).attr("data-url"), seqHelpApp = $R.$("[seqHelpApp]", dialog).attr("seqHelpApp"), seqHelpApp = isEmpty(seqHelpApp) ? "" : seqHelpApp, dataUrl = "";
            if (isNoEmpty(url)) {
                dataUrl = url.substring(url.lastIndexOf("/") + 1, url.indexOf("?"));
            }
            var $div = $R.$("#helpKeysView");
            if ($div && $div[0]) {
                $R.$("#helpKeysView", document.body).remove();
            }
            $div = $R.$('<div id="helpKeysView">' + '<div style="margin:10px 5px;position:relative;display:inline-block">HelpKeys: <b>' + dataUrl + '</b> - SeqHelpApp: <span style="color:red">' + seqHelpApp + "</span></div>" + '<div style="margin:10px 5px;width:20%;float:right;text-align:center"><a id="closeDivHelpKey" style="color:red">Fechar</a></div' + "</div>");
            return $div;
        },
        createList: function($ul, form) {
            if (!form) return;
            var UIForm = $R.getUIForm(form);
            if (UIForm) {
                this.createListItem($ul, this.components(UIForm));
                this.createLineBreak($ul);
            }
        },
        createLineBreak: function($ul, form) {
            var $li = $R.$('<li style="width:100%"><hr/></li>');
            $li.appendTo($ul);
        },
        createListItem: function($ul, cpts) {
            if (!cpts) return;
            $R(cpts).each(function(i, elem) {
                if (typeof elem !== "undefined") {
                    var helpKey = getAtt(elem, "helpKey");
                    var value = isEmpty(helpKey) ? "null" : toInt(helpKey), id = getAtt(elem, "id"), component = getAtt(elem, "component");
                    var nameElem = isNoEmpty(id) ? id.split(":")[1] : "";
                    if (isEmpty(component)) {
                        component = elem.tagName.toLowerCase() == "th" ? "columnHeader" : elem.tagName;
                    } else if (component === "dataScroller" || component === "dataTable" || component === "editTable" || component === "toolBar") {
                        var stringSearch = component === "toolBar" || component === "dataScroller" ? "[type=button]:not(.btnPgSel)" : "th";
                        var $cpts = $R.$(stringSearch, elem);
                        if ($cpts && $cpts[0]) {
                            $cpts.each(function(k, item) {
                                var value = getAtt(item, "helpKey");
                                value = isEmpty(value) ? "null" : toInt(value);
                                var nameElem = isNoEmpty(id) ? id.split(":")[1] : "";
                                var tag = "columnHeader";
                                if (component === "dataScroller" || component === "toolBar") {
                                    tag = "button";
                                }
                                var $li = $R.$('<li style="width:50%"><span style="ont-weight: bold">' + component.toLowerCase() + '.<span style="color:blue">' + nameElem + "</span>." + tag + ':&nbsp;helpKey(</span><span style="color:red">' + value + "</span>)</li>");
                                $li.appendTo($ul);
                            });
                        }
                    } else {
                        var $li = $R.$('<li style="width:50%"><span style="ont-weight: bold">' + component.toLowerCase() + '.<span style="color:blue">' + nameElem + '</span>:&nbsp;helpKey(</span><span style="color:red">' + value + "</span>)</li>");
                        $li.appendTo($ul);
                    }
                }
            });
        },
        components: function(UIForm) {
            if (!UIForm) return [];
            var COMPONENTS = UIForm.getAllUIComponents();
            var cpts = COMPONENTS["label"].concat(COMPONENTS["input"]).concat(COMPONENTS["textarea"]).concat(COMPONENTS["fileUpload"]).concat(COMPONENTS["comboBox"]).concat(COMPONENTS["comboActions"]).concat(COMPONENTS["searchField"]).concat(COMPONENTS["autoComplete"]).concat(COMPONENTS["listBox"]).concat(COMPONENTS["suggestBox"]).concat(COMPONENTS["photoSlide"]).concat(COMPONENTS["radioButton"]).concat(COMPONENTS["checkBox"]).concat(COMPONENTS["button"]).concat(COMPONENTS["toolBar"]).concat(COMPONENTS["editTable"]).concat(COMPONENTS["dataTable"]).concat(COMPONENTS["dataScroller"]);
            return cpts;
        }
    });
    shortcut.add("alt+k", function(event) {
        Rsis.HelpKey.get();
    }, {
        type: "keydown",
        propagate: true,
        target: document
    });
})(Rsis, window, document);

function Xml2json() {}

Xml2json._FILE = "047xml2json.js";

(function(root, factory) {
    if (typeof define === "function" && define.amd) {
        define([], factory);
    } else if (typeof exports === "object") {
        module.exports = factory();
    } else {
        root.X2JS = factory();
    }
})(this, function() {
    return function(config) {
        "use strict";
        var VERSION = "1.2.0";
        config = config || {};
        initConfigDefaults();
        initRequiredPolyfills();
        function initConfigDefaults() {
            if (config.escapeMode === undefined) {
                config.escapeMode = true;
            }
            config.attributePrefix = config.attributePrefix || "_";
            config.arrayAccessForm = config.arrayAccessForm || "none";
            config.emptyNodeForm = config.emptyNodeForm || "text";
            if (config.enableToStringFunc === undefined) {
                config.enableToStringFunc = true;
            }
            config.arrayAccessFormPaths = config.arrayAccessFormPaths || [];
            if (config.skipEmptyTextNodesForObj === undefined) {
                config.skipEmptyTextNodesForObj = true;
            }
            if (config.stripWhitespaces === undefined) {
                config.stripWhitespaces = true;
            }
            config.datetimeAccessFormPaths = config.datetimeAccessFormPaths || [];
            if (config.useDoubleQuotes === undefined) {
                config.useDoubleQuotes = false;
            }
            config.xmlElementsFilter = config.xmlElementsFilter || [];
            config.jsonPropertiesFilter = config.jsonPropertiesFilter || [];
            if (config.keepCData === undefined) {
                config.keepCData = false;
            }
        }
        var DOMNodeTypes = {
            ELEMENT_NODE: 1,
            TEXT_NODE: 3,
            CDATA_SECTION_NODE: 4,
            COMMENT_NODE: 8,
            DOCUMENT_NODE: 9
        };
        function initRequiredPolyfills() {}
        function getNodeLocalName(node) {
            var nodeLocalName = node.localName;
            if (nodeLocalName == null) nodeLocalName = node.baseName;
            if (nodeLocalName == null || nodeLocalName == "") nodeLocalName = node.nodeName;
            return nodeLocalName;
        }
        function getNodePrefix(node) {
            return node.prefix;
        }
        function escapeXmlChars(str) {
            if (typeof str == "string") return str.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&apos;"); else return str;
        }
        function unescapeXmlChars(str) {
            return str.replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&quot;/g, '"').replace(/&apos;/g, "'").replace(/&amp;/g, "&");
        }
        function checkInStdFiltersArrayForm(stdFiltersArrayForm, obj, name, path) {
            var idx = 0;
            for (;idx < stdFiltersArrayForm.length; idx++) {
                var filterPath = stdFiltersArrayForm[idx];
                if (typeof filterPath === "string") {
                    if (filterPath == path) break;
                } else if (filterPath instanceof RegExp) {
                    if (filterPath.test(path)) break;
                } else if (typeof filterPath === "function") {
                    if (filterPath(obj, name, path)) break;
                }
            }
            return idx != stdFiltersArrayForm.length;
        }
        function toArrayAccessForm(obj, childName, path) {
            switch (config.arrayAccessForm) {
              case "property":
                if (!(obj[childName] instanceof Array)) obj[childName + "_asArray"] = [ obj[childName] ]; else obj[childName + "_asArray"] = obj[childName];
                break;
            }
            if (!(obj[childName] instanceof Array) && config.arrayAccessFormPaths.length > 0) {
                if (checkInStdFiltersArrayForm(config.arrayAccessFormPaths, obj, childName, path)) {
                    obj[childName] = [ obj[childName] ];
                }
            }
        }
        function fromXmlDateTime(prop) {
            var bits = prop.split(/[-T:+Z]/g);
            var d = new Date(bits[0], bits[1] - 1, bits[2]);
            var secondBits = bits[5].split(".");
            d.setHours(bits[3], bits[4], secondBits[0]);
            if (secondBits.length > 1) d.setMilliseconds(secondBits[1]);
            if (bits[6] && bits[7]) {
                var offsetMinutes = bits[6] * 60 + Number(bits[7]);
                var sign = /\d\d-\d\d:\d\d$/.test(prop) ? "-" : "+";
                offsetMinutes = 0 + (sign == "-" ? -1 * offsetMinutes : offsetMinutes);
                d.setMinutes(d.getMinutes() - offsetMinutes - d.getTimezoneOffset());
            } else if (prop.indexOf("Z", prop.length - 1) !== -1) {
                d = new Date(Date.UTC(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes(), d.getSeconds(), d.getMilliseconds()));
            }
            return d;
        }
        function checkFromXmlDateTimePaths(value, childName, fullPath) {
            if (config.datetimeAccessFormPaths.length > 0) {
                var path = fullPath.split(".#")[0];
                if (checkInStdFiltersArrayForm(config.datetimeAccessFormPaths, value, childName, path)) {
                    return fromXmlDateTime(value);
                } else return value;
            } else return value;
        }
        function checkXmlElementsFilter(obj, childType, childName, childPath) {
            if (childType == DOMNodeTypes.ELEMENT_NODE && config.xmlElementsFilter.length > 0) {
                return checkInStdFiltersArrayForm(config.xmlElementsFilter, obj, childName, childPath);
            } else return true;
        }
        function parseDOMChildren(node, path) {
            if (node.nodeType == DOMNodeTypes.DOCUMENT_NODE) {
                var result = new Object();
                var nodeChildren = node.childNodes;
                for (var cidx = 0; cidx < nodeChildren.length; cidx++) {
                    var child = nodeChildren.item(cidx);
                    if (child.nodeType == DOMNodeTypes.ELEMENT_NODE) {
                        var childName = getNodeLocalName(child);
                        result[childName] = parseDOMChildren(child, childName);
                    }
                }
                return result;
            } else if (node.nodeType == DOMNodeTypes.ELEMENT_NODE) {
                var result = new Object();
                result.__cnt = 0;
                var nodeChildren = node.childNodes;
                for (var cidx = 0; cidx < nodeChildren.length; cidx++) {
                    var child = nodeChildren.item(cidx);
                    var childName = getNodeLocalName(child);
                    if (child.nodeType != DOMNodeTypes.COMMENT_NODE) {
                        var childPath = path + "." + childName;
                        if (checkXmlElementsFilter(result, child.nodeType, childName, childPath)) {
                            result.__cnt++;
                            if (result[childName] == null) {
                                result[childName] = parseDOMChildren(child, childPath);
                                toArrayAccessForm(result, childName, childPath);
                            } else {
                                if (result[childName] != null) {
                                    if (!(result[childName] instanceof Array)) {
                                        result[childName] = [ result[childName] ];
                                        toArrayAccessForm(result, childName, childPath);
                                    }
                                }
                                result[childName][result[childName].length] = parseDOMChildren(child, childPath);
                            }
                        }
                    }
                }
                for (var aidx = 0; aidx < node.attributes.length; aidx++) {
                    var attr = node.attributes.item(aidx);
                    result.__cnt++;
                    result[config.attributePrefix + attr.name] = attr.value;
                }
                var nodePrefix = getNodePrefix(node);
                if (nodePrefix != null && nodePrefix != "") {
                    result.__cnt++;
                    result.__prefix = nodePrefix;
                }
                if (result["#text"] != null) {
                    result.__text = result["#text"];
                    if (result.__text instanceof Array) {
                        result.__text = result.__text.join("\n");
                    }
                    if (config.stripWhitespaces) result.__text = result.__text.trim();
                    delete result["#text"];
                    if (config.arrayAccessForm == "property") delete result["#text_asArray"];
                    result.__text = checkFromXmlDateTimePaths(result.__text, childName, path + "." + childName);
                }
                if (result["#cdata-section"] != null) {
                    result.__cdata = result["#cdata-section"];
                    delete result["#cdata-section"];
                    if (config.arrayAccessForm == "property") delete result["#cdata-section_asArray"];
                }
                if (result.__cnt == 0 && config.emptyNodeForm == "text") {
                    result = "";
                } else if (result.__cnt == 1 && result.__text != null) {
                    result = result.__text;
                } else if (result.__cnt == 1 && result.__cdata != null && !config.keepCData) {
                    result = result.__cdata;
                } else if (result.__cnt > 1 && result.__text != null && config.skipEmptyTextNodesForObj) {
                    if (config.stripWhitespaces && result.__text == "" || result.__text.trim() == "") {
                        delete result.__text;
                    }
                }
                delete result.__cnt;
                if (config.enableToStringFunc && (result.__text != null || result.__cdata != null)) {
                    result.toString = function() {
                        return (this.__text != null ? this.__text : "") + (this.__cdata != null ? this.__cdata : "");
                    };
                }
                return result;
            } else if (node.nodeType == DOMNodeTypes.TEXT_NODE || node.nodeType == DOMNodeTypes.CDATA_SECTION_NODE) {
                return node.nodeValue;
            }
        }
        function startTag(jsonObj, element, attrList, closed) {
            var resultStr = "<" + (jsonObj != null && jsonObj.__prefix != null ? jsonObj.__prefix + ":" : "") + element;
            if (attrList != null) {
                for (var aidx = 0; aidx < attrList.length; aidx++) {
                    var attrName = attrList[aidx];
                    var attrVal = jsonObj[attrName];
                    if (config.escapeMode) attrVal = escapeXmlChars(attrVal);
                    resultStr += " " + attrName.substr(config.attributePrefix.length) + "=";
                    if (config.useDoubleQuotes) resultStr += '"' + attrVal + '"'; else resultStr += "'" + attrVal + "'";
                }
            }
            if (!closed) resultStr += ">"; else resultStr += "/>";
            return resultStr;
        }
        function endTag(jsonObj, elementName) {
            return "</" + (jsonObj.__prefix != null ? jsonObj.__prefix + ":" : "") + elementName + ">";
        }
        function endsWith(str, suffix) {
            return str.indexOf(suffix, str.length - suffix.length) !== -1;
        }
        function jsonXmlSpecialElem(jsonObj, jsonObjField) {
            if (config.arrayAccessForm == "property" && endsWith(jsonObjField.toString(), "_asArray") || jsonObjField.toString().indexOf(config.attributePrefix) == 0 || jsonObjField.toString().indexOf("__") == 0 || jsonObj[jsonObjField] instanceof Function) return true; else return false;
        }
        function jsonXmlElemCount(jsonObj) {
            var elementsCnt = 0;
            if (jsonObj instanceof Object) {
                for (var it in jsonObj) {
                    if (jsonXmlSpecialElem(jsonObj, it)) continue;
                    elementsCnt++;
                }
            }
            return elementsCnt;
        }
        function checkJsonObjPropertiesFilter(jsonObj, propertyName, jsonObjPath) {
            return config.jsonPropertiesFilter.length == 0 || jsonObjPath == "" || checkInStdFiltersArrayForm(config.jsonPropertiesFilter, jsonObj, propertyName, jsonObjPath);
        }
        function parseJSONAttributes(jsonObj) {
            var attrList = [];
            if (jsonObj instanceof Object) {
                for (var ait in jsonObj) {
                    if (ait.toString().indexOf("__") == -1 && ait.toString().indexOf(config.attributePrefix) == 0) {
                        attrList.push(ait);
                    }
                }
            }
            return attrList;
        }
        function parseJSONTextAttrs(jsonTxtObj) {
            var result = "";
            if (jsonTxtObj.__cdata != null) {
                result += "<![CDATA[" + jsonTxtObj.__cdata + "]]>";
            }
            if (jsonTxtObj.__text != null) {
                if (config.escapeMode) result += escapeXmlChars(jsonTxtObj.__text); else result += jsonTxtObj.__text;
            }
            return result;
        }
        function parseJSONTextObject(jsonTxtObj) {
            var result = "";
            if (jsonTxtObj instanceof Object) {
                result += parseJSONTextAttrs(jsonTxtObj);
            } else if (jsonTxtObj != null) {
                if (config.escapeMode) result += escapeXmlChars(jsonTxtObj); else result += jsonTxtObj;
            }
            return result;
        }
        function getJsonPropertyPath(jsonObjPath, jsonPropName) {
            if (jsonObjPath === "") {
                return jsonPropName;
            } else return jsonObjPath + "." + jsonPropName;
        }
        function parseJSONArray(jsonArrRoot, jsonArrObj, attrList, jsonObjPath) {
            var result = "";
            if (jsonArrRoot.length == 0) {
                result += startTag(jsonArrRoot, jsonArrObj, attrList, true);
            } else {
                for (var arIdx = 0; arIdx < jsonArrRoot.length; arIdx++) {
                    result += startTag(jsonArrRoot[arIdx], jsonArrObj, parseJSONAttributes(jsonArrRoot[arIdx]), false);
                    result += parseJSONObject(jsonArrRoot[arIdx], getJsonPropertyPath(jsonObjPath, jsonArrObj));
                    result += endTag(jsonArrRoot[arIdx], jsonArrObj);
                }
            }
            return result;
        }
        function parseJSONObject(jsonObj, jsonObjPath) {
            var result = "";
            var elementsCnt = jsonXmlElemCount(jsonObj);
            if (elementsCnt > 0) {
                for (var it in jsonObj) {
                    if (jsonXmlSpecialElem(jsonObj, it) || jsonObjPath != "" && !checkJsonObjPropertiesFilter(jsonObj, it, getJsonPropertyPath(jsonObjPath, it))) continue;
                    var subObj = jsonObj[it];
                    var attrList = parseJSONAttributes(subObj);
                    if (subObj == null || subObj == undefined) {
                        result += startTag(subObj, it, attrList, true);
                    } else if (subObj instanceof Object) {
                        if (subObj instanceof Array) {
                            result += parseJSONArray(subObj, it, attrList, jsonObjPath);
                        } else if (subObj instanceof Date) {
                            result += startTag(subObj, it, attrList, false);
                            result += subObj.toISOString();
                            result += endTag(subObj, it);
                        } else {
                            var subObjElementsCnt = jsonXmlElemCount(subObj);
                            if (subObjElementsCnt > 0 || subObj.__text != null || subObj.__cdata != null) {
                                result += startTag(subObj, it, attrList, false);
                                result += parseJSONObject(subObj, getJsonPropertyPath(jsonObjPath, it));
                                result += endTag(subObj, it);
                            } else {
                                result += startTag(subObj, it, attrList, true);
                            }
                        }
                    } else {
                        result += startTag(subObj, it, attrList, false);
                        result += parseJSONTextObject(subObj);
                        result += endTag(subObj, it);
                    }
                }
            }
            result += parseJSONTextObject(jsonObj);
            return result;
        }
        this.parseXmlString = function(xmlDocStr) {
            var isIEParser = window.ActiveXObject || "ActiveXObject" in window;
            if (xmlDocStr === undefined) {
                return null;
            }
            var xmlDoc;
            if (window.DOMParser) {
                var parser = new window.DOMParser();
                var parsererrorNS = null;
                if (!isIEParser) {
                    try {
                        parsererrorNS = parser.parseFromString("INVALID", "text/xml").getElementsByTagName("parsererror")[0].namespaceURI;
                    } catch (err) {
                        parsererrorNS = null;
                    }
                }
                try {
                    xmlDoc = parser.parseFromString(xmlDocStr, "text/xml");
                    if (parsererrorNS != null && xmlDoc.getElementsByTagNameNS(parsererrorNS, "parsererror").length > 0) {
                        xmlDoc = null;
                    }
                } catch (err) {
                    xmlDoc = null;
                }
            } else {
                if (xmlDocStr.indexOf("<?") == 0) {
                    xmlDocStr = xmlDocStr.substr(xmlDocStr.indexOf("?>") + 2);
                }
                xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
                xmlDoc.async = "false";
                xmlDoc.loadXML(xmlDocStr);
            }
            return xmlDoc;
        };
        this.asArray = function(prop) {
            if (prop === undefined || prop == null) return []; else if (prop instanceof Array) return prop; else return [ prop ];
        };
        this.toXmlDateTime = function(dt) {
            if (dt instanceof Date) return dt.toISOString(); else if (typeof dt === "number") return new Date(dt).toISOString(); else return null;
        };
        this.asDateTime = function(prop) {
            if (typeof prop == "string") {
                return fromXmlDateTime(prop);
            } else return prop;
        };
        this.xml2json = function(xmlDoc) {
            return parseDOMChildren(xmlDoc);
        };
        this.xml_str2json = function(xmlDocStr) {
            var xmlDoc = this.parseXmlString(xmlDocStr);
            if (xmlDoc != null) return this.xml2json(xmlDoc); else return null;
        };
        this.json2xml_str = function(jsonObj) {
            return parseJSONObject(jsonObj, "");
        };
        this.json2xml = function(jsonObj) {
            var xmlDocStr = this.json2xml_str(jsonObj);
            return this.parseXmlString(xmlDocStr);
        };
        this.getVersion = function() {
            return VERSION;
        };
    };
});

(function($R) {
    DataGridRsis = {
        _FILE: "048dataGridRsis.js",
        render: function(obj) {
            $R(arguments[0]).dataGrid(arguments);
        },
        click: function(object, args, fn) {
            var exte = null, parent;
            try {
                var ns_string = fn;
                if (ns_string.search(/\$P./) > -1) {
                    ns_string = ns_string.replace("$P.", "");
                }
                exte = $R.str2Fn($P, ns_string);
                parent = $R.namespace($P, ns_string) || this;
            } catch (e) {
                exte = $R.str2Fn($W, ns_string);
                parent = $R.namespace(ns_string) || this;
            }
            if (exte) {
                return exte.apply(parent, [ object, args ]);
            }
        }
    };
})(Rsis);

(function($R, dataGridRsis) {
    "use strict";
    var TABLE_HEADER = "header", TABLE_BODY = "body", TABLE_FOOTER = "footer";
    function getTagNameByTypeObject(type) {
        if (type === TABLE_HEADER) {
            return "th";
        }
        return "td";
    }
    function DataGrid(object, configs) {
        var cache = null, timesync = 0, currentPerc = 0, progress = 0, time = 50;
        this.progressBar = null;
        this.settings = {
            synchronize: {
                progress: false,
                sync: false,
                delay: 360,
                http: null
            },
            xpath: "dataGrid",
            objectName: "dataGrid",
            dataGrid: {
                width: "100%"
            },
            gridRow: {},
            gridCol: {
                click: null
            }
        };
        function convertXML2JSON(obj, settings) {
            if (!obj) return null;
            var UIForm = $R.getUIForm(obj);
            if (UIForm) {
                var node = getNodes(UIForm.getTableXML(obj.id), "/" + settings.xpath);
                if (node && node.length > 0) {
                    var x2js = new X2JS();
                    try {
                        return x2js.xml_str2json(node[0].xml);
                    } catch (oErr) {
                        outPrint(oErr, "convertXML2JSON", dataGridRsis);
                    }
                }
            }
            return null;
        }
        function createTableHeader(object, rowLayout, dataGrid, settings) {
            if (!object || !rowLayout || !dataGrid) return;
            var tHeader = $R(object.id + ".dHdr");
            if (!tHeader || tHeader && !tHeader[0]) {
                tHeader = $R.$([ '<div id="' + object.id + '.dHdr" class="dtbsHd" style="width:100%;">', '<div id="' + object.id + '.ctHdr" class="content">', '<table id="' + object.id + '.tableHdr" component="dataGrid" data-cpt="grid">', '<thead id="' + object.id + '.tHdr">', "</thead>", "</table>", "</div>", "</div>" ].join("")).appendTo(object);
            }
            if (tHeader) {
                fnAddRow($R(object.id + ".tHdr"), 0, rowLayout, settings);
            }
            return tHeader;
        }
        function createTableBody(object, rowLayout, dataGrid, settings) {
            if (!object || !rowLayout || !dataGrid) return;
            var tBody = $R(object.id + ".tBdy");
            if (!tBody || tBody && !tBody[0]) {
                var dBd = $R.$([ '<div id="' + object.id + '.dBd" class="dtbsGridBd" data-cpt="grid">', '<div style="width: 100%;">', '<table class="content" id="' + object.id + '.ctBdr" data-cpt="grid">', '<tbody id="' + object.id + '.tBdy">', "</tbody>", "</table>", "</div>", "</div>" ].join("")).appendTo(object);
                if (dBd) {
                    $R.$(dBd).css({
                        width: dataGrid._width,
                        height: dataGrid._height
                    });
                }
                tBody = $R(object.id + ".tBdy");
            }
            return tBody;
        }
        function createTableFooter(object, rowLayout, dataGrid, settings) {
            console.log("Nao foi desenvolvido");
            if (!object || !rowLayout || !dataGrid) return;
            return null;
        }
        function defaultCellWriter(content, idx, columnLayout, rowLayout, settings) {
            if (!columnLayout || !rowLayout) return;
            var colWriter = "", tagNameCol = getTagNameByTypeObject(rowLayout._type);
            var styleClass = columnLayout._styleClass, typeCol = columnLayout._type;
            colWriter += "<" + tagNameCol;
            if (isNoEmpty(columnLayout._colspan)) {
                colWriter += ' colspan="' + columnLayout._colspan + '"';
            }
            if (isNoEmpty(columnLayout._width) || isNoEmpty(columnLayout._height)) {
                colWriter += ' style="';
                if (isNoEmpty(columnLayout._width)) {
                    colWriter += "width:" + columnLayout._width + ";";
                }
                if (isNoEmpty(columnLayout._height)) {
                    colWriter += " height:" + columnLayout._height + ";";
                }
                colWriter += '"';
            }
            if (isNoEmpty(styleClass)) {
                colWriter += ' class="' + styleClass + '"';
            } else if (typeCol !== TABLE_HEADER) {
                colWriter += ' class="dtbsHd"';
            }
            if (rowLayout._type !== TABLE_HEADER && isNoEmpty(columnLayout._click)) {
                var $win = UtilRsis.getParentWindow(content), fn = !/xmlDomain\=/.test(settings.gridCol.click) ? settings.gridCol.click + "()" : settings.gridCol.click;
                colWriter += ' onclick="' + $win + "DataGridRsis.click(this, " + columnLayout._click + ",'" + fn + "');\"";
            }
            colWriter += defaultHintCellWriter(content, columnLayout, settings);
            colWriter += " >";
            colWriter += columnLayout._content ? columnLayout._content : "";
            colWriter += "</" + tagNameCol + ">";
            return colWriter;
        }
        function defaultHintCellWriter(content, columnLayout, settings) {
            var colWriter = "";
            if (isNoEmpty(columnLayout._hint)) {
                var $win = UtilRsis.getParentWindow(content), rt = "return ", jrt = "Rsis.Tip.", hint = columnLayout._hint, WIDTH = lengthHintCell(hint);
                var mover = rt + $win + jrt + "show(this, event,'" + hint + "'," + round(WIDTH, 2) + ");";
                var mout = rt + $win + jrt + "hidden(this);";
                colWriter += ' hint="' + columnLayout._hint + '" ';
                colWriter += ' onmouseover="' + mover + '"';
                colWriter += ' onmouseout="' + mout + '"';
            }
            return colWriter;
        }
        function lengthHintCell(hint) {
            if (isNoEmpty(hint) && hint.length > 0) {
                return toInt(hint.length) * 6.9 + 4;
            }
            return 0;
        }
        function fnAddRow(content, index, rowLayout, settings) {
            var row = null;
            if (content && rowLayout) {
                var rowWriter = "<tr ", styleClass = "";
                if (rowLayout._type == TABLE_BODY && isNoEmpty(rowLayout._styleClass)) {
                    styleClass += index & 1 ? "even" : "odd";
                    styleClass += " " + rowLayout._styleClass;
                }
                rowWriter += 'class="' + styleClass + '"';
                rowWriter += ">";
                var gridCols = rowLayout.gridCols;
                if (gridCols) {
                    if ($R.isArray(gridCols.gridCol)) {
                        $R.each(rowLayout.gridCols.gridCol, function(idx, columnLayout) {
                            rowWriter += defaultCellWriter(content, idx, columnLayout, rowLayout, settings);
                        });
                    } else {
                        rowWriter += defaultCellWriter(content, 0, gridCols.gridCol, rowLayout, settings);
                    }
                }
                rowWriter += "</tr>";
                row = $R.$(rowWriter).appendTo(content);
            }
            return row;
        }
        function updateWidthRows(object, dataGrid) {
            if (object && dataGrid) {
                var wWidth = window.screen.availWidth, _ctHdr = $R(object.id + ".ctHdr"), ctHdr = $R.$(ctHdr), _ctBdr = $R(object.id + ".ctBdr"), ctBdr = $R.$(_ctBdr), ctHdrWidth = ctHdr.width(), ctBdrWidth = ctBdr.width();
                var wd = 0;
                if (wWidth < ctHdrWidth) {
                    wd = Math.max(wWidth, ctHdrWidth) + 38;
                    ctHdr.width(wd);
                } else if (ctHdrWidth == ctBdrWidth) {
                    var hW = ctHdr.width();
                    if (hW.search("%") !== -1) {
                        var pxWidth = Math.max(ctHdr.clientWidth(), ctHdr.scrollWidth());
                        if (pxWidth == 0) {
                            pxWidth = wWidth - 50;
                        }
                        ctHdr.width(pxWidth);
                    }
                }
            }
        }
        function renderGridRow(object, dataGrid, index, rowLayout, settings) {
            if (!rowLayout) return;
            var styleClass = rowLayout._styleClass, type = rowLayout._type;
            if (type === TABLE_HEADER) {
                createTableHeader(object, rowLayout, dataGrid, settings);
            } else if (type === TABLE_FOOTER) {
                createTableFooter(object, rowLayout, dataGrid, settings);
            } else {
                var tBody = createTableBody(object, rowLayout, dataGrid, settings);
                if (tBody) {
                    fnAddRow(tBody, index, rowLayout, settings);
                }
            }
        }
        this.initialize = function(object, configs) {
            var that = this;
            try {
                that.settings = $R.extend({}, that.settings, configs);
                that.clearSynchronize();
                if (typeof that.settings.gridCol.click != "undefined" && typeof that.settings.gridCol.click != null) {
                    that.settings.gridCol.click = $R.$(object).attr("data-click");
                }
                cache = convertXML2JSON(object, that.settings);
                that.render(object, configs);
                that.startSynchronize();
            } catch (oErr) {
                outPrint(oErr, "initialize", dataGridRsis);
            }
            return that;
        };
        this.startSynchronize = function(configs) {
            var that = this;
            if (!configs) configs = {
                synchronize: {
                    http: {
                        parameters: null
                    }
                }
            };
            if (!that.settings && !configs && !configs.object) return;
            that.settings.http = $R.extend({}, that.settings.http, configs);
            var synchronize = that.settings.synchronize;
            if (synchronize && synchronize.sync) {
                time = synchronize.delay * 1e3 / 100;
                that.startProgress(synchronize);
                timesync = setInterval(function() {
                    that.http(synchronize.http);
                    currentPerc = 0;
                }, synchronize.delay * 1e3);
            }
        };
        this.clearSynchronize = function() {
            if (this.settings.synchronize && this.settings.synchronize.sync) {
                clearInterval(timesync);
                clearInterval(progress);
            }
            return this;
        };
        this.startProgress = function(synchronize) {
            currentPerc = 0;
            if (!synchronize || !synchronize.http.object) return;
            var that = this, progressBar = that.progressBar;
            if (progressBar) {
                var me = $R.$(progressBar), perc = me.attr("aria-valuemax");
                progress = setInterval(function() {
                    if (currentPerc >= perc) {
                        clearInterval(progress);
                    } else {
                        currentPerc += 1;
                        $R.$(that.progressBar).width(currentPerc + "%");
                    }
                }, time);
            }
        };
        this.http = function(configs) {
            var that = this;
            try {
                if (!that.settings && !configs && !configs.object) return;
                that.settings.http = $R.extend({}, that.settings.http, configs);
                var obj = configs.object, UIForm = $R.getUIForm(obj);
                if (UIForm) {
                    if (that.settings.synchronize.http && isNoEmpty(that.settings.synchronize.http.parameters) && !/xmlDomain\=/.test(that.settings.synchronize.http.parameters)) {
                        var xmlDomain = formToXML(UIForm) && UIForm.domainXML ? UIForm.domainXML.xml : "";
                        that.settings.synchronize.http.parameters += "xmlDomain=" + escapeParam(xmlDomain, true);
                    }
                    UIForm.http($R.extend(that.settings.http, {
                        render: function(UIForm, objXML, object) {
                            cache = convertXML2JSON(object, that.settings);
                            that.render(object, that.settings);
                        }
                    }));
                } else {
                    that.clearSynchronize();
                }
            } catch (oErr) {
                outPrint(oErr, "http", dataGridRsis);
            }
            return that;
        };
        this.render = function(object, configs) {
            var that = this;
            try {
                if (cache) {
                    that.clear(object);
                    var dataGrid = cache.dataGrid, gridRows = cache.dataGrid.gridRows;
                    if (gridRows) {
                        if ($R.isArray(gridRows.gridRow)) {
                            $R.each(cache.dataGrid.gridRows.gridRow, function(index, rowLayout) {
                                renderGridRow(object, dataGrid, index, rowLayout, that.settings);
                            });
                        } else {
                            renderGridRow(object, dataGrid, 0, gridRows.gridRow, that.settings);
                        }
                    }
                    that.scroll(object);
                    that.updateHdrWidth(object);
                }
                that.progress(object, that.settings.synchronize);
            } catch (oErr) {
                outPrint(oErr, "render", dataGridRsis);
            }
            return that;
        };
        this.progress = function(object, synchronize) {
            if (synchronize.progress) {
                var progress = $R(object.id + ".progress");
                if (!progress || progress && !progress[0]) {
                    var prgs = $R.$([ '<div class="progress" id="' + object.id + '.progress" data-cpt="grid">', '<div class="progress-bar progress-bar-danger" id="' + object.id + '.progressBar" data-cpt="grid"', 'role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">', '<span class="sr-only"></span>', "</div>", "</div>" ].join("")).appendTo(object);
                    if (prgs) {
                        $R.$(prgs).css({
                            width: "99.8%",
                            height: "2px",
                            "margin-bottom": "0px"
                        });
                    }
                    progress = $R(object.id + ".progress");
                }
                var progressBar = $R(object.id + ".progressBar");
                if (progress && progressBar && progressBar[0]) {
                    $R.$(progressBar[0]).width("1%");
                    this.progressBar = progressBar[0];
                }
            }
        };
        this.clear = function(object) {
            $R.$(object).html("");
            var progress = $(object.id + ".progress");
            if (progress) {
                $R.$(progress).remove();
                this.progressBar = null;
            }
            return this;
        };
        this.updateHdrWidth = function(tBd) {
            var tHd = $(tBd.id + ".dHdr"), bd = $(tBd.id + ".dBd"), hasHScroll = this.hasHgtScroll(bd), hasWScroll = this.hasWdtScroll(bd), ctHdr = $(tBd.id + ".ctHdr"), tFt = $(tBd.id + ".ftr"), wdt = "100%";
            if (hasHScroll) {
                if (ctHdr) $R.$(ctHdr).width("98.2%");
                if (tFt) $R.$(tFt).width("98.2%");
            } else {
                tHd.style.width = wdt;
                if (tBd && hasWScroll) {
                    tBd.style.width = wdt;
                } else {
                    tBd.style.width = "";
                }
                if (tFt) {
                    tFt.style.width = wdt;
                }
            }
            return this;
        };
        this.hasHgtScroll = function(bd) {
            return bd && bd.scrollHeight > bd.clientHeight ? true : false;
        };
        this.hasWdtScroll = function(bd) {
            return bd && bd.scrollWidth > bd.clientWidth ? true : false;
        };
        this.scroll = function(object) {
            var tbd = $(object.id + ".dBd");
            if (tbd) {
                tbd.onscroll = function(event) {
                    var parentId = this.id.split(".")[0], hdr = $(parentId + ".ctHdr"), ftr = $(parentId + ".dFtr");
                    if (hdr) {
                        hdr.scrollLeft = tbd.scrollLeft;
                    }
                    if (ftr) {
                        ftr.scrollLeft = tbd.scrollLeft;
                    }
                };
            }
            return this;
        };
        this.click = function(args, fn) {
            if (typeof fn == "function") {
                fn.call(args);
            }
        };
    }
    $R.fn.dataGrid = function(config) {
        return new DataGrid().initialize(this[0], config);
    };
})(Rsis, DataGridRsis);

function renderDataGrid(obj, state) {
    $R(obj).dataGrid();
}

(function() {
    Progress = {
        _FILE: "049progress.js"
    };
})();

(function(root, factory) {
    if (typeof exports === "object") {
        factory(exports);
    } else if (typeof define === "function" && define.amd) {
        define([ "exports" ], factory);
    } else {
        factory(root);
    }
})(this, function(exports) {
    var VERSION = "0.1.0";
    function ProgressJs(obj) {
        if (typeof obj.length != "undefined") {
            this._targetElement = obj;
        } else {
            this._targetElement = [ obj ];
        }
        if (typeof window._progressjsId === "undefined") window._progressjsId = 1;
        if (typeof window._progressjsIntervals === "undefined") window._progressjsIntervals = {};
        this._options = {
            theme: "blue",
            overlayMode: false,
            considerTransition: true
        };
    }
    function _startProgress() {
        if (typeof this._onBeforeStartCallback != "undefined") {
            this._onBeforeStartCallback.call(this);
        }
        _createContainer.call(this);
        for (var i = 0, elmsLength = this._targetElement.length; i < elmsLength; i++) {
            _setProgress.call(this, this._targetElement[i]);
        }
    }
    function _setProgress(targetElement) {
        if (targetElement.hasAttribute("data-progressjs")) return;
        var targetElementOffset = _getOffset.call(this, targetElement);
        targetElement.setAttribute("data-progressjs", window._progressjsId);
        var progressElementContainer = document.createElement("div");
        progressElementContainer.className = "progressjs-progress progressjs-theme-" + this._options.theme;
        if (targetElement.tagName.toLowerCase() === "body") {
            progressElementContainer.style.position = "fixed";
        } else {
            progressElementContainer.style.position = "absolute";
        }
        progressElementContainer.setAttribute("data-progressjs", window._progressjsId);
        var progressElement = document.createElement("div");
        progressElement.className = "progressjs-inner";
        var progressPercentElement = document.createElement("div");
        progressPercentElement.className = "progressjs-percent";
        progressPercentElement.innerHTML = "1%";
        progressElement.appendChild(progressPercentElement);
        if (this._options.overlayMode && targetElement.tagName.toLowerCase() === "body") {
            progressElementContainer.style.left = 0;
            progressElementContainer.style.right = 0;
            progressElementContainer.style.top = 0;
            progressElementContainer.style.bottom = 0;
        } else {
            progressElementContainer.style.left = targetElementOffset.left + "px";
            progressElementContainer.style.top = targetElementOffset.top + "px";
            progressElementContainer.style.width = targetElementOffset.width + "px";
            if (this._options.overlayMode) {
                progressElementContainer.style.height = targetElementOffset.height + "px";
            }
        }
        progressElementContainer.appendChild(progressElement);
        var container = document.querySelector(".progressjs-container");
        container.appendChild(progressElementContainer);
        _setPercentFor(targetElement, 1);
        ++window._progressjsId;
    }
    function _setPercent(percent) {
        for (var i = 0, elmsLength = this._targetElement.length; i < elmsLength; i++) {
            _setPercentFor.call(this, this._targetElement[i], percent);
        }
    }
    function _setPercentFor(targetElement, percent) {
        var self = this;
        if (percent >= 100) percent = 100;
        if (targetElement.hasAttribute("data-progressjs")) {
            setTimeout(function() {
                if (typeof self._onProgressCallback != "undefined") {
                    self._onProgressCallback.call(self, targetElement, percent);
                }
                var percentElement = _getPercentElement(targetElement);
                if (percentElement) {
                    percentElement.style.width = toInt(percent) + "%";
                    var percentElement = percentElement.querySelector(".progressjs-percent");
                    var existingPercent = toInt(percentElement.innerHTML.replace("%", ""));
                    (function(percentElement, existingPercent, currentPercent) {
                        var increasement = true;
                        if (existingPercent > currentPercent) {
                            increasement = false;
                        }
                        var intervalIn = 10;
                        function changePercentTimer(percentElement, existingPercent, currentPercent) {
                            var distance = Math.abs(existingPercent - currentPercent);
                            if (distance < 3) {
                                intervalIn = 30;
                            } else if (distance < 20) {
                                intervalIn = 20;
                            } else {
                                intervanIn = 1;
                            }
                            if (existingPercent - currentPercent != 0) {
                                percentElement.innerHTML = (increasement ? ++existingPercent : --existingPercent) + "%";
                                setTimeout(function() {
                                    changePercentTimer(percentElement, existingPercent, currentPercent);
                                }, intervalIn);
                            }
                        }
                        changePercentTimer(percentElement, existingPercent, currentPercent);
                    })(percentElement, existingPercent, toInt(percent));
                }
            }, 50);
        }
    }
    function _getPercentElement(targetElement) {
        var progressjsId = parseInt(targetElement.getAttribute("data-progressjs"));
        return document.querySelector('.progressjs-container > .progressjs-progress[data-progressjs="' + progressjsId + '"] > .progressjs-inner');
    }
    function _autoIncrease(size, millisecond) {
        var self = this;
        var progressjsId = parseInt(this._targetElement[0].getAttribute("data-progressjs"));
        if (typeof window._progressjsIntervals[progressjsId] != "undefined") {
            clearInterval(window._progressjsIntervals[progressjsId]);
        }
        window._progressjsIntervals[progressjsId] = setInterval(function() {
            _increasePercent.call(self, size);
        }, millisecond);
    }
    function _increasePercent(size) {
        for (var i = 0, elmsLength = this._targetElement.length; i < elmsLength; i++) {
            var currentElement = this._targetElement[i];
            if (currentElement.hasAttribute("data-progressjs")) {
                var percentElement = _getPercentElement(currentElement);
                var existingPercent = parseInt(percentElement.style.width.replace("%", ""));
                if (existingPercent) {
                    _setPercentFor.call(this, currentElement, existingPercent + (size || 1));
                }
            }
        }
    }
    function _end() {
        if (typeof this._onBeforeEndCallback != "undefined") {
            if (this._options.considerTransition === true) {
                _getPercentElement(this._targetElement[0]).addEventListener(whichTransitionEvent(), this._onBeforeEndCallback, false);
            } else {
                this._onBeforeEndCallback.call(this);
            }
        }
        var progressjsId = parseInt(this._targetElement[0].getAttribute("data-progressjs"));
        for (var i = 0, elmsLength = this._targetElement.length; i < elmsLength; i++) {
            var currentElement = this._targetElement[i];
            var percentElement = _getPercentElement(currentElement);
            if (!percentElement) return;
            var existingPercent = parseInt(percentElement.style.width.replace("%", ""));
            var timeoutSec = 1;
            if (existingPercent < 100) {
                _setPercentFor.call(this, currentElement, 100);
                timeoutSec = 500;
            }
            (function(percentElement, currentElement) {
                setTimeout(function() {
                    percentElement.parentNode.className += " progressjs-end";
                    setTimeout(function() {
                        if (percentElement.parentNode.parentNode) percentElement.parentNode.parentNode.removeChild(percentElement.parentNode);
                        currentElement.removeAttribute("data-progressjs");
                    }, 1e3);
                }, timeoutSec);
            })(percentElement, currentElement);
        }
        if (window._progressjsIntervals[progressjsId]) {
            try {
                clearInterval(window._progressjsIntervals[progressjsId]);
                window._progressjsIntervals[progressjsId] = null;
                delete window._progressjsIntervals[progressjsId];
            } catch (ex) {}
        }
    }
    function _createContainer() {
        if (!document.querySelector(".progressjs-container")) {
            var containerElement = document.createElement("div");
            containerElement.className = "progressjs-container";
            document.body.appendChild(containerElement);
        }
    }
    function _getOffset(element) {
        var elementPosition = {};
        if (element.tagName.toLowerCase() === "body") {
            elementPosition.width = element.clientWidth;
            elementPosition.height = element.clientHeight;
        } else {
            elementPosition.width = element.offsetWidth;
            elementPosition.height = element.offsetHeight;
        }
        var _x = 0;
        var _y = 0;
        while (element && !isNaN(element.offsetLeft) && !isNaN(element.offsetTop)) {
            _x += element.offsetLeft;
            _y += element.offsetTop;
            element = element.offsetParent;
        }
        elementPosition.top = _y;
        elementPosition.left = _x;
        return elementPosition;
    }
    function _mergeOptions(obj1, obj2) {
        var obj3 = {};
        for (var attrname in obj1) {
            obj3[attrname] = obj1[attrname];
        }
        for (var attrname in obj2) {
            obj3[attrname] = obj2[attrname];
        }
        return obj3;
    }
    var progressJs = function(targetElm) {
        if (typeof targetElm === "object") {
            return new ProgressJs(targetElm);
        } else if (typeof targetElm === "string") {
            var targetElement = document.querySelectorAll(targetElm);
            if (targetElement) {
                return new ProgressJs(targetElement);
            } else {
                throw new Error("There is no element with given selector.");
            }
        } else {
            return new ProgressJs(document.body);
        }
    };
    function whichTransitionEvent() {
        var t;
        var el = document.createElement("fakeelement");
        var transitions = {
            transition: "transitionend",
            OTransition: "oTransitionEnd",
            MozTransition: "transitionend",
            WebkitTransition: "webkitTransitionEnd"
        };
        for (t in transitions) {
            if (el.style[t] !== undefined) {
                return transitions[t];
            }
        }
    }
    progressJs.version = VERSION;
    progressJs.fn = ProgressJs.prototype = {
        clone: function() {
            return new ProgressJs(this);
        },
        setOption: function(option, value) {
            this._options[option] = value;
            return this;
        },
        setOptions: function(options) {
            this._options = _mergeOptions(this._options, options);
            return this;
        },
        start: function() {
            _startProgress.call(this);
            return this;
        },
        set: function(percent) {
            _setPercent.call(this, percent);
            return this;
        },
        increase: function(size) {
            _increasePercent.call(this, size);
            return this;
        },
        autoIncrease: function(size, millisecond) {
            _autoIncrease.call(this, size, millisecond);
            return this;
        },
        end: function() {
            _end.call(this);
            return this;
        },
        onbeforeend: function(providedCallback) {
            if (typeof providedCallback === "function") {
                this._onBeforeEndCallback = providedCallback;
            } else {
                throw new Error("Provided callback for onbeforeend was not a function");
            }
            return this;
        },
        onbeforestart: function(providedCallback) {
            if (typeof providedCallback === "function") {
                this._onBeforeStartCallback = providedCallback;
            } else {
                throw new Error("Provided callback for onbeforestart was not a function");
            }
            return this;
        },
        onprogress: function(providedCallback) {
            if (typeof providedCallback === "function") {
                this._onProgressCallback = providedCallback;
            } else {
                throw new Error("Provided callback for onprogress was not a function");
            }
            return this;
        }
    };
    exports.progressJs = progressJs;
    return progressJs;
});

if (typeof UtilLibRsis === "undefined") {
    UtilLibRsis = {};
}

(function() {
    UtilLibRsis._FILE = "utilLibRis.js";
})();